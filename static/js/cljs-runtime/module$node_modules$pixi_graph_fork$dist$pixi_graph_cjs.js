shadow$provide.module$node_modules$pixi_graph_fork$dist$pixi_graph_cjs=function(global,require,module,exports){function _interopDefaultLegacy(e){return e&&"object"===typeof e&&"default"in e?e:{"default":e}}function __extends(d,b){function __(){this.constructor=d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function resolveStyleDefinition(styleDefinition,
attributes){return styleDefinition instanceof Function?styleDefinition(attributes):"object"===typeof styleDefinition&&null!==styleDefinition?Object.fromEntries(Object.entries(styleDefinition).map(function(_a){return[_a[0],resolveStyleDefinition(_a[1],attributes)]})):styleDefinition}function resolveStyleDefinitions(styleDefinitions,attributes){styleDefinitions=styleDefinitions.filter(function(x){return!!x}).map(function(styleDefinition){return resolveStyleDefinition(styleDefinition,attributes)});return deepmerge__default["default"].all(styleDefinitions)}
function colorToPixi(color){var rgbaColor=rgba__default["default"](color);if(!rgbaColor)throw Error("Invalid color "+color);return[utils.rgb2hex([rgbaColor[0]/255,rgbaColor[1]/255,rgbaColor[2]/255]),rgbaColor[3]]}function createNode(nodeGfx){nodeGfx.hitArea=new math.Circle(0,0);var nodeCircle=new sprite.Sprite;nodeCircle.name="NODE_CIRCLE";nodeCircle.anchor.set(.5);nodeGfx.addChild(nodeCircle);nodeCircle=new sprite.Sprite;nodeCircle.name="NODE_CIRCLE_BORDER";nodeCircle.anchor.set(.5);nodeGfx.addChild(nodeCircle)}
function updateNodeStyle(nodeGfx,nodeStyle,textureCache){var size=nodeStyle.size,nodeOuterSize=size+nodeStyle.border.width;var _a=["NODE_CIRCLE",size].join("::");_a=textureCache.get(_a,function(){var graphics=new graphicsSmooth.SmoothGraphics;graphics.beginFill(16777215,1,!0);graphics.drawCircle(size,size,size);return graphics});var nodeCircleBorderTextureKey=["NODE_CIRCLE_BORDER",size,nodeStyle.border.width].join("::");textureCache=textureCache.get(nodeCircleBorderTextureKey,function(){var graphics=
new graphicsSmooth.SmoothGraphics;graphics.lineStyle(nodeStyle.border.width,16777215);graphics.drawCircle(nodeOuterSize,nodeOuterSize,size);return graphics});nodeGfx.hitArea.radius=nodeOuterSize;nodeCircleBorderTextureKey=nodeGfx.getChildByName("NODE_CIRCLE");nodeCircleBorderTextureKey.texture=_a;_a=colorToPixi(nodeStyle.color);nodeCircleBorderTextureKey.tint=_a[0];nodeCircleBorderTextureKey.alpha=_a[1];nodeGfx=nodeGfx.getChildByName("NODE_CIRCLE_BORDER");nodeGfx.texture=textureCache;_a=colorToPixi(nodeStyle.border.color);
nodeGfx.tint=_a[0];nodeGfx.alpha=_a[1]}function createNodeLabel(nodeLabelGfx){var nodeLabelBackground=new sprite.Sprite(core.Texture.WHITE);nodeLabelBackground.name="NODE_LABEL_BACKGROUND";nodeLabelBackground.anchor.set(.5);nodeLabelGfx.addChild(nodeLabelBackground);nodeLabelBackground=new sprite.Sprite;nodeLabelBackground.name="NODE_LABEL_TEXT";nodeLabelBackground.anchor.set(.5);nodeLabelGfx.addChild(nodeLabelBackground)}function updateNodeLabelStyle(nodeLabelGfx,nodeStyle,textureCache){var _b=nodeStyle.size+
nodeStyle.border.width;var _a=["NODE_LABEL_TEXT",nodeStyle.label.fontFamily,nodeStyle.label.fontSize,nodeStyle.label.content].join("::");textureCache=textureCache.get(_a,function(){var type=nodeStyle.label.type,content=nodeStyle.label.content,JSCompiler_object_inline_fontFamily_4522=nodeStyle.label.fontFamily,JSCompiler_object_inline_fontSize_4523=nodeStyle.label.fontSize;if(type===exports.TextType.TEXT)type=new text.Text(content,{fontFamily:JSCompiler_object_inline_fontFamily_4522,fontSize:JSCompiler_object_inline_fontSize_4523,
fill:16777215,align:"center",lineJoin:"round",wordWrap:!0,wordWrapWidth:240});else if(type===exports.TextType.BITMAP_TEXT)type=new textBitmap.BitmapText(content,{fontName:JSCompiler_object_inline_fontFamily_4522,fontSize:JSCompiler_object_inline_fontSize_4523});else throw Error("Invalid state");type.roundPixels=!0;return type});var nodeLabelBackground=nodeLabelGfx.getChildByName("NODE_LABEL_BACKGROUND");nodeLabelBackground.y=_b+(textureCache.height+2*nodeStyle.label.padding)/2;nodeLabelBackground.width=
textureCache.width+2*nodeStyle.label.padding;nodeLabelBackground.height=textureCache.height+2*nodeStyle.label.padding;_a=colorToPixi(nodeStyle.label.backgroundColor);nodeLabelBackground.tint=_a[0];nodeLabelBackground.alpha=_a[1];nodeLabelGfx=nodeLabelGfx.getChildByName("NODE_LABEL_TEXT");nodeLabelGfx.texture=textureCache;nodeLabelGfx.y=_b+(textureCache.height+2*nodeStyle.label.padding)/2;_b=colorToPixi(nodeStyle.label.color);nodeLabelGfx.tint=_b[0];nodeLabelGfx.alpha=_b[1]}function createEdge(edgeGfx){var edgeLine=
new sprite.Sprite(core.Texture.WHITE);edgeLine.name="EDGE_LINE";edgeLine.anchor.set(.5);edgeGfx.addChild(edgeLine)}function batch(f,col,timeout,offset,batchNumber,finish){col.slice(offset,offset+batchNumber).forEach(function(item){return f.apply(void 0,item)});var newOffset=offset+batchNumber;newOffset<col.length?setTimeout(function(){batch(f,col,timeout,newOffset,batchNumber,finish)},timeout):finish&&finish()}Object.defineProperty(exports,"__esModule",{value:!0});var text=require("module$node_modules$$pixi$text$dist$cjs$text"),
textBitmap=require("module$node_modules$$pixi$text_bitmap$dist$cjs$text_bitmap"),app=require("module$node_modules$$pixi$app$dist$cjs$app");global=require("module$node_modules$$pixi$ticker$dist$cjs$ticker");module=require("module$node_modules$$pixi$loaders$dist$cjs$loaders");var core=require("module$node_modules$$pixi$core$dist$cjs$core"),interaction=require("module$node_modules$$pixi$interaction$dist$cjs$interaction"),display=require("module$node_modules$$pixi$display$dist$cjs$display"),math=require("module$node_modules$$pixi$math$dist$cjs$math"),
pixiViewport=require("module$node_modules$pixi_viewport$dist$cjs$viewport"),cull=require("module$node_modules$$pixi_essentials$cull$lib$cull"),tinyTypedEmitter=require("module$node_modules$tiny_typed_emitter$lib$index"),deepmerge=require("module$node_modules$deepmerge$dist$cjs"),constants=require("module$node_modules$$pixi$constants$dist$cjs$constants"),sprite=require("module$node_modules$$pixi$sprite$dist$cjs$sprite"),graphicsSmooth=require("module$node_modules$$pixi$graphics_smooth$dist$pixi_graphics_smooth");
require("module$node_modules$$pixi$mixin_get_child_by_name$dist$cjs$mixin_get_child_by_name");var utils=require("module$node_modules$$pixi$utils$dist$cjs$utils");require=require("module$node_modules$color_rgba$index");var deepmerge__default=_interopDefaultLegacy(deepmerge),rgba__default=_interopDefaultLegacy(require);exports.TextType=void 0;(function(TextType){TextType.TEXT="TEXT";TextType.BITMAP_TEXT="BITMAP_TEXT"})(exports.TextType||(exports.TextType={}));var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)},TextureCache$jscomp$0=function(){function TextureCache(renderer){this.textures=new Map;this.renderer=renderer}TextureCache.prototype.get=function(key,defaultCallback){var texture=this.textures.get(key);texture||(defaultCallback=defaultCallback(),texture=defaultCallback.getLocalBounds(void 0,
!0),texture=new math.Rectangle(Math.floor(texture.x),Math.floor(texture.y),Math.ceil(texture.width),Math.ceil(texture.height)),texture=this.renderer.generateTexture(defaultCallback,constants.SCALE_MODES.LINEAR,this.renderer.resolution,texture),this.textures.set(key,texture));return texture};TextureCache.prototype.delete=function(key){var texture=this.textures.get(key);texture&&(texture.destroy(),this.textures.delete(key))};TextureCache.prototype.clear=function(){var _this=this;Array.from(this.textures.keys()).forEach(function(key){_this.delete(key)})};
TextureCache.prototype.destroy=function(){this.clear()};return TextureCache}(),PixiNode=function(_super){function PixiNode(){var _this=_super.call(this)||this;_this.hovered=!1;_this.nodeGfx=_this.createNode();_this.nodeLabelGfx=_this.createNodeLabel();_this.nodePlaceholderGfx=new display.Container;_this.nodeLabelPlaceholderGfx=new display.Container;return _this}__extends(PixiNode,_super);PixiNode.prototype.createNode=function(){var _this=this,nodeGfx=new display.Container;nodeGfx.interactive=!0;nodeGfx.buttonMode=
!0;nodeGfx.on("mousemove",function(event){return _this.emit("mousemove",event.data.originalEvent)});nodeGfx.on("mouseover",function(event){return _this.emit("mouseover",event.data.originalEvent)});nodeGfx.on("mouseout",function(event){return _this.emit("mouseout",event.data.originalEvent)});nodeGfx.on("mousedown",function(event){return _this.emit("mousedown",event.data.originalEvent)});nodeGfx.on("mouseup",function(event){return _this.emit("mouseup",event.data.originalEvent)});createNode(nodeGfx);
return nodeGfx};PixiNode.prototype.createNodeLabel=function(){var _this=this,nodeLabelGfx=new display.Container;nodeLabelGfx.interactive=!0;nodeLabelGfx.buttonMode=!0;nodeLabelGfx.on("mousemove",function(event){return _this.emit("mousemove",event.data.originalEvent)});nodeLabelGfx.on("mouseover",function(event){return _this.emit("mouseover",event.data.originalEvent)});nodeLabelGfx.on("mouseout",function(event){return _this.emit("mouseout",event.data.originalEvent)});nodeLabelGfx.on("mousedown",function(event){return _this.emit("mousedown",
event.data.originalEvent)});nodeLabelGfx.on("mouseup",function(event){return _this.emit("mouseup",event.data.originalEvent)});createNodeLabel(nodeLabelGfx);return nodeLabelGfx};PixiNode.prototype.updatePosition=function(position){this.nodeGfx&&this.nodeGfx.position.copyFrom(position);this.nodeLabelGfx&&this.nodeLabelGfx.position.copyFrom(position)};PixiNode.prototype.updateStyle=function(nodeStyle,textureCache){updateNodeStyle(this.nodeGfx,nodeStyle,textureCache);updateNodeLabelStyle(this.nodeLabelGfx,
nodeStyle,textureCache)};PixiNode.prototype.updateNodeStyle=function(nodeStyle,textureCache){updateNodeStyle(this.nodeGfx,nodeStyle,textureCache)};PixiNode.prototype.updateNodeLabelStyle=function(nodeStyle,textureCache){updateNodeLabelStyle(this.nodeLabelGfx,nodeStyle,textureCache)};PixiNode.prototype.updateVisibility=function(zoomStep){var nodeCircleBorder=this.nodeGfx.getChildByName("NODE_CIRCLE_BORDER");nodeCircleBorder.visible=nodeCircleBorder.visible&&1<=zoomStep;nodeCircleBorder=this.nodeLabelGfx;
var nodeLabelBackground=nodeCircleBorder.getChildByName("NODE_LABEL_BACKGROUND");nodeLabelBackground.visible=nodeLabelBackground.visible&&3<=zoomStep;nodeCircleBorder=nodeCircleBorder.getChildByName("NODE_LABEL_TEXT");nodeCircleBorder.visible=nodeCircleBorder.visible&&3<=zoomStep};return PixiNode}(tinyTypedEmitter.TypedEmitter),PixiEdge=function(_super){function PixiEdge(){var _this=_super.call(this)||this;_this.hovered=!1;_this.edgeGfx=_this.createEdge();_this.edgePlaceholderGfx=new display.Container;
return _this}__extends(PixiEdge,_super);PixiEdge.prototype.createEdge=function(){var _this=this,edgeGfx=new display.Container;edgeGfx.interactive=!0;edgeGfx.buttonMode=!0;edgeGfx.on("mousemove",function(event){return _this.emit("mousemove",event.data.originalEvent)});edgeGfx.on("mouseover",function(event){return _this.emit("mouseover",event.data.originalEvent)});edgeGfx.on("mouseout",function(event){return _this.emit("mouseout",event.data.originalEvent)});edgeGfx.on("mousedown",function(event){return _this.emit("mousedown",
event.data.originalEvent)});edgeGfx.on("mouseup",function(event){return _this.emit("mouseup",event.data.originalEvent)});createEdge(edgeGfx);return edgeGfx};PixiEdge.prototype.updatePosition=function(sourceNodePosition,targetNodePosition){var rotation=-Math.atan2(targetNodePosition.x-sourceNodePosition.x,targetNodePosition.y-sourceNodePosition.y),length=Math.hypot(targetNodePosition.x-sourceNodePosition.x,targetNodePosition.y-sourceNodePosition.y);this.edgeGfx.position.copyFrom({x:(sourceNodePosition.x+
targetNodePosition.x)/2,y:(sourceNodePosition.y+targetNodePosition.y)/2});this.edgeGfx.rotation=rotation;this.edgeGfx.height=length};PixiEdge.prototype.updateStyle=function(edgeStyle,textureCache){textureCache=this.edgeGfx.getChildByName("EDGE_LINE");textureCache.width=edgeStyle.width;edgeStyle=colorToPixi(edgeStyle.color);textureCache.tint=edgeStyle[0];textureCache.alpha=edgeStyle[1]};PixiEdge.prototype.updateVisibility=function(zoomStep){var edgeLine=this.edgeGfx.getChildByName("EDGE_LINE");edgeLine.visible=
edgeLine.visible&&1<=zoomStep};return PixiEdge}(tinyTypedEmitter.TypedEmitter);app.Application.registerPlugin(global.TickerPlugin);app.Application.registerPlugin(module.AppLoaderPlugin);module.Loader.registerPlugin(textBitmap.BitmapFontLoader);core.Renderer.registerPlugin("batch",core.BatchRenderer);core.Renderer.registerPlugin("interaction",interaction.InteractionManager);var JSCompiler_object_inline_node_4524={size:15,color:"#000000",border:{width:2,color:"#ffffff"},label:{type:exports.TextType.TEXT,
fontFamily:"Arial",fontSize:12,content:"",color:"#333333",backgroundColor:"rgba(0, 0, 0, 0)",padding:4}},JSCompiler_object_inline_edge_4525={width:1,color:"#cccccc"};require=function(_super){function PixiGraph(options){var _this=_super.call(this)||this;_this.nodeKeyToNodeObject=new Map;_this.edgeKeyToEdgeObject=new Map;_this.mousedownNodeKey=null;_this.mousedownEdgeKey=null;_this.onGraphNodeAddedBound=_this.onGraphNodeAdded.bind(_this);_this.onGraphEdgeAddedBound=_this.onGraphEdgeAdded.bind(_this);
_this.onGraphNodeDroppedBound=_this.onGraphNodeDropped.bind(_this);_this.onGraphEdgeDroppedBound=_this.onGraphEdgeDropped.bind(_this);_this.onGraphClearedBound=_this.onGraphCleared.bind(_this);_this.onGraphEdgesClearedBound=_this.onGraphEdgesCleared.bind(_this);_this.onGraphNodeAttributesUpdatedBound=_this.onGraphNodeAttributesUpdated.bind(_this);_this.onGraphEdgeAttributesUpdatedBound=_this.onGraphEdgeAttributesUpdated.bind(_this);_this.onGraphEachNodeAttributesUpdatedBound=_this.onGraphEachNodeAttributesUpdated.bind(_this);
_this.onGraphEachEdgeAttributesUpdatedBound=_this.onGraphEachEdgeAttributesUpdated.bind(_this);_this.onDocumentMouseMoveBound=_this.onDocumentMouseMove.bind(_this);_this.onDocumentMouseUpBound=_this.onDocumentMouseUp.bind(_this);_this.container=options.container;_this.graph=options.graph;_this.style=options.style;_this.hoverStyle=options.hoverStyle;_this.resources=options.resources;if(!(_this.container instanceof HTMLElement))throw Error("container should be a HTMLElement");graphicsSmooth.settings.LINE_SCALE_MODE=
graphicsSmooth.LINE_SCALE_MODE.NORMAL;_this.app=new app.Application({resizeTo:_this.container,resolution:2,transparent:!0,antialias:!0,autoDensity:!0});_this.container.appendChild(_this.app.view);_this.app.renderer.plugins.interaction.moveWhenInside=!0;_this.app.view.addEventListener("wheel",function(event){event.preventDefault()});_this.textureCache=new TextureCache$jscomp$0(_this.app.renderer);_this.viewport=(new pixiViewport.Viewport({screenWidth:_this.container.clientWidth,screenHeight:_this.container.clientHeight,
interaction:_this.app.renderer.plugins.interaction})).drag().pinch().wheel().decelerate().clampZoom({minScale:.02,maxScale:2});_this.app.stage.addChild(_this.viewport);_this.edgeLayer=new display.Container;_this.frontEdgeLayer=new display.Container;_this.nodeLayer=new display.Container;_this.nodeLabelLayer=new display.Container;_this.frontNodeLayer=new display.Container;_this.frontNodeLabelLayer=new display.Container;_this.viewport.addChild(_this.edgeLayer);_this.viewport.addChild(_this.frontEdgeLayer);
_this.viewport.addChild(_this.nodeLayer);_this.viewport.addChild(_this.nodeLabelLayer);_this.viewport.addChild(_this.frontNodeLayer);_this.viewport.addChild(_this.frontNodeLabelLayer);_this.resizeObserver=new ResizeObserver(function(){_this.app.resize();_this.viewport.resize(_this.container.clientWidth,_this.container.clientHeight);_this.updateGraphVisibility()});_this.resources&&_this.app.loader.add(_this.resources);_this.app.loader.load(function(){_this.viewport.on("frame-end",function(){_this.viewport.dirty&&
(_this.updateGraphVisibility(),_this.viewport.dirty=!1)});_this.resizeObserver.observe(_this.container);_this.graph.on("nodeAdded",_this.onGraphNodeAddedBound);_this.graph.on("edgeAdded",_this.onGraphEdgeAddedBound);_this.graph.on("nodeDropped",_this.onGraphNodeDroppedBound);_this.graph.on("edgeDropped",_this.onGraphEdgeDroppedBound);_this.graph.on("cleared",_this.onGraphClearedBound);_this.graph.on("edgesCleared",_this.onGraphEdgesClearedBound);_this.graph.on("nodeAttributesUpdated",_this.onGraphNodeAttributesUpdatedBound);
_this.graph.on("edgeAttributesUpdated",_this.onGraphEdgeAttributesUpdatedBound);_this.graph.on("eachNodeAttributesUpdated",_this.onGraphEachNodeAttributesUpdatedBound);_this.graph.on("eachEdgeAttributesUpdated",_this.onGraphEachEdgeAttributesUpdatedBound);_this.createGraph(_this.resetView.bind(_this));_this.resetView()});return _this}__extends(PixiGraph,_super);PixiGraph.prototype.onGraphNodeAdded=function(data){this.createNode(data.key,data.attributes)};PixiGraph.prototype.onGraphEdgeAdded=function(data){var edgeKey=
data.key,edgeAttributes=data.attributes,sourceNodeKey=data.source;data=data.target;var sourceNodeAttributes=this.graph.getNodeAttributes(sourceNodeKey),targetNodeAttributes=this.graph.getNodeAttributes(data);this.createEdge(edgeKey,edgeAttributes,sourceNodeKey,data,sourceNodeAttributes,targetNodeAttributes)};PixiGraph.prototype.onGraphNodeDropped=function(data){this.dropNode(data.key)};PixiGraph.prototype.onGraphEdgeDropped=function(data){this.dropEdge(data.key)};PixiGraph.prototype.onGraphCleared=
function(){Array.from(this.edgeKeyToEdgeObject.keys()).forEach(this.dropEdge.bind(this));Array.from(this.nodeKeyToNodeObject.keys()).forEach(this.dropNode.bind(this))};PixiGraph.prototype.onGraphEdgesCleared=function(){Array.from(this.edgeKeyToEdgeObject.keys()).forEach(this.dropEdge.bind(this))};PixiGraph.prototype.onGraphNodeAttributesUpdated=function(data){this.updateNodeStyleByKey(data.key)};PixiGraph.prototype.onGraphEdgeAttributesUpdated=function(data){this.updateEdgeStyleByKey(data.key)};PixiGraph.prototype.onGraphEachNodeAttributesUpdated=
function(){this.graph.forEachNode(this.updateNodeStyle.bind(this))};PixiGraph.prototype.onGraphEachEdgeAttributesUpdated=function(){this.graph.forEachEdge(this.updateEdgeStyle.bind(this))};PixiGraph.prototype.hoverNode=function(nodeKey){var node=this.nodeKeyToNodeObject.get(nodeKey);node.hovered||(node.hovered=!0,this.updateNodeStyleByKey(nodeKey),nodeKey=this.nodeLayer.getChildIndex(node.nodeGfx),this.nodeLayer.removeChildAt(nodeKey),this.nodeLabelLayer.removeChildAt(nodeKey),this.frontNodeLayer.removeChildAt(nodeKey),
this.frontNodeLabelLayer.removeChildAt(nodeKey),this.nodeLayer.addChild(node.nodePlaceholderGfx),this.nodeLabelLayer.addChild(node.nodeLabelPlaceholderGfx),this.frontNodeLayer.addChild(node.nodeGfx),this.frontNodeLabelLayer.addChild(node.nodeLabelGfx))};PixiGraph.prototype.unhoverNode=function(nodeKey){var node=this.nodeKeyToNodeObject.get(nodeKey);node.hovered&&(node.hovered=!1,this.updateNodeStyleByKey(nodeKey),nodeKey=this.frontNodeLayer.getChildIndex(node.nodeGfx),this.nodeLayer.removeChildAt(nodeKey),
this.nodeLabelLayer.removeChildAt(nodeKey),this.frontNodeLayer.removeChildAt(nodeKey),this.frontNodeLabelLayer.removeChildAt(nodeKey),this.nodeLayer.addChild(node.nodeGfx),this.nodeLabelLayer.addChild(node.nodeLabelGfx),this.frontNodeLayer.addChild(node.nodePlaceholderGfx),this.frontNodeLabelLayer.addChild(node.nodeLabelPlaceholderGfx))};PixiGraph.prototype.hoverEdge=function(edgeKey){var edge=this.edgeKeyToEdgeObject.get(edgeKey);edge.hovered||(edge.hovered=!0,this.updateEdgeStyleByKey(edgeKey),
edgeKey=this.edgeLayer.getChildIndex(edge.edgeGfx),this.edgeLayer.removeChildAt(edgeKey),this.frontEdgeLayer.removeChildAt(edgeKey),this.edgeLayer.addChild(edge.edgePlaceholderGfx),this.frontEdgeLayer.addChild(edge.edgeGfx))};PixiGraph.prototype.unhoverEdge=function(edgeKey){var edge=this.edgeKeyToEdgeObject.get(edgeKey);edge.hovered&&(edge.hovered=!1,this.updateEdgeStyleByKey(edgeKey),edgeKey=this.frontEdgeLayer.getChildIndex(edge.edgeGfx),this.edgeLayer.removeChildAt(edgeKey),this.frontEdgeLayer.removeChildAt(edgeKey),
this.edgeLayer.addChild(edge.edgeGfx),this.frontEdgeLayer.addChild(edge.edgePlaceholderGfx))};PixiGraph.prototype.moveNode=function(nodeKey,point){this.graph.setNodeAttribute(nodeKey,"x",point.x);this.graph.setNodeAttribute(nodeKey,"y",point.y);this.updateNodeStyleByKey(nodeKey);this.graph.edges(nodeKey).forEach(this.updateEdgeStyleByKey.bind(this))};PixiGraph.prototype.enableNodeDragging=function(){this.viewport.pause=!0;document.addEventListener("mousemove",this.onDocumentMouseMoveBound);document.addEventListener("mouseup",
this.onDocumentMouseUpBound,{once:!0})};PixiGraph.prototype.onDocumentMouseMove=function(event){event=new math.Point(event.offsetX,event.offsetY);event=this.viewport.toWorld(event);this.mousedownNodeKey&&this.moveNode(this.mousedownNodeKey,event)};PixiGraph.prototype.onDocumentMouseUp=function(){this.viewport.pause=!1;document.removeEventListener("mousemove",this.onDocumentMouseMoveBound);this.mousedownEdgeKey=this.mousedownNodeKey=null};PixiGraph.prototype.createGraphAux=function(f,graph){var nodes=
Array.from(graph.nodeEntries());batch(this.createNode.bind(this),nodes,20,0,100,f);graph=Array.from(graph.edgeEntries());batch(this.createEdge.bind(this),graph,20,0,200,f)};PixiGraph.prototype.createGraph=function(f){this.createGraphAux(f,this.graph)};PixiGraph.prototype.createGraphWithGraph=function(graph){this.createGraphAux(this.resetView.bind(this),graph);this.resetView()};PixiGraph.prototype.createNode=function(nodeKey,nodeAttributes){var _this=this,node=new PixiNode;node.on("mousemove",function(event){_this.emit("nodeMousemove",
event,nodeKey)});node.on("mouseover",function(event){_this.mousedownNodeKey||_this.hoverNode(nodeKey);_this.emit("nodeMouseover",event,nodeKey)});node.on("mouseout",function(event){_this.mousedownNodeKey||_this.unhoverNode(nodeKey);_this.emit("nodeMouseout",event,nodeKey)});node.on("mousedown",function(event){_this.mousedownNodeKey=nodeKey;_this.enableNodeDragging();_this.emit("nodeMousedown",event,nodeKey)});node.on("mouseup",function(event){_this.emit("nodeMouseup",event,nodeKey);_this.mousedownNodeKey===
nodeKey&&_this.emit("nodeClick",event,nodeKey)});this.nodeLayer.addChild(node.nodeGfx);this.nodeLabelLayer.addChild(node.nodeLabelGfx);this.frontNodeLayer.addChild(node.nodePlaceholderGfx);this.frontNodeLabelLayer.addChild(node.nodeLabelPlaceholderGfx);this.nodeKeyToNodeObject.set(nodeKey,node);this.updateNodeStyle(nodeKey,nodeAttributes)};PixiGraph.prototype.createEdge=function(edgeKey,edgeAttributes,sourceNodeKey,targetNodeKey,sourceNodeAttributes,targetNodeAttributes){var _this=this,edge=new PixiEdge;
edge.on("mousemove",function(event){_this.emit("edgeMousemove",event,edgeKey)});edge.on("mouseover",function(event){_this.hoverEdge(edgeKey);_this.emit("edgeMouseover",event,edgeKey)});edge.on("mouseout",function(event){_this.unhoverEdge(edgeKey);_this.emit("edgeMouseout",event,edgeKey)});edge.on("mousedown",function(event){_this.mousedownEdgeKey=edgeKey;_this.emit("edgeMousedown",event,edgeKey)});edge.on("mouseup",function(event){_this.emit("edgeMouseup",event,edgeKey);_this.mousedownEdgeKey===edgeKey&&
_this.emit("edgeClick",event,edgeKey)});this.edgeLayer.addChild(edge.edgeGfx);this.frontEdgeLayer.addChild(edge.edgePlaceholderGfx);this.edgeKeyToEdgeObject.set(edgeKey,edge);this.updateEdgeStyle(edgeKey,edgeAttributes,sourceNodeKey,targetNodeKey,sourceNodeAttributes,targetNodeAttributes)};PixiGraph.prototype.dropNode=function(nodeKey){var node=this.nodeKeyToNodeObject.get(nodeKey);this.nodeLayer.removeChild(node.nodeGfx);this.nodeLabelLayer.removeChild(node.nodeLabelGfx);this.frontNodeLayer.removeChild(node.nodePlaceholderGfx);
this.frontNodeLabelLayer.removeChild(node.nodeLabelPlaceholderGfx);this.nodeKeyToNodeObject.delete(nodeKey)};PixiGraph.prototype.dropEdge=function(edgeKey){var edge=this.edgeKeyToEdgeObject.get(edgeKey);this.edgeLayer.removeChild(edge.edgeGfx);this.frontEdgeLayer.removeChild(edge.edgePlaceholderGfx);this.edgeKeyToEdgeObject.delete(edgeKey)};PixiGraph.prototype.updateNodeStyleByKey=function(nodeKey){var nodeAttributes=this.graph.getNodeAttributes(nodeKey);this.updateNodeStyle(nodeKey,nodeAttributes)};
PixiGraph.prototype.updateNodeStyle=function(nodeKey,nodeAttributes){nodeKey=this.nodeKeyToNodeObject.get(nodeKey);nodeKey.updatePosition({x:nodeAttributes.x,y:nodeAttributes.y});nodeAttributes=resolveStyleDefinitions([JSCompiler_object_inline_node_4524,this.style.node,nodeKey.hovered?this.hoverStyle.node:void 0],nodeAttributes);nodeKey.updateStyle(nodeAttributes,this.textureCache)};PixiGraph.prototype.resetNodeStyle=function(nodeKey,nodeStyle){this.nodeKeyToNodeObject.get(nodeKey).updateNodeStyle(nodeStyle,
this.textureCache)};PixiGraph.prototype.resetNodeLabelStyle=function(nodeKey,nodeStyle){this.nodeKeyToNodeObject.get(nodeKey).updateNodeLabelStyle(nodeStyle,this.textureCache)};PixiGraph.prototype.updateEdgeStyleByKey=function(edgeKey){var edgeAttributes=this.graph.getEdgeAttributes(edgeKey),sourceNodeKey=this.graph.source(edgeKey),targetNodeKey=this.graph.target(edgeKey),sourceNodeAttributes=this.graph.getNodeAttributes(sourceNodeKey),targetNodeAttributes=this.graph.getNodeAttributes(targetNodeKey);
this.updateEdgeStyle(edgeKey,edgeAttributes,sourceNodeKey,targetNodeKey,sourceNodeAttributes,targetNodeAttributes)};PixiGraph.prototype.updateEdgeStyle=function(edgeKey,edgeAttributes,_sourceNodeKey,_targetNodeKey,sourceNodeAttributes,targetNodeAttributes){edgeKey=this.edgeKeyToEdgeObject.get(edgeKey);edgeKey.updatePosition({x:sourceNodeAttributes.x,y:sourceNodeAttributes.y},{x:targetNodeAttributes.x,y:targetNodeAttributes.y});edgeAttributes=resolveStyleDefinitions([JSCompiler_object_inline_edge_4525,
this.style.edge,edgeKey.hovered?this.hoverStyle.edge:void 0],edgeAttributes);edgeKey.updateStyle(edgeAttributes,this.textureCache)};PixiGraph.prototype.resetEdgeStyle=function(edgeKey,edgeStyle){this.edgeKeyToEdgeObject.get(edgeKey).updateStyle(edgeStyle,this.textureCache)};PixiGraph.prototype.updateGraphVisibility=function(){var _this=this,cull$1=new cull.Cull;cull$1.addAll(this.viewport.children.map(function(layer){return layer.children}).flat());cull$1.cull(this.app.renderer.screen);if(this.viewport){var zoom_1=
this.viewport.scale.x,zoomStep_1=[.1,.2,.4,Infinity].findIndex(function(zoomStep){return zoom_1<=zoomStep});this.graph.forEachNode(function(nodeKey){(nodeKey=_this.nodeKeyToNodeObject.get(nodeKey))&&nodeKey.updateVisibility(zoomStep_1)});this.graph.forEachEdge(function(edgeKey){(edgeKey=_this.edgeKeyToEdgeObject.get(edgeKey))&&edgeKey.updateVisibility(zoomStep_1)})}};PixiGraph.prototype.destroy=function(){this.graph.off("nodeAdded",this.onGraphNodeAddedBound);this.graph.off("edgeAdded",this.onGraphEdgeAddedBound);
this.graph.off("nodeDropped",this.onGraphNodeDroppedBound);this.graph.off("edgeDropped",this.onGraphEdgeDroppedBound);this.graph.off("cleared",this.onGraphClearedBound);this.graph.off("edgesCleared",this.onGraphEdgesClearedBound);this.graph.off("nodeAttributesUpdated",this.onGraphNodeAttributesUpdatedBound);this.graph.off("edgeAttributesUpdated",this.onGraphEdgeAttributesUpdatedBound);this.graph.off("eachNodeAttributesUpdated",this.onGraphEachNodeAttributesUpdatedBound);this.graph.off("eachEdgeAttributesUpdated",
this.onGraphEachEdgeAttributesUpdatedBound);this.resizeObserver&&this.resizeObserver.disconnect();this.resizeObserver=void 0;this.textureCache&&this.textureCache.destroy();this.textureCache=void 0;this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0});this.app=void 0};Object.defineProperty(PixiGraph.prototype,"zoomStep",{get:function(){return Math.min(this.viewport.worldWidth,this.viewport.worldHeight)/10},enumerable:!1,configurable:!0});PixiGraph.prototype.zoomIn=function(){this.viewport.zoom(-this.zoomStep,
!0)};PixiGraph.prototype.zoomOut=function(){this.viewport.zoom(this.zoomStep,!0)};PixiGraph.prototype.resetView=function(){var _this=this,nodesX=this.graph.nodes().map(function(nodeKey){return _this.graph.getNodeAttribute(nodeKey,"x")}),nodesY=this.graph.nodes().map(function(nodeKey){return _this.graph.getNodeAttribute(nodeKey,"y")}),minX=Math.min.apply(Math,nodesX),maxX=Math.max.apply(Math,nodesX);nodesX=Math.min.apply(Math,nodesY);var maxY=Math.max.apply(Math,nodesY);nodesY=Math.abs(maxX-minX);
maxX=Math.abs(maxY-nodesX);minX=new math.Point(minX+nodesY/2,nodesX+maxX/2);this.viewport.resize(this.container.clientWidth,this.container.clientHeight,nodesY+200,maxX+200);this.viewport.setZoom(1);this.viewport.center=minX;this.viewport.fit(!0)};PixiGraph.prototype.resetTextureCache=function(){this.textureCache.destroy();this.textureCache=new TextureCache$jscomp$0(this.app.renderer)};PixiGraph.prototype.getNodesObjects=function(){return this.nodeKeyToNodeObject};PixiGraph.prototype.getEdgesObjects=
function(){return this.edgeKeyToEdgeObject};return PixiGraph}(tinyTypedEmitter.TypedEmitter);exports.PixiGraph=require}
//# sourceMappingURL=module$node_modules$pixi_graph_fork$dist$pixi_graph_cjs.js.map
