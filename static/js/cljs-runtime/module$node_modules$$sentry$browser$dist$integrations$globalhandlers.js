shadow$provide.module$node_modules$$sentry$browser$dist$integrations$globalhandlers=function(global,require,module,exports){function _installGlobalOnErrorHandler(){utils_1.addInstrumentationHandler("error",function(data){var _a=tslib_1.__read(getHubAndAttachStacktrace(),2),hub=_a[0],attachStacktrace=_a[1];if(hub.getIntegration(GlobalHandlers)){var msg=data.msg;_a=data.url;var line=data.line,column=data.column;data=data.error;if(!(helpers_1.shouldIgnoreOnError()||data&&data.__sentry_own_request__)){if(void 0===
data&&utils_1.isString(msg)){attachStacktrace=utils_1.isErrorEvent(msg)?msg.message:msg;msg="Error";var groups=attachStacktrace.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);groups&&(msg=groups[1],attachStacktrace=groups[2]);_a=_enhanceEventWithInitialFrame({exception:{values:[{type:msg,value:attachStacktrace}]}},_a,line,column)}else _a=_enhanceEventWithInitialFrame(eventbuilder_1.eventFromUnknownInput(data||msg,void 0,attachStacktrace,
!1),_a,line,column);_a.level=types_1.Severity.Error;addMechanismAndCapture(hub,data,_a,"onerror")}}})}function _installGlobalOnUnhandledRejectionHandler(){utils_1.addInstrumentationHandler("unhandledrejection",function(e){var _a=tslib_1.__read(getHubAndAttachStacktrace(),2),hub=_a[0],attachStacktrace=_a[1];if(hub.getIntegration(GlobalHandlers)){_a=e;try{"reason"in e?_a=e.reason:"detail"in e&&"reason"in e.detail&&(_a=e.detail.reason)}catch(_oO){}if(helpers_1.shouldIgnoreOnError()||_a&&_a.__sentry_own_request__)return!0;
e=utils_1.isPrimitive(_a)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(_a)}]}}:eventbuilder_1.eventFromUnknownInput(_a,void 0,attachStacktrace,!0);e.level=types_1.Severity.Error;addMechanismAndCapture(hub,_a,e,"onunhandledrejection")}})}function _enhanceEventWithInitialFrame(event,url,line,column){var e=event.exception=event.exception||{};e=e.values=e.values||[];e=e[0]=e[0]||{};e=e.stacktrace=e.stacktrace||{};e=e.frames=e.frames||
[];column=isNaN(parseInt(column,10))?void 0:column;line=isNaN(parseInt(line,10))?void 0:line;url=utils_1.isString(url)&&0<url.length?url:utils_1.getLocationHref();0===e.length&&e.push({colno:column,filename:url,function:"?",in_app:!0,lineno:line});return event}function addMechanismAndCapture(hub,error,event,type){utils_1.addExceptionMechanism(event,{handled:!1,type});hub.captureEvent(event,{originalException:error})}function getHubAndAttachStacktrace(){var hub=core_1.getCurrentHub(),client=hub.getClient();
client=client&&client.getOptions().attachStacktrace;return[hub,client]}Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("module$node_modules$$sentry$browser$node_modules$tslib$tslib"),core_1=require("module$node_modules$$sentry$core$dist$index"),types_1=require("module$node_modules$$sentry$types$dist$index"),utils_1=require("module$node_modules$$sentry$utils$dist$index"),eventbuilder_1=require("module$node_modules$$sentry$browser$dist$eventbuilder"),helpers_1=require("module$node_modules$$sentry$browser$dist$helpers"),
GlobalHandlers=function(){function GlobalHandlers(options){this.name=GlobalHandlers.id;this._installFunc={onerror:_installGlobalOnErrorHandler,onunhandledrejection:_installGlobalOnUnhandledRejectionHandler};this._options=tslib_1.__assign({onerror:!0,onunhandledrejection:!0},options)}GlobalHandlers.prototype.setupOnce=function(){Error.stackTraceLimit=50;var options=this._options,key;for(key in options){var installFunc=this._installFunc[key];if(installFunc&&options[key]){var type=key;utils_1.isDebugBuild()&&
utils_1.logger.log("Global Handler attached: "+type);installFunc();this._installFunc[key]=void 0}}};GlobalHandlers.id="GlobalHandlers";return GlobalHandlers}();exports.GlobalHandlers=GlobalHandlers}
//# sourceMappingURL=module$node_modules$$sentry$browser$dist$integrations$globalhandlers.js.map
