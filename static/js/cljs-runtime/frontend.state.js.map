{"version":3,"sources":["frontend/state.cljs"],"mappings":"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","names":["js/frontend","js/frontend.state","js/frontend.state.state","frontend.state/state","document-mode?","or__5043__auto__","frontend.storage/get","current-graph","graph","electron.ipc.ipc","cljs.core.atom","cljs.core.async.chan","cljs.core/boolean","cljs.core.fnil","cljs.core/identity","frontend.util/mac?","frontend.util/win32?","cljs.core._EQ_","and__5041__auto__","frontend.util/electron?","frontend.state/blocks-ast-cache","frontend.state/add-block-ast-cache!","block-uuid","content","ast","new-value","cljs.core/deref","cljs.core/assoc-in","cljs.core/count","cljs.core.into","cljs.core.take","cljs.core/reset!","frontend.state/get-block-ast","cljs.core.get_in","frontend.state/sub","ks","cljs.core/coll?","frontend.util/react","rum.core/cursor-in","rum.core/cursor","frontend.state/get-route-match","frontend.state/get-current-route","frontend.state/home?","frontend.state/setups-picker?","frontend.state/get-current-page","frontend.state/route-has-p?","frontend.state/set-state!","path","value","cljs.core/vector?","cljs.core.swap_BANG_","cljs.core/assoc","frontend.state/update-state!","f","cljs.core/update-in","cljs.core/update","frontend.state/get-current-repo","frontend.mobile.util/native-platform?","var_args","G__32657","frontend.state/get-config","js/Error","frontend.state.get_config","repo-url","frontend.state/default-arweave-gateway","frontend.state/get-arweave-gateway","js/frontend.state.built-in-macros","frontend.state/built-in-macros","frontend.state/get-macros","cljs.core.merge","frontend.state/sub-config","frontend.state/get-custom-css-link","frontend.state/get-custom-js-link","frontend.state/get-default-journal-template","temp__5720__auto__","template","clojure.string/blank?","clojure.string/trim","frontend.state/all-pages-public?","frontend.state/enable-grammarly?","cljs.core.get","frontend.state/scheduled-deadlines-disabled?","frontend.state/enable-timetracking?","frontend.state/enable-journals?","repo","frontend.state/export-heading-to-list?","frontend.state/enable-git-auto-push?","frontend.state/enable-block-timestamps?","frontend.state/sub-graph-config","frontend.state/sub-graph-config-settings","frontend.state/show-brackets?","frontend.state/get-default-home","frontend.state/sub-default-home-page","frontend.state/custom-home-page?","G__32671","frontend.state/get-preferred-format","frontend.state.get_preferred_format","cljs.core.keyword","fmt","clojure.string/lower-case","cljs.core/name","G__32673","frontend.state/get-editor-command-trigger","frontend.state.get_editor_command_trigger","frontend.state/markdown?","frontend.state/get-pages-directory","frontend.state/get-journals-directory","frontend.state/org-mode-file-link?","frontend.state/get-journal-file-name-format","frontend.state/get-preferred-workflow","workflow","frontend.util/safe-re-find","frontend.state/get-preferred-todo","frontend.state/page-name-order","frontend.state/get-repos","frontend.state/set-repos!","repos","frontend.state/add-repo!","cljs.core.conj","cljs.core.distinct","frontend.state/set-current-repo!","frontend.storage/set","frontend.storage/remove","frontend.state/set-preferred-format!","format","frontend.state/set-preferred-workflow!","frontend.state/set-preferred-language!","language","frontend.state/delete-repo!","p1__32697#","cljs.core.remove","frontend.util/distinct-by","cljs.core/first","frontend.state/set-timestamp-block!","frontend.state/get-timestamp-block","G__32700","frontend.state/set-edit-content!","input-id","frontend.state.set_edit_content_BANG_","set-input-value?","input","goog.dom/getElement","frontend.util/set-change-value","m","cljs.core.assoc","frontend.state/get-edit-input-id","cljs.core/ffirst","frontend.state/get-input","id","frontend.state/editing?","js/document","frontend.state/get-edit-content","frontend.state/sub-edit-content","frontend.state/append-current-edit-content!","append-text","frontend.state.goog$module$goog$object.get","cljs.core/last","js/document.execCommand","frontend.state/get-cursor-range","frontend.state/set-cursor-range!","range","frontend.state/set-q!","frontend.state/set-search-mode!","frontend.state/set-editor-show-page-search!","frontend.state/get-editor-show-page-search?","frontend.state/set-editor-show-page-search-hashtag!","frontend.state/get-editor-show-page-search-hashtag?","frontend.state/set-editor-show-block-search!","frontend.state/get-editor-show-block-search?","frontend.state/set-editor-show-template-search!","frontend.state/get-editor-show-template-search?","frontend.state/set-editor-show-date-picker!","frontend.state/get-editor-show-date-picker?","frontend.state/set-editor-show-input!","frontend.state/get-editor-show-input","frontend.state/set-editor-show-zotero!","frontend.state/clear-editor-show-state!","state","frontend.state/set-edit-input-id!","_m","frontend.state/get-edit-pos","frontend.util/get-selection-start","frontend.state/set-selection-start-block!","start-block","frontend.state/get-selection-start-block","G__32714","frontend.state/set-selection-blocks!","blocks","frontend.state.set_selection_blocks_BANG_","direction","cljs.core/seq","frontend.util/sort-by-height","frontend.state/into-selection-mode!","frontend.state/clear-selection!","frontend.state/get-selection-blocks","frontend.state/get-selection-block-ids","p1__32715#","cljs.core.keep","dommy.core/attr","cljs.core/uuid","frontend.state/in-selection-mode?","frontend.state/selection?","frontend.state/conj-selection-block!","block","dommy.core.add_class_BANG_","cljs.core/vec","frontend.state/drop-last-selection-block!","last-block","cljs.core/peek","cljs.core/pop","frontend.state/get-selection-direction","frontend.state/show-custom-context-menu!","links","frontend.state/hide-custom-context-menu!","frontend.state/toggle-sidebar-open?!","cljs.core/not","frontend.state/open-right-sidebar!","frontend.state/hide-right-sidebar!","frontend.state/sidebar-add-block!","db-id","block-type","frontend.util/sm-breakpoint?","p1__32724#","cljs.core/second","cljs.core/cons","elem","goog.dom/getElementByClass","frontend.util.scroll_to","frontend.state/sidebar-remove-block!","idx","p1__32726#","frontend.util/drop-nth","cljs.core/empty?","frontend.state/sidebar-replace-block!","old-sidebar-key","new-sidebar-key","p1__32727#","cljs.core.map","frontend.state/sidebar-block-exists?","p1__32728#","cljs.core/some","frontend.state/clear-sidebar-blocks!","frontend.state/sidebar-block-toggle-collapse!","frontend.state/get-edit-block","frontend.state/get-current-edit-block-and-position","edit-input-id","edit-block","block-element","clojure.string/replace","container","frontend.util/get-block-container","frontend.util.cursor/pos","js/frontend.state.publishing?","frontend.state/publishing?","frontend.state/publishing-enable-editing?","frontend.state/enable-editing?","G__32736","frontend.state/set-editing!","cursor-range","frontend.state.set_editing_BANG_","move-cursor?","pos","frontend.util.cursor/move-cursor-to","frontend.util/mobile?","frontend.state/clear-edit!","cljs.core/merge","frontend.state/into-code-editor-mode!","frontend.state/set-editor-last-pos!","new-pos","frontend.state/clear-editor-last-pos!","frontend.state/get-editor-last-pos","frontend.state/set-block-content-and-last-pos!","frontend.state/set-theme-mode!","mode","frontend.mobile.util/native-ios?","frontend.util/set-theme-light","frontend.util/set-theme-dark","frontend.state/sync-system-theme!","system-dark?","js/window.matchMedia","frontend.state/use-theme-mode!","theme-mode","frontend.state/toggle-theme","theme","frontend.state/toggle-theme!","G__32743","frontend.state/set-custom-theme!","custom-theme","frontend.state.set_custom_theme_BANG_","frontend.state/set-editing-block-dom-id!","block-dom-id","frontend.state/get-editing-block-dom-id","frontend.state/set-root-component!","component","frontend.state/get-root-component","G__32745","frontend.state/load-app-user-cfgs","frontend.state.load_app_user_cfgs","refresh?","promesa.core.bind","___28360__auto__","promesa.protocols/-promise","cfgs","cljs.core/object?","cljs-bean.core/->clj","frontend.state/setup-electron-updater!","js/window.apis.setUpdatesCallback","_","args","data","pending?","cljs.core.not_EQ_","frontend.state/set-file-component!","frontend.state/clear-file-component!","frontend.state/get-file-component","frontend.state/set-journals-length!","frontend.state/add-custom-query-component!","query-string","frontend.state/remove-custom-query-component!","cljs.core.dissoc","frontend.state/get-custom-query-components","cljs.core/vals","G__32747","frontend.state/save-scroll-position!","frontend.state.save_scroll_position_BANG_","js/window.location.hash","G__32751","frontend.state/get-saved-scroll-position","frontend.state.get_saved_scroll_position","frontend.state/set-today!","frontend.state/get-date-formatter","frontend.state/shortcuts","frontend.state/get-me","frontend.state/deprecated-logged?","frontend.state/set-db-restoring!","frontend.state/set-indexedb-support!","frontend.state/modal-opened?","frontend.state/get-sub-modals","G__32756","frontend.state/set-sub-modal!","p__32757","map__32758","cljs.core/--destructure-map","panel-content","frontend.state.set_sub_modal_BANG_","label","close-btn?","show?","center?","opts","frontend.state/set-modal!","modals","p1__32753#","p2__32752#","cljs.core.keep_indexed","p1__32754#","medley.core/filter-vals","cljs.core/boolean?","G__32763","frontend.state/close-sub-modal!","frontend.state.close_sub_modal_BANG_","all?-a-id","mid","frontend.state/close-modal!","p1__32761#","p2__32760#","medley.core.remove_nth","G__32765","p__32769","map__32770","modal-panel-content","frontend.state.set_modal_BANG_","fullscreen?","frontend.state/get-db-batch-txs-chan","frontend.state/get-file-write-chan","frontend.state/get-reactive-custom-queries-chan","frontend.state/get-write-chan-length","c","frontend.state/get-left-sidebar-open?","frontend.state/set-left-sidebar-open!","frontend.state/toggle-left-sidebar!","frontend.state/set-developer-mode!","frontend.state/developer-mode?","frontend.state/get-notification-contents","frontend.state/document-mode?","frontend.state/doc-mode-enter-for-new-line?","frontend.state/toggle-document-mode!","frontend.state/shortcut-tooltip-enabled?","frontend.state/toggle-shortcut-tooltip!","frontend.state/mobile?","frontend.state/enable-tooltip?","frontend.state/show-command-doc?","frontend.state/set-config!","frontend.state/get-wide-mode?","frontend.state/toggle-wide-mode!","frontend.state/set-online!","frontend.state/get-commands","frontend.state/get-plugins-commands","cljs.core.mapcat","cljs.core/flatten","frontend.state/get-plugins-commands-with-type","type","p1__32772#","cljs.core/filterv","cljs.core.apply","cljs.core/concat","frontend.state/get-plugins-ui-items-with-type","p1__32773#","frontend.state/get-plugin-resources-with-type","pid","frontend.state/get-plugin-resource","key","resources","frontend.state/upt-plugin-resource","attr","val","resource","frontend.state/install-plugin-hook","hook","frontend.state/uninstall-plugin-hook","hook-or-all","p1__32774#","cljs.core/update-vals","ids","cljs.core.disj","coll","frontend.state/get-scheduled-future-days","days","cljs.core/int?","frontend.state/set-graph-syncing?","frontend.state/set-editor-in-composition!","frontend.state/editor-in-composition?","frontend.state/set-loading-files!","frontend.state/loading-files?","frontend.state/set-editor-last-input-time!","time","frontend.state/set-last-transact-time!","frontend.state/set-db-persisted!","frontend.state/db-idle?","last-time","now","frontend.util/time-ms","frontend.state/input-idle?","frontend.state/set-nfs-refreshing!","frontend.state/nfs-refreshing?","frontend.state/set-search-result!","frontend.state/clear-search-result!","frontend.state/add-graph-search-filter!","q","frontend.state/remove-search-filter!","frontend.state/clear-search-filters!","frontend.state/get-search-mode","frontend.state/toggle!","frontend.state/toggle-settings!","frontend.state/settings-open?","frontend.state/close-settings!","frontend.state/open-settings!","js/frontend.state.editor-op","frontend.state/editor-op","frontend.state/set-editor-op!","frontend.state/get-editor-op","frontend.state/get-start-of-week","frontend.state/get-ref-open-blocks-level","cljs.core/integer?","frontend.state/get-linked-references-collapsed-threshold","frontend.state/get-events-chan","frontend.state/pub-event!","payload","chan","cljs.core.async.put_BANG_","frontend.state/get-copied-blocks","frontend.state/set-copied-blocks","frontend.state/set-copied-full-blocks","frontend.state/set-copied-full-blocks!","frontend.state/get-export-block-text-indent-style","frontend.state/set-export-block-text-indent-style!","v","frontend.state/get-export-block-text-remove-options","frontend.state/update-export-block-text-remove-options!","e","k","frontend.util/echecked?","cljs.core/conj","cljs.core/disj","p1__32775#","frontend.state/set-editor-args!","frontend.state/block-component-editing?","frontend.state/set-block-component-editing-mode!","frontend.state/logical-outdenting?","frontend.state/get-editor-args","frontend.state/get-export-bullet-indentation","G__32776","cljs.core/Keyword","frontend.state/set-page-blocks-cp!","frontend.state/get-page-blocks-cp","frontend.state/set-component!","frontend.state/get-component","G__32778","frontend.state/exit-editing-and-set-selected-blocks!","frontend.state.exit_editing_and_set_selected_blocks_BANG_","frontend.state/remove-watch-state","cljs.core/remove-watch","frontend.state/get-git-auto-commit-enabled?","frontend.state/set-last-key-code!","key-code","frontend.state/get-last-key-code","frontend.state/get-plugin-by-id","G__32781","frontend.state/get-enabled?-installed-plugins","theme?","frontend.state.get_enabled_QMARK__installed_plugins","enabled?","include-unpacked?","p1__32779#","frontend.state/lsp-enabled?-or-theme","frontend.state/lsp-enabled?","frontend.state/consume-updates-coming-plugin","updated?","cljs.core/dissoc","temp__5718__auto__","error","frontend.state/coming-update-new-version?","pkg","frontend.state/plugin-update-available?","frontend.state/all-available-coming-updates","updates","p1__32782#","frontend.state/get-next-selected-coming-update","unchecked","p1__32783#","cljs.core.filter","cljs.core/contains?","frontend.state/set-unchecked-update","unchecked?","frontend.state/reset-unchecked-update","frontend.state/reset-all-updates-state","frontend.state/sub-right-sidebar-blocks","current-repo","p1__32784#","frontend.state/toggle-collapsed-block!","block-id","frontend.state/set-collapsed-block!","frontend.state/sub-collapsed","frontend.state/get-modal-id","frontend.state/edit-in-query-component","frontend.state/set-auth-id-token","id-token","frontend.state/set-auth-refresh-token","refresh-token","frontend.state/set-auth-access-token","access-token","frontend.state/get-auth-id-token","frontend.state/get-auth-refresh-token","frontend.state/set-file-sync-manager","frontend.state/set-file-sync-state","cljs.spec.alpha/*compile-asserts*","cljs.spec.alpha/*runtime-asserts*","cljs.spec.alpha/assert*","frontend.state/get-file-sync-manager","frontend.state/get-file-sync-state","frontend.state/reset-file-sync-download-init-state!","frontend.state/set-file-sync-download-init-state!","cljs.core/fn?","old-value","frontend.state/get-file-sync-download-init-state","frontend.state/reset-parsing-state!","frontend.state/set-parsing-state!","frontend.state/enable-encryption?"],"sourcesContent":["(ns frontend.state\n  (:require [cljs-bean.core :as bean]\n            [cljs.core.async :as async]\n            [clojure.string :as string]\n            [cljs.spec.alpha :as s]\n            [dommy.core :as dom]\n            [medley.core :as medley]\n            [electron.ipc :as ipc]\n            [frontend.storage :as storage]\n            [frontend.util :as util]\n            [frontend.util.cursor :as cursor]\n            [goog.dom :as gdom]\n            [goog.object :as gobj]\n            [promesa.core :as p]\n            [rum.core :as rum]\n            [frontend.mobile.util :as mobile-util]))\n\n(defonce ^:large-vars/data-var state\n  (let [document-mode? (or (storage/get :document/mode?) false)\n       current-graph (let [graph (storage/get :git/current-repo)]\n                       (when graph (ipc/ipc \"setCurrentGraph\" graph))\n                       graph)]\n   (atom\n    {:route-match                           nil\n     :today                                 nil\n     :system/events                         (async/chan 100)\n     :db/batch-txs                          (async/chan 100)\n     :file/writes                           (async/chan 100)\n     :reactive/custom-queries               (async/chan 100)\n     :notification/show?                    false\n     :notification/content                  nil\n     :repo/loading-files?                   {}\n     :nfs/user-granted?                     {}\n     :nfs/refreshing?                       nil\n     :instrument/disabled?                  (storage/get \"instrument-disabled\")\n     ;; TODO: how to detect the network reliably?\n     :network/online?                       true\n     :indexeddb/support?                    true\n     :me                                    nil\n     :git/current-repo                      current-graph\n     :format/loading                        {}\n     :draw?                                 false\n     :db/restoring?                         nil\n\n     :journals-length                       3\n\n     :search/q                              \"\"\n     :search/mode                           :global\n     :search/result                         nil\n     :search/graph-filters                  []\n\n     ;; modals\n     :modal/id                              nil\n     :modal/label                           \"\"\n     :modal/show?                           false\n     :modal/panel-content                   nil\n     :modal/fullscreen?                     false\n     :modal/close-btn?                      nil\n     :modal/subsets                         []\n\n\n     ;; right sidebar\n     :ui/fullscreen?                        false\n     :ui/settings-open?                     false\n     :ui/sidebar-open?                      false\n     :ui/left-sidebar-open?                 (boolean (storage/get \"ls-left-sidebar-open?\"))\n     :ui/theme                              (or (storage/get :ui/theme) \"light\")\n     :ui/system-theme?                      ((fnil identity (or util/mac? util/win32? false)) (storage/get :ui/system-theme?))\n     :ui/custom-theme                       (or (storage/get :ui/custom-theme) {:light {:mode \"light\"} :dark {:mode \"dark\"}})\n     :ui/wide-mode?                         (storage/get :ui/wide-mode)\n\n     ;; ui/collapsed-blocks is to separate the collapse/expand state from db for:\n     ;; 1. right sidebar\n     ;; 2. zoom-in view\n     ;; 3. queries\n     ;; 4. references\n     ;; graph => {:block-id bool}\n     :ui/collapsed-blocks                   {}\n     :ui/sidebar-collapsed-blocks           {}\n     :ui/root-component                     nil\n     :ui/file-component                     nil\n     :ui/custom-query-components            {}\n     :ui/show-recent?                       false\n     :ui/command-palette-open?              false\n     :ui/developer-mode?                    (or (= (storage/get \"developer-mode\") \"true\")\n                                                false)\n     ;; remember scroll positions of visited paths\n     :ui/paths-scroll-positions             {}\n     :ui/shortcut-tooltip?                  (if (false? (storage/get :ui/shortcut-tooltip?))\n                                              false\n                                              true)\n     :ui/scrolling?                         false\n     :document/mode?                        document-mode?\n\n     :config                                {}\n     :block/component-editing-mode?         false\n     :editor/draw-mode?                     false\n     :editor/show-page-search?              false\n     :editor/show-page-search-hashtag?      false\n     :editor/show-date-picker?              false\n     ;; With label or other data\n     :editor/show-input                     nil\n     :editor/show-zotero                    false\n     :editor/last-saved-cursor              nil\n     :editor/editing?                       nil\n     :editor/in-composition?                false\n     :editor/content                        {}\n     :editor/block                          nil\n     :editor/block-dom-id                   nil\n     :editor/set-timestamp-block            nil\n     :editor/last-input-time                nil\n     :editor/document-mode?                 document-mode?\n     :editor/args                           nil\n     :editor/on-paste?                      false\n     :editor/last-key-code                  nil\n\n     ;; for audio record\n     :editor/record-status                  \"NONE\"\n\n     :db/last-transact-time                 {}\n     ;; whether database is persisted\n     :db/persisted?                         {}\n     :cursor-range                          nil\n\n     :selection/mode                        false\n     ;; Warning: blocks order is determined when setting this attribute\n     :selection/blocks                      []\n     :selection/start-block                 nil\n     ;; either :up or :down, defaults to down\n     ;; used to determine selection direction when two or more blocks are selected\n     :selection/direction                   :down\n     :custom-context-menu/show?             false\n     :custom-context-menu/links             nil\n\n     ;; pages or blocks in the right sidebar\n     ;; It is a list of `[repo db-id block-type block-data]` 4-tuple\n     :sidebar/blocks                        '()\n\n     :preferred-language                    (storage/get :preferred-language)\n\n     ;; electron\n     :electron/auto-updater-downloaded      false\n     :electron/updater-pending?             false\n     :electron/updater                      {}\n     :electron/user-cfgs                    nil\n\n     ;; mobile\n     :mobile/show-action-bar?               false\n     :mobile/actioned-block                 nil\n     :mobile/show-toolbar?                  false\n     ;;; toolbar icon doesn't update correctly when clicking after separate it from box,\n     ;;; add a random in (<= 1000000) to observer its update\n     :mobile/toolbar-update-observer        0\n     :mobile/show-tabbar?                   false\n\n     ;; plugin\n     :plugin/enabled                        (and (util/electron?)\n                                                 ;; true false :theme-only\n                                                 ((fnil identity true) (storage/get :lsp-core-enabled)))\n     :plugin/indicator-text                 nil\n     :plugin/installed-plugins              {}\n     :plugin/installed-themes               []\n     :plugin/installed-slash-commands       {}\n     :plugin/installed-ui-items             {}\n     :plugin/installed-resources            {}\n     :plugin/installed-hooks                {}\n     :plugin/simple-commands                {}\n     :plugin/selected-theme                 nil\n     :plugin/selected-unpacked-pkg          nil\n     :plugin/marketplace-pkgs               nil\n     :plugin/marketplace-stats              nil\n     :plugin/installing                     nil\n     :plugin/active-readme                  nil\n     :plugin/updates-pending                {}\n     :plugin/updates-coming                 {}\n     :plugin/updates-downloading?           false\n     :plugin/updates-unchecked              #{}\n     :plugin/navs-settings?                 true\n     :plugin/focused-settings               nil ;; plugin id\n\n     ;; pdf\n     :pdf/current                           nil\n     :pdf/ref-highlight                     nil\n\n     ;; all notification contents as k-v pairs\n     :notification/contents                 {}\n     :graph/syncing?                        false\n     ;; graph -> state\n     :graph/parsing-state                   {}\n\n     ;; copied blocks\n     :copy/blocks                           {:copy/content nil\n                                             :copy/block-ids nil\n                                             :copy/graph nil}\n\n     :copy/export-block-text-indent-style   (or (storage/get :copy/export-block-text-indent-style)\n                                                \"dashes\")\n     :copy/export-block-text-remove-options (or (storage/get :copy/export-block-text-remove-options)\n                                                #{})\n     :date-picker/date                      nil\n\n     :youtube/players                       {}\n\n     ;; command palette\n     :command-palette/commands              []\n\n     :view/components                       {}\n\n     :favorites/dragging                    nil\n\n     :srs/mode?                             false\n\n     :srs/cards-due-count                   nil\n\n     :reactive/query-dbs                    {}\n\n     ;; login, userinfo, token, ...\n     :auth/refresh-token                    nil\n     :auth/access-token                     nil\n     :auth/id-token                         nil\n\n     ;; file-sync\n     :file-sync/sync-manager                nil\n     :file-sync/sync-state-manager          nil\n     :file-sync/sync-state                  nil\n     :file-sync/sync-uploading-files        nil\n     :file-sync/sync-downloading-files      nil\n\n     :file-sync/download-init-progress      nil\n\n     :encryption/graph-parsing?             false\n     })))\n\n;; block uuid -> {content(String) -> ast}\n(def blocks-ast-cache (atom {}))\n(defn add-block-ast-cache!\n  [block-uuid content ast]\n  (when (and block-uuid content ast)\n    (let [new-value (assoc-in @blocks-ast-cache [block-uuid content] ast)\n          new-value (if (> (count new-value) 10000)\n                      (into {} (take 5000 new-value))\n                      new-value)]\n      (reset! blocks-ast-cache new-value))))\n\n(defn get-block-ast\n  [block-uuid content]\n  (when (and block-uuid content)\n    (get-in @blocks-ast-cache [block-uuid content])))\n\n(defn sub\n  [ks]\n  (if (coll? ks)\n    (util/react (rum/cursor-in state ks))\n    (util/react (rum/cursor state ks))))\n\n(defn get-route-match\n  []\n  (:route-match @state))\n\n(defn get-current-route\n  []\n  (get-in (get-route-match) [:data :name]))\n\n(defn home?\n  []\n  (= :home (get-current-route)))\n\n(defn setups-picker?\n  []\n  (= :repo-add (get-current-route)))\n\n(defn get-current-page\n  []\n  (when (= :page (get-current-route))\n    (get-in (get-route-match)\n            [:path-params :name])))\n\n(defn route-has-p?\n  []\n  (get-in (get-route-match) [:query-params :p]))\n\n(defn set-state!\n  [path value]\n  (if (vector? path)\n    (swap! state assoc-in path value)\n    (swap! state assoc path value)))\n\n(defn update-state!\n  [path f]\n  (if (vector? path)\n    (swap! state update-in path f)\n    (swap! state update path f)))\n\n(defn get-current-repo\n  []\n  (or (:git/current-repo @state)\n      (when-not (mobile-util/native-platform?)\n        \"local\")))\n\n(defn get-config\n  ([]\n   (get-config (get-current-repo)))\n  ([repo-url]\n   (get-in @state [:config repo-url])))\n\n(def default-arweave-gateway \"https://arweave.net\")\n\n(defn get-arweave-gateway\n  []\n  (:arweave/gateway (get-config) default-arweave-gateway))\n\n(defonce built-in-macros\n         {\"img\" \"[:img.$4 {:src \\\"$1\\\" :style {:width $2 :height $3}}]\"})\n\n(defn get-macros\n  []\n  (merge\n    built-in-macros\n    (:macros (get-config))))\n\n(defn sub-config\n  []\n  (sub :config))\n\n(defn get-custom-css-link\n  []\n  (:custom-css-url (get-config)))\n\n(defn get-custom-js-link\n  []\n  (:custom-js-url (get-config)))\n\n(defn get-default-journal-template\n  []\n  (when-let [template (get-in (get-config) [:default-templates :journals])]\n    (when-not (string/blank? template)\n      (string/trim template))))\n\n(defn all-pages-public?\n  []\n  (let [value (:publishing/all-pages-public? (get-config))\n        value (if (some? value) value (:all-pages-public? (get-config)))]\n    (true? value)))\n\n(defn enable-grammarly?\n  []\n  (true? (:feature/enable-grammarly?\n           (get (sub-config) (get-current-repo)))))\n\n;; (defn store-block-id-in-file?\n;;   []\n;;   (true? (:block/store-id-in-file? (get-config))))\n\n(defn scheduled-deadlines-disabled?\n  []\n  (true? (:feature/disable-scheduled-and-deadline-query?\n           (get (sub-config) (get-current-repo)))))\n\n(defn enable-timetracking?\n  []\n  (not (false? (:feature/enable-timetracking?\n                 (get (sub-config) (get-current-repo))))))\n\n(defn enable-journals?\n  [repo]\n  (not (false? (:feature/enable-journals?\n                 (get (sub-config) repo)))))\n\n(defn export-heading-to-list?\n  []\n  (not (false? (:export/heading-to-list?\n                 (get (sub-config) (get-current-repo))))))\n\n(defn enable-git-auto-push?\n  [repo]\n  (not (false? (:git-auto-push\n                 (get (sub-config) repo)))))\n\n(defn enable-block-timestamps?\n  []\n  (true? (:feature/enable-block-timestamps?\n           (get (sub-config) (get-current-repo)))))\n\n(defn sub-graph-config\n  []\n  (get (sub-config) (get-current-repo)))\n\n(defn sub-graph-config-settings\n  []\n  (:graph/settings (sub-graph-config)))\n\n;; Enable by default\n(defn show-brackets?\n  []\n  (not (false? (:ui/show-brackets?\n                 (get (sub-config) (get-current-repo))))))\n\n(defn get-default-home\n  []\n  (:default-home (get-config)))\n\n(defn sub-default-home-page\n  []\n  (get-in (sub-config) [(get-current-repo) :default-home :page] \"\"))\n\n(defn custom-home-page?\n  []\n  (some? (:page (get-default-home))))\n\n(defn get-preferred-format\n  ([]\n   (get-preferred-format (get-current-repo)))\n  ([repo-url]\n   (keyword\n     (or\n       (when-let [fmt (:preferred-format (get-config repo-url))]\n         (string/lower-case (name fmt)))\n\n       (get-in @state [:me :preferred_format] \"markdown\")))))\n\n;; TODO: consider adding a pane in Settings to set this through the GUI (rather\n;; than having to go through the config.edn file)\n(defn get-editor-command-trigger\n  ([] (get-editor-command-trigger (get-current-repo)))\n  ([repo-url]\n   (or\n     (:editor/command-trigger (get-config repo-url))        ;; Get from user config\n     \"/\")))                                                 ;; Set the default\n\n(defn markdown?\n  []\n  (= (keyword (get-preferred-format))\n     :markdown))\n\n(defn get-pages-directory\n  []\n  (or\n    (when-let [repo (get-current-repo)]\n      (:pages-directory (get-config repo)))\n    \"pages\"))\n\n(defn get-journals-directory\n  []\n  (or\n    (when-let [repo (get-current-repo)]\n      (:journals-directory (get-config repo)))\n    \"journals\"))\n\n(defn org-mode-file-link?\n  [repo]\n  (:org-mode/insert-file-link? (get-config repo)))\n\n(defn get-journal-file-name-format\n  []\n  (when-let [repo (get-current-repo)]\n    (:journal/file-name-format (get-config repo))))\n\n(defn get-preferred-workflow\n  []\n  (keyword\n    (or\n      (when-let [workflow (:preferred-workflow (get-config))]\n        (let [workflow (name workflow)]\n          (if (util/safe-re-find #\"now|NOW\" workflow)\n            :now\n            :todo)))\n      (get-in @state [:me :preferred_workflow] :now))))\n\n(defn get-preferred-todo\n  []\n  (if (= (get-preferred-workflow) :now)\n    \"LATER\"\n    \"TODO\"))\n\n(defn page-name-order\n  \"Decide whether to use file name or :title as page name. If it returns \\\"file\\\", use the file\n  name unless it is missing.\"\n  []\n  (:page-name-order (get-config)))\n\n(defn get-repos\n  []\n  (get-in @state [:me :repos]))\n\n(defn set-repos!\n  [repos]\n  (set-state! [:me :repos] repos))\n\n(defn add-repo!\n  [repo]\n  (when (not (string/blank? repo))\n    (update-state! [:me :repos]\n                   (fn [repos]\n                     (->> (conj repos repo)\n                          (distinct))))))\n\n(defn set-current-repo!\n  [repo]\n  (swap! state assoc :git/current-repo repo)\n  (if repo\n    (storage/set :git/current-repo repo)\n    (storage/remove :git/current-repo))\n  (ipc/ipc \"setCurrentGraph\" repo))\n\n(defn set-preferred-format!\n  [format]\n  (swap! state assoc-in [:me :preferred_format] (name format)))\n\n(defn set-preferred-workflow!\n  [workflow]\n  (swap! state assoc-in [:me :preferred_workflow] (name workflow)))\n\n(defn set-preferred-language!\n  [language]\n  (set-state! :preferred-language (name language))\n  (storage/set :preferred-language (name language)))\n\n(defn delete-repo!\n  [repo]\n  (swap! state update-in [:me :repos]\n         (fn [repos]\n           (->> (remove #(= (:url repo)\n                            (:url %))\n                        repos)\n                (util/distinct-by :url))))\n  (when (= (get-current-repo) (:url repo))\n    (set-current-repo! (:url (first (get-repos))))))\n\n(defn set-timestamp-block!\n  [value]\n  (set-state! :editor/set-timestamp-block value))\n\n(defn get-timestamp-block\n  []\n  (:editor/set-timestamp-block @state))\n\n(defn set-edit-content!\n  ([input-id value] (set-edit-content! input-id value true))\n  ([input-id value set-input-value?]\n   (when input-id\n     (when set-input-value?\n       (when-let [input (gdom/getElement input-id)]\n         (util/set-change-value input value)))\n     (update-state! :editor/content (fn [m]\n                                      (assoc m input-id value))))))\n\n(defn get-edit-input-id\n  []\n  (ffirst (:editor/editing? @state)))\n\n(defn get-input\n  []\n  (when-let [id (get-edit-input-id)]\n    (gdom/getElement id)))\n\n(defn editing?\n  []\n  (let [input (get-input)]\n    (and input (= input (.-activeElement js/document)))))\n\n(defn get-edit-content\n  []\n  (get (:editor/content @state) (get-edit-input-id)))\n\n(defn sub-edit-content\n  []\n  (sub [:editor/content (get-edit-input-id)]))\n\n(defn append-current-edit-content!\n  [append-text]\n  (when-not (string/blank? append-text)\n    (when-let [input-id (get-edit-input-id)]\n      (when-let [input (gdom/getElement input-id)]\n        (let [value (gobj/get input \"value\")\n              new-value (str value append-text)\n              new-value (if (or (= (last value) \" \")\n                                (= (last value) \"\\n\"))\n                          new-value\n                          (str \"\\n\" new-value))]\n          (js/document.execCommand \"insertText\" false append-text)\n          (update-state! :editor/content (fn [m]\n                                           (assoc m input-id new-value))))))))\n\n(defn get-cursor-range\n  []\n  (:cursor-range @state))\n\n(defn set-cursor-range!\n  [range]\n  (set-state! :cursor-range range))\n\n(defn set-q!\n  [value]\n  (set-state! :search/q value))\n\n(defn set-search-mode!\n  [value]\n  (set-state! :search/mode value))\n\n(defn set-editor-show-page-search!\n  [value]\n  (set-state! :editor/show-page-search? value))\n\n(defn get-editor-show-page-search?\n  []\n  (get @state :editor/show-page-search?))\n\n(defn set-editor-show-page-search-hashtag!\n  [value]\n  (set-state! :editor/show-page-search? value)\n  (set-state! :editor/show-page-search-hashtag? value))\n(defn get-editor-show-page-search-hashtag?\n  []\n  (get @state :editor/show-page-search-hashtag?))\n(defn set-editor-show-block-search!\n  [value]\n  (set-state! :editor/show-block-search? value))\n(defn get-editor-show-block-search?\n  []\n  (get @state :editor/show-block-search?))\n(defn set-editor-show-template-search!\n  [value]\n  (set-state! :editor/show-template-search? value))\n(defn get-editor-show-template-search?\n  []\n  (get @state :editor/show-template-search?))\n(defn set-editor-show-date-picker!\n  [value]\n  (set-state! :editor/show-date-picker? value))\n(defn get-editor-show-date-picker?\n  []\n  (get @state :editor/show-date-picker?))\n(defn set-editor-show-input!\n  [value]\n  (set-state! :editor/show-input value))\n(defn get-editor-show-input\n  []\n  (get @state :editor/show-input))\n\n\n(defn set-editor-show-zotero!\n  [value]\n  (set-state! :editor/show-zotero value))\n\n;; TODO: refactor, use one state\n(defn clear-editor-show-state!\n  []\n  (swap! state (fn [state]\n                 (assoc state\n                        :editor/show-input nil\n                        :editor/show-zotero false\n                        :editor/show-date-picker? false\n                        :editor/show-block-search? false\n                        :editor/show-template-search? false\n                        :editor/show-page-search? false\n                        :editor/show-page-search-hashtag? false))))\n\n(defn set-edit-input-id!\n  [input-id]\n  (swap! state update :editor/editing?\n         (fn [_m]\n           (and input-id {input-id true}))))\n\n(defn get-edit-pos\n  []\n  (when-let [input (get-input)]\n    (util/get-selection-start input)))\n\n(defn set-selection-start-block!\n  [start-block]\n  (swap! state assoc :selection/start-block start-block))\n\n(defn get-selection-start-block\n  []\n  (get @state :selection/start-block))\n\n(defn set-selection-blocks!\n  ([blocks]\n   (set-selection-blocks! blocks :down))\n  ([blocks direction]\n   (when (seq blocks)\n     (let [blocks (util/sort-by-height blocks)]\n       (swap! state assoc\n             :selection/mode true\n             :selection/blocks blocks\n             :selection/direction direction)))))\n\n(defn into-selection-mode!\n  []\n  (swap! state assoc :selection/mode true))\n\n(defn clear-selection!\n  []\n  (swap! state assoc\n         :selection/mode false\n         :selection/blocks nil\n         :selection/direction :down))\n\n(defn get-selection-blocks\n  []\n  (:selection/blocks @state))\n\n(defn get-selection-block-ids\n  []\n  (->> (sub :selection/blocks)\n       (keep #(when-let [id (dom/attr % \"blockid\")]\n                (uuid id)))\n       (distinct)))\n\n(defn in-selection-mode?\n  []\n  (:selection/mode @state))\n\n(defn selection?\n  \"True sense of selection mode with valid selected block\"\n  []\n  (and (in-selection-mode?) (seq (get-selection-blocks))))\n\n(defn conj-selection-block!\n  [block direction]\n  (dom/add-class! block \"selected noselect\")\n  (swap! state assoc\n         :selection/mode true\n         :selection/blocks (-> (conj (vec (:selection/blocks @state)) block)\n                               (util/sort-by-height))\n         :selection/direction direction))\n\n(defn drop-last-selection-block!\n  []\n  (let [last-block (peek (vec (:selection/blocks @state)))]\n    (swap! state assoc\n           :selection/mode true\n           :selection/blocks (pop (vec (:selection/blocks @state))))\n    last-block))\n\n(defn get-selection-direction\n  []\n  (:selection/direction @state))\n\n(defn show-custom-context-menu!\n  [links]\n  (swap! state assoc\n         :custom-context-menu/show? true\n         :custom-context-menu/links links))\n\n(defn hide-custom-context-menu!\n  []\n  (swap! state assoc\n         :custom-context-menu/show? false\n         :custom-context-menu/links nil))\n\n(defn toggle-sidebar-open?!\n  []\n  (swap! state update :ui/sidebar-open? not))\n\n(defn open-right-sidebar!\n  []\n  (swap! state assoc :ui/sidebar-open? true))\n\n(defn hide-right-sidebar!\n  []\n  (swap! state assoc :ui/sidebar-open? false))\n\n(defn sidebar-add-block!\n  [repo db-id block-type]\n  (when (not (util/sm-breakpoint?))\n    (when db-id\n      (update-state! :sidebar/blocks (fn [blocks]\n                                       (->> (remove #(= (second %) db-id) blocks)\n                                            (cons [repo db-id block-type])\n                                            (distinct))))\n      (open-right-sidebar!)\n      (when-let [elem (gdom/getElementByClass \"cp__right-sidebar-scrollable\")]\n        (util/scroll-to elem 0)))))\n\n(defn sidebar-remove-block!\n  [idx]\n  (update-state! :sidebar/blocks (fn [blocks]\n                                   (if (string? idx)\n                                     (remove #(= (second %) idx) blocks)\n                                     (util/drop-nth idx blocks))))\n  (when (empty? (:sidebar/blocks @state))\n    (hide-right-sidebar!)))\n\n(defn sidebar-replace-block!\n  [old-sidebar-key new-sidebar-key]\n  (update-state! :sidebar/blocks (fn [blocks]\n                                   (map #(if (= % old-sidebar-key)\n                                           new-sidebar-key\n                                           %) blocks))))\n\n(defn sidebar-block-exists?\n  [idx]\n  (some #(= (second %) idx) (:sidebar/blocks @state)))\n\n(defn clear-sidebar-blocks!\n  []\n  (set-state! :sidebar/blocks '()))\n\n(defn sidebar-block-toggle-collapse!\n  [db-id]\n  (when db-id\n    (update-state! [:ui/sidebar-collapsed-blocks db-id] not)))\n\n(defn get-edit-block\n  []\n  (get @state :editor/block))\n\n(defn get-current-edit-block-and-position\n  []\n  (let [edit-input-id (get-edit-input-id)\n        edit-block (get-edit-block)\n        block-element (when edit-input-id (gdom/getElement (string/replace edit-input-id \"edit-block\" \"ls-block\")))\n        container (when block-element\n                    (util/get-block-container block-element))]\n    (when container\n      {:last-edit-block edit-block\n       :container       (gobj/get container \"id\")\n       :pos             (cursor/pos (gdom/getElement edit-input-id))})))\n\n(defonce publishing? (atom nil))\n\n(defn publishing-enable-editing?\n  []\n  (and @publishing? (:publishing/enable-editing? (get-config))))\n\n(defn enable-editing?\n  []\n  (or (not @publishing?) (:publishing/enable-editing? (get-config))))\n\n(defn set-editing!\n  ([edit-input-id content block cursor-range]\n   (set-editing! edit-input-id content block cursor-range true))\n  ([edit-input-id content block cursor-range move-cursor?]\n   (when (and edit-input-id block\n              (or\n                (publishing-enable-editing?)\n                (not @publishing?)))\n     (let [block-element (gdom/getElement (string/replace edit-input-id \"edit-block\" \"ls-block\"))\n           container (util/get-block-container block-element)\n           block (if container\n                   (assoc block\n                     :block/container (gobj/get container \"id\"))\n                   block)\n           content (string/trim (or content \"\"))]\n       (swap! state\n              (fn [state]\n                (-> state\n                    (assoc-in [:editor/content edit-input-id] content)\n                    (assoc\n                     :editor/block block\n                     :editor/editing? {edit-input-id true}\n                     :editor/last-key-code nil\n                     :cursor-range cursor-range))))\n       (when-let [input (gdom/getElement edit-input-id)]\n         (let [pos (count cursor-range)]\n           (when content\n             (util/set-change-value input content))\n\n           (when move-cursor?\n             (cursor/move-cursor-to input pos))\n\n           (when (or (util/mobile?) (mobile-util/native-platform?))\n             (set-state! :mobile/show-action-bar? false))))))))\n\n(defn clear-edit!\n  []\n  (swap! state merge {:editor/editing? nil\n                      :editor/block    nil\n                      :cursor-range    nil\n                      :editor/last-saved-cursor nil}))\n\n(defn into-code-editor-mode!\n  []\n  (swap! state merge {:editor/editing?   nil\n                      :cursor-range      nil\n                      :editor/code-mode? true}))\n\n(defn set-editor-last-pos!\n  [new-pos]\n  (set-state! [:editor/last-saved-cursor (:block/uuid (get-edit-block))] new-pos))\n\n(defn clear-editor-last-pos!\n  []\n  (set-state! :editor/last-saved-cursor nil))\n\n(defn get-editor-last-pos\n  []\n  (get-in @state [:editor/last-saved-cursor (:block/uuid (get-edit-block))]))\n\n(defn set-block-content-and-last-pos!\n  [edit-input-id content new-pos]\n  (when edit-input-id\n    (set-edit-content! edit-input-id content)\n    (set-state! [:editor/last-saved-cursor (:block/uuid (get-edit-block))] new-pos)))\n\n(defn set-theme-mode!\n  [mode]\n  (when (mobile-util/native-ios?)\n    (if (= mode \"light\")\n      (util/set-theme-light)\n      (util/set-theme-dark)))\n  (set-state! :ui/theme mode)\n  (storage/set :ui/theme mode))\n\n(defn sync-system-theme!\n  []\n  (let [system-dark? (.-matches (js/window.matchMedia \"(prefers-color-scheme: dark)\"))]\n    (set-theme-mode! (if system-dark? \"dark\" \"light\"))\n    (set-state! :ui/system-theme? true)\n    (storage/set :ui/system-theme? true)))\n\n(defn use-theme-mode!\n  [theme-mode]\n  (if (= theme-mode \"system\")\n    (sync-system-theme!)\n    (do\n      (set-theme-mode! theme-mode)\n      (set-state! :ui/system-theme? false)\n      (storage/set :ui/system-theme? false))))\n\n(defn toggle-theme\n  [theme]\n  (if (= theme \"dark\") \"light\" \"dark\"))\n\n(defn toggle-theme!\n  []\n  (use-theme-mode! (toggle-theme (:ui/theme @state))))\n\n(defn set-custom-theme!\n  ([custom-theme]\n   (set-custom-theme! nil custom-theme))\n  ([mode theme]\n   (set-state! (if mode [:ui/custom-theme (keyword mode)] :ui/custom-theme) theme)\n   (storage/set :ui/custom-theme (:ui/custom-theme @state))))\n\n(defn set-editing-block-dom-id!\n  [block-dom-id]\n  (set-state! :editor/block-dom-id block-dom-id))\n\n(defn get-editing-block-dom-id\n  []\n  (:editor/block-dom-id @state))\n\n(defn set-root-component!\n  [component]\n  (set-state! :ui/root-component component))\n\n(defn get-root-component\n  []\n  (get @state :ui/root-component))\n\n(defn load-app-user-cfgs\n  ([] (load-app-user-cfgs false))\n  ([refresh?]\n   (p/let [cfgs (if (or refresh? (nil? (:electron/user-cfgs @state)))\n                  (ipc/ipc \"userAppCfgs\")\n                  (:electron/user-cfgs @state))\n           cfgs (if (object? cfgs) (bean/->clj cfgs) cfgs)]\n          (set-state! :electron/user-cfgs cfgs))))\n\n(defn setup-electron-updater!\n  []\n  (when (util/electron?)\n    (js/window.apis.setUpdatesCallback\n      (fn [_ args]\n        (let [data (bean/->clj args)\n              pending? (not= (:type data) \"completed\")]\n          (set-state! :electron/updater-pending? pending?)\n          (when pending? (set-state! :electron/updater data))\n          nil)))))\n\n(defn set-file-component!\n  [component]\n  (set-state! :ui/file-component component))\n\n(defn clear-file-component!\n  []\n  (set-state! :ui/file-component nil))\n\n(defn get-file-component\n  []\n  (get @state :ui/file-component))\n\n(defn set-journals-length!\n  [value]\n  (when value\n    (set-state! :journals-length value)))\n\n(defn add-custom-query-component!\n  [query-string component]\n  (update-state! :ui/custom-query-components\n                 (fn [m]\n                   (assoc m query-string component))))\n\n(defn remove-custom-query-component!\n  [query-string]\n  (update-state! :ui/custom-query-components\n                 (fn [m]\n                   (dissoc m query-string))))\n\n(defn get-custom-query-components\n  []\n  (vals (get @state :ui/custom-query-components)))\n\n(defn save-scroll-position!\n  ([value]\n   (save-scroll-position! value js/window.location.hash))\n  ([value path]\n   (set-state! [:ui/paths-scroll-positions path] value)))\n\n(defn get-saved-scroll-position\n  ([]\n   (get-saved-scroll-position js/window.location.hash))\n  ([path]\n   (get-in @state [:ui/paths-scroll-positions path] 0)))\n\n(defn set-today!\n  [value]\n  (set-state! :today value))\n\n(defn get-date-formatter\n  []\n  (or\n    (when-let [repo (get-current-repo)]\n      (or\n        (get-in @state [:config repo :journal/page-title-format])\n        ;; for compatibility\n        (get-in @state [:config repo :date-formatter])))\n    ;; TODO:\n    (get-in @state [:me :settings :date-formatter])\n    \"MMM do, yyyy\"))\n\n(defn shortcuts []\n  (get-in @state [:config (get-current-repo) :shortcuts]))\n\n(defn get-me\n  []\n  (:me @state))\n\n(defn deprecated-logged?\n  \"Whether the user has logged in.\"\n  []\n  false)\n\n(defn set-db-restoring!\n  [value]\n  (set-state! :db/restoring? value))\n\n(defn set-indexedb-support!\n  [value]\n  (set-state! :indexeddb/support? value))\n\n(defn modal-opened?\n  []\n  (:modal/show? @state))\n\n(declare set-modal!)\n(declare close-modal!)\n\n(defn get-sub-modals\n  []\n  (:modal/subsets @state))\n\n(defn set-sub-modal!\n  ([panel-content]\n   (set-sub-modal! panel-content\n                   {:close-btn? true}))\n  ([panel-content {:keys [id label close-btn? show? center?] :as opts}]\n   (if (not (modal-opened?))\n     (set-modal! panel-content opts)\n     (let [modals (:modal/subsets @state)\n           idx (and id (first (keep-indexed #(when (= (:modal/id %2) id) %1)\n                                            modals)))\n           input (medley/filter-vals\n                   #(not (nil? %1))\n                   {:modal/id            id\n                    :modal/label         (or label (if center? \"ls-modal-align-center\" \"\"))\n                    :modal/show?         (if (boolean? show?) show? true)\n                    :modal/panel-content panel-content\n                    :modal/close-btn?    close-btn?})]\n       (swap! state update-in\n              [:modal/subsets (or idx (count modals))]\n              merge input)\n       (:modal/subsets @state)))))\n\n(defn close-sub-modal!\n  ([] (close-sub-modal! nil))\n  ([all?-a-id]\n   (if (true? all?-a-id)\n     (swap! state assoc :modal/subsets [])\n     (let [id     all?-a-id\n           mid    (:modal/id @state)\n           modals (:modal/subsets @state)]\n       (if (and id (not (string/blank? mid)) (= id mid))\n         (close-modal!)\n         (when-let [idx (if id (first (keep-indexed #(when (= (:modal/id %2) id) %1) modals))\n                          (dec (count modals)))]\n           (swap! state assoc :modal/subsets (into [] (medley/remove-nth idx modals)))))))\n   (:modal/subsets @state)))\n\n(defn set-modal!\n  ([modal-panel-content]\n   (set-modal! modal-panel-content\n               {:fullscreen? false\n                :close-btn?  true}))\n  ([modal-panel-content {:keys [id label fullscreen? close-btn? center?]}]\n   (when (seq (get-sub-modals))\n     (close-sub-modal! true))\n   (swap! state assoc\n          :modal/id id\n          :modal/label (or label (if center? \"ls-modal-align-center\" \"\"))\n          :modal/show? (boolean modal-panel-content)\n          :modal/panel-content modal-panel-content\n          :modal/fullscreen? fullscreen?\n          :modal/close-btn? close-btn?)))\n\n(defn close-modal!\n  []\n  (if (seq (get-sub-modals))\n    (close-sub-modal!)\n    (swap! state assoc\n           :modal/id nil\n           :modal/label \"\"\n           :modal/show? false\n           :modal/fullscreen? false\n           :modal/panel-content nil\n           :ui/open-select nil)))\n\n(defn get-db-batch-txs-chan\n  []\n  (:db/batch-txs @state))\n\n(defn get-file-write-chan\n  []\n  (:file/writes @state))\n\n(defn get-reactive-custom-queries-chan\n  []\n  (:reactive/custom-queries @state))\n\n(defn get-write-chan-length\n  []\n  (let [c (get-file-write-chan)]\n    (count (gobj/get c \"buf\"))))\n\n(defn get-left-sidebar-open?\n  []\n  (get-in @state [:ui/left-sidebar-open?]))\n\n(defn set-left-sidebar-open!\n  [value]\n  (storage/set \"ls-left-sidebar-open?\" (boolean value))\n  (set-state! :ui/left-sidebar-open? value))\n\n(defn toggle-left-sidebar!\n  []\n  (set-left-sidebar-open!\n    (not (get-left-sidebar-open?))))\n\n(defn set-developer-mode!\n  [value]\n  (set-state! :ui/developer-mode? value)\n  (storage/set \"developer-mode\" (str value)))\n\n(defn developer-mode?\n  []\n  (:ui/developer-mode? @state))\n\n(defn get-notification-contents\n  []\n  (get @state :notification/contents))\n\n(defn document-mode?\n  []\n  (get @state :document/mode?))\n\n(defn doc-mode-enter-for-new-line?\n  []\n  (and (document-mode?)\n       (not (:shortcut/doc-mode-enter-for-new-block? (sub-graph-config)))))\n\n(defn toggle-document-mode!\n  []\n  (let [mode (document-mode?)]\n    (set-state! :document/mode? (not mode))\n    (storage/set :document/mode? (not mode))))\n\n(defn shortcut-tooltip-enabled?\n  []\n  (get @state :ui/shortcut-tooltip?))\n\n(defn toggle-shortcut-tooltip!\n  []\n  (let [mode (shortcut-tooltip-enabled?)]\n    (set-state! :ui/shortcut-tooltip? (not mode))\n    (storage/set :ui/shortcut-tooltip? (not mode))))\n\n(defn mobile?\n  []\n  (or (util/mobile?) (mobile-util/native-platform?)))\n\n(defn enable-tooltip?\n  []\n  (if (mobile?)\n    false\n    (get (get (sub-config) (get-current-repo))\n         :ui/enable-tooltip?\n         true)))\n\n(defn show-command-doc?\n  []\n  (get (get (sub-config) (get-current-repo))\n       :ui/show-command-doc?\n       true))\n\n(defn set-config!\n  [repo-url value]\n  (set-state! [:config repo-url] value))\n\n(defn get-wide-mode?\n  []\n  (:ui/wide-mode? @state))\n\n(defn toggle-wide-mode!\n  []\n  (update-state! :ui/wide-mode? not))\n\n(defn set-online!\n  [value]\n  (set-state! :network/online? value))\n\n(defn get-commands\n  []\n  (:commands (get-config)))\n\n(defn get-plugins-commands\n  []\n  (mapcat seq (flatten (vals (:plugin/installed-slash-commands @state)))))\n\n(defn get-plugins-commands-with-type\n  [type]\n  (filterv #(= (keyword (first %)) (keyword type))\n           (apply concat (vals (:plugin/simple-commands @state)))))\n\n(defn get-plugins-ui-items-with-type\n  [type]\n  (filterv #(= (keyword (first %)) (keyword type))\n           (apply concat (vals (:plugin/installed-ui-items @state)))))\n\n(defn get-plugin-resources-with-type\n  [pid type]\n  (when-let [pid (and type (keyword pid))]\n    (get-in @state [:plugin/installed-resources pid (keyword type)])))\n\n(defn get-plugin-resource\n  [pid type key]\n  (when-let [resources (get-plugin-resources-with-type pid type)]\n    (get resources key)))\n\n(defn upt-plugin-resource\n  [pid type key attr val]\n  (when-let [resource (get-plugin-resource pid type key)]\n    (let [resource (assoc resource (keyword attr) val)]\n      (set-state!\n        [:plugin/installed-resources (keyword pid) (keyword type) key] resource)\n      resource)))\n\n(defn install-plugin-hook\n  [pid hook]\n  (when-let [pid (keyword pid)]\n    (set-state!\n      [:plugin/installed-hooks hook]\n      (conj\n        ((fnil identity #{}) (get-in @state [:plugin/installed-hooks hook]))\n        pid)) true))\n\n(defn uninstall-plugin-hook\n  [pid hook-or-all]\n  (when-let [pid (keyword pid)]\n    (if (nil? hook-or-all)\n      (swap! state update :plugin/installed-hooks #(update-vals % (fn [ids] (disj ids pid))))\n      (when-let [coll (get-in @state [:plugin/installed-hooks hook-or-all])]\n        (set-state! [:plugin/installed-hooks hook-or-all] (disj coll pid))))\n    true))\n\n\n(defn get-scheduled-future-days\n  []\n  (let [days (:scheduled/future-days (get-config))]\n    (or (when (int? days) days) 0)))\n\n(defn set-graph-syncing?\n  [value]\n  (set-state! :graph/syncing? value))\n\n(defn set-editor-in-composition!\n  [value]\n  (set-state! :editor/in-composition? value))\n\n(defn editor-in-composition?\n  []\n  (:editor/in-composition? @state))\n\n(defn set-loading-files!\n  [repo value]\n  (when repo\n    (set-state! [:repo/loading-files? repo] value)))\n\n(defn loading-files?\n  [repo]\n  (get-in @state [:repo/loading-files? repo]))\n\n(defn set-editor-last-input-time!\n  [repo time]\n  (swap! state assoc-in [:editor/last-input-time repo] time))\n\n(defn set-last-transact-time!\n  [repo time]\n  (swap! state assoc-in [:db/last-transact-time repo] time)\n\n  ;; THINK: new block, indent/outdent, drag && drop, etc.\n  (set-editor-last-input-time! repo time))\n\n(defn set-db-persisted!\n  [repo value]\n  (swap! state assoc-in [:db/persisted? repo] value))\n\n(defn db-idle?\n  [repo]\n  (when repo\n    (when-let [last-time (get-in @state [:db/last-transact-time repo])]\n      (let [now (util/time-ms)]\n        (>= (- now last-time) 3000)))))\n\n(defn input-idle?\n  [repo]\n  (when repo\n    (or\n      (when-let [last-time (get-in @state [:editor/last-input-time repo])]\n        (let [now (util/time-ms)]\n          (>= (- now last-time) 500)))\n      ;; not in editing mode\n      (not (get-edit-input-id)))))\n\n(defn set-nfs-refreshing!\n  [value]\n  (set-state! :nfs/refreshing? value))\n\n(defn nfs-refreshing?\n  []\n  (:nfs/refreshing? @state))\n\n(defn set-search-result!\n  [value]\n  (set-state! :search/result value))\n\n(defn clear-search-result!\n  []\n  (set-search-result! nil))\n\n(defn add-graph-search-filter!\n  [q]\n  (when-not (string/blank? q)\n    (update-state! :search/graph-filters\n                   (fn [value]\n                     (vec (distinct (conj value q)))))))\n\n(defn remove-search-filter!\n  [q]\n  (when-not (string/blank? q)\n    (update-state! :search/graph-filters\n                   (fn [value]\n                     (remove #{q} value)))))\n\n(defn clear-search-filters!\n  []\n  (set-state! :search/graph-filters []))\n\n(defn get-search-mode\n  []\n  (:search/mode @state))\n\n(defn toggle!\n  [path]\n  (update-state! path not))\n\n(defn toggle-settings!\n  []\n  (toggle! :ui/settings-open?))\n\n(defn settings-open?\n  []\n  (:ui/settings-open? @state))\n\n(defn close-settings!\n  []\n  (set-state! :ui/settings-open? false))\n\n(defn open-settings!\n  []\n  (set-state! :ui/settings-open? true))\n\n;; TODO: Move those to the uni `state`\n\n(defonce editor-op (atom nil))\n(defn set-editor-op!\n  [value]\n  (reset! editor-op value))\n(defn get-editor-op\n  []\n  @editor-op)\n\n(defn get-start-of-week\n  []\n  (or\n    (when-let [repo (get-current-repo)]\n      (get-in @state [:config repo :start-of-week]))\n    (get-in @state [:me :settings :start-of-week])\n    6))\n\n(defn get-ref-open-blocks-level\n  []\n  (or\n    (when-let [value (:ref/default-open-blocks-level (get-config))]\n      (when (integer? value)\n        value))\n    2))\n\n(defn get-linked-references-collapsed-threshold\n  []\n  (or\n    (when-let [value (:ref/linked-references-collapsed-threshold (get-config))]\n      (when (integer? value)\n        value))\n    100))\n\n(defn get-events-chan\n  []\n  (:system/events @state))\n\n(defn pub-event!\n  [payload]\n  (let [chan (get-events-chan)]\n    (async/put! chan payload)))\n\n(defn get-copied-blocks\n  []\n  (:copy/blocks @state))\n\n(defn set-copied-blocks\n  [content ids]\n  (set-state! :copy/blocks {:copy/graph (get-current-repo)\n                            :copy/content content\n                            :copy/block-ids ids\n                            :copy/full-blocks nil}))\n\n(defn set-copied-full-blocks\n  [content blocks]\n  (set-state! :copy/blocks {:copy/graph (get-current-repo)\n                            :copy/content content\n                            :copy/full-blocks blocks}))\n\n(defn set-copied-full-blocks!\n  [blocks]\n  (set-state! [:copy/blocks :copy/full-blocks] blocks))\n\n(defn get-export-block-text-indent-style []\n  (:copy/export-block-text-indent-style @state))\n\n(defn set-export-block-text-indent-style!\n  [v]\n  (set-state! :copy/export-block-text-indent-style v)\n  (storage/set :copy/export-block-text-indent-style v))\n\n(defn get-export-block-text-remove-options []\n  (:copy/export-block-text-remove-options @state))\n\n(defn update-export-block-text-remove-options!\n  [e k]\n  (let [f (if (util/echecked? e) conj disj)]\n    (update-state! :copy/export-block-text-remove-options\n                   #(f % k))\n    (storage/set :copy/export-block-text-remove-options\n                 (get-export-block-text-remove-options))))\n\n(defn set-editor-args!\n  [args]\n  (set-state! :editor/args args))\n\n(defn block-component-editing?\n  []\n  (:block/component-editing-mode? @state))\n\n(defn set-block-component-editing-mode!\n  [value]\n  (set-state! :block/component-editing-mode? value))\n\n(defn logical-outdenting?\n  []\n  (:editor/logical-outdenting?\n    (get (sub-config) (get-current-repo))))\n\n(defn get-editor-args\n  []\n  (:editor/args @state))\n\n(defn get-export-bullet-indentation\n  []\n  (case (get (get-config) :export/bullet-indentation :tab)\n    :eight-spaces\n    \"        \"\n    :four-spaces\n    \"    \"\n    :two-spaces\n    \"  \"\n    :tab\n    \"\\t\"))\n\n(defn set-page-blocks-cp!\n  [value]\n  (set-state! [:view/components :page-blocks] value))\n\n(defn get-page-blocks-cp\n  []\n  (get-in @state [:view/components :page-blocks]))\n\n;; To avoid circular dependencies\n(defn set-component!\n  [k value]\n  (set-state! [:view/components k] value))\n\n(defn get-component\n  [k]\n  (get-in @state [:view/components k]))\n\n(defn exit-editing-and-set-selected-blocks!\n  ([blocks]\n   (exit-editing-and-set-selected-blocks! blocks :down))\n  ([blocks direction]\n   (clear-edit!)\n   (set-selection-blocks! blocks direction)))\n\n(defn remove-watch-state [key]\n  (remove-watch state key))\n\n(defn get-git-auto-commit-enabled?\n  []\n  (false? (sub [:electron/user-cfgs :git/disable-auto-commit?])))\n\n(defn set-last-key-code!\n  [key-code]\n  (set-state! :editor/last-key-code key-code))\n\n(defn get-last-key-code\n  []\n  (:editor/last-key-code @state))\n\n(defn get-plugin-by-id\n  [id]\n  (when-let [id (and id (keyword id))]\n    (get-in @state [:plugin/installed-plugins id])))\n\n(defn get-enabled?-installed-plugins\n  ([theme?] (get-enabled?-installed-plugins theme? true false))\n  ([theme? enabled? include-unpacked?]\n   (filterv\n     #(and (if include-unpacked? true (:iir %))\n           (if-not (boolean? enabled?) true (= (not enabled?) (boolean (get-in % [:settings :disabled]))))\n           (= (boolean theme?) (:theme %)))\n     (vals (:plugin/installed-plugins @state)))))\n\n(defn lsp-enabled?-or-theme\n  []\n  (:plugin/enabled @state))\n\n(def lsp-enabled?\n  (lsp-enabled?-or-theme))\n\n(defn consume-updates-coming-plugin\n  [payload updated?]\n  (when-let [id (keyword (:id payload))]\n    (let [pending? (boolean (seq (:plugin/updates-pending @state)))]\n      (swap! state update :plugin/updates-pending dissoc id)\n      (if updated?\n        (if-let [error (:error-code payload)]\n          (swap! state update-in [:plugin/updates-coming id] assoc :error-code error)\n          (swap! state update :plugin/updates-coming dissoc id))\n        (swap! state update :plugin/updates-coming assoc id payload))\n      (pub-event! [:plugin/consume-updates id pending? updated?]))))\n\n(defn coming-update-new-version?\n  [pkg]\n  (and pkg (:latest-version pkg)))\n\n(defn plugin-update-available?\n  [id]\n  (when-let [pkg (and id (get (:plugin/updates-coming @state) (keyword id)))]\n    (coming-update-new-version? pkg)))\n\n(defn all-available-coming-updates\n  []\n  (when-let [updates (vals (:plugin/updates-coming @state))]\n    (filterv #(coming-update-new-version? %) updates)))\n\n(defn get-next-selected-coming-update\n  []\n  (when-let [updates (all-available-coming-updates)]\n    (let [unchecked (:plugin/updates-unchecked @state)]\n      (first (filter #(and (not (and (seq unchecked) (contains? unchecked (:id %))))\n                           (not (:error-code %))) updates)))))\n\n(defn set-unchecked-update\n  [id unchecked?]\n  (swap! state update :plugin/updates-unchecked (if unchecked? conj disj) id))\n\n(defn reset-unchecked-update\n  []\n  (swap! state assoc :plugin/updates-unchecked #{}))\n\n(defn reset-all-updates-state\n  []\n  (swap! state assoc\n         :plugin/updates-pending                {}\n         :plugin/updates-coming                 {}\n         :plugin/updates-downloading?           false))\n\n(defn sub-right-sidebar-blocks\n  []\n  (when-let [current-repo (get-current-repo)]\n    (->> (sub :sidebar/blocks)\n         (filter #(= (first %) current-repo)))))\n\n\n(defn toggle-collapsed-block!\n  [block-id]\n  (let [current-repo (get-current-repo)]\n    (update-state! [:ui/collapsed-blocks current-repo block-id] not)))\n\n(defn set-collapsed-block!\n  [block-id value]\n  (let [current-repo (get-current-repo)]\n    (set-state! [:ui/collapsed-blocks current-repo block-id] value)))\n\n(defn sub-collapsed\n  [block-id]\n  (sub [:ui/collapsed-blocks (get-current-repo) block-id]))\n\n(defn get-modal-id\n  []\n  (:modal/id @state))\n\n(defn edit-in-query-component\n  []\n  (and (editing?)\n       ;; config\n       (:custom-query? (last (get-editor-args)))))\n\n(defn set-auth-id-token\n  [id-token]\n  (set-state! :auth/id-token id-token))\n\n(defn set-auth-refresh-token\n  [refresh-token]\n  (set-state! :auth/refresh-token refresh-token))\n\n(defn set-auth-access-token\n  [access-token]\n  (set-state! :auth/access-token access-token))\n\n(defn get-auth-id-token []\n  (:auth/id-token @state))\n\n(defn get-auth-refresh-token []\n  (:auth/refresh-token @state))\n\n(defn set-file-sync-manager [v]\n  (set-state! :file-sync/sync-manager v))\n(defn set-file-sync-state [v]\n  (when v (s/assert :frontend.fs.sync/sync-state v))\n  (set-state! :file-sync/sync-state v))\n\n(defn get-file-sync-manager []\n  (:file-sync/sync-manager @state))\n\n(defn get-file-sync-state []\n  (:file-sync/sync-state @state))\n\n(defn reset-file-sync-download-init-state!\n  []\n  (set-state! [:file-sync/download-init-progress (get-current-repo)] {}))\n\n(defn set-file-sync-download-init-state!\n  [m]\n  (update-state! [:file-sync/download-init-progress (get-current-repo)]\n                 (if (fn? m) m\n                     (fn [old-value] (merge old-value m)))))\n\n(defn get-file-sync-download-init-state\n  []\n  (get-in @state [:file-sync/download-init-progress (get-current-repo)]))\n\n(defn reset-parsing-state!\n  []\n  (set-state! [:graph/parsing-state (get-current-repo)] {}))\n\n(defn set-parsing-state!\n  [m]\n  (update-state! [:graph/parsing-state (get-current-repo)]\n                 (if (fn? m) m\n                   (fn [old-value] (merge old-value m)))))\n\n(defn enable-encryption?\n  [repo]\n  (:feature/enable-encryption?\n   (get (sub-config) repo)))\n"]}