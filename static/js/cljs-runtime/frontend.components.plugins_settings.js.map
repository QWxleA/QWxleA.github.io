{"version":3,"sources":["frontend/components/plugins_settings.cljs"],"mappings":"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","names":["rum.core/lazy-build","rum.core/build-defc","p__68035","map__68036","cljs.core/--destructure-map","cljs.core.get","daiquiri.core/create-element","daiquiri.util/join-classes","frontend.components.plugins-settings/edit-settings-file","pid","class","frontend.handler.plugin/open-settings-file-in-default-app!","p__68045","map__68047","attrs68049","cljs.core/map?","daiquiri.interpreter/element-attributes","daiquiri.interpreter/interpret","attrs68052","attrs68053","daiquiri.normalize.merge_with_class","rum.core/mark-sync-update","frontend.components.plugins-settings/render-item-input","val","key","type","title","default","description","inputAs","update-setting!","frontend.ui.icon","input-as","frontend.util/safe-lower-case","or__4253__auto__","cljs.core/name","cljs.core._EQ_","cljs.core.keyword","frontend.util/classnames","cljs.core/contains?","p1__68042#","goog.functions/debounce","G__68056","G__68057","frontend.util/evalue","p__68083","map__68084","attrs68126","attrs68127","attrs68112","attrs68122","attrs68125","frontend.components.plugins-settings/render-item-toggle","cljs.core/boolean?","cljs.core/boolean","frontend.ui/checkbox","G__68133","G__68134","p__68148","map__68149","attrs68162","attrs68168","attrs68174","frontend.components.plugins-settings/render-item-enum","enumChoices","enumPicker","vals","cljs.core.into","cljs.core/sequential?","options","cljs.core.map","v","picker","G__68188","cljs.core/Keyword","p1__68142#","frontend.ui/radio-list","p1__68143#","frontend.ui/checkbox-list","p1__68144#","frontend.ui/select","p__68196","map__68197","attrs68203","attrs68205","attrs68210","frontend.components.plugins-settings/render-item-object","_val","_default","vec__68216","cljs.core.nth","cljs.core.into_array","iter__4652__auto__","s__68238","cljs.core/LazySeq","temp__5720__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","cljs.core/count","b__68240","cljs.core/chunk-buffer","i__68239","cljs.core/-nth","cljs.core/chunk-append","pred__68245","expr__68246","G__68249","G__68250","G__68252","G__68253","G__68258","G__68259","G__68261","G__68262","cljs.core/chunk-cons","cljs.core/chunk","iter__68237","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","pred__68265","expr__68266","G__68268","G__68269","G__68272","G__68273","G__68274","G__68275","G__68277","G__68278","cljs.core/rest","frontend.components.plugins-settings/settings-container","schema","pl","_settings","settings","set-settings","rum.core/use-state","cljs-bean.core/->clj","k","cljs-bean.core/->js","rum.core.use_effect_BANG_","on-change","s","desc","cljs.core/chunk-first"],"sourcesContent":["(ns frontend.components.plugins-settings\n  (:require [rum.core :as rum]\n            [frontend.util :as util]\n            [frontend.ui :as ui]\n            [frontend.handler.plugin :as plugin-handler]\n            [cljs-bean.core :as bean]\n            [goog.functions :refer [debounce]]))\n\n(rum/defc edit-settings-file\n  [pid {:keys [class]}]\n  [:a.text-sm.hover:underline\n   {:class    class\n    :on-click #(plugin-handler/open-settings-file-in-default-app! pid)}\n   \"Edit settings.json\"])\n\n(rum/defc render-item-input\n  [val {:keys [key type title default description inputAs]} update-setting!]\n\n  [:div.desc-item.as-input\n   [:h2 [:code key] (ui/icon \"caret-right\") [:strong title]]\n\n   [:label.form-control\n    [:small.pl-1.flex-1 description]\n\n    (let [input-as (util/safe-lower-case (or inputAs (name type)))\n          input-as (if (= input-as \"string\") :text (keyword input-as))]\n      [:input\n       {:class        (util/classnames [{:form-input (not (contains? #{:color :range} input-as))}])\n        :type         (name input-as)\n        :defaultValue (or val default)\n        :on-change    (debounce #(update-setting! key (util/evalue %)) 1000)}])]])\n\n(rum/defc render-item-toggle\n  [val {:keys [key title description default]} update-setting!]\n\n  (let [val (if (boolean? val) val (boolean default))]\n    [:div.desc-item.as-toggle\n     [:h2 [:code key] (ui/icon \"caret-right\") [:strong title]]\n\n     [:label.form-control\n      (ui/checkbox {:checked   val\n                    :on-change #(update-setting! key (not val))})\n      [:small.pl-1.flex-1 description]]]))\n\n(rum/defc render-item-enum\n  [val {:keys [key title description default enumChoices enumPicker]} update-setting!]\n\n  (let [val (or val default)\n        vals (into #{} (if (sequential? val) val [val]))\n        options (map (fn [v] {:label    v :value v\n                              :selected (contains? vals v)}) enumChoices)\n        picker (keyword enumPicker)]\n    [:div.desc-item.as-enum\n     [:h2 [:code key] (ui/icon \"caret-right\") [:strong title]]\n\n     [:div.form-control\n      [(if (contains? #{:radio :checkbox} picker) :div.wrap :label.wrap)\n       [:small.pl-1 description]\n\n       (case picker\n         :radio (ui/radio-list options #(update-setting! key %) nil)\n         :checkbox (ui/checkbox-list options #(update-setting! key %) nil)\n         ;; select\n         (ui/select options #(update-setting! key %) nil))\n       ]]]))\n\n(rum/defc render-item-object\n  [_val {:keys [key title description _default]} pid]\n\n  [:div.desc-item.as-object\n   [:h2 [:code key] (ui/icon \"caret-right\") [:strong title]]\n\n   [:div.form-control\n    [:small.pl-1.flex-1 description]\n    [:div.pl-1 (edit-settings-file pid nil)]]])\n\n(rum/defc settings-container\n  [schema ^js pl]\n  (let [^js _settings (.-settings pl)\n        pid (.-id pl)\n        [settings, set-settings] (rum/use-state (bean/->clj (.toJSON _settings)))\n        update-setting! (fn [k v] (.set _settings (name k) (bean/->js v)))]\n\n    (rum/use-effect!\n      (fn []\n        (let [on-change (fn [^js s]\n                          (when-let [s (bean/->clj s)]\n                            (set-settings s)))]\n          (.on _settings \"change\" on-change)\n          #(.off _settings \"change\" on-change)))\n      [pid])\n\n    (if (seq schema)\n      [:div.cp__plugins-settings-inner\n       ;; settings.json\n       [:span.edit-file\n        (edit-settings-file pid nil)]\n\n       ;; render items\n       (for [desc schema\n             :let [key (:key desc)\n                   val (get settings (keyword key))\n                   type (keyword (:type desc))]]\n\n         (condp contains? type\n           #{:string :number} (render-item-input val desc update-setting!)\n           #{:boolean} (render-item-toggle val desc update-setting!)\n           #{:enum} (render-item-enum val desc update-setting!)\n           #{:object} (render-item-object val desc pid)\n\n           [:p (str \"#Not Handled#\" key)]))]\n\n      ;; no settings\n      [:h2.font-bold.text-lg.py-4.warning \"No Settings Schema!\"])))"]}