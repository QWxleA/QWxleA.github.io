{"version":3,"sources":["frontend/format.cljs"],"mappings":";AAWA,CAAMA,2CAAwBC;AAE9B,GAAA,QAAAC,qCAAAC,4CAAAC;AAAA;AAAA,AAAA,AAASC,+BAAa,AAACC;;AACvB,GAAA,QAAAJ,qCAAAC,4CAAAI;AAAA;AAAA,AAAA,AAASC,8BAAY,AAACC;;AAEtB,oCAAA,pCAAMC,gFACHC;AADH,AAEE,IAAAC,WAAM,AAACE,0CAAyBH;IAAhCC,eAAA,EAAA,CAAAA,oBAAAC,oBAAA,AAAAD,aAAA;AAAA,AAAA,QAAAA;KAAA;AAEEP;;;KAFF;AAIEA;;;KAJF;AAMEG;;;;AANF;;;;AAUF,AAAA,qCAAA,6CAAAO,lFAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,iEAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,iEAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,mEAAA,nEAAMD,8EACFN;AADJ,AAEG,OAACQ,uEAAwBR;;;AAF5B,CAAA,mEAAA,nEAAMM,8EAGFN,OAAOS;AAHX,AAIG,OAACD,uEAAwBR,OAAOS;;;AAJnC,CAAA,6DAAA,7DAAMH;;AAAN,AAMA,AAAA,0BAAA,kCAAAF,5DAAMO;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,sDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,sDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAJ,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,wDAAA,xDAAMI,mEACFC,QAAQZ;AADZ,AAEG,OAACa,sDAAQD,QAAQZ,OAAO,AAACc,iEAAmBd;;;AAF/C,CAAA,wDAAA,xDAAMW,mEAGFC,QAAQZ,OAAOe;AAHnB,AAIG,IAAMA,aAAO,kBAAIA,QAAOA,OAAO,AAACD,iEAAmBd;AAAnD,AACE,GAAI,AAACgB,4BAAcJ;AAAnB;;AAEE,IAAAK,qBAAgB,AAAClB,kCAAkBC;AAAnC,AAAA,oBAAAiB;AAAA,aAAAA,TAASC;AAAT,AACE,OAACC,gCAAgBD,OAAON,QAAQG,WAAOK;;AACvCR;;;;;AATT,CAAA,kDAAA,lDAAMD;;AAAN,AAWA,AAAA,yBAAA,iCAAAP,1DAAMkB;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,qDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,qDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAf,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,uDAAA,vDAAMe,kEACFV,QAAQZ;AADZ,AAEG,OAACuB,qDAAOX,QAAQZ,OAAO,AAACc,iEAAmBd;;;AAF9C,CAAA,uDAAA,vDAAMsB,kEAGFV,QAAQZ,OAAOe;AAHnB,AAIG,IAAMA,aAAO,iBAAAS,mBAAIT;AAAJ,AAAA,oBAAAS;AAAAA;;AAAW,OAACV,iEAAmBd;;;AAA5C,AACE,IAAAiB,qBAAgB,AAAClB,kCAAkBC;AAAnC,AAAA,oBAAAiB;AAAA,aAAAA,TAASC;AAAT,AACE,OAACO,+BAAeP,OAAON,QAAQG;;AADjC;;;;AALL,CAAA,iDAAA,jDAAMO;;AAAN,AASA,gCAAA,hCAAMI,wEACH1B;AADH,AAEE,IAAA2B,qBAAkB,AAAC5B,kCAAkBC;AAArC,AAAA,oBAAA2B;AAAA,AAAA,aAAAA,TAAWT;AAAX,AACE,OAACU,uCAAiBV;;AADpB","names":["logseq.graph-parser.mldoc/parse-property","logseq.graph-parser.text/parse-property","js/frontend","js/frontend.format","js/frontend.format.mldoc-record","frontend.format/mldoc-record","frontend.format.mldoc/->MldocMode","js/frontend.format.adoc-record","frontend.format/adoc-record","frontend.format.adoc/->AdocMode","frontend.format/get-format-record","format","G__48924","cljs.core/Keyword","logseq.graph-parser.util/normalize-format","var_args","G__48926","frontend.format/get-default-config","js/Error","logseq.graph_parser.mldoc.default_config","options","G__48929","frontend.format/to-html","content","frontend.format.to_html","frontend.format.get_default_config","config","clojure.string/blank?","temp__5718__auto__","record","frontend.format.protocol/toHtml","logseq.graph-parser.mldoc/default-references","G__48931","frontend.format/to-edn","frontend.format.to_edn","or__5043__auto__","frontend.format.protocol/toEdn","frontend.format/loaded?","temp__5720__auto__","frontend.format.protocol/loaded?"],"sourcesContent":["(ns frontend.format\n  (:require [frontend.format.mldoc :refer [->MldocMode] :as mldoc]\n            [frontend.format.adoc :refer [->AdocMode]]\n            [frontend.format.protocol :as protocol]\n            [logseq.graph-parser.mldoc :as gp-mldoc]\n            [logseq.graph-parser.text :as text]\n            [logseq.graph-parser.util :as gp-util]\n            [clojure.string :as string]))\n\n;; TODO: Properly fix this circular dependency:\n;; mldoc/->edn > text/parse-property > mldoc/link? ->mldoc/inline->edn + mldoc/default-config\n(set! gp-mldoc/parse-property text/parse-property)\n\n(defonce mldoc-record (->MldocMode))\n(defonce adoc-record (->AdocMode))\n\n(defn get-format-record\n  [format]\n  (case (gp-util/normalize-format format)\n    :org\n    mldoc-record\n    :markdown\n    mldoc-record\n    :adoc\n    adoc-record\n    nil))\n\n;; html\n(defn get-default-config\n  ([format]\n   (gp-mldoc/default-config format))\n  ([format options]\n   (gp-mldoc/default-config format options)))\n\n(defn to-html\n  ([content format]\n   (to-html content format (get-default-config format)))\n  ([content format config]\n   (let [config (if config config (get-default-config format))]\n     (if (string/blank? content)\n       \"\"\n       (if-let [record (get-format-record format)]\n         (protocol/toHtml record content config gp-mldoc/default-references)\n         content)))))\n\n(defn to-edn\n  ([content format]\n   (to-edn content format (get-default-config format)))\n  ([content format config]\n   (let [config (or config (get-default-config format))]\n     (if-let [record (get-format-record format)]\n       (protocol/toEdn record content config)\n       nil))))\n\n(defn loaded?\n  [format]\n  (when-let [record (get-format-record format)]\n    (protocol/loaded? record)))\n"]}