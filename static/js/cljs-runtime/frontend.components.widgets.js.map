{"version":3,"sources":["frontend/components/widgets.cljs"],"mappings":"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","names":["rum.core/lazy-build","rum.core/build-defc","daiquiri.core/create-element","attrs52102","cljs.core/map?","daiquiri.interpreter/element-attributes","daiquiri.normalize.merge_with_class","daiquiri.interpreter/interpret","attrs52103","attrs52131","attrs52133","attrs52134","attrs52135","attrs52139","attrs52140","attrs52141","attrs52147","attrs52148","attrs52150","attrs52152","attrs52153","attrs52154","frontend.components.widgets/add-local-directory","frontend.context.i18n.t","nfs-supported?","or__5043__auto__","frontend.handler.web.nfs/supported?","frontend.mobile.util/native-platform?","frontend.ui.button","frontend.handler.page/ls-dir-files!","frontend.modules.shortcut.core/refresh!","frontend.mobile.util/native-android?","frontend.ui/admonition","attrs52163","frontend.components.widgets/android-permission-alert","rum.core/build-defcs","p__52177","map__52178","cljs.core/--destructure-map","cljs.core.get","attrs52176","frontend.components.widgets/add-graph","state","graph-types","generate-f","x","G__52180","cljs.core/Keyword","rum.core/with-key","available-graph","cljs.core/set","cljs.core.keep","cljs.core/vec","cljs.core.interpose","frontend.components.widgets/demo-graph-alert","and__5041__auto__","frontend.config.demo_graph_QMARK_","frontend.config/publishing?"],"sourcesContent":["(ns frontend.components.widgets\n  (:require [frontend.context.i18n :refer [t]]\n            [frontend.handler.page :as page-handler]\n            [frontend.handler.web.nfs :as nfs]\n            [frontend.modules.shortcut.core :as shortcut]\n            [frontend.ui :as ui]\n            [rum.core :as rum]\n            [frontend.config :as config]\n            [frontend.mobile.util :as mobile-util]))\n\n(rum/defc add-local-directory\n  []\n  [:div.flex.flex-col\n   [:h1.title (t :on-boarding/add-graph)]\n   (let [nfs-supported? (or (nfs/supported?) (mobile-util/native-platform?))]\n     (if (mobile-util/native-platform?)\n       [:div.text-sm\n        (ui/button \"Open a local directory\"\n          :on-click #(page-handler/ls-dir-files! shortcut/refresh!))\n        [:hr]\n        [:ol\n         [:li\n          [:div.font-bold.mb-2 \"How to sync my notes?\"]\n          (if (mobile-util/native-android?)\n            [:div\n             [:p \"We're developing our built-in paid Logseq Sync, but you can use any third-party sync service to keep your notes sync with other devices.\"]\n             [:p \"If you prefer to use Dropbox to sync your notes, you can use \"\n              [:a {:href \"https://play.google.com/store/apps/details?id=com.ttxapps.dropsync\"\n                   :target \"_blank\"}\n               \"Dropsync\"]\n              \". Or you can use \"\n              [:a {:href \"https://play.google.com/store/apps/details?id=dk.tacit.android.foldersync.lite\"\n                   :target \"_blank\"}\n               \"FolderSync\"]\n              \".\"]]\n            [:div\n             [:p \"You can sync your graphs by using iCloud. Please choose an existing graph or create a new graph in your iCloud Drive's Logseq directory.\"]\n             [:p \"We're developing our built-in paid Logseq Sync. Stay tuned.\"]])]\n\n         [:li.mt-8\n          [:div.font-bold.mb-2 \"I need some help\"]\n          [:p \"\ud83d\udc4b Join our discord group to chat with the makers and our helpful community members.\"]\n          (ui/button \"Join the community\"\n            :href \"https://discord.gg/KpN4eHY\"\n            :target \"_blank\")]]]\n       [:div.cp__widgets-open-local-directory\n        [:div.select-file-wrap.cursor\n         (when nfs-supported?\n           {:on-click #(page-handler/ls-dir-files! shortcut/refresh!)})\n         [:div\n          [:h1.title (t :on-boarding/open-local-dir)]\n          [:p (t :on-boarding/new-graph-desc-1)]\n          [:p (t :on-boarding/new-graph-desc-2)]\n          [:ul\n           [:li (t :on-boarding/new-graph-desc-3)]\n           [:li (t :on-boarding/new-graph-desc-4)]\n           [:li (t :on-boarding/new-graph-desc-5)]]\n          (when-not nfs-supported?\n            (ui/admonition :warning\n                           [:p \"It seems that your browser doesn't support the \"\n                            [:a {:href   \"https://web.dev/file-system-access/\"\n                                 :target \"_blank\"}\n                             \"new native filesystem API\"]\n                            [:span \", please use any Chromium 86+ based browser like Chrome, Vivaldi, Edge, etc. Notice that the API doesn't support mobile browsers at the moment.\"]]))]]]))])\n\n(rum/defc android-permission-alert\n  []\n  (when (mobile-util/native-android?)\n    [:div.flex.flex-col\n     [:h1.title \"Storage access permission\"]\n     [:div.text-sm\n      [:div\n       [:p \"Logseq needs the permission to access your device storage. Read \"\n        [:a {:href \"https://developer.android.com/about/versions/11/privacy/storage#all-files-access\"\n             :target \"_blank\"}\n         \"more\"]\n        \".\"]\n       [:div\n        (ui/button \"Grant Permission\"\n          :on-click #(page-handler/ls-dir-files! shortcut/refresh!))]\n       [:p.mb-1 \"Note:\"]\n       [:ol\n        [:li \"We will never access files outside of your graph folders you choose.\"]\n        [:li \"If you have granted the permission, you don't need to do it again.\"]]]\n      [:hr]]]))\n\n(rum/defcs add-graph <\n  [state & {:keys [graph-types]\n            :or {graph-types [:local]}}]\n  (let [generate-f (fn [x]\n                     (case x\n                       :local\n                       [(rum/with-key (android-permission-alert)\n                          \"android-permission-alert\")\n                        (rum/with-key (add-local-directory)\n                          \"add-local-directory\")]\n\n                       nil))\n        available-graph (->> (set graph-types)\n                             (keep generate-f)\n                             (vec)\n                             (interpose [:b.mt-10.mb-5.opacity-50 \"OR\"]))]\n    [:div.p-8.flex.flex-col available-graph]))\n\n(rum/defc demo-graph-alert\n  []\n  (when (and (config/demo-graph?)\n             (not config/publishing?))\n    (ui/admonition\n     :warning\n     [:p (t :on-boarding/demo-graph)])))\n"]}