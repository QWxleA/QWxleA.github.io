{"version":3,"sources":["frontend/handler/editor/keyboards.cljs"],"mappings":";AASA,mDAAA,nDAAMA,8GAAWC;AAAjB,AACE,IAAMC,KAAG,2IAAA,3IAACC,4CAAI,AAAA,wFAAWF;AAAzB,AACE,6IAAA,tIAACG,8EACAH,mHAEA,WAAKI,OAAOC,EAAEC;AAAd,AACE,IAAMC,SAAO,AAAUF;AAAvB,AACE,GAAI,mCAAA,nCAACG,4BAAaD;AAChB,OAAiBF;;AACjB,IAAAI,aAA8B,AAACK;IAA/BL,iBAAA,AAAAC,4BAAAD;cAAA,AAAAE,4CAAAF,eAAA,rEAAcG;YAAd,AAAAD,4CAAAF,eAAA,nEAAsBI;AAAtB,AACE,oBAAMD;AAAN,AACE,CAACA,wCAAAA,qDAAAA,fAAQC,iCAAAA,3BAAMP,iCAAAA;;AADjB;;AAEA,GAAM,0BAAA,iFAAA,mFAAA,yDAAA,vPAACS,kUAA2CT;AAAlD,AACE,OAACU;;AADH;;;GAVT,oDAYO,AAACC,oBAAgBhB","names":["frontend.handler.editor.keyboards/esc-save!","state","id","cljs.core.nth","frontend.mixins.hide_when_esc_or_outside","_state","e","event","target","dommy.core/has-class?","map__58780","cljs.core/--destructure-map","cljs.core.get","on-hide","value","frontend.handler.editor/get-state","cljs.core/contains?","frontend.state/clear-edit!","goog.dom/getElement"],"sourcesContent":["(ns frontend.handler.editor.keyboards\n  (:require [dommy.core :as d]\n            [frontend.handler.editor :as editor-handler]\n            [frontend.mixins :as mixins]\n            [frontend.state :as state]\n            [goog.dom :as gdom]))\n\n;; TODO: don't depend on handler.editor\n\n(defn esc-save! [state]\n  (let [id (nth (:rum/args state) 1)]\n    (mixins/hide-when-esc-or-outside\n     state\n     :on-hide\n     (fn [_state e event]\n       (let [target (.-target e)]\n         (if (d/has-class? target \"bottom-action\") ;; FIXME: not particular case\n           (.preventDefault e)\n           (let [{:keys [on-hide value]} (editor-handler/get-state)]\n             (when on-hide\n               (on-hide value event))\n             (when (contains? #{:esc :visibilitychange :click} event)\n               (state/clear-edit!))))))\n     :node (gdom/getElement id)\n    ;; :visibilitychange? true\n)))\n"]}