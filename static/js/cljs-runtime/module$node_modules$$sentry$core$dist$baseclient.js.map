{
"version":3,
"file":"module$node_modules$$sentry$core$dist$baseclient.js",
"lineCount":20,
"mappings":"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",
"sources":["node_modules/@sentry/core/dist/baseclient.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$core$dist$baseclient\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\n/* eslint-disable max-lines */\nvar hub_1 = require(\"@sentry/hub\");\nvar utils_1 = require(\"@sentry/utils\");\nvar integration_1 = require(\"./integration\");\nvar ALREADY_SEEN_ERROR = \"Not capturing exception because it's already been captured.\";\n/**\n * Base implementation for all JavaScript SDK clients.\n *\n * Call the constructor with the corresponding backend constructor and options\n * specific to the client subclass. To access these options later, use\n * {@link Client.getOptions}. Also, the Backend instance is available via\n * {@link Client.getBackend}.\n *\n * If a Dsn is specified in the options, it will be parsed and stored. Use\n * {@link Client.getDsn} to retrieve the Dsn at any moment. In case the Dsn is\n * invalid, the constructor will throw a {@link SentryException}. Note that\n * without a valid Dsn, the SDK will not send any events to Sentry.\n *\n * Before sending an event via the backend, it is passed through\n * {@link BaseClient._prepareEvent} to add SDK information and scope data\n * (breadcrumbs and context). To add more custom information, override this\n * method and extend the resulting prepared event.\n *\n * To issue automatically created events (e.g. via instrumentation), use\n * {@link Client.captureEvent}. It will prepare the event and pass it through\n * the callback lifecycle. To issue auto-breadcrumbs, use\n * {@link Client.addBreadcrumb}.\n *\n * @example\n * class NodeClient extends BaseClient<NodeBackend, NodeOptions> {\n *   public constructor(options: NodeOptions) {\n *     super(NodeBackend, options);\n *   }\n *\n *   // ...\n * }\n */\nvar BaseClient = /** @class */ (function () {\n    /**\n     * Initializes this client instance.\n     *\n     * @param backendClass A constructor function to create the backend.\n     * @param options Options for the client.\n     */\n    function BaseClient(backendClass, options) {\n        /** Array of used integrations. */\n        this._integrations = {};\n        /** Number of calls being processed */\n        this._numProcessing = 0;\n        this._backend = new backendClass(options);\n        this._options = options;\n        if (options.dsn) {\n            this._dsn = utils_1.makeDsn(options.dsn);\n        }\n    }\n    /**\n     * @inheritDoc\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n    BaseClient.prototype.captureException = function (exception, hint, scope) {\n        var _this = this;\n        // ensure we haven't captured this very object before\n        if (utils_1.checkOrSetAlreadyCaught(exception)) {\n            utils_1.logger.log(ALREADY_SEEN_ERROR);\n            return;\n        }\n        var eventId = hint && hint.event_id;\n        this._process(this._getBackend()\n            .eventFromException(exception, hint)\n            .then(function (event) { return _this._captureEvent(event, hint, scope); })\n            .then(function (result) {\n            eventId = result;\n        }));\n        return eventId;\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.captureMessage = function (message, level, hint, scope) {\n        var _this = this;\n        var eventId = hint && hint.event_id;\n        var promisedEvent = utils_1.isPrimitive(message)\n            ? this._getBackend().eventFromMessage(String(message), level, hint)\n            : this._getBackend().eventFromException(message, hint);\n        this._process(promisedEvent\n            .then(function (event) { return _this._captureEvent(event, hint, scope); })\n            .then(function (result) {\n            eventId = result;\n        }));\n        return eventId;\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.captureEvent = function (event, hint, scope) {\n        // ensure we haven't captured this very object before\n        if (hint && hint.originalException && utils_1.checkOrSetAlreadyCaught(hint.originalException)) {\n            utils_1.logger.log(ALREADY_SEEN_ERROR);\n            return;\n        }\n        var eventId = hint && hint.event_id;\n        this._process(this._captureEvent(event, hint, scope).then(function (result) {\n            eventId = result;\n        }));\n        return eventId;\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.captureSession = function (session) {\n        if (!this._isEnabled()) {\n            if (utils_1.isDebugBuild()) {\n                utils_1.logger.warn('SDK not enabled, will not capture session.');\n            }\n            return;\n        }\n        if (!(typeof session.release === 'string')) {\n            if (utils_1.isDebugBuild()) {\n                utils_1.logger.warn('Discarded session because of missing or non-string release');\n            }\n        }\n        else {\n            this._sendSession(session);\n            // After sending, we set init false to indicate it's not the first occurrence\n            session.update({ init: false });\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.getDsn = function () {\n        return this._dsn;\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.getOptions = function () {\n        return this._options;\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.getTransport = function () {\n        return this._getBackend().getTransport();\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.flush = function (timeout) {\n        var _this = this;\n        return this._isClientDoneProcessing(timeout).then(function (clientFinished) {\n            return _this.getTransport()\n                .close(timeout)\n                .then(function (transportFlushed) { return clientFinished && transportFlushed; });\n        });\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.close = function (timeout) {\n        var _this = this;\n        return this.flush(timeout).then(function (result) {\n            _this.getOptions().enabled = false;\n            return result;\n        });\n    };\n    /**\n     * Sets up the integrations\n     */\n    BaseClient.prototype.setupIntegrations = function () {\n        if (this._isEnabled() && !this._integrations.initialized) {\n            this._integrations = integration_1.setupIntegrations(this._options);\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseClient.prototype.getIntegration = function (integration) {\n        try {\n            return this._integrations[integration.id] || null;\n        }\n        catch (_oO) {\n            utils_1.logger.warn(\"Cannot retrieve integration \" + integration.id + \" from the current Client\");\n            return null;\n        }\n    };\n    /** Updates existing session based on the provided event */\n    BaseClient.prototype._updateSessionFromEvent = function (session, event) {\n        var e_1, _a;\n        var crashed = false;\n        var errored = false;\n        var exceptions = event.exception && event.exception.values;\n        if (exceptions) {\n            errored = true;\n            try {\n                for (var exceptions_1 = tslib_1.__values(exceptions), exceptions_1_1 = exceptions_1.next(); !exceptions_1_1.done; exceptions_1_1 = exceptions_1.next()) {\n                    var ex = exceptions_1_1.value;\n                    var mechanism = ex.mechanism;\n                    if (mechanism && mechanism.handled === false) {\n                        crashed = true;\n                        break;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (exceptions_1_1 && !exceptions_1_1.done && (_a = exceptions_1.return)) _a.call(exceptions_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        // A session is updated and that session update is sent in only one of the two following scenarios:\n        // 1. Session with non terminal status and 0 errors + an error occurred -> Will set error count to 1 and send update\n        // 2. Session with non terminal status and 1 error + a crash occurred -> Will set status crashed and send update\n        var sessionNonTerminal = session.status === 'ok';\n        var shouldUpdateAndSend = (sessionNonTerminal && session.errors === 0) || (sessionNonTerminal && crashed);\n        if (shouldUpdateAndSend) {\n            session.update(tslib_1.__assign(tslib_1.__assign({}, (crashed && { status: 'crashed' })), { errors: session.errors || Number(errored || crashed) }));\n            this.captureSession(session);\n        }\n    };\n    /** Deliver captured session to Sentry */\n    BaseClient.prototype._sendSession = function (session) {\n        this._getBackend().sendSession(session);\n    };\n    /**\n     * Determine if the client is finished processing. Returns a promise because it will wait `timeout` ms before saying\n     * \"no\" (resolving to `false`) in order to give the client a chance to potentially finish first.\n     *\n     * @param timeout The time, in ms, after which to resolve to `false` if the client is still busy. Passing `0` (or not\n     * passing anything) will make the promise wait as long as it takes for processing to finish before resolving to\n     * `true`.\n     * @returns A promise which will resolve to `true` if processing is already done or finishes before the timeout, and\n     * `false` otherwise\n     */\n    BaseClient.prototype._isClientDoneProcessing = function (timeout) {\n        var _this = this;\n        return new utils_1.SyncPromise(function (resolve) {\n            var ticked = 0;\n            var tick = 1;\n            var interval = setInterval(function () {\n                if (_this._numProcessing == 0) {\n                    clearInterval(interval);\n                    resolve(true);\n                }\n                else {\n                    ticked += tick;\n                    if (timeout && ticked >= timeout) {\n                        clearInterval(interval);\n                        resolve(false);\n                    }\n                }\n            }, tick);\n        });\n    };\n    /** Returns the current backend. */\n    BaseClient.prototype._getBackend = function () {\n        return this._backend;\n    };\n    /** Determines whether this SDK is enabled and a valid Dsn is present. */\n    BaseClient.prototype._isEnabled = function () {\n        return this.getOptions().enabled !== false && this._dsn !== undefined;\n    };\n    /**\n     * Adds common information to events.\n     *\n     * The information includes release and environment from `options`,\n     * breadcrumbs and context (extra, tags and user) from the scope.\n     *\n     * Information that is already present in the event is never overwritten. For\n     * nested objects, such as the context, keys are merged.\n     *\n     * @param event The original event.\n     * @param hint May contain additional information about the original exception.\n     * @param scope A scope containing event metadata.\n     * @returns A new event with more information.\n     */\n    BaseClient.prototype._prepareEvent = function (event, scope, hint) {\n        var _this = this;\n        var _a = this.getOptions().normalizeDepth, normalizeDepth = _a === void 0 ? 3 : _a;\n        var prepared = tslib_1.__assign(tslib_1.__assign({}, event), { event_id: event.event_id || (hint && hint.event_id ? hint.event_id : utils_1.uuid4()), timestamp: event.timestamp || utils_1.dateTimestampInSeconds() });\n        this._applyClientOptions(prepared);\n        this._applyIntegrationsMetadata(prepared);\n        // If we have scope given to us, use it as the base for further modifications.\n        // This allows us to prevent unnecessary copying of data if `captureContext` is not provided.\n        var finalScope = scope;\n        if (hint && hint.captureContext) {\n            finalScope = hub_1.Scope.clone(finalScope).update(hint.captureContext);\n        }\n        // We prepare the result here with a resolved Event.\n        var result = utils_1.resolvedSyncPromise(prepared);\n        // This should be the last thing called, since we want that\n        // {@link Hub.addEventProcessor} gets the finished prepared event.\n        if (finalScope) {\n            // In case we have a hub we reassign it.\n            result = finalScope.applyToEvent(prepared, hint);\n        }\n        return result.then(function (evt) {\n            if (evt) {\n                // TODO this is more of the hack trying to solve https://github.com/getsentry/sentry-javascript/issues/2809\n                // it is only attached as extra data to the event if the event somehow skips being normalized\n                evt.sdkProcessingMetadata = tslib_1.__assign(tslib_1.__assign({}, evt.sdkProcessingMetadata), { normalizeDepth: utils_1.normalize(normalizeDepth) });\n            }\n            if (typeof normalizeDepth === 'number' && normalizeDepth > 0) {\n                return _this._normalizeEvent(evt, normalizeDepth);\n            }\n            return evt;\n        });\n    };\n    /**\n     * Applies `normalize` function on necessary `Event` attributes to make them safe for serialization.\n     * Normalized keys:\n     * - `breadcrumbs.data`\n     * - `user`\n     * - `contexts`\n     * - `extra`\n     * @param event Event\n     * @returns Normalized event\n     */\n    BaseClient.prototype._normalizeEvent = function (event, depth) {\n        if (!event) {\n            return null;\n        }\n        var normalized = tslib_1.__assign(tslib_1.__assign(tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, event), (event.breadcrumbs && {\n            breadcrumbs: event.breadcrumbs.map(function (b) { return (tslib_1.__assign(tslib_1.__assign({}, b), (b.data && {\n                data: utils_1.normalize(b.data, depth),\n            }))); }),\n        })), (event.user && {\n            user: utils_1.normalize(event.user, depth),\n        })), (event.contexts && {\n            contexts: utils_1.normalize(event.contexts, depth),\n        })), (event.extra && {\n            extra: utils_1.normalize(event.extra, depth),\n        }));\n        // event.contexts.trace stores information about a Transaction. Similarly,\n        // event.spans[] stores information about child Spans. Given that a\n        // Transaction is conceptually a Span, normalization should apply to both\n        // Transactions and Spans consistently.\n        // For now the decision is to skip normalization of Transactions and Spans,\n        // so this block overwrites the normalized event to add back the original\n        // Transaction information prior to normalization.\n        if (event.contexts && event.contexts.trace) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            normalized.contexts.trace = event.contexts.trace;\n        }\n        event.sdkProcessingMetadata = tslib_1.__assign(tslib_1.__assign({}, event.sdkProcessingMetadata), { baseClientNormalized: true });\n        return normalized;\n    };\n    /**\n     *  Enhances event using the client configuration.\n     *  It takes care of all \"static\" values like environment, release and `dist`,\n     *  as well as truncating overly long values.\n     * @param event event instance to be enhanced\n     */\n    BaseClient.prototype._applyClientOptions = function (event) {\n        var options = this.getOptions();\n        var environment = options.environment, release = options.release, dist = options.dist, _a = options.maxValueLength, maxValueLength = _a === void 0 ? 250 : _a;\n        if (!('environment' in event)) {\n            event.environment = 'environment' in options ? environment : 'production';\n        }\n        if (event.release === undefined && release !== undefined) {\n            event.release = release;\n        }\n        if (event.dist === undefined && dist !== undefined) {\n            event.dist = dist;\n        }\n        if (event.message) {\n            event.message = utils_1.truncate(event.message, maxValueLength);\n        }\n        var exception = event.exception && event.exception.values && event.exception.values[0];\n        if (exception && exception.value) {\n            exception.value = utils_1.truncate(exception.value, maxValueLength);\n        }\n        var request = event.request;\n        if (request && request.url) {\n            request.url = utils_1.truncate(request.url, maxValueLength);\n        }\n    };\n    /**\n     * This function adds all used integrations to the SDK info in the event.\n     * @param event The event that will be filled with all integrations.\n     */\n    BaseClient.prototype._applyIntegrationsMetadata = function (event) {\n        var integrationsArray = Object.keys(this._integrations);\n        if (integrationsArray.length > 0) {\n            event.sdk = event.sdk || {};\n            event.sdk.integrations = tslib_1.__spread((event.sdk.integrations || []), integrationsArray);\n        }\n    };\n    /**\n     * Tells the backend to send this event\n     * @param event The Sentry event to send\n     */\n    BaseClient.prototype._sendEvent = function (event) {\n        this._getBackend().sendEvent(event);\n    };\n    /**\n     * Processes the event and logs an error in case of rejection\n     * @param event\n     * @param hint\n     * @param scope\n     */\n    BaseClient.prototype._captureEvent = function (event, hint, scope) {\n        return this._processEvent(event, hint, scope).then(function (finalEvent) {\n            return finalEvent.event_id;\n        }, function (reason) {\n            utils_1.logger.error(reason);\n            return undefined;\n        });\n    };\n    /**\n     * Processes an event (either error or message) and sends it to Sentry.\n     *\n     * This also adds breadcrumbs and context information to the event. However,\n     * platform specific meta data (such as the User's IP address) must be added\n     * by the SDK implementor.\n     *\n     *\n     * @param event The event to send to Sentry.\n     * @param hint May contain additional information about the original exception.\n     * @param scope A scope containing event metadata.\n     * @returns A SyncPromise that resolves with the event or rejects in case event was/will not be send.\n     */\n    BaseClient.prototype._processEvent = function (event, hint, scope) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        var _a = this.getOptions(), beforeSend = _a.beforeSend, sampleRate = _a.sampleRate;\n        var transport = this.getTransport();\n        function recordLostEvent(outcome, category) {\n            if (transport.recordLostEvent) {\n                transport.recordLostEvent(outcome, category);\n            }\n        }\n        if (!this._isEnabled()) {\n            return utils_1.rejectedSyncPromise(new utils_1.SentryError('SDK not enabled, will not capture event.'));\n        }\n        var isTransaction = event.type === 'transaction';\n        // 1.0 === 100% events are sent\n        // 0.0 === 0% events are sent\n        // Sampling for transaction happens somewhere else\n        if (!isTransaction && typeof sampleRate === 'number' && Math.random() > sampleRate) {\n            recordLostEvent('sample_rate', 'event');\n            return utils_1.rejectedSyncPromise(new utils_1.SentryError(\"Discarding event because it's not included in the random sample (sampling rate = \" + sampleRate + \")\"));\n        }\n        return this._prepareEvent(event, scope, hint)\n            .then(function (prepared) {\n            if (prepared === null) {\n                recordLostEvent('event_processor', event.type || 'event');\n                throw new utils_1.SentryError('An event processor returned null, will not send event.');\n            }\n            var isInternalException = hint && hint.data && hint.data.__sentry__ === true;\n            if (isInternalException || isTransaction || !beforeSend) {\n                return prepared;\n            }\n            var beforeSendResult = beforeSend(prepared, hint);\n            return _ensureBeforeSendRv(beforeSendResult);\n        })\n            .then(function (processedEvent) {\n            if (processedEvent === null) {\n                recordLostEvent('before_send', event.type || 'event');\n                throw new utils_1.SentryError('`beforeSend` returned `null`, will not send event.');\n            }\n            var session = scope && scope.getSession && scope.getSession();\n            if (!isTransaction && session) {\n                _this._updateSessionFromEvent(session, processedEvent);\n            }\n            _this._sendEvent(processedEvent);\n            return processedEvent;\n        })\n            .then(null, function (reason) {\n            if (reason instanceof utils_1.SentryError) {\n                throw reason;\n            }\n            _this.captureException(reason, {\n                data: {\n                    __sentry__: true,\n                },\n                originalException: reason,\n            });\n            throw new utils_1.SentryError(\"Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\\nReason: \" + reason);\n        });\n    };\n    /**\n     * Occupies the client with processing and event\n     */\n    BaseClient.prototype._process = function (promise) {\n        var _this = this;\n        this._numProcessing += 1;\n        void promise.then(function (value) {\n            _this._numProcessing -= 1;\n            return value;\n        }, function (reason) {\n            _this._numProcessing -= 1;\n            return reason;\n        });\n    };\n    return BaseClient;\n}());\nexports.BaseClient = BaseClient;\n/**\n * Verifies that return value of configured `beforeSend` is of expected type.\n */\nfunction _ensureBeforeSendRv(rv) {\n    var nullErr = '`beforeSend` method has to return `null` or a valid event.';\n    if (utils_1.isThenable(rv)) {\n        return rv.then(function (event) {\n            if (!(utils_1.isPlainObject(event) || event === null)) {\n                throw new utils_1.SentryError(nullErr);\n            }\n            return event;\n        }, function (e) {\n            throw new utils_1.SentryError(\"beforeSend rejected with \" + e);\n        });\n    }\n    else if (!(utils_1.isPlainObject(rv) || rv === null)) {\n        throw new utils_1.SentryError(nullErr);\n    }\n    return rv;\n}\n//# sourceMappingURL=baseclient.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_ensureBeforeSendRv","rv","utils_1","isThenable","then","event","isPlainObject","SentryError","nullErr","e","Object","defineProperty","value","tslib_1","hub_1","integration_1","BaseClient","backendClass","options","_integrations","_numProcessing","_backend","_options","dsn","_dsn","makeDsn","prototype","captureException","BaseClient.prototype.captureException","exception","hint","scope","_this","checkOrSetAlreadyCaught","logger","log","ALREADY_SEEN_ERROR","eventId","event_id","_process","_getBackend","eventFromException","_captureEvent","result","captureMessage","BaseClient.prototype.captureMessage","message","level","promisedEvent","isPrimitive","eventFromMessage","String","captureEvent","BaseClient.prototype.captureEvent","originalException","captureSession","BaseClient.prototype.captureSession","session","_isEnabled","release","isDebugBuild","warn","_sendSession","update","init","getDsn","BaseClient.prototype.getDsn","getOptions","BaseClient.prototype.getOptions","getTransport","BaseClient.prototype.getTransport","flush","BaseClient.prototype.flush","timeout","_isClientDoneProcessing","clientFinished","close","transportFlushed","BaseClient.prototype.close","enabled","setupIntegrations","BaseClient.prototype.setupIntegrations","initialized","getIntegration","BaseClient.prototype.getIntegration","integration","id","_oO","_updateSessionFromEvent","BaseClient.prototype._updateSessionFromEvent","_a","crashed","errored","exceptions","values","exceptions_1","__values","exceptions_1_1","next","done","mechanism","handled","e_1_1","e_1","error","return","call","sessionNonTerminal","status","errors","__assign","Number","BaseClient.prototype._sendSession","sendSession","BaseClient.prototype._isClientDoneProcessing","SyncPromise","resolve","ticked","interval","setInterval","clearInterval","tick","BaseClient.prototype._getBackend","BaseClient.prototype._isEnabled","undefined","_prepareEvent","BaseClient.prototype._prepareEvent","normalizeDepth","prepared","uuid4","timestamp","dateTimestampInSeconds","_applyClientOptions","_applyIntegrationsMetadata","captureContext","finalScope","Scope","clone","resolvedSyncPromise","applyToEvent","evt","sdkProcessingMetadata","normalize","_normalizeEvent","BaseClient.prototype._normalizeEvent","depth","normalized","breadcrumbs","map","b","data","user","contexts","extra","trace","baseClientNormalized","BaseClient.prototype._applyClientOptions","environment","dist","maxValueLength","truncate","request","url","BaseClient.prototype._applyIntegrationsMetadata","integrationsArray","keys","length","sdk","integrations","__spread","_sendEvent","BaseClient.prototype._sendEvent","sendEvent","BaseClient.prototype._captureEvent","_processEvent","finalEvent","reason","BaseClient.prototype._processEvent","beforeSend","sampleRate","transport","rejectedSyncPromise","isTransaction","type","Math","random","recordLostEvent","outcome","category","__sentry__","beforeSendResult","processedEvent","getSession","BaseClient.prototype._process","promise"]
}
