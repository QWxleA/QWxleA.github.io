shadow$provide.module$node_modules$codemirror$mode$textile$textile=function(global,require,module,exports){(function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("module$node_modules$codemirror$lib$codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)})(function(CodeMirror){function handlePhraseModifier(stream,state,ch){return"_"===ch?stream.eat("_")?togglePhraseModifier(stream,state,"italic",/__/,2):togglePhraseModifier(stream,
state,"em",/_/,1):"*"===ch?stream.eat("*")?togglePhraseModifier(stream,state,"bold",/\*\*/,2):togglePhraseModifier(stream,state,"strong",/\*/,1):"["===ch?(stream.match(/\d+\]/)&&(state.footCite=!0),tokenStyles(state)):"("===ch&&stream.match(/^(r|tm|c)\)/)?tokenStylesWith(state,TOKEN_STYLES.specialChar):"\x3c"===ch&&stream.match(/(\w+)[^>]+>[^<]+<\/\1>/)?tokenStylesWith(state,TOKEN_STYLES.html):"?"===ch&&stream.eat("?")?togglePhraseModifier(stream,state,"cite",/\?\?/,2):"\x3d"===ch&&stream.eat("\x3d")?
togglePhraseModifier(stream,state,"notextile",/==/,2):"-"!==ch||stream.eat("-")?"+"===ch?togglePhraseModifier(stream,state,"addition",/\+/,1):"~"===ch?togglePhraseModifier(stream,state,"sub",/~/,1):"^"===ch?togglePhraseModifier(stream,state,"sup",/\^/,1):"%"===ch?togglePhraseModifier(stream,state,"span",/%/,1):"@"===ch?togglePhraseModifier(stream,state,"code",/@/,1):"!"===ch?(state=togglePhraseModifier(stream,state,"image",/(?:\([^\)]+\))?!/,1),stream.match(/^:\S+/),state):tokenStyles(state):togglePhraseModifier(stream,
state,"deletion",/-/,1)}function togglePhraseModifier(stream,state,phraseModifier,closeRE,openSize){openSize=stream.pos>openSize?stream.string.charAt(stream.pos-openSize-1):null;var charAfter=stream.peek();if(state[phraseModifier]){if((!charAfter||/\W/.test(charAfter))&&openSize&&/\S/.test(openSize))return stream=tokenStyles(state),state[phraseModifier]=!1,stream}else(!openSize||/\W/.test(openSize))&&charAfter&&/\S/.test(charAfter)&&stream.match(new RegExp("^.*\\S"+closeRE.source+"(?:\\W|$)"),!1)&&
(state[phraseModifier]=!0,state.mode=Modes.attributes);return tokenStyles(state)}function tokenStyles(state){var disabled=textileDisabled(state);if(disabled)return disabled;disabled=[];state.layoutType&&disabled.push(TOKEN_STYLES[state.layoutType]);disabled=disabled.concat(activeStyles(state,"addition","bold","cite","code","deletion","em","footCite","image","italic","link","span","strong","sub","sup","table","tableHeading"));"header"===state.layoutType&&disabled.push(TOKEN_STYLES.header+"-"+state.header);
return disabled.length?disabled.join(" "):null}function textileDisabled(state){var type=state.layoutType;switch(type){case "notextile":case "code":case "pre":return TOKEN_STYLES[type];default:return state.notextile?TOKEN_STYLES.notextile+(type?" "+TOKEN_STYLES[type]:""):null}}function tokenStylesWith(state,extraStyles){var disabled=textileDisabled(state);if(disabled)return disabled;state=tokenStyles(state);return extraStyles?state?state+" "+extraStyles:extraStyles:state}function activeStyles(state){for(var styles=
[],i=1;i<arguments.length;++i)state[arguments[i]]&&styles.push(TOKEN_STYLES[arguments[i]]);return styles}function blankLine(state){var spanningLayout=state.spanningLayout,type=state.layoutType,key;for(key in state)state.hasOwnProperty(key)&&delete state[key];state.mode=Modes.newLayout;spanningLayout&&(state.layoutType=type,state.spanningLayout=!0)}function RE(name){return REs.cache[name]||(REs.cache[name]=REs.createRe(name))}var TOKEN_STYLES={addition:"positive",attributes:"attribute",bold:"strong",
cite:"keyword",code:"atom",definitionList:"number",deletion:"negative",div:"punctuation",em:"em",footnote:"variable",footCite:"qualifier",header:"header",html:"comment",image:"string",italic:"em",link:"link",linkDefinition:"link",list1:"variable-2",list2:"variable-3",list3:"keyword",notextile:"string-2",pre:"operator",p:"property",quote:"bracket",span:"quote",specialChar:"tag",strong:"strong",sub:"builtin",sup:"builtin",table:"variable-3",tableHeading:"operator"},REs={cache:{},single:{bc:"bc",bq:"bq",
definitionList:/- .*?:=+/,definitionListEnd:/.*=:\s*$/,div:"div",drawTable:/\|.*\|/,foot:/fn\d+/,header:/h[1-6]/,html:/\s*<(?:\/)?(\w+)(?:[^>]+)?>(?:[^<]+<\/\1>)?/,link:/[^"]+":\S/,linkDefinition:/\[[^\s\]]+\]\S+/,list:/(?:#+|\*+)/,notextile:"notextile",para:"p",pre:"pre",table:"table",tableCellAttributes:/[\/\\]\d+/,tableHeading:/\|_\./,tableText:/[^"_\*\[\(\?\+~\^%@|-]+/,text:/[^!"_=\*\[\(<\?\+~\^%@-]+/},attributes:{align:/(?:<>|<|>|=)/,selector:/\([^\(][^\)]+\)/,lang:/\[[^\[\]]+\]/,pad:/(?:\(+|\)+){1,2}/,
css:/\{[^\}]+\}/},createRe:function(name){switch(name){case "drawTable":return REs.makeRe("^",REs.single.drawTable,"$");case "html":return REs.makeRe("^",REs.single.html,"(?:",REs.single.html,")*","$");case "linkDefinition":return REs.makeRe("^",REs.single.linkDefinition,"$");case "listLayout":return REs.makeRe("^",REs.single.list,RE("allAttributes"),"*\\s+");case "tableCellAttributes":return REs.makeRe("^",REs.choiceRe(REs.single.tableCellAttributes,RE("allAttributes")),"+\\.");case "type":return REs.makeRe("^",
RE("allTypes"));case "typeLayout":return REs.makeRe("^",RE("allTypes"),RE("allAttributes"),"*\\.\\.?","(\\s+|$)");case "attributes":return REs.makeRe("^",RE("allAttributes"),"+");case "allTypes":return REs.choiceRe(REs.single.div,REs.single.foot,REs.single.header,REs.single.bc,REs.single.bq,REs.single.notextile,REs.single.pre,REs.single.table,REs.single.para);case "allAttributes":return REs.choiceRe(REs.attributes.selector,REs.attributes.css,REs.attributes.lang,REs.attributes.align,REs.attributes.pad);
default:return REs.makeRe("^",REs.single[name])}},makeRe:function(){for(var pattern="",i=0;i<arguments.length;++i){var arg=arguments[i];pattern+="string"===typeof arg?arg:arg.source}return new RegExp(pattern)},choiceRe:function(){for(var parts=[arguments[0]],i=1;i<arguments.length;++i)parts[2*i-1]="|",parts[2*i]=arguments[i];parts.unshift("(?:");parts.push(")");return REs.makeRe.apply(null,parts)}},Modes={newLayout:function(stream,state){if(stream.match(RE("typeLayout"),!1))return state.spanningLayout=
!1,(state.mode=Modes.blockType)(stream,state);if(!textileDisabled(state))if(stream.match(RE("listLayout"),!1))var newMode=Modes.list;else stream.match(RE("drawTable"),!1)?newMode=Modes.table:stream.match(RE("linkDefinition"),!1)?newMode=Modes.linkDefinition:stream.match(RE("definitionList"))?newMode=Modes.definitionList:stream.match(RE("html"),!1)&&(newMode=Modes.html);return(state.mode=newMode||Modes.text)(stream,state)},blockType:function(stream,state){var match;state.layoutType=null;if(match=stream.match(RE("type")))stream=
match[0];else return(state.mode=Modes.text)(stream,state);(match=stream.match(RE("header")))?(state.layoutType="header",state.header=parseInt(match[0][1])):stream.match(RE("bq"))?state.layoutType="quote":stream.match(RE("bc"))?state.layoutType="code":stream.match(RE("foot"))?state.layoutType="footnote":stream.match(RE("notextile"))?state.layoutType="notextile":stream.match(RE("pre"))?state.layoutType="pre":stream.match(RE("div"))?state.layoutType="div":stream.match(RE("table"))&&(state.layoutType=
"table");state.mode=Modes.attributes;return tokenStyles(state)},text:function(stream,state){if(stream.match(RE("text")))return tokenStyles(state);var ch=stream.next();return'"'===ch?(state.mode=Modes.link)(stream,state):handlePhraseModifier(stream,state,ch)},attributes:function(stream,state){state.mode=Modes.layoutLength;return stream.match(RE("attributes"))?tokenStylesWith(state,TOKEN_STYLES.attributes):tokenStyles(state)},layoutLength:function(stream,state){stream.eat(".")&&stream.eat(".")&&(state.spanningLayout=
!0);state.mode=Modes.text;return tokenStyles(state)},list:function(stream,state){stream=stream.match(RE("list"));state.listDepth=stream[0].length;stream=(state.listDepth-1)%3;state.layoutType=stream?1===stream?"list2":"list3":"list1";state.mode=Modes.attributes;return tokenStyles(state)},link:function(stream,state){state.mode=Modes.text;return stream.match(RE("link"))?(stream.match(/\S+/),tokenStylesWith(state,TOKEN_STYLES.link)):tokenStyles(state)},linkDefinition:function(stream,state){stream.skipToEnd();
return tokenStylesWith(state,TOKEN_STYLES.linkDefinition)},definitionList:function(stream,state){stream.match(RE("definitionList"));state.layoutType="definitionList";stream.match(/\s*$/)?state.spanningLayout=!0:state.mode=Modes.attributes;return tokenStyles(state)},html:function(stream,state){stream.skipToEnd();return tokenStylesWith(state,TOKEN_STYLES.html)},table:function(stream,state){state.layoutType="table";return(state.mode=Modes.tableCell)(stream,state)},tableCell:function(stream,state){stream.match(RE("tableHeading"))?
state.tableHeading=!0:stream.eat("|");state.mode=Modes.tableCellAttributes;return tokenStyles(state)},tableCellAttributes:function(stream,state){state.mode=Modes.tableText;return stream.match(RE("tableCellAttributes"))?tokenStylesWith(state,TOKEN_STYLES.attributes):tokenStyles(state)},tableText:function(stream,state){return stream.match(RE("tableText"))?tokenStyles(state):"|"===stream.peek()?(state.mode=Modes.tableCell,tokenStyles(state)):handlePhraseModifier(stream,state,stream.next())}};CodeMirror.defineMode("textile",
function(){return{startState:function(){return{mode:Modes.newLayout}},token:function(stream,state){stream.sol()&&(state.mode=Modes.newLayout,state.tableHeading=!1,"definitionList"===state.layoutType&&state.spanningLayout&&stream.match(RE("definitionListEnd"),!1)&&(state.spanningLayout=!1));return state.mode(stream,state)},blankLine}});CodeMirror.defineMIME("text/x-textile","textile")})}
//# sourceMappingURL=module$node_modules$codemirror$mode$textile$textile.js.map
