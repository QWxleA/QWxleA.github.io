shadow$provide.module$node_modules$posthog_js$dist$module=function(global,require,module,exports){function _typeof(obj$jscomp$0){"@babel/helpers - typeof";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};return _typeof(obj$jscomp$0)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");
}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,
key,value){key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=
null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _slicedToArray(arr,i){var JSCompiler_inline_result=Array.isArray(arr)?arr:void 0;if(!JSCompiler_inline_result)if("undefined"!==
typeof Symbol&&Symbol.iterator in Object(arr)){JSCompiler_inline_result=[];var _n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(JSCompiler_inline_result.push(_s.value),!i||JSCompiler_inline_result.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i["return"])_i["return"]()}finally{if(_d)throw _e;}}}else JSCompiler_inline_result=void 0;if(!(arr=JSCompiler_inline_result||_unsupportedIterableToArray(arr,i)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return arr}function _unsupportedIterableToArray(o,minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=
arr[i];return arr2}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"===typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"===typeof o.length){it&&(o=it);var i=0;allowArrayLike=function(){};return{s:allowArrayLike,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e;},f:allowArrayLike}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var normalCompletion=!0,didErr=!1,err;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(e){didErr=!0;err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err;}}}}function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++)baseReverseDic[alphabet][alphabet.charAt(i)]=i}return baseReverseDic[alphabet][character]}
function deepCircularCopy(value,customizer){if(value!==Object(value))return customizer?customizer(value):value;if(!value[COPY_IN_PROGRESS_ATTRIBUTE]){value[COPY_IN_PROGRESS_ATTRIBUTE]=!0;if(_$jscomp$0.isArray(value)){var result=[];_$jscomp$0.each(value,function(it){result.push(deepCircularCopy(it,customizer))})}else result={},_$jscomp$0.each(value,function(val,key){key!==COPY_IN_PROGRESS_ATTRIBUTE&&(result[key]=deepCircularCopy(val,customizer))});delete value[COPY_IN_PROGRESS_ATTRIBUTE];return result}}
function getClassName(el){switch(_typeof(el.className)){case "string":return el.className;case "object":return el.className.baseVal||el.getAttribute("class")||"";default:return""}}function getSafeText(el){var elText="";shouldCaptureElement(el)&&!isSensitiveElement(el)&&el.childNodes&&el.childNodes.length&&_$jscomp$0.each(el.childNodes,function(child){child&&3===child.nodeType&&child.textContent&&(elText+=_$jscomp$0.trim(child.textContent).split(/(\s+)/).filter(shouldCaptureValue).join("").replace(/[\r\n]/g,
" ").replace(/[ ]+/g," ").substring(0,255))});return _$jscomp$0.trim(elText)}function isTag(el,tag){return el&&el.tagName&&el.tagName.toLowerCase()===tag.toLowerCase()}function shouldCaptureDomEvent(el,event){if(!el||isTag(el,"html")||!el||1!==el.nodeType)return!1;var parentIsUsefulElement=!1,targetElementList=[el],parentNode;for(parentNode=el;parentNode.parentNode&&!isTag(parentNode,"body");)if(11===parentNode.parentNode.nodeType)targetElementList.push(parentNode.parentNode.host),parentNode=parentNode.parentNode.host;
else{parentNode=parentNode.parentNode;if(!parentNode)break;if(-1<usefulElements.indexOf(parentNode.tagName.toLowerCase()))parentIsUsefulElement=!0;else{var _compStyles=window.getComputedStyle(parentNode);_compStyles&&"pointer"===_compStyles.getPropertyValue("cursor")&&(parentIsUsefulElement=!0)}targetElementList.push(parentNode)}if((targetElementList=window.getComputedStyle(el))&&"pointer"===targetElementList.getPropertyValue("cursor")&&"click"===event.type)return!0;targetElementList=el.tagName.toLowerCase();
switch(targetElementList){case "html":return!1;case "form":return"submit"===event.type;case "input":return"change"===event.type||"click"===event.type;case "select":case "textarea":return"change"===event.type||"click"===event.type;default:return parentIsUsefulElement?"click"===event.type:"click"===event.type&&(-1<usefulElements.indexOf(targetElementList)||"true"===el.getAttribute("contenteditable"))}}function shouldCaptureElement(el){for(var curEl=el;curEl.parentNode&&!isTag(curEl,"body");curEl=curEl.parentNode){var classes=
getClassName(curEl).split(" ");if(_$jscomp$0.includes(classes,"ph-sensitive")||_$jscomp$0.includes(classes,"ph-no-capture"))return!1}if(_$jscomp$0.includes(getClassName(el).split(" "),"ph-include"))return!0;curEl=el.type||"";if("string"===typeof curEl)switch(curEl.toLowerCase()){case "hidden":return!1;case "password":return!1}el=el.name||el.id||"";return"string"===typeof el&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(el.replace(/[^a-zA-Z0-9]/g,
""))?!1:!0}function isSensitiveElement(el){return isTag(el,"input")&&"button"!=el.type||isTag(el,"select")||isTag(el,"textarea")||"true"===el.getAttribute("contenteditable")?!0:!1}function shouldCaptureValue(value){return null===value||_$jscomp$0.isUndefined(value)||"string"===typeof value&&(value=_$jscomp$0.trim(value),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((value||
"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(value))?!1:!0}function loadScript(scriptUrlToLoad,callback){var scriptTag=document.createElement("script");scriptTag.type="text/javascript";scriptTag.src=scriptUrlToLoad;scriptTag.onload=callback;scriptUrlToLoad=document.getElementsByTagName("script");0<scriptUrlToLoad.length?scriptUrlToLoad[0].parentNode.insertBefore(scriptTag,scriptUrlToLoad[0]):document.body.appendChild(scriptTag)}function optIn(token,options){_optInOut(!0,token,options)}
function optOut(token,options){_optInOut(!1,token,options)}function hasOptedIn(token,options){return"1"===_getStorageValue(token,options)}function hasOptedOut(token,options){return _hasDoNotTrackFlagOn(options)?!0:"0"===_getStorageValue(token,options)}function addOptOutCheckPostHogPeople(method,silenceErrors){return _addOptOutCheck(method,function(name){return this._get_config(name)},silenceErrors)}function clearOptInOut(token,options){options=options||{};_getStorage(options).remove(_getStorageKey(token,
options),!!options.crossSubdomainCookie,options.cookieDomain)}function _getStorage(options){options=options||{};return"localStorage"===options.persistenceType?localStore:cookieStore}function _getStorageKey(token,options){options=options||{};return(options.persistencePrefix||"__ph_opt_in_out_")+token}function _getStorageValue(token,options){return _getStorage(options).get(_getStorageKey(token,options))}function _hasDoNotTrackFlagOn(options){if(options&&options.respectDnt){options=options&&options.window||
win$jscomp$0;var nav=options.navigator||{},hasDntOn=!1;_$jscomp$0.each([nav.doNotTrack,nav.msDoNotTrack,options.doNotTrack],function(dntValue){_$jscomp$0.includes([!0,1,"1","yes"],dntValue)&&(hasDntOn=!0)});return hasDntOn}return!1}function _optInOut(optValue,token,options){_$jscomp$0.isString(token)&&token.length?(options=options||{},_getStorage(options).set(_getStorageKey(token,options),optValue?1:0,_$jscomp$0.isNumber(options.cookieExpiration)?options.cookieExpiration:null,!!options.crossSubdomainCookie,
!!options.secureCookie,!!options.crossSiteCookie,options.cookieDomain),options.capture&&optValue&&options.capture(options.captureEventName||"$opt_in",options.captureProperties,{send_immediately:!0})):console.error("gdpr."+(optValue?"optIn":"optOut")+" called with an invalid token")}function _addOptOutCheck(method,getConfigValue,silenceErrors){return function(){var optedOut=!1;try{var token=getConfigValue.call(this,"token"),respectDnt=getConfigValue.call(this,"respect_dnt"),persistenceType=getConfigValue.call(this,
"opt_out_capturing_persistence_type"),persistencePrefix=getConfigValue.call(this,"opt_out_capturing_cookie_prefix"),win=getConfigValue.call(this,"window");token&&(optedOut=hasOptedOut(token,{respectDnt,persistenceType,persistencePrefix,window:win}))}catch(err){silenceErrors||console.error("Unexpected error when checking capturing opt-out status: "+err)}if(!optedOut)return method.apply(this,arguments);optedOut=arguments[arguments.length-1];"function"===typeof optedOut&&optedOut(0)}}function strToU8(str,
latin1){var l=str.length;if(!latin1&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(str);for(var ar=new u8(str.length+(str.length>>>1)),ai=0,w=function(v){ar[ai++]=v},i=0;i<l;++i){if(ai+5>ar.length){var n=new u8(ai+8+(l-i<<1));n.set(ar);ar=n}n=str.charCodeAt(i);128>n||latin1?w(n):(2048>n?w(192|n>>>6):(55295<n&&57344>n?(n=65536+(n&1047552)|str.charCodeAt(++i)&1023,w(240|n>>>18),w(128|n>>>12&63)):w(224|n>>>12),w(128|n>>>6&63)),w(128|n&63))}return slc(ar,0,ai)}function deprecate_warning(method){win$jscomp$0.console.warn("WARNING! posthog."+
method+" is deprecated and will be removed soon! Please use posthog."+method.split("captureing").join("capturing")+' instead (without the "e")!')}var f$jscomp$0=String.fromCharCode,baseReverseDic={},LZString={compressToBase64:function(input){if(null==input)return"";input=LZString._compress(input,6,function(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(a)});switch(input.length%4){default:case 0:return input;case 1:return input+"\x3d\x3d\x3d";case 2:return input+
"\x3d\x3d";case 3:return input+"\x3d"}},decompressFromBase64:function(input){return null==input?"":""==input?null:LZString._decompress(input.length,32,function(index){return getBaseValue("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",input.charAt(index))})},compressToUTF16:function(input){return null==input?"":LZString._compress(input,15,function(a){return f$jscomp$0(a+32)})+" "},decompressFromUTF16:function(compressed){return null==compressed?"":""==compressed?null:LZString._decompress(compressed.length,
16384,function(index){return compressed.charCodeAt(index)-32})},compressToUint8Array:function(uncompressed){uncompressed=LZString.compress(uncompressed);for(var buf=new Uint8Array(2*uncompressed.length),i=0,TotalLen=uncompressed.length;i<TotalLen;i++){var current_value=uncompressed.charCodeAt(i);buf[2*i]=current_value>>>8;buf[2*i+1]=current_value%256}return buf},decompressFromUint8Array:function(compressed){if(null===compressed||void 0===compressed)return LZString.decompress(compressed);for(var buf=
Array(compressed.length/2),i=0,TotalLen=buf.length;i<TotalLen;i++)buf[i]=256*compressed[2*i]+compressed[2*i+1];var result=[];buf.forEach(function(c){result.push(f$jscomp$0(c))});return LZString.decompress(result.join(""))},compressToEncodedURIComponent:function(input){return null==input?"":LZString._compress(input,6,function(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(a)})},decompressFromEncodedURIComponent:function(input){if(null==input)return"";if(""==input)return null;
input=input.replace(/ /g,"+");return LZString._decompress(input.length,32,function(index){return getBaseValue("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",input.charAt(index))})},compress:function(uncompressed){return LZString._compress(uncompressed,16,function(a){return f$jscomp$0(a)})},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(null==uncompressed)return"";var i,context_dictionary={},context_dictionaryToCreate={},context_w="",context_enlargeIn=2,context_dictSize=
3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0,ii;for(ii=0;ii<uncompressed.length;ii+=1){var context_c=uncompressed.charAt(ii);Object.prototype.hasOwnProperty.call(context_dictionary,context_c)||(context_dictionary[context_c]=context_dictSize++,context_dictionaryToCreate[context_c]=!0);var context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,context_wc))context_w=context_wc;else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,
context_w)){if(256>context_w.charCodeAt(0)){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;var value=context_w.charCodeAt(0);for(i=0;8>i;i++)context_data_val=context_data_val<<1|value&1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,
value>>=1}else{value=1;for(i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;value=context_w.charCodeAt(0);for(i=0;16>i;i++)context_data_val=context_data_val<<1|value&1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,
value>>=1}context_enlargeIn--;0==context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++);delete context_dictionaryToCreate[context_w]}else for(value=context_dictionary[context_w],i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value&1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;context_enlargeIn--;0==context_enlargeIn&&(context_enlargeIn=
Math.pow(2,context_numBits),context_numBits++);context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c)}}if(""!==context_w){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(256>context_w.charCodeAt(0)){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;value=context_w.charCodeAt(0);for(i=
0;8>i;i++)context_data_val=context_data_val<<1|value&1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{value=1;for(i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;value=context_w.charCodeAt(0);
for(i=0;16>i;i++)context_data_val=context_data_val<<1|value&1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}context_enlargeIn--;0==context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++);delete context_dictionaryToCreate[context_w]}else for(value=context_dictionary[context_w],i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value&1,context_data_position==
bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;context_enlargeIn--;0==context_enlargeIn&&context_numBits++}value=2;for(i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value&1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;for(;;)if(context_data_val<<=1,context_data_position==
bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}else context_data_position++;return context_data.join("")},decompress:function(compressed){return null==compressed?"":""==compressed?null:LZString._decompress(compressed.length,32768,function(index){return compressed.charCodeAt(index)})},_decompress:function(length,resetValue,getNextValue){var dictionary=[],enlargeIn=4,dictSize=4,numBits=3,result=[],i,power,JSCompiler_object_inline_val_4526=getNextValue(0),JSCompiler_object_inline_position_4527=
resetValue,JSCompiler_object_inline_index_4528=1;for(i=0;3>i;i+=1)dictionary[i]=i;var bits=0;var maxpower=Math.pow(2,2);for(power=1;power!=maxpower;){var resb=JSCompiler_object_inline_val_4526&JSCompiler_object_inline_position_4527;JSCompiler_object_inline_position_4527>>=1;0==JSCompiler_object_inline_position_4527&&(JSCompiler_object_inline_position_4527=resetValue,JSCompiler_object_inline_val_4526=getNextValue(JSCompiler_object_inline_index_4528++));bits|=(0<resb?1:0)*power;power<<=1}switch(bits){case 0:bits=
0;maxpower=Math.pow(2,8);for(power=1;power!=maxpower;)resb=JSCompiler_object_inline_val_4526&JSCompiler_object_inline_position_4527,JSCompiler_object_inline_position_4527>>=1,0==JSCompiler_object_inline_position_4527&&(JSCompiler_object_inline_position_4527=resetValue,JSCompiler_object_inline_val_4526=getNextValue(JSCompiler_object_inline_index_4528++)),bits|=(0<resb?1:0)*power,power<<=1;var entry=f$jscomp$0(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);for(power=1;power!=maxpower;)resb=JSCompiler_object_inline_val_4526&
JSCompiler_object_inline_position_4527,JSCompiler_object_inline_position_4527>>=1,0==JSCompiler_object_inline_position_4527&&(JSCompiler_object_inline_position_4527=resetValue,JSCompiler_object_inline_val_4526=getNextValue(JSCompiler_object_inline_index_4528++)),bits|=(0<resb?1:0)*power,power<<=1;entry=f$jscomp$0(bits);break;case 2:return""}i=dictionary[3]=entry;for(result.push(entry);;){if(JSCompiler_object_inline_index_4528>length)return"";bits=0;maxpower=Math.pow(2,numBits);for(power=1;power!=
maxpower;)resb=JSCompiler_object_inline_val_4526&JSCompiler_object_inline_position_4527,JSCompiler_object_inline_position_4527>>=1,0==JSCompiler_object_inline_position_4527&&(JSCompiler_object_inline_position_4527=resetValue,JSCompiler_object_inline_val_4526=getNextValue(JSCompiler_object_inline_index_4528++)),bits|=(0<resb?1:0)*power,power<<=1;switch(entry=bits){case 0:bits=0;maxpower=Math.pow(2,8);for(power=1;power!=maxpower;)resb=JSCompiler_object_inline_val_4526&JSCompiler_object_inline_position_4527,
JSCompiler_object_inline_position_4527>>=1,0==JSCompiler_object_inline_position_4527&&(JSCompiler_object_inline_position_4527=resetValue,JSCompiler_object_inline_val_4526=getNextValue(JSCompiler_object_inline_index_4528++)),bits|=(0<resb?1:0)*power,power<<=1;dictionary[dictSize++]=f$jscomp$0(bits);entry=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);for(power=1;power!=maxpower;)resb=JSCompiler_object_inline_val_4526&JSCompiler_object_inline_position_4527,JSCompiler_object_inline_position_4527>>=
1,0==JSCompiler_object_inline_position_4527&&(JSCompiler_object_inline_position_4527=resetValue,JSCompiler_object_inline_val_4526=getNextValue(JSCompiler_object_inline_index_4528++)),bits|=(0<resb?1:0)*power,power<<=1;dictionary[dictSize++]=f$jscomp$0(bits);entry=dictSize-1;enlargeIn--;break;case 2:return result.join("")}0==enlargeIn&&(enlargeIn=Math.pow(2,numBits),numBits++);if(dictionary[entry])entry=dictionary[entry];else if(entry===dictSize)entry=i+i.charAt(0);else return null;result.push(entry);
dictionary[dictSize++]=i+entry.charAt(0);enlargeIn--;i=entry;0==enlargeIn&&(enlargeIn=Math.pow(2,numBits),numBits++)}}},JSCompiler_object_inline_DEBUG_4529=!1,ArrayProto=Array.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,win$jscomp$0="undefined"!==typeof window?window:{},navigator=win$jscomp$0.navigator||{userAgent:""},document$1=win$jscomp$0.document||{},userAgent$jscomp$0=navigator.userAgent,nativeBind=Function.prototype.bind,
nativeForEach=ArrayProto.forEach,nativeIndexOf=ArrayProto.indexOf,nativeIsArray=Array.isArray,breaker={},_$jscomp$0={trim:function(str){return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},console$1={log:function(){if(JSCompiler_object_inline_DEBUG_4529&&!_$jscomp$0.isUndefined(window.console)&&window.console)try{window.console.log.apply(window.console,arguments)}catch(err){_$jscomp$0.each(arguments,function(arg){window.console.log(arg)})}},error:function(){if(JSCompiler_object_inline_DEBUG_4529&&
!_$jscomp$0.isUndefined(window.console)&&window.console){var args=["PostHog error:"].concat(Array.prototype.slice.call(arguments));try{window.console.error.apply(window.console,args)}catch(err){_$jscomp$0.each(args,function(arg){window.console.error(arg)})}}},critical:function(){if(!_$jscomp$0.isUndefined(window.console)&&window.console){var args=["PostHog error:"].concat(Array.prototype.slice.call(arguments));try{window.console.error.apply(window.console,args)}catch(err){_$jscomp$0.each(args,function(arg){window.console.error(arg)})}}}};
_$jscomp$0.bind=function(func,context){var _bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_$jscomp$0.isFunction(func))throw new TypeError;var args=slice.call(arguments,2);return _bound=function(){if(!(this instanceof _bound))return func.apply(context,args.concat(slice.call(arguments)));var ctor={};ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;ctor=func.apply(self,args.concat(slice.call(arguments)));return Object(ctor)===
ctor?ctor:self}};_$jscomp$0.bind_instance_methods=function(obj){for(var func in obj)"function"===typeof obj[func]&&(obj[func]=_$jscomp$0.bind(obj[func],obj))};_$jscomp$0.each=function(obj,iterator,context){if(null!==obj&&void 0!==obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length)for(var i=0,l=obj.length;i<l&&!(i in obj&&iterator.call(context,obj[i],i,obj)===breaker);i++);else for(i in obj)if(hasOwnProperty.call(obj,i)&&iterator.call(context,
obj[i],i,obj)===breaker)break};_$jscomp$0.extend=function(obj){_$jscomp$0.each(slice.call(arguments,1),function(source){for(var prop in source)void 0!==source[prop]&&(obj[prop]=source[prop])});return obj};_$jscomp$0.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)};_$jscomp$0.isFunction=function(f){try{return/^\s*\bfunction\b/.test(f)}catch(x){return!1}};_$jscomp$0.include=function(obj,target){var found=!1;if(null===obj)return found;if(nativeIndexOf&&obj.indexOf===
nativeIndexOf)return-1!=obj.indexOf(target);_$jscomp$0.each(obj,function(value){if(found||=value===target)return breaker});return found};_$jscomp$0.includes=function(str,needle){return-1!==str.indexOf(needle)};_$jscomp$0.isObject=function(obj){return obj===Object(obj)&&!_$jscomp$0.isArray(obj)};_$jscomp$0.isEmptyObject=function(obj){if(_$jscomp$0.isObject(obj)){for(var key in obj)if(hasOwnProperty.call(obj,key))return!1;return!0}return!1};_$jscomp$0.isUndefined=function(obj){return void 0===obj};
_$jscomp$0.isString=function(obj){return"[object String]"==toString.call(obj)};_$jscomp$0.isDate=function(obj){return"[object Date]"==toString.call(obj)};_$jscomp$0.isNumber=function(obj){return"[object Number]"==toString.call(obj)};_$jscomp$0.encodeDates=function(obj){_$jscomp$0.each(obj,function(v,k){_$jscomp$0.isDate(v)?obj[k]=_$jscomp$0.formatDate(v):_$jscomp$0.isObject(v)&&(obj[k]=_$jscomp$0.encodeDates(v))});return obj};_$jscomp$0.timestamp=function(){Date.now=Date.now||function(){return+new Date};
return Date.now()};_$jscomp$0.formatDate=function(d){function pad(n){return 10>n?"0"+n:n}return d.getUTCFullYear()+"-"+pad(d.getUTCMonth()+1)+"-"+pad(d.getUTCDate())+"T"+pad(d.getUTCHours())+":"+pad(d.getUTCMinutes())+":"+pad(d.getUTCSeconds())};_$jscomp$0.safewrap=function(f){return function(){try{return f.apply(this,arguments)}catch(e){console$1.critical("Implementation error. Please turn on debug and contact support@posthog.com."),JSCompiler_object_inline_DEBUG_4529&&console$1.critical(e)}}};_$jscomp$0.safewrap_class=
function(klass,functions){for(var i=0;i<functions.length;i++)klass.prototype[functions[i]]=_$jscomp$0.safewrap(klass.prototype[functions[i]])};_$jscomp$0.safewrap_instance_methods=function(obj){for(var func in obj)"function"===typeof obj[func]&&(obj[func]=_$jscomp$0.safewrap(obj[func]))};_$jscomp$0.strip_empty_properties=function(p){var ret={};_$jscomp$0.each(p,function(v,k){_$jscomp$0.isString(v)&&0<v.length&&(ret[k]=v)});return ret};var COPY_IN_PROGRESS_ATTRIBUTE="undefined"!==typeof Symbol?Symbol("__deepCircularCopyInProgress__"):
"__deepCircularCopyInProgress__";_$jscomp$0.copyAndTruncateStrings=function(object,maxStringLength){return deepCircularCopy(object,function(value){"string"===typeof value&&null!==maxStringLength&&(value=value.slice(0,maxStringLength));return value})};_$jscomp$0.base64Encode=function(data){var i=0,ac=0,tmp_arr=[];if(!data)return data;data=_$jscomp$0.utf8Encode(data);do{var o1=data.charCodeAt(i++);var o2=data.charCodeAt(i++);var o3=data.charCodeAt(i++);var h4=o1<<16|o2<<8|o3;o1=h4>>18&63;o2=h4>>12&
63;o3=h4>>6&63;h4&=63;tmp_arr[ac++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(o1)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(o2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(o3)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(h4)}while(i<data.length);i=tmp_arr.join("");switch(data.length%3){case 1:i=i.slice(0,-2)+"\x3d\x3d";break;case 2:i=i.slice(0,-1)+"\x3d"}return i};
_$jscomp$0.utf8Encode=function(string){string=(string+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var utftext="",end,n;var start=end=0;var stringl=string.length;for(n=0;n<stringl;n++){var c1=string.charCodeAt(n),enc=null;128>c1?end++:enc=127<c1&&2048>c1?String.fromCharCode(c1>>6|192,c1&63|128):String.fromCharCode(c1>>12|224,c1>>6&63|128,c1&63|128);null!==enc&&(end>start&&(utftext+=string.substring(start,end)),utftext+=enc,start=end=n+1)}end>start&&(utftext+=string.substring(start,string.length));
return utftext};_$jscomp$0.UUID=function(){var T=function(){for(var d=1*new Date,i=0;d==1*new Date;)i++;return d.toString(16)+i.toString(16)},UA=function(){function xor(result,byte_array){var j,tmp=0;for(j=0;j<byte_array.length;j++)tmp|=buffer[j]<<8*j;return result^tmp}var i,buffer=[],ret=0;for(i=0;i<userAgent$jscomp$0.length;i++){var ch=userAgent$jscomp$0.charCodeAt(i);buffer.unshift(ch&255);4<=buffer.length&&(ret=xor(ret,buffer),buffer=[])}0<buffer.length&&(ret=xor(ret,buffer));return ret.toString(16)};
return function(){var se=(window.screen.height*window.screen.width).toString(16);return T()+"-"+Math.random().toString(16).replace(".","")+"-"+UA()+"-"+se+"-"+T()}}();_$jscomp$0.isBlockedUA=function(ua){return/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(ua)?!0:!1};_$jscomp$0.HTTPBuildQuery=function(formdata,arg_separator){var use_val,use_key,tph_arr=[];_$jscomp$0.isUndefined(arg_separator)&&(arg_separator="\x26");_$jscomp$0.each(formdata,function(val,key){use_val=
encodeURIComponent(val.toString());use_key=encodeURIComponent(key);tph_arr[tph_arr.length]=use_key+"\x3d"+use_val});return tph_arr.join(arg_separator)};_$jscomp$0.getQueryParam=function(url,param){param=param.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");url=(new RegExp("[\\?\x26]"+param+"\x3d([^\x26#]*)")).exec(url);if(null===url||url&&"string"!==typeof url[1]&&url[1].length)return"";url=url[1];try{url=decodeURIComponent(url)}catch(err){console$1.error("Skipping decoding for malformed query param: "+
url)}return url.replace(/\+/g," ")};_$jscomp$0.getHashParam=function(hash,param){return(hash=hash.match(new RegExp(param+"\x3d([^\x26]*)")))?hash[1]:null};_$jscomp$0.register_event=function(){function makeHandler(element,new_handler,old_handlers){return function(event){if(event=event||fixEvent(window.event)){var ret=!0,old_result;_$jscomp$0.isFunction(old_handlers)&&(old_result=old_handlers(event));event=new_handler.call(element,event);if(!1===old_result||!1===event)ret=!1;return ret}}}function fixEvent(event){event&&
(event.preventDefault=fixEvent.preventDefault,event.stopPropagation=fixEvent.stopPropagation);return event}fixEvent.preventDefault=function(){this.returnValue=!1};fixEvent.stopPropagation=function(){this.cancelBubble=!0};return function(element,type,handler,oldSchool,useCapture){element?element.addEventListener&&!oldSchool?element.addEventListener(type,handler,!!useCapture):(type="on"+type,element[type]=makeHandler(element,handler,element[type])):console$1.error("No valid element provided to register_event")}}();
_$jscomp$0.info={campaignParams:function(){var kw="",params={};_$jscomp$0.each(["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],function(kwkey){kw=_$jscomp$0.getQueryParam(document$1.URL,kwkey);kw.length&&(params[kwkey]=kw)});return params},searchEngine:function(referrer){return 0===referrer.search("https?://(.*)google.([^/?]*)")?"google":0===referrer.search("https?://(.*)bing.com")?"bing":0===referrer.search("https?://(.*)yahoo.com")?"yahoo":0===referrer.search("https?://(.*)duckduckgo.com")?
"duckduckgo":null},searchInfo:function(referrer){var search=_$jscomp$0.info.searchEngine(referrer),ret={};null!==search&&(ret.$search_engine=search,referrer=_$jscomp$0.getQueryParam(referrer,"yahoo"!=search?"q":"p"),referrer.length&&(ret.ph_keyword=referrer));return ret},browser:function(user_agent,vendor,opera){vendor=vendor||"";return opera||_$jscomp$0.includes(user_agent," OPR/")?_$jscomp$0.includes(user_agent,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(user_agent)?"BlackBerry":
_$jscomp$0.includes(user_agent,"IEMobile")||_$jscomp$0.includes(user_agent,"WPDesktop")?"Internet Explorer Mobile":_$jscomp$0.includes(user_agent,"SamsungBrowser/")?"Samsung Internet":_$jscomp$0.includes(user_agent,"Edge")||_$jscomp$0.includes(user_agent,"Edg/")?"Microsoft Edge":_$jscomp$0.includes(user_agent,"FBIOS")?"Facebook Mobile":_$jscomp$0.includes(user_agent,"Chrome")?"Chrome":_$jscomp$0.includes(user_agent,"CriOS")?"Chrome iOS":_$jscomp$0.includes(user_agent,"UCWEB")||_$jscomp$0.includes(user_agent,
"UCBrowser")?"UC Browser":_$jscomp$0.includes(user_agent,"FxiOS")?"Firefox iOS":_$jscomp$0.includes(vendor,"Apple")?_$jscomp$0.includes(user_agent,"Mobile")?"Mobile Safari":"Safari":_$jscomp$0.includes(user_agent,"Android")?"Android Mobile":_$jscomp$0.includes(user_agent,"Konqueror")?"Konqueror":_$jscomp$0.includes(user_agent,"Firefox")?"Firefox":_$jscomp$0.includes(user_agent,"MSIE")||_$jscomp$0.includes(user_agent,"Trident/")?"Internet Explorer":_$jscomp$0.includes(user_agent,"Gecko")?"Mozilla":
""},browserVersion:function(userAgent,vendor,opera){vendor={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,
"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[_$jscomp$0.info.browser(userAgent,vendor,opera)];return void 0===vendor?null:(userAgent=userAgent.match(vendor))?parseFloat(userAgent[userAgent.length-2]):null},os:function(){return/Windows/i.test(userAgent$jscomp$0)?/Phone/.test(userAgent$jscomp$0)||/WPDesktop/.test(userAgent$jscomp$0)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(userAgent$jscomp$0)?
"iOS":/Android/.test(userAgent$jscomp$0)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(userAgent$jscomp$0)?"BlackBerry":/Mac/i.test(userAgent$jscomp$0)?"Mac OS X":/Linux/.test(userAgent$jscomp$0)?"Linux":/CrOS/.test(userAgent$jscomp$0)?"Chrome OS":""},device:function(user_agent){return/Windows Phone/i.test(user_agent)||/WPDesktop/.test(user_agent)?"Windows Phone":/iPad/.test(user_agent)?"iPad":/iPod/.test(user_agent)?"iPod Touch":/iPhone/.test(user_agent)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(user_agent)?
"BlackBerry":/Android/.test(user_agent)&&!/Mobile/.test(user_agent)?"Android Tablet":/Android/.test(user_agent)?"Android":""},deviceType:function(user_agent){user_agent=this.device(user_agent);return"iPad"===user_agent||"Android Tablet"===user_agent?"Tablet":user_agent?"Mobile":"Desktop"},referringDomain:function(referrer){referrer=referrer.split("/");return 3<=referrer.length?referrer[2]:""},properties:function(){return _$jscomp$0.extend(_$jscomp$0.strip_empty_properties({$os:_$jscomp$0.info.os(),
$browser:_$jscomp$0.info.browser(userAgent$jscomp$0,navigator.vendor,window.opera),$device:_$jscomp$0.info.device(userAgent$jscomp$0),$device_type:_$jscomp$0.info.deviceType(userAgent$jscomp$0)}),{$current_url:window.location.href,$host:window.location.host,$pathname:window.location.pathname,$browser_version:_$jscomp$0.info.browserVersion(userAgent$jscomp$0,navigator.vendor,window.opera),$screen_height:window.screen.height,$screen_width:window.screen.width,$lib:"web",$lib_version:"1.10.2",$insert_id:Math.random().toString(36).substring(2,
10)+Math.random().toString(36).substring(2,10),$time:_$jscomp$0.timestamp()/1E3})},people_properties:function(){return _$jscomp$0.extend(_$jscomp$0.strip_empty_properties({$os:_$jscomp$0.info.os(),$browser:_$jscomp$0.info.browser(userAgent$jscomp$0,navigator.vendor,window.opera)}),{$browser_version:_$jscomp$0.info.browserVersion(userAgent$jscomp$0,navigator.vendor,window.opera)})}};_$jscomp$0.isObject=_$jscomp$0.isObject;_$jscomp$0.isBlockedUA=_$jscomp$0.isBlockedUA;_$jscomp$0.isEmptyObject=_$jscomp$0.isEmptyObject;
_$jscomp$0.info=_$jscomp$0.info;_$jscomp$0.info.device=_$jscomp$0.info.device;_$jscomp$0.info.browser=_$jscomp$0.info.browser;_$jscomp$0.info.browserVersion=_$jscomp$0.info.browserVersion;_$jscomp$0.info.properties=_$jscomp$0.info.properties;var usefulElements="a button form input select textarea label".split(" "),RageClick=function(){function RageClick(instance){var enabled=1<arguments.length&&void 0!==arguments[1]?arguments[1]:instance.get_config("rageclick");_classCallCheck(this,RageClick);this.clicks=
[];this.instance=instance;this.enabled=enabled}_createClass(RageClick,[{key:"click",value:function(x,y,timestamp){if(this.enabled){var lastClick=this.clicks[this.clicks.length-1];lastClick&&30>Math.abs(x-lastClick.x)+Math.abs(y-lastClick.y)&&1E3>timestamp-lastClick.timestamp?(this.clicks.push({x,y,timestamp}),3===this.clicks.length&&this.instance.capture("$rageclick")):this.clicks=[{x,y,timestamp}]}}}]);return RageClick}(),autocapture={_initializedTokens:[],_previousElementSibling:function(el){if(el.previousElementSibling)return el.previousElementSibling;
do el=el.previousSibling;while(el&&(!el||1!==el.nodeType));return el},_getPropertiesFromElement:function(elem,maskInputs,maskText){var tag_name=elem.tagName.toLowerCase(),props={tag_name};-1<usefulElements.indexOf(tag_name)&&!maskText&&(props.$el_text=getSafeText(elem));maskText=getClassName(elem);0<maskText.length&&(props.classes=maskText.split(" ").filter(function(c){return""!==c}));_$jscomp$0.each(elem.attributes,function(attr){isSensitiveElement(elem)&&-1===["name","id","class"].indexOf(attr.name)||
maskInputs||!shouldCaptureValue(attr.value)||(props["attr__"+attr.name]=attr.value)});tag_name=maskText=1;for(var currentElem=elem;currentElem=this._previousElementSibling(currentElem);)maskText++,currentElem.tagName===elem.tagName&&tag_name++;props.nth_child=maskText;props.nth_of_type=tag_name;return props},_getDefaultProperties:function(eventType){return{$event_type:eventType,$ce_version:1}},_extractCustomPropertyValue:function(customProperty){var propValues=[];_$jscomp$0.each(document.querySelectorAll(customProperty.css_selector),
function(matchedElem){var value;-1<["input","select"].indexOf(matchedElem.tagName.toLowerCase())?value=matchedElem.value:matchedElem.textContent&&(value=matchedElem.textContent);shouldCaptureValue(value)&&propValues.push(value)});return propValues.join(", ")},_getCustomProperties:function(targetElementList){var props={};_$jscomp$0.each(this._customProperties,function(customProperty){_$jscomp$0.each(customProperty.event_selectors,function(eventSelector){eventSelector=document.querySelectorAll(eventSelector);
_$jscomp$0.each(eventSelector,function(eventElement){_$jscomp$0.includes(targetElementList,eventElement)&&shouldCaptureElement(eventElement)&&(props[customProperty.name]=this._extractCustomPropertyValue(customProperty))},this)},this)},this);return props},_getEventTarget:function(e){return"undefined"===typeof e.target?e.srcElement:e.target.shadowRoot?e.composedPath()[0]:e.target},_captureEvent:function(e,instance){var target=this._getEventTarget(e);target&&3===target.nodeType&&(target=target.parentNode);
"click"===e.type&&this.rageclicks.click(e.clientX,e.clientY,(new Date).getTime());if(shouldCaptureDomEvent(target,e)){for(var targetElementList=[target],curEl=target;curEl.parentNode&&!isTag(curEl,"body");)11===curEl.parentNode.nodeType?(targetElementList.push(curEl.parentNode.host),curEl=curEl.parentNode.host):(targetElementList.push(curEl.parentNode),curEl=curEl.parentNode);var elementsJson=[],href,explicitNoCapture=!1;_$jscomp$0.each(targetElementList,function(el){var shouldCaptureEl=shouldCaptureElement(el);
"a"===el.tagName.toLowerCase()&&(href=el.getAttribute("href"),href=shouldCaptureEl&&shouldCaptureValue(href)&&href);shouldCaptureEl=getClassName(el).split(" ");_$jscomp$0.includes(shouldCaptureEl,"ph-no-capture")&&(explicitNoCapture=!0);elementsJson.push(this._getPropertiesFromElement(el,instance.get_config("mask_all_element_attributes"),instance.get_config("mask_all_text")))},this);instance.get_config("mask_all_text")||(elementsJson[0].$el_text=getSafeText(target));href&&(elementsJson[0].attr__href=
href);if(explicitNoCapture)return!1;e=_$jscomp$0.extend(this._getDefaultProperties(e.type),{$elements:elementsJson},this._getCustomProperties(targetElementList));instance.capture("$autocapture",e);return!0}},_navigate:function(href){window.location.href=href},_addDomEventHandlers:function(instance){var handler=_$jscomp$0.bind(function(e){e=e||window.event;this._captureEvent(e,instance)},this);_$jscomp$0.register_event(document,"submit",handler,!1,!0);_$jscomp$0.register_event(document,"change",handler,
!1,!0);_$jscomp$0.register_event(document,"click",handler,!1,!0)},_customProperties:{},init:function(instance){instance.toolbar.maybeLoadEditor();this.rageclicks=new RageClick(instance)},afterDecideResponse:function(response,instance){var token=instance.get_config("token");-1<this._initializedTokens.indexOf(token)?console.log('autocapture already initialized for token "'+token+'"'):(this._initializedTokens.push(token),response&&response.config&&!0===response.config.enable_collect_everything&&instance.get_config("autocapture")?
(response.custom_properties&&(this._customProperties=response.custom_properties),this._addDomEventHandlers(instance)):instance.__autocapture_enabled=!1)},enabledForProject:function(token,numBuckets,numEnabledBuckets){numBuckets=_$jscomp$0.isUndefined(numBuckets)?10:numBuckets;numEnabledBuckets=_$jscomp$0.isUndefined(numEnabledBuckets)?10:numEnabledBuckets;for(var charCodeSum=0,i=0;i<token.length;i++)charCodeSum+=token.charCodeAt(i);return charCodeSum%numBuckets<numEnabledBuckets},isBrowserSupported:function(){return _$jscomp$0.isFunction(document.querySelectorAll)}};
_$jscomp$0.bind_instance_methods(autocapture);_$jscomp$0.safewrap_instance_methods(autocapture);var DOMAIN_MATCH_REGEX=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,cookieStore={get:function(name){try{name+="\x3d";for(var ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(name))return decodeURIComponent(c.substring(name.length,c.length))}}catch(err){}return null},parse:function(name){try{var cookie=JSON.parse(cookieStore.get(name))||
{}}catch(err){}return cookie},set:function(name,value,days,cross_subdomain,is_secure){try{var cdomain="",expires="",secure="";if(cross_subdomain){var matches=document.location.hostname.match(DOMAIN_MATCH_REGEX),domain=matches?matches[0]:"";cdomain=domain?"; domain\x3d."+domain:""}if(days){var date=new Date;date.setTime(date.getTime()+864E5*days);expires="; expires\x3d"+date.toGMTString()}is_secure&&(secure="; secure");var new_cookie_val=name+"\x3d"+encodeURIComponent(value)+expires+"; path\x3d/"+
cdomain+secure;return document.cookie=new_cookie_val}catch(err){}},remove:function(name,cross_subdomain){try{cookieStore.set(name,"",-1,cross_subdomain)}catch(err){}}},_localStorage_supported=null,localStore={is_supported:function(){if(null!==_localStorage_supported)return _localStorage_supported;var supported=!0;try{localStore.set("__mplssupport__","xyz"),"xyz"!==localStore.get("__mplssupport__")&&(supported=!1),localStore.remove("__mplssupport__")}catch(err){supported=!1}supported||console$1.error("localStorage unsupported; falling back to cookie store");
return _localStorage_supported=supported},error:function(msg){console$1.error("localStorage error: "+msg)},get:function(name){try{return window.localStorage.getItem(name)}catch(err){localStore.error(err)}return null},parse:function(name){try{return JSON.parse(localStore.get(name))||{}}catch(err){}return null},set:function(name,value){try{window.localStorage.setItem(name,value)}catch(err){localStore.error(err)}},remove:function(name){try{window.localStorage.removeItem(name)}catch(err){localStore.error(err)}}},
memoryStorage={},memoryStore={is_supported:function(){return!0},error:function(msg){console$1.error("memoryStorage error: "+msg)},parse:function(name){return memoryStorage[name]||null},set:function(name,value){memoryStorage[name]=value},remove:function(name){delete memoryStorage[name]}},PostHogPeople=function(){};_$jscomp$0.extend(PostHogPeople.prototype,{set_action:function(prop,to){var data={},$set={};_$jscomp$0.isObject(prop)?_$jscomp$0.each(prop,function(v,k){this._is_reserved_property(k)||($set[k]=
v)},this):$set[prop]=to;data.$set=$set;return data},set_once_action:function(prop,to){var data={},$set_once={};_$jscomp$0.isObject(prop)?_$jscomp$0.each(prop,function(v,k){this._is_reserved_property(k)||($set_once[k]=v)},this):$set_once[prop]=to;data.$set_once=$set_once;return data}});PostHogPeople.prototype._init=function(posthog_instance){this._posthog=posthog_instance};PostHogPeople.prototype.set=addOptOutCheckPostHogPeople(function(prop,to,callback){var data=this.set_action(prop,to);_$jscomp$0.isObject(prop)&&
(callback=to);this._get_config("save_referrer")&&this._posthog.persistence.update_referrer_info(document.referrer);data.$set=_$jscomp$0.extend({},_$jscomp$0.info.people_properties(),this._posthog.persistence.get_referrer_info(),data.$set);return this._send_request(data,callback)});PostHogPeople.prototype.set_once=addOptOutCheckPostHogPeople(function(prop,to,callback){var data=this.set_once_action(prop,to);_$jscomp$0.isObject(prop)&&(callback=to);return this._send_request(data,callback)});PostHogPeople.prototype.toString=
function(){return this._posthog.toString()+".people"};PostHogPeople.prototype._send_request=function(data,callback){data.$token=this._get_config("token");data.$distinct_id=this._posthog.get_distinct_id();var device_id=this._posthog.get_property("$device_id"),user_id=this._posthog.get_property("$user_id"),had_persisted_distinct_id=this._posthog.get_property("$had_persisted_distinct_id");device_id&&(data.$device_id=device_id);user_id&&(data.$user_id=user_id);had_persisted_distinct_id&&(data.$had_persisted_distinct_id=
had_persisted_distinct_id);device_id=_$jscomp$0.encodeDates(data);data=_$jscomp$0.copyAndTruncateStrings(device_id,this._get_config("properties_string_max_length"));device_id=JSON.stringify(device_id);device_id=_$jscomp$0.base64Encode(device_id);this._posthog._send_request(this._get_config("api_host")+"/engage/",{data:device_id},{},this._posthog._prepare_callback(callback,data));return data};PostHogPeople.prototype._get_config=function(conf_var){return this._posthog.get_config(conf_var)};PostHogPeople.prototype._is_reserved_property=
function(prop){return"$distinct_id"===prop||"$token"===prop||"$device_id"===prop||"$user_id"===prop||"$had_persisted_distinct_id"===prop};PostHogPeople.prototype.set=PostHogPeople.prototype.set;PostHogPeople.prototype.set_once=PostHogPeople.prototype.set_once;PostHogPeople.prototype.toString=PostHogPeople.prototype.toString;var PostHogFeatureFlags=function(){function PostHogFeatureFlags(instance){_classCallCheck(this,PostHogFeatureFlags);this.instance=instance;this._override_warning=!1;this.flagCallReported=
{}}_createClass(PostHogFeatureFlags,[{key:"getFlags",value:function(){return this.instance.get_property("$override_feature_flags")?(this._override_warning||console.warn("[PostHog] Overriding feature flags! Feature flags from server were: "+JSON.stringify(this.instance.get_property("$active_feature_flags"))),this._override_warning=!0,this.instance.get_property("$override_feature_flags")):this.instance.get_property("$active_feature_flags")}},{key:"reloadFeatureFlags",value:function(){var _this=this,
token=this.instance.get_config("token");token=JSON.stringify({token,distinct_id:this.instance.get_distinct_id()});token=_$jscomp$0.base64Encode(token);this.instance._send_request(this.instance.get_config("api_host")+"/decide/",{data:token},{method:"POST"},this.instance._prepare_callback(function(response){response.featureFlags?_this.instance.persistence&&_this.instance.persistence.register({$active_feature_flags:response.featureFlags}):_this.instance.persistence&&_this.instance.persistence.unregister("$active_feature_flags")}))}},
{key:"isFeatureEnabled",value:function(key){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.getFlags())return console.warn('isFeatureEnabled for key "'+key+"\" failed. Feature flags didn't load in time."),!1;var flagEnabled=-1<this.getFlags().indexOf(key);!options.send_event&&"send_event"in options||this.flagCallReported[key]||(this.flagCallReported[key]=!0,this.instance.capture("$feature_flag_called",{$feature_flag:key,$feature_flag_response:flagEnabled}));return flagEnabled}},
{key:"override",value:function(flags){if(!1===flags)return this.instance.persistence.unregister("$override_feature_flags");this.instance.persistence.register("$override_feature_flags",flags)}}]);return PostHogFeatureFlags}(),RESERVED_PROPERTIES="__mps __mpso __mpus __mpa __mpap __mpr __mpu $people_distinct_id __alias __cmpns __timers $session_recording_enabled $sesid".split(" "),PostHogPersistence=function(config){this.props={};this.campaign_params_saved=!1;this.featureFlagEventHandlers=[];this.name=
config.persistence_name?"ph_"+config.persistence_name:"ph_"+config.token+"_posthog";var storage_type=config.persistence;"cookie"!==storage_type&&"localStorage"!==storage_type&&"memory"!==storage_type&&(console$1.critical("Unknown persistence type "+storage_type+"; falling back to cookie"),storage_type=config.persistence="cookie");"localStorage"===storage_type&&localStore.is_supported()?this.storage=localStore:this.storage="memory"===storage_type?memoryStore:cookieStore;this.load();this.update_config(config);
this.save()};PostHogPersistence.prototype.addFeatureFlagsHandler=function(handler){this.featureFlagEventHandlers.push(handler);return!0};PostHogPersistence.prototype.receivedFeatureFlags=function(flags){this.featureFlagEventHandlers.forEach(function(handler){return handler(flags)})};PostHogPersistence.prototype.properties=function(){var p={};_$jscomp$0.each(this.props,function(v,k){_$jscomp$0.include(RESERVED_PROPERTIES,k)||(p[k]=v)});return p};PostHogPersistence.prototype.load=function(){if(!this.disabled){var entry=
this.storage.parse(this.name);entry&&(this.props=_$jscomp$0.extend({},entry))}};PostHogPersistence.prototype.save=function(){this.disabled||this.storage.set(this.name,JSON.stringify(this.props),this.expire_days,this.cross_subdomain,this.secure)};PostHogPersistence.prototype.remove=function(){this.storage.remove(this.name,!1);this.storage.remove(this.name,!0)};PostHogPersistence.prototype.clear=function(){this.remove();this.props={}};PostHogPersistence.prototype.register_once=function(props,default_value,
days){return _$jscomp$0.isObject(props)?("undefined"===typeof default_value&&(default_value="None"),this.expire_days="undefined"===typeof days?this.default_expiry:days,props&&props.$active_feature_flags&&this.receivedFeatureFlags(props.$active_feature_flags),_$jscomp$0.each(props,function(val,prop){this.props.hasOwnProperty(prop)&&this.props[prop]!==default_value||(this.props[prop]=val)},this),this.save(),!0):!1};PostHogPersistence.prototype.register=function(props,days){return _$jscomp$0.isObject(props)?
(this.expire_days="undefined"===typeof days?this.default_expiry:days,props&&props.$active_feature_flags&&this.receivedFeatureFlags(props.$active_feature_flags),_$jscomp$0.extend(this.props,props),this.save(),!0):!1};PostHogPersistence.prototype.unregister=function(prop){prop in this.props&&(delete this.props[prop],this.save(),"$active_feature_flags"===prop&&this.receivedFeatureFlags([]))};PostHogPersistence.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(_$jscomp$0.info.campaignParams()),
this.campaign_params_saved=!0)};PostHogPersistence.prototype.update_search_keyword=function(referrer){this.register(_$jscomp$0.info.searchInfo(referrer))};PostHogPersistence.prototype.update_referrer_info=function(referrer){this.register_once({$initial_referrer:referrer||"$direct",$initial_referring_domain:_$jscomp$0.info.referringDomain(referrer)||"$direct"},"");this.register({$referrer:referrer||this.props.$referrer||"$direct",$referring_domain:_$jscomp$0.info.referringDomain(referrer)||this.props.$referring_domain||
"$direct"})};PostHogPersistence.prototype.get_referrer_info=function(){return _$jscomp$0.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};PostHogPersistence.prototype.safe_merge=function(props){_$jscomp$0.each(this.props,function(val,prop){prop in props||(props[prop]=val)});return props};PostHogPersistence.prototype.update_config=function(config){this.default_expiry=this.expire_days=config.cookie_expiration;this.set_disabled(config.disable_persistence);
this.set_cross_subdomain(config.cross_subdomain_cookie);this.set_secure(config.secure_cookie)};PostHogPersistence.prototype.set_disabled=function(disabled){(this.disabled=disabled)?this.remove():this.save()};PostHogPersistence.prototype.set_cross_subdomain=function(cross_subdomain){cross_subdomain!==this.cross_subdomain&&(this.cross_subdomain=cross_subdomain,this.remove(),this.save())};PostHogPersistence.prototype.get_cross_subdomain=function(){return this.cross_subdomain};PostHogPersistence.prototype.set_secure=
function(secure){secure!==this.secure&&(this.secure=secure?!0:!1,this.remove(),this.save())};PostHogPersistence.prototype.set_event_timer=function(event_name,timestamp){var timers=this.props.__timers||{};timers[event_name]=timestamp;this.props.__timers=timers;this.save()};PostHogPersistence.prototype.remove_event_timer=function(event_name){var timestamp=(this.props.__timers||{})[event_name];_$jscomp$0.isUndefined(timestamp)||(delete this.props.__timers[event_name],this.save());return timestamp};var SessionRecording=
function(){function SessionRecording(instance){_classCallCheck(this,SessionRecording);this.instance=instance;this.captureStarted=!1;this.snapshots=[];this.emit=!1;this.endpoint="/e/"}_createClass(SessionRecording,[{key:"startRecordingIfEnabled",value:function(){this.instance.get_property("$session_recording_enabled")&&!this.instance.get_config("disable_session_recording")&&this._startCapture()}},{key:"afterDecideResponse",value:function(response){var enableRecordings=!this.instance.get_config("disable_session_recording")&&
!!response.sessionRecording;this.instance.persistence&&this.instance.persistence.register(_defineProperty({},"$session_recording_enabled",enableRecordings));enableRecordings&&(response.sessionRecording.endpoint&&(this.endpoint=response.sessionRecording.endpoint),this.submitRecordings())}},{key:"submitRecordings",value:function(){var _this=this;this.emit=!0;this._startCapture();this.snapshots.forEach(function(properties){return _this._captureSnapshot(properties)})}},{key:"_startCapture",value:function(){"undefined"===
typeof Object.assign||this.captureStarted||this.instance.get_config("disable_session_recording")||(this.captureStarted=!0,loadScript(this.instance.get_config("api_host")+"/static/recorder.js?v\x3d1.10.2",_$jscomp$0.bind(this._onScriptLoaded,this)))}},{key:"_onScriptLoaded",value:function(){var _this2=this,sessionRecordingOptions={blockClass:"ph-no-capture",blockSelector:null,ignoreClass:"ph-ignore-input",maskAllInputs:!1,maskInputOptions:{},maskInputFn:null,slimDOMOptions:{},collectFonts:!1},userSessionRecordingOptions=
this.instance.get_config("session_recording"),_i=0;for(userSessionRecordingOptions=Object.entries(userSessionRecordingOptions||{});_i<userSessionRecordingOptions.length;_i++){var _Object$entries$_i=_slicedToArray(userSessionRecordingOptions[_i],2),key=_Object$entries$_i[0];_Object$entries$_i=_Object$entries$_i[1];key in sessionRecordingOptions&&(sessionRecordingOptions[key]=_Object$entries$_i)}window.rrweb.record(_objectSpread2({emit:function(data){var persistence=_this2.instance.persistence,timestamp=
data.timestamp,_ref2=_slicedToArray(persistence.props.$sesid||[0,null],2),sessionId=_ref2[1];18E5<Math.abs(timestamp-_ref2[0])&&(sessionId=_$jscomp$0.UUID());persistence.register(_defineProperty({},"$sesid",[timestamp,sessionId]));persistence={$snapshot_data:data,$session_id:sessionId};_this2.instance._captureMetrics.incr("rrweb-record");_this2.instance._captureMetrics.incr("rrweb-record-".concat(data.type));_this2.emit?_this2._captureSnapshot(persistence):_this2.snapshots.push(persistence)}},sessionRecordingOptions));
this.instance._addCaptureHook(function(eventName){"$pageview"===eventName&&window.rrweb.record.addCustomEvent("$pageview",{href:window.location.href})})}},{key:"_captureSnapshot",value:function(properties){this.instance.capture("$snapshot",properties,{transport:"XHR",method:"POST",endpoint:this.endpoint,_forceCompression:!0,_noTruncate:!0,_batchKey:"sessionRecording",_metrics:{rrweb_full_snapshot:2===properties.$snapshot_data.type}})}}]);return SessionRecording}(),Decide=function(){function Decide(instance){_classCallCheck(this,
Decide);this.instance=instance}_createClass(Decide,[{key:"call",value:function(){var _this=this,json_data=JSON.stringify({token:this.instance.get_config("token"),distinct_id:this.instance.get_distinct_id()});json_data=_$jscomp$0.base64Encode(json_data);this.instance._send_request(this.instance.get_config("api_host")+"/decide/",{data:json_data},{method:"POST"},function(response){return _this.parseDecideResponse(response)})}},{key:"parseDecideResponse",value:function(response){if(document&&document.body)if(this.instance.toolbar.afterDecideResponse(response),
this.instance.sessionRecording.afterDecideResponse(response),autocapture.afterDecideResponse(response,this.instance),response.featureFlags?this.instance.persistence&&this.instance.persistence.register({$active_feature_flags:response.featureFlags}):this.instance.persistence&&this.instance.persistence.unregister("$active_feature_flags"),response.supportedCompression){var compression={},_iterator=_createForOfIteratorHelper(response.supportedCompression),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;)compression[_step.value]=
!0}catch(err){_iterator.e(err)}finally{_iterator.f()}this.instance.compression=compression}else this.instance.compression={};else console.log("document not ready yet, trying again in 500 milliseconds..."),setTimeout(function(){this.parseDecideResponse(response)},500)}}]);return Decide}(),Toolbar=function(){function Toolbar(instance){_classCallCheck(this,Toolbar);this.instance=instance}_createClass(Toolbar,[{key:"afterDecideResponse",value:function(response){var editorParams=response.editorParams||
(response.toolbarVersion?{toolbarVersion:response.toolbarVersion}:{});response.isAuthenticated&&editorParams.toolbarVersion&&0===editorParams.toolbarVersion.indexOf("toolbar")&&(this._loadEditor(_objectSpread2(_objectSpread2({},editorParams),{},{apiURL:this.instance.get_config("api_host")})),this.instance.set_config({debug:!0}))}},{key:"maybeLoadEditor",value:function(){var location=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.location,localStorage=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:window.localStorage,history=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window.history;try{var stateHash=_$jscomp$0.getHashParam(location.hash,"__posthog")||_$jscomp$0.getHashParam(location.hash,"state"),state=stateHash?JSON.parse(decodeURIComponent(stateHash)):null;if(!state||"mpeditor"!==state.action&&"ph_authorize"!==state.action){var editorParams=JSON.parse(localStorage.getItem("_postHogEditorParams")||"{}");delete editorParams.userIntent}else(editorParams=state)&&0<Object.keys(editorParams).length&&
(localStorage.setItem("_postHogEditorParams",JSON.stringify(editorParams)),state.desiredHash?location.hash=state.desiredHash:history?history.replaceState("",document.title,location.pathname+location.search):location.hash="");editorParams.apiURL=this.instance.get_config("api_host");return editorParams.token&&this.instance.get_config("token")===editorParams.token?(this._loadEditor(editorParams),!0):!1}catch(e){return!1}}},{key:"_loadEditor",value:function(editorParams){var _this=this;if(!window._postHogToolbarLoaded){window._postHogToolbarLoaded=
!0;var host=editorParams.jsURL||editorParams.apiURL||this.instance.get_config("api_host");host=host+(host.endsWith("/")?"":"/")+"static/toolbar.js?_ts\x3d"+(new Date).getTime();loadScript(host,function(){window.ph_load_editor(editorParams)});_$jscomp$0.register_event(window,"turbolinks:load",function(){window._postHogToolbarLoaded=!1;_this._loadEditor(editorParams)});return!0}return!1}}]);return Toolbar}(),RequestQueue=function(){function RequestQueue(captureMetrics,handlePollRequest){var pollInterval=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:3E3;_classCallCheck(this,RequestQueue);this.captureMetrics=captureMetrics;this.handlePollRequest=handlePollRequest;this.isPolling=!0;this._event_queue=[];this._empty_queue_count=0;this._poller=function(){};this._pollInterval=pollInterval}_createClass(RequestQueue,[{key:"setPollInterval",value:function(interval){this._pollInterval=interval;this.isPolling&&this.poll()}},{key:"enqueue",value:function(url,data,options){this.captureMetrics.incr("batch-enqueue");
this._event_queue.push({url,data,options});this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var _this=this;clearTimeout(this._poller);this._poller=setTimeout(function(){if(0<_this._event_queue.length){var requests=_this.formatQueue(),_loop=function(key){var _requests$key=requests[key];key=_requests$key.url;var data=_requests$key.data;_requests$key=_requests$key.options;_$jscomp$0.each(data,function(_,dataKey){data[dataKey].offset=Math.abs(data[dataKey].timestamp-_this.getTime());
delete data[dataKey].timestamp});_this.handlePollRequest(key,data,_requests$key);_this.captureMetrics.incr("batch-requests");_this.captureMetrics.incr("batch-requests-".concat(key.slice(key.length-2)));_this.captureMetrics.incr("batch-handle",data.length);_this.captureMetrics.incr("batch-handle-".concat(key.slice(key.length-2)),data.length)},key$jscomp$0;for(key$jscomp$0 in requests)_loop(key$jscomp$0);_this._event_queue.length=0}else _this._empty_queue_count++;4<_this._empty_queue_count&&(_this.isPolling=
!1,_this._empty_queue_count=0);_this.isPolling&&_this.poll()},this._pollInterval)}},{key:"updateUnloadMetrics",value:function(){var requests=this.formatQueue(),key;for(key in requests){var _requests$key2=requests[key],url=_requests$key2.url;_requests$key2=_requests$key2.data;this.captureMetrics.incr("batch-unload-requests");this.captureMetrics.incr("batch-unload-requests-".concat(url.slice(url.length-2)));this.captureMetrics.incr("batch-unload",_requests$key2.length);this.captureMetrics.incr("batch-unload-".concat(url.slice(url.length-
2)),_requests$key2.length)}}},{key:"unload",value:function(){clearTimeout(this._poller);var requests=0<this._event_queue.length?this.formatQueue():{};this._event_queue.length=0;for(var key in requests){var _requests$key3=requests[key];this.handlePollRequest(_requests$key3.url,_requests$key3.data,_objectSpread2(_objectSpread2({},_requests$key3.options),{},{transport:"sendbeacon"}))}}},{key:"formatQueue",value:function(){var requests={};_$jscomp$0.each(this._event_queue,function(request){var url=request.url,
data=request.data,key=((request=request.options)?request._batchKey:null)||url;void 0===requests[key]&&(requests[key]={data:[],url,options:request});request&&requests[key].options&&requests[key].options._metrics&&!requests[key].options._metrics.rrweb_full_snapshot&&(requests[key].options._metrics.rrweb_full_snapshot=request._metrics.rrweb_full_snapshot);requests[key].data.push(data)});return requests}},{key:"getTime",value:function(){return(new Date).getTime()}}]);return RequestQueue}(),CaptureMetrics=
function(){function CaptureMetrics(enabled,capture){var getTime=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return(new Date).getTime()};_classCallCheck(this,CaptureMetrics);this.enabled=enabled;this.capture=capture;this.getTime=getTime;this.metrics={};this.requests={}}_createClass(CaptureMetrics,[{key:"incr",value:function(key){var by=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.enabled&&(key="phjs-".concat(key),this.metrics[key]=(this.metrics[key]||0)+by)}},
{key:"decr",value:function(key){this.enabled&&(key="phjs-".concat(key),this.metrics[key]=(this.metrics[key]||0)-1)}},{key:"startRequest",value:function(payload){if(this.enabled){var requestId=_$jscomp$0.UUID();this.requests[requestId]=[this.getTime(),payload];return requestId}}},{key:"finishRequest",value:function(requestId){if(this.enabled&&this.requests[requestId]){var _this$requests$reques=_slicedToArray(this.requests[requestId],2),startTime=_this$requests$reques[0];_this$requests$reques=_this$requests$reques[1];
_this$requests$reques.duration=this.getTime()-startTime;delete this.requests[requestId];return _this$requests$reques}}},{key:"markRequestFailed",value:function(payload){this.enabled&&this.capture("$capture_failed_request",payload)}},{key:"captureInProgressRequests",value:function(){var _this=this;this.enabled&&Object.keys(this.requests).forEach(function(requestId){requestId=_this.finishRequest(requestId);_this.markRequestFailed(_objectSpread2(_objectSpread2({},requestId),{},{type:"inflight_at_unload"}))})}}]);
return CaptureMetrics}(),u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(eb,start){for(var b=new u16(31),i=0;31>i;++i)b[i]=start+=1<<eb[i-1];eb=new u32(b[30]);for(i=1;30>i;++i)for(start=b[i];start<b[i+1];++start)eb[start]=start-b[i]<<5|i;return[b,eb]},_a=freb(fleb,
2),revfl=_a[1];_a[0][28]=258;revfl[258]=28;for(var revfd=freb(fdeb,0)[1],rev=new u16(32768),i$jscomp$0=0;32768>i$jscomp$0;++i$jscomp$0){var x$jscomp$0=(i$jscomp$0&43690)>>>1|(i$jscomp$0&21845)<<1;x$jscomp$0=(x$jscomp$0&52428)>>>2|(x$jscomp$0&13107)<<2;x$jscomp$0=(x$jscomp$0&61680)>>>4|(x$jscomp$0&3855)<<4;rev[i$jscomp$0]=((x$jscomp$0&65280)>>>8|(x$jscomp$0&255)<<8)>>>1}var hMap=function(cd,mb,r){for(var s=cd.length,i=0,l=new u16(mb);i<s;++i)++l[cd[i]-1];var le=new u16(mb);for(i=0;i<mb;++i)le[i]=le[i-
1]+l[i-1]<<1;if(r)for(r=new u16(1<<mb),l=15-mb,i=0;i<s;++i){if(cd[i]){var sv=i<<4|cd[i],r_1=mb-cd[i],v=le[cd[i]-1]++<<r_1;for(r_1=v|(1<<r_1)-1;v<=r_1;++v)r[rev[v]>>>l]=sv}}else for(r=new u16(s),i=0;i<s;++i)r[i]=rev[le[cd[i]-1]++]>>>15-cd[i];return r},flt=new u8(288);for(i$jscomp$0=0;144>i$jscomp$0;++i$jscomp$0)flt[i$jscomp$0]=8;for(i$jscomp$0=144;256>i$jscomp$0;++i$jscomp$0)flt[i$jscomp$0]=9;for(i$jscomp$0=256;280>i$jscomp$0;++i$jscomp$0)flt[i$jscomp$0]=7;for(i$jscomp$0=280;288>i$jscomp$0;++i$jscomp$0)flt[i$jscomp$0]=
8;var fdt=new u8(32);for(i$jscomp$0=0;32>i$jscomp$0;++i$jscomp$0)fdt[i$jscomp$0]=5;var flm=hMap(flt,9,0),fdm=hMap(fdt,5,0),slc=function(v,s,e){if(null==s||0>s)s=0;if(null==e||e>v.length)e=v.length;var n=new (v instanceof u16?u16:v instanceof u32?u32:u8)(e-s);n.set(v.subarray(s,e));return n},wbits=function(d,p,v){v<<=p&7;p=p/8>>0;d[p]|=v;d[p+1]|=v>>>8},wbits16=function(d,p,v){v<<=p&7;p=p/8>>0;d[p]|=v;d[p+1]|=v>>>8;d[p+2]|=v>>>16},hTree=function(d,mb){for(var t=[],i=0;i<d.length;++i)d[i]&&t.push({s:i,
f:d[i]});var s=t.length;d=t.slice();if(!s)return[new u8(0),0];if(1==s)return mb=new u8(t[0].s+1),mb[t[0].s]=1,[mb,1];t.sort(function(a,b){return a.f-b.f});t.push({s:-1,f:25001});i=t[0];var r=t[1],i0=0,i1=1,i2=2;for(t[0]={s:-1,f:i.f+r.f,l:i,r};i1!=s-1;)i=t[t[i0].f<t[i2].f?i0++:i2++],r=t[i0!=i1&&t[i0].f<t[i2].f?i0++:i2++],t[i1++]={s:-1,f:i.f+r.f,l:i,r};r=d[0].s;for(i=1;i<s;++i)d[i].s>r&&(r=d[i].s);var tr=new u16(r+1);i1=ln$jscomp$0(t[i1-1],tr,0);if(i1>mb){t=i=0;r=i1-mb;i0=1<<r;for(d.sort(function(a,
b){return tr[b.s]-tr[a.s]||a.f-b.f});i<s;++i)if(i2=d[i].s,tr[i2]>mb)t+=i0-(1<<i1-tr[i2]),tr[i2]=mb;else break;for(t>>>=r;0<t;)s=d[i].s,tr[s]<mb?t-=1<<mb-tr[s]++-1:++i;for(;0<=i&&t;--i)s=d[i].s,tr[s]==mb&&(--tr[s],++t);i1=mb}return[new u8(tr),i1]},ln$jscomp$0=function ln(n,l,d){return-1==n.s?Math.max(ln(n.l,l,d+1),ln(n.r,l,d+1)):l[n.s]=d},lc=function(c){for(var s=c.length;s&&!c[--s];);for(var cl=new u16(++s),cli=0,cln=c[0],cls=1,w=function(v){cl[cli++]=v},i=1;i<=s;++i)if(c[i]==cln&&i!=s)++cls;else{if(!cln&&
2<cls){for(;138<cls;cls-=138)w(32754);2<cls&&(w(10<cls?cls-11<<5|28690:cls-3<<5|12305),cls=0)}else if(3<cls){w(cln);for(--cls;6<cls;cls-=6)w(8304);2<cls&&(w(cls-3<<5|8208),cls=0)}for(;cls--;)w(cln);cls=1;cln=c[i]}return[cl.subarray(0,cli),s]},clen=function(cf,cl){for(var l=0,i=0;i<cl.length;++i)l+=cf[i]*cl[i];return l},wfblk=function(out,pos,dat){var s=dat.length;pos+=2;pos=(pos/8>>0)+(pos&7&&1);out[pos]=s&255;out[pos+1]=s>>>8;out[pos+2]=out[pos]^255;out[pos+3]=out[pos+1]^255;for(var i=0;i<s;++i)out[pos+
i+4]=dat[i];return 8*(pos+4+s)},wblk=function(dat,out,_final2,syms,lf,df,eb,li,bs,bl,p){wbits(out,p++,_final2);++lf[256];_final2=hTree(lf,15);var dlt=_final2[0],mlb=_final2[1];_final2=hTree(df,15);var ddt=_final2[0],mdb=_final2[1];_final2=lc(dlt);var lclt=_final2[0],nlc=_final2[1];_final2=lc(ddt);for(var lcdt=_final2[0],ndc=_final2[1],lcfreq=new u16(19),i=0;i<lclt.length;++i)lcfreq[lclt[i]&31]++;for(i=0;i<lcdt.length;++i)lcfreq[lcdt[i]&31]++;i=hTree(lcfreq,7);_final2=i[0];i=i[1];for(var nlcc=19;4<
nlcc&&!_final2[clim[nlcc-1]];--nlcc);var flen=bl+5<<3,ftlen=clen(lf,flt)+clen(df,fdt)+eb;lf=clen(lf,dlt)+clen(df,ddt)+eb+14+3*nlcc+clen(lcfreq,_final2)+(2*lcfreq[16]+3*lcfreq[17]+7*lcfreq[18]);if(flen<=ftlen&&flen<=lf)return wfblk(out,p,dat.subarray(bs,bs+bl));wbits(out,p,1+(lf<ftlen));p+=2;if(lf<ftlen){dat=hMap(dlt,mlb,0);bs=dlt;bl=hMap(ddt,mdb,0);dlt=hMap(_final2,i,0);wbits(out,p,nlc-257);wbits(out,p+5,ndc-1);wbits(out,p+10,nlcc-4);p+=14;for(i=0;i<nlcc;++i)wbits(out,p+3*i,_final2[clim[i]]);p+=3*
nlcc;lclt=[lclt,lcdt];for(nlc=0;2>nlc;++nlc)for(lcdt=lclt[nlc],i=0;i<lcdt.length;++i)ndc=lcdt[i]&31,wbits(out,p,dlt[ndc]),p+=_final2[ndc],15<ndc&&(wbits(out,p,lcdt[i]>>>5&127),p+=lcdt[i]>>>12)}else dat=flm,bs=flt,bl=fdm,ddt=fdt;for(i=0;i<li;++i)255<syms[i]?(ndc=syms[i]>>>18&31,wbits16(out,p,dat[ndc+257]),p+=bs[ndc+257],7<ndc&&(wbits(out,p,syms[i]>>>23&31),p+=fleb[ndc]),_final2=syms[i]&31,wbits16(out,p,bl[_final2]),p+=ddt[_final2],3<_final2&&(wbits16(out,p,syms[i]>>>5&8191),p+=fdeb[_final2])):(wbits16(out,
p,dat[syms[i]]),p+=bs[syms[i]]);wbits16(out,p,dat[256]);return p+bs[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dflt=function(dat,lvl,plvl,pre,post,lst){var s=dat.length,o=new u8(pre+s+5*(1+Math.floor(s/7E3))+post),w=o.subarray(pre,o.length-post),pos=0;if(!lvl||8>s)for(plvl=0;plvl<=s;plvl+=65535)lvl=plvl+65535,lvl<s?pos=wfblk(w,pos,dat.subarray(plvl,lvl)):(w[plvl]=lst,pos=wfblk(w,pos,dat.subarray(plvl,s)));else{var opt=deo[lvl-1];lvl=opt>>>13;
opt&=8191;for(var msk_1=(1<<plvl)-1,prev=new u16(32768),head=new u16(msk_1+1),bs1_1=Math.ceil(plvl/3),bs2_1=2*bs1_1,hsh=function(i){return(dat[i]^dat[i+1]<<bs1_1^dat[i+2]<<bs2_1)&msk_1},syms=new u32(25E3),lf=new u16(288),df=new u16(32),lc_1=0,eb=0,li=plvl=0,wi=0,bs=0;plvl<s;++plvl){var hv=hsh(plvl),imod=plvl&32767,pimod=head[hv];prev[imod]=pimod;head[hv]=imod;if(wi<=plvl){var rem=s-plvl;if((7E3<lc_1||24576<li)&&423<rem){pos=wblk(dat,w,0,syms,lf,df,eb,li,bs,plvl-bs,pos);li=lc_1=eb=0;bs=plvl;for(var j=
0;286>j;++j)lf[j]=0;for(j=0;30>j;++j)df[j]=0}var l=2,d=0,ch_1=opt,dif=imod-pimod&32767;if(2<rem&&hv==hsh(plvl-dif)){hv=Math.min(lvl,rem)-1;var maxd=Math.min(32767,plvl);for(rem=Math.min(258,rem);dif<=maxd&&--ch_1&&imod!=pimod;){if(dat[plvl+l]==dat[plvl+l-dif]){for(j=0;j<rem&&dat[plvl+j]==dat[plvl+j-dif];++j);if(j>l){l=j;d=dif;if(j>hv)break;imod=Math.min(dif,j-2);var md=0;for(j=0;j<imod;++j){var ti=plvl-dif+j+32768&32767,cd=ti-prev[ti]+32768&32767;cd>md&&(md=cd,pimod=ti)}}}imod=pimod;pimod=prev[imod];
dif+=imod-pimod+32768&32767}}d?(syms[li++]=268435456|revfl[l]<<18|revfd[d],wi=revfl[l]&31,d=revfd[d]&31,eb+=fleb[wi]+fdeb[d],++lf[257+wi],++df[d],wi=plvl+l,++lc_1):(syms[li++]=dat[plvl],++lf[dat[plvl]])}}pos=wblk(dat,w,lst,syms,lf,df,eb,li,bs,plvl-bs,pos);lst||(pos=wfblk(w,pos,et))}return slc(o,0,pre+((pos/8>>0)+(pos&7&&1))+post)},crct=function(){for(var t=new u32(256),i=0;256>i;++i){for(var c=i,k=9;--k;)c=(c&1&&3988292384)^c>>>1;t[i]=c}return t}(),crc=function(){var c=4294967295;return{p:function(d){for(var cr=
c,i=0;i<d.length;++i)cr=crct[cr&255^d[i]]^cr>>>8;c=cr},d:function(){return c^4294967295}}},wbytes=function(d,b,v){for(;v;++b)d[b]=v,v>>>=8},encodePostData=function encodePostData(data,options){if(options.blob)return new Blob([data.buffer],{type:"text/plain"});if(options.sendBeacon)return data=encodePostData(data,{method:"POST"}),new Blob([data],{type:"application/x-www-form-urlencoded"});if("POST"!==options.method)return null;options=Array.isArray(data)?"data\x3d"+encodeURIComponent(data):"data\x3d"+
encodeURIComponent(data.data);data.compression&&(options+="\x26compression\x3d"+data.compression);return options},xhr=function(url,data,headers,options,captureMetrics,callback){var req=new XMLHttpRequest;req.open(options.method,url,!0);var body=encodePostData(data,options);captureMetrics.incr("_send_request");captureMetrics.incr("_send_request_inflight");var requestId=captureMetrics.startRequest(_objectSpread2({data_size:_$jscomp$0.isString(data)?data.length:body.length,endpoint:url.slice(url.length-
2)},options._metrics));_$jscomp$0.each(headers,function(headerValue,headerName){req.setRequestHeader(headerName,headerValue)});"POST"!==options.method||options.blob||req.setRequestHeader("Content-Type","application/x-www-form-urlencoded");req.withCredentials=!0;req.onreadystatechange=function(){if(4===req.readyState){captureMetrics.incr("xhr-response");captureMetrics.incr("xhr-response-".concat(req.status));captureMetrics.decr("_send_request_inflight");var _data=captureMetrics.finishRequest(requestId);
if(200===req.status){if(callback){try{var response=JSON.parse(req.responseText)}catch(e){console$1.error(e);return}callback(response)}}else response="Bad HTTP status: "+req.status+" "+req.statusText,console$1.error(response),captureMetrics.markRequestFailed(_objectSpread2(_objectSpread2({},_data),{},{type:"non_200",status:req.status,statusText:req.statusText})),callback&&(options.verbose?callback({status:0,error:response}):callback(0))}};req.send(body)},__NOOP=function(){},__NOOPTIONS={},USE_XHR=
win$jscomp$0.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,ENQUEUE_REQUESTS=!USE_XHR&&-1===userAgent$jscomp$0.indexOf("MSIE")&&-1===userAgent$jscomp$0.indexOf("Mozilla"),defaultConfig=function(){return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",autocapture:!0,rageclick:!1,cross_subdomain_cookie:-1===document$1.location.hostname.indexOf("herokuapp.com"),persistence:"cookie",persistence_name:"",cookie_name:"",loaded:function(){},store_google:!0,save_referrer:!0,
test:!1,verbose:!1,img:!1,capture_pageview:!0,debug:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:"https:"===win$jscomp$0.location.protocol,ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,property_blacklist:[],sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,
session_recording:{blockClass:"ph-no-capture",blockSelector:null,ignoreClass:"ph-ignore-input",maskAllInputs:!1,maskInputOptions:{},maskInputFn:null,slimDOMOptions:{},collectFonts:!1},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,_onCapture:function(){},_capture_metrics:!1}},PostHogLib=function(){},create_mplib=function(token,config,name){var target="posthog"===name?posthog_master:posthog_master[name];if(target&&0===init_type)var instance=target;else{if(target&&!_$jscomp$0.isArray(target)){console$1.error("You have already initialized "+
name);return}instance=new PostHogLib}instance._init(token,config,name);instance.people=new PostHogPeople;instance.people._init(instance);instance.featureFlags=new PostHogFeatureFlags(instance);instance.feature_flags=instance.featureFlags;instance.toolbar=new Toolbar(instance);instance.sessionRecording=new SessionRecording(instance);instance.sessionRecording.startRecordingIfEnabled();instance.__autocapture_enabled=instance.get_config("autocapture");instance.get_config("autocapture")&&(autocapture.enabledForProject(instance.get_config("token"),
100,100)?autocapture.isBrowserSupported()?autocapture.init(instance):(instance.__autocapture_enabled=!1,console$1.log("Disabling Automatic Event Collection because this browser is not supported")):(instance.__autocapture_enabled=!1,console$1.log("Not in active bucket: disabling Automatic Event Collection.")));instance.get_config("advanced_disable_decide")||(new Decide(instance)).call();JSCompiler_object_inline_DEBUG_4529=JSCompiler_object_inline_DEBUG_4529||instance.get_config("debug");!_$jscomp$0.isUndefined(target)&&
_$jscomp$0.isArray(target)&&(instance._execute_array.call(instance.people,target.people),instance._execute_array(target));return instance};PostHogLib.prototype.init=function(token,config,name){if(_$jscomp$0.isUndefined(name))console$1.error("You must name your new library: init(token, config, name)");else if("posthog"===name)console$1.error("You must initialize the main posthog object right after you include the PostHog js snippet");else return token=create_mplib(token,config,name),posthog_master[name]=
token,token._loaded(),token};PostHogLib.prototype._init=function(token,config,name){this.__loaded=!0;this.config={};this._triggered_notifs=[];this.compression={};this.set_config(_$jscomp$0.extend({},defaultConfig(),config,{name,token,callback_fn:("posthog"===name?name:"posthog."+name)+"._jsc"}));this._jsc=function(){};this._captureMetrics=new CaptureMetrics(this.get_config("_capture_metrics"),_$jscomp$0.bind(this.capture,this));this._requestQueue=new RequestQueue(this._captureMetrics,_$jscomp$0.bind(this._handle_queued_event,
this));this.__captureHooks=[];this.__request_queue=[];this.persistence=new PostHogPersistence(this.config);this._gdpr_init();token=_$jscomp$0.UUID();this.get_distinct_id()||this.register_once({distinct_id:token,$device_id:token},"");win$jscomp$0.addEventListener&&win$jscomp$0.addEventListener("unload",this._handle_unload.bind(this))};PostHogLib.prototype._loaded=function(){this.get_config("loaded")(this);this._start_queue_if_opted_in();this.get_config("capture_pageview")&&this.capture_pageview()};
PostHogLib.prototype._start_queue_if_opted_in=function(){this.has_opted_out_capturing()||this.get_config("request_batching")&&this._requestQueue.poll()};PostHogLib.prototype._dom_loaded=function(){this.has_opted_out_capturing()||_$jscomp$0.each(this.__request_queue,function(item){this._send_request.apply(this,item)},this);delete this.__request_queue;this._start_queue_if_opted_in()};PostHogLib.prototype._prepare_callback=function(callback,data){if(_$jscomp$0.isUndefined(callback))return null;if(USE_XHR)return function(response){callback(response,
data)};var jsc=this._jsc,randomized_cb=""+Math.floor(1E8*Math.random()),callback_string=this.get_config("callback_fn")+"["+randomized_cb+"]";jsc[randomized_cb]=function(response){delete jsc[randomized_cb];callback(response,data)};return callback_string};PostHogLib.prototype._handle_unload=function(){this.get_config("request_batching")?(this.get_config("capture_pageview")&&this.capture("$pageleave"),this.get_config("_capture_metrics")&&(this._requestQueue.updateUnloadMetrics(),this.capture("$capture_metrics",
this._captureMetrics.metrics),this._captureMetrics.captureInProgressRequests()),this._requestQueue.unload()):this.get_config("capture_pageview")&&this.capture("$pageleave",null,{transport:"sendbeacon"})};PostHogLib.prototype._handle_queued_event=function(url,data,options){data=JSON.stringify(data);this.__compress_and_send_json_request(url,data,options||__NOOPTIONS,__NOOP)};PostHogLib.prototype.__compress_and_send_json_request=function(url,jsonData,options,callback){var JSCompiler_inline_result=this.compression;
JSCompiler_inline_result=JSCompiler_inline_result["gzip-js"]?"gzip-js":JSCompiler_inline_result.lz64?"lz64":"base64";if("lz64"===JSCompiler_inline_result)options=[{data:LZString.compressToBase64(jsonData),compression:"lz64"},options];else if("gzip-js"===JSCompiler_inline_result){var data=strToU8(jsonData),opts={mtime:0};void 0===opts&&(opts={});jsonData=crc();JSCompiler_inline_result=data.length;jsonData.p(data);data=dflt(data,null==opts.level?6:opts.level,null==opts.mem?Math.ceil(1.5*Math.max(8,
Math.min(13,Math.log(data.length)))):12+opts.mem,10+(opts.filename&&opts.filename.length+1||0),8,!0);var s=data.length,o=opts;opts=o.filename;data[0]=31;data[1]=139;data[2]=8;data[8]=2>o.level?4:9==o.level?2:0;data[9]=3;0!=o.mtime&&wbytes(data,4,Math.floor(new Date(o.mtime||Date.now())/1E3));if(opts)for(data[3]=8,o=0;o<=opts.length;++o)data[o+10]=opts.charCodeAt(o);options=[(wbytes(data,s-8,jsonData.d()),wbytes(data,s-4,JSCompiler_inline_result),data),_objectSpread2(_objectSpread2({},options),{},
{blob:!0,urlQueryArgs:{compression:"gzip-js"}})]}else options=[{data:_$jscomp$0.base64Encode(jsonData)},options];options=_slicedToArray(options,2);this._send_request(url,options[0],options[1],callback)};PostHogLib.prototype._send_request=function(url,data,options,callback){if(ENQUEUE_REQUESTS)this.__request_queue.push(arguments);else{var DEFAULT_OPTIONS={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")};options=_$jscomp$0.extend(DEFAULT_OPTIONS,
options||{});USE_XHR||(options.method="GET");DEFAULT_OPTIONS=win$jscomp$0.navigator.sendBeacon&&"sendbeacon"===options.transport.toLowerCase();var args=options.urlQueryArgs||{};args.ip=this.get_config("ip")?1:0;args._=(new Date).getTime().toString();url+="?"+_$jscomp$0.HTTPBuildQuery(args);if(_$jscomp$0.isObject(data)&&this.get_config("img"))DEFAULT_OPTIONS=document$1.createElement("img"),DEFAULT_OPTIONS.src=url,document$1.body.appendChild(DEFAULT_OPTIONS);else if(DEFAULT_OPTIONS)win$jscomp$0.navigator.sendBeacon(url,
encodePostData(data,_objectSpread2(_objectSpread2({},options),{},{sendBeacon:!0})));else if(USE_XHR)try{xhr(url,data,this.get_config("xhr_headers"),options,this._captureMetrics,callback)}catch(e){console$1.error(e)}else DEFAULT_OPTIONS=document$1.createElement("script"),DEFAULT_OPTIONS.type="text/javascript",DEFAULT_OPTIONS.async=!0,DEFAULT_OPTIONS.defer=!0,DEFAULT_OPTIONS.src=url,args=document$1.getElementsByTagName("script")[0],args.parentNode.insertBefore(DEFAULT_OPTIONS,args)}};PostHogLib.prototype._execute_array=
function(array){var fn_name,alias_calls=[],other_calls=[],capturing_calls=[];_$jscomp$0.each(array,function(item){item&&(fn_name=item[0],_$jscomp$0.isArray(fn_name)?capturing_calls.push(item):"function"===typeof item?item.call(this):_$jscomp$0.isArray(item)&&"alias"===fn_name?alias_calls.push(item):_$jscomp$0.isArray(item)&&-1!==fn_name.indexOf("capture")&&"function"===typeof this[fn_name]?capturing_calls.push(item):other_calls.push(item))},this);array=function(calls,context){_$jscomp$0.each(calls,
function(item){if(_$jscomp$0.isArray(item[0])){var caller=context;_$jscomp$0.each(item,function(call){caller=caller[call[0]].apply(caller,call.slice(1))})}else this[item[0]].apply(this,item.slice(1))},context)};array(alias_calls,this);array(other_calls,this);array(capturing_calls,this)};PostHogLib.prototype.push=function(item){this._execute_array([item])};PostHogLib.prototype.capture=function(method,silenceErrors){return _addOptOutCheck(method,function(name){return this.get_config(name)},silenceErrors)}(function(event_name,
properties,options,callback){this._captureMetrics.incr("capture");"$snapshot"===event_name&&this._captureMetrics.incr("snapshot");callback||"function"!==typeof options||(callback=options,options=null);options=options||__NOOPTIONS;var transport=options.transport;transport&&(options.transport=transport);"function"!==typeof callback?callback=__NOOP:win$jscomp$0.console.warn("WARNING! Calling posthog.capture with a callback is deprecated and will be removed soon!");if(_$jscomp$0.isUndefined(event_name)||
"string"!==typeof event_name)console$1.error("No event name provided to posthog.capture");else if(_$jscomp$0.isBlockedUA(userAgent$jscomp$0))callback(0);else{transport=this.persistence.remove_event_timer(event_name);this.persistence.update_search_keyword(document$1.referrer);this.get_config("store_google")&&this.persistence.update_campaign_params();this.get_config("save_referrer")&&this.persistence.update_referrer_info(document$1.referrer);properties={event:event_name,properties:this._calculate_event_properties(event_name,
properties,transport)};"$identify"===event_name&&options.$set&&(properties.$set=options.$set);properties=_$jscomp$0.copyAndTruncateStrings(properties,options._noTruncate?null:this.get_config("properties_string_max_length"));this.get_config("debug")&&console$1.log("PostHog.js send",properties);transport=JSON.stringify(properties);var url=this.get_config("api_host")+(options.endpoint||"/e/"),cb=this._prepare_callback(callback,properties);callback=callback!==__NOOP||options!==__NOOPTIONS;!this.get_config("request_batching")||
callback&&!options._batchKey?this.__compress_and_send_json_request(url,transport,options,cb):(properties.timestamp=new Date,this._requestQueue.enqueue(url,properties,options));this._invokeCaptureHooks(event_name);return properties}});PostHogLib.prototype._addCaptureHook=function(callback){this.__captureHooks.push(callback)};PostHogLib.prototype._invokeCaptureHooks=function(eventName){this.config._onCapture(eventName);_$jscomp$0.each(this.__captureHooks,function(callback){return callback(eventName)})};
PostHogLib.prototype._calculate_event_properties=function(event_name,event_properties,start_timestamp){var properties=event_properties||{};properties.token=this.get_config("token");if("$snapshot"===event_name)return event_name=this.persistence.properties(),properties.distinct_id=event_name.distinct_id,properties;_$jscomp$0.isUndefined(start_timestamp)||(event_properties=(new Date).getTime()-start_timestamp,properties.$duration=parseFloat((event_properties/1E3).toFixed(3)));properties=_$jscomp$0.extend({},
_$jscomp$0.info.properties(),this.persistence.properties(),properties);event_properties=this.get_config("property_blacklist");_$jscomp$0.isArray(event_properties)?_$jscomp$0.each(event_properties,function(blacklisted_prop){delete properties[blacklisted_prop]}):console$1.error("Invalid value for property_blacklist config: "+event_properties);(event_properties=this.get_config("sanitize_properties"))&&(properties=event_properties(properties,event_name));return properties};PostHogLib.prototype.capture_pageview=
function(page){_$jscomp$0.isUndefined(page);this.capture("$pageview")};PostHogLib.prototype.register=function(props,days){this.persistence.register(props,days)};PostHogLib.prototype.register_once=function(props,default_value,days){this.persistence.register_once(props,default_value,days)};PostHogLib.prototype.unregister=function(property){this.persistence.unregister(property)};PostHogLib.prototype._register_single=function(prop,value){var props={};props[prop]=value;this.register(props)};PostHogLib.prototype.isFeatureEnabled=
function(key){return this.featureFlags.isFeatureEnabled(key,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})};PostHogLib.prototype.reloadFeatureFlags=function(){return this.feature_flags.reloadFeatureFlags()};PostHogLib.prototype.onFeatureFlags=function(callback){this.persistence.addFeatureFlagsHandler(callback);var flags=this.feature_flags.getFlags();flags&&callback(flags)};PostHogLib.prototype.identify=function(new_distinct_id,userPropertiesToSet,userPropertiesToSetOnce){if(new_distinct_id){this._captureMetrics.incr("identify");
var previous_distinct_id=this.get_distinct_id();this.register({$user_id:new_distinct_id});this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:previous_distinct_id},"");new_distinct_id!==previous_distinct_id&&new_distinct_id!==this.get_property("__alias")&&(this.unregister("__alias"),this.register({distinct_id:new_distinct_id}));new_distinct_id===previous_distinct_id||this.get_property("$device_id")&&previous_distinct_id!==this.get_property("$device_id")?(userPropertiesToSet&&
this.people.set(userPropertiesToSet),userPropertiesToSetOnce&&this.people.set_once(userPropertiesToSetOnce)):this.capture("$identify",{distinct_id:new_distinct_id,$anon_distinct_id:previous_distinct_id},{$set:userPropertiesToSet||{}},{$set_once:userPropertiesToSetOnce||{}});this.reloadFeatureFlags()}else console$1.error("Unique user id has not been set in posthog.identify")};PostHogLib.prototype.reset=function(reset_device_id){var device_id=this.get_property("$device_id");this.persistence.clear();
var uuid=_$jscomp$0.UUID();this.register_once({distinct_id:uuid,$device_id:reset_device_id?uuid:device_id},"")};PostHogLib.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};PostHogLib.prototype.alias=function(alias,original){if(alias===this.get_property("$people_distinct_id"))return console$1.critical("Attempting to create alias for existing People user - aborting."),-2;var _this=this;_$jscomp$0.isUndefined(original)&&(original=this.get_distinct_id());if(alias!==original)return this._register_single("__alias",
alias),this.capture("$create_alias",{alias,distinct_id:original},function(){_this.identify(alias)});console$1.error("alias matches current distinct_id - skipping api call.");this.identify(alias);return-1};PostHogLib.prototype.set_config=function(config){_$jscomp$0.isObject(config)&&(_$jscomp$0.extend(this.config,config),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),
this.persistence&&this.persistence.update_config(this.config),localStorage&&"true"===localStorage.getItem("ph_debug")&&(this.config.debug=!0),JSCompiler_object_inline_DEBUG_4529=JSCompiler_object_inline_DEBUG_4529||this.get_config("debug"))};PostHogLib.prototype.get_config=function(prop_name){return this.config[prop_name]};PostHogLib.prototype.get_property=function(property_name){return this.persistence.props[property_name]};PostHogLib.prototype.toString=function(){var name=this.get_config("name");
"posthog"!==name&&(name="posthog."+name);return name};PostHogLib.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_capturing_persistence_type")&&localStore.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",
enable_persistence:!1}));this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.get_config("opt_out_capturing_by_default")&&!cookieStore.get("ph_optout")||(cookieStore.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};PostHogLib.prototype._gdpr_update_persistence=function(options){if(options&&options.clear_persistence)options=!0;else if(options&&options.enable_persistence)options=
!1;else return;this.get_config("disable_persistence")||this.persistence.disabled===options||this.persistence.set_disabled(options)};PostHogLib.prototype._gdpr_call_func=function(func,options){options=_$jscomp$0.extend({capture:_$jscomp$0.bind(this.capture,this),persistence_type:this.get_config("opt_out_capturing_persistence_type"),cookie_prefix:this.get_config("opt_out_capturing_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),
secure_cookie:this.get_config("secure_cookie")},options);localStore.is_supported()||"localStorage"!==options.persistence_type||(options.persistence_type="cookie");return func(this.get_config("token"),{capture:options.capture,captureEventName:options.capture_event_name,captureProperties:options.capture_properties,persistenceType:options.persistence_type,persistencePrefix:options.cookie_prefix,cookieExpiration:options.cookie_expiration,crossSubdomainCookie:options.cross_subdomain_cookie,secureCookie:options.secure_cookie})};
PostHogLib.prototype.opt_in_capturing=function(options){options=_$jscomp$0.extend({enable_persistence:!0},options);this._gdpr_call_func(optIn,options);this._gdpr_update_persistence(options)};PostHogLib.prototype.opt_in_captureing=function(options){deprecate_warning("opt_in_captureing");this.opt_in_capturing(options)};PostHogLib.prototype.opt_out_capturing=function(options){options=_$jscomp$0.extend({clear_persistence:!0},options);this._gdpr_call_func(optOut,options);this._gdpr_update_persistence(options)};
PostHogLib.prototype.opt_out_captureing=function(options){deprecate_warning("opt_out_captureing");this.opt_out_capturing(options)};PostHogLib.prototype.has_opted_in_capturing=function(options){return this._gdpr_call_func(hasOptedIn,options)};PostHogLib.prototype.has_opted_in_captureing=function(options){deprecate_warning("has_opted_in_captureing");return this.has_opted_in_capturing(options)};PostHogLib.prototype.has_opted_out_capturing=function(options){return this._gdpr_call_func(hasOptedOut,options)};
PostHogLib.prototype.has_opted_out_captureing=function(options){deprecate_warning("has_opted_out_captureing");return this.has_opted_out_capturing(options)};PostHogLib.prototype.clear_opt_in_out_capturing=function(options){options=_$jscomp$0.extend({enable_persistence:!0},options);this._gdpr_call_func(clearOptInOut,options);this._gdpr_update_persistence(options)};PostHogLib.prototype.clear_opt_in_out_captureing=function(options){deprecate_warning("clear_opt_in_out_captureing");this.clear_opt_in_out_capturing(options)};
PostHogLib.prototype.sentry_integration=function(_posthog,organization,projectId,prefix){this.name="posthog-js";this.setupOnce=function(addGlobalEventProcessor){addGlobalEventProcessor(function(event){if("error"!==event.level||!_posthog.__loaded)return event;event.tags||(event.tags={});event.tags["PostHog URL"]=_posthog.config.api_host+"/person/"+_posthog.get_distinct_id();var data={$sentry_event_id:event.event_id,$sentry_exception:event.exception};organization&&projectId&&(data.$sentry_url=(prefix||
"https://sentry.io/organizations/")+organization+"/issues/?project\x3d"+projectId+"\x26query\x3d"+event.event_id);_posthog.capture("$exception",data);return event})}};PostHogLib.prototype.debug=function(debug){!1===debug?(win$jscomp$0.console.log("You've disabled debug mode."),localStorage&&localStorage.setItem("ph_debug",void 0),this.set_config({debug:!1})):(win$jscomp$0.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),
localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))};PostHogLib.prototype.decodeLZ64=LZString.decompressFromBase64;PostHogLib.prototype.init=PostHogLib.prototype.init;PostHogLib.prototype.reset=PostHogLib.prototype.reset;PostHogLib.prototype.capture=PostHogLib.prototype.capture;PostHogLib.prototype.capture_pageview=PostHogLib.prototype.capture_pageview;PostHogLib.prototype.register=PostHogLib.prototype.register;PostHogLib.prototype.register_once=PostHogLib.prototype.register_once;
PostHogLib.prototype.unregister=PostHogLib.prototype.unregister;PostHogLib.prototype.identify=PostHogLib.prototype.identify;PostHogLib.prototype.alias=PostHogLib.prototype.alias;PostHogLib.prototype.set_config=PostHogLib.prototype.set_config;PostHogLib.prototype.get_config=PostHogLib.prototype.get_config;PostHogLib.prototype.get_property=PostHogLib.prototype.get_property;PostHogLib.prototype.get_distinct_id=PostHogLib.prototype.get_distinct_id;PostHogLib.prototype.toString=PostHogLib.prototype.toString;
PostHogLib.prototype.opt_out_captureing=PostHogLib.prototype.opt_out_captureing;PostHogLib.prototype.opt_in_captureing=PostHogLib.prototype.opt_in_captureing;PostHogLib.prototype.has_opted_out_captureing=PostHogLib.prototype.has_opted_out_captureing;PostHogLib.prototype.has_opted_in_captureing=PostHogLib.prototype.has_opted_in_captureing;PostHogLib.prototype.clear_opt_in_out_captureing=PostHogLib.prototype.clear_opt_in_out_captureing;PostHogLib.prototype.opt_out_capturing=PostHogLib.prototype.opt_out_capturing;
PostHogLib.prototype.opt_in_capturing=PostHogLib.prototype.opt_in_capturing;PostHogLib.prototype.has_opted_out_capturing=PostHogLib.prototype.has_opted_out_capturing;PostHogLib.prototype.has_opted_in_capturing=PostHogLib.prototype.has_opted_in_capturing;PostHogLib.prototype.clear_opt_in_out_capturing=PostHogLib.prototype.clear_opt_in_out_capturing;PostHogLib.prototype.isFeatureEnabled=PostHogLib.prototype.isFeatureEnabled;PostHogLib.prototype.reloadFeatureFlags=PostHogLib.prototype.reloadFeatureFlags;
PostHogLib.prototype.onFeatureFlags=PostHogLib.prototype.onFeatureFlags;PostHogLib.prototype.decodeLZ64=PostHogLib.prototype.decodeLZ64;PostHogLib.prototype.SentryIntegration=PostHogLib.prototype.sentry_integration;PostHogLib.prototype.debug=PostHogLib.prototype.debug;PostHogLib.prototype.LIB_VERSION="1.10.2";PostHogPersistence.prototype.properties=PostHogPersistence.prototype.properties;PostHogPersistence.prototype.update_search_keyword=PostHogPersistence.prototype.update_search_keyword;PostHogPersistence.prototype.update_referrer_info=
PostHogPersistence.prototype.update_referrer_info;PostHogPersistence.prototype.get_cross_subdomain=PostHogPersistence.prototype.get_cross_subdomain;PostHogPersistence.prototype.clear=PostHogPersistence.prototype.clear;_$jscomp$0.safewrap_class(PostHogLib,["identify"]);var instances={},extend_mp=function(){_$jscomp$0.each(instances,function(instance,name){"posthog"!==name&&(posthog_master[name]=instance)});posthog_master._=_$jscomp$0};var init_type=0;var posthog_master=new PostHogLib;(function(){posthog_master.init=
function(token,config,name){if(name)return posthog_master[name]||(posthog_master[name]=instances[name]=create_mplib(token,config,name),posthog_master[name]._loaded()),posthog_master[name];name=posthog_master;instances.posthog?name=instances.posthog:token&&(name=create_mplib(token,config,"posthog"),name._loaded(),instances.posthog=name);posthog_master=name;1===init_type&&(win$jscomp$0.posthog=posthog_master);extend_mp()}})();posthog_master.init();(function(){function dom_loaded_handler(){dom_loaded_handler.done||
(dom_loaded_handler.done=!0,ENQUEUE_REQUESTS=!1,_$jscomp$0.each(instances,function(inst){inst._dom_loaded()}))}function do_scroll_check(){try{document$1.documentElement.doScroll("left")}catch(e){setTimeout(do_scroll_check,1);return}dom_loaded_handler()}if(document$1.addEventListener)"complete"===document$1.readyState?dom_loaded_handler():document$1.addEventListener("DOMContentLoaded",dom_loaded_handler,!1);else if(document$1.attachEvent){document$1.attachEvent("onreadystatechange",dom_loaded_handler);
var toplevel=!1;try{toplevel=null===win$jscomp$0.frameElement}catch(e){}document$1.documentElement.doScroll&&toplevel&&do_scroll_check()}_$jscomp$0.register_event(win$jscomp$0,"load",dom_loaded_handler,!0)})();module.exports=posthog_master}
//# sourceMappingURL=module$node_modules$posthog_js$dist$module.js.map
