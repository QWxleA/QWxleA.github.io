{"version":3,"sources":["frontend/mobile/intent.cljs"],"mappings":"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","names":["frontend.mobile.intent/handle-received-text","result","map__70911","cljs.core/--destructure-map","cljs.core.get","vec__70912","cljs.core.nth","title","url","page","or__4253__auto__","frontend.state/get-current-page","clojure.string/lower-case","frontend.date.journal_name","format","frontend.db/get-page-format","time","frontend.date/get-current-time","and__4251__auto__","logseq.graph-parser.mldoc/link?","cljs.core/not","text","cljs.core._EQ_","clojure.string.split","G__70919","clojure.string/replace","clojure.string/includes?","frontend.util.format","frontend.config/link-format","template","cljs.core.get_in","frontend.state.get_config","values","frontend.state/get-edit-block","frontend.state/append-current-edit-content!","frontend.handler.editor/api-insert-new-block!","frontend.mobile.intent/embed-asset-file","promesa.core.bind","___42626__auto__","promesa.protocols/-promise","basename","js/module$node_modules$path$path.basename","label","frontend.util/node-path","path","frontend.handler.editor/get-asset-path","_file","promesa.core.catch$","js/module$node_modules$$capacitor$filesystem$dist$plugin_cjs.Filesystem","cljs.core/clj->js","error","lambdaisland.glogi.log","cljs.core/identity","frontend.handler.editor/get-asset-file-link","frontend.mobile.intent/embed-text-file","G__70940","js/decodeURIComponent","js/module$node_modules$path$path.join","frontend.config/get-repo-dir","frontend.state/get-current-repo","frontend.config/get-pages-directory","_","frontend.mobile.intent/handle-received-media","p__70970","map__70971","content","frontend.mobile.intent/handle-received-application","p__70982","map__70983","type","application-type","cljs.core/last","frontend.config/mldoc-support?","cljs.core/contains?","clojure.set.union","frontend.config/doc-formats","frontend.config/media-formats","cljs.core.keyword","frontend.handler.notification.show_BANG_","frontend.mobile.intent/decode-received-result","m","cljs.core.into","iter__4652__auto__","s__71007","cljs.core/LazySeq","temp__5720__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","cljs.core/count","b__71009","cljs.core/chunk-buffer","i__71008","vec__71015","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__71006","cljs.core/chunk-rest","vec__71023","cljs.core/first","cljs.core/cons","cljs.core/rest","k","v","cljs.core/vector?","cljs.core/vec","cljs.core.map","clojure.string/blank?","frontend.mobile.util/native-ios?","frontend.mobile.intent/handle-received","received","js/module$node_modules$send_intent$dist$esm$index.SendIntent","cljs.core.js__GT_clj","clojure.string/starts-with?","sb__4795__auto__","goog.string/StringBuffer","*print-newline*-orig-val__71049","cljs.core/*print-newline*","*print-fn*-orig-val__71050","cljs.core/*print-fn*","*print-newline*-temp-val__71051","*print-fn*-temp-val__71052","x__4796__auto__","cljs.pprint.pprint","cljs.core/chunk-first"],"sourcesContent":["(ns frontend.mobile.intent\n  (:require [\"@capacitor/filesystem\" :refer [Filesystem]]\n            [\"send-intent\" :refer [^js SendIntent]]\n            [lambdaisland.glogi :as log]\n            [promesa.core :as p]\n            [clojure.string :as string]\n            [frontend.db :as db]\n            [frontend.handler.editor :as editor-handler]\n            [frontend.state :as state]\n            [frontend.date :as date]\n            [frontend.util :as util]\n            [frontend.config :as config]\n            [logseq.graph-parser.mldoc :as gp-mldoc]\n            [\"path\" :as path]\n            [frontend.mobile.util :as mobile-util]\n            [frontend.handler.notification :as notification]\n            [clojure.pprint :as pprint]\n            [clojure.set :as set]))\n\n(defn- handle-received-text [result]\n  (let [{:keys [title url]} result\n        page (or (state/get-current-page)\n                 (string/lower-case (date/journal-name)))\n        format (db/get-page-format page)\n        time (date/get-current-time)\n        url (if (and (gp-mldoc/link? format title) (not url))\n              title\n              url)\n        text (if (= url title) nil title)\n        [text url] (if (or (gp-mldoc/link? format url) (not url))\n                     [text url]\n                     (string/split url \"\\\"\\n\"))\n        text (some-> text (string/replace #\"^\\\"\" \"\"))\n        url (and url\n                 (cond (or (string/includes? url \"youtube.com\")\n                           (string/includes? url \"youtu.be\"))\n                       (util/format \"{{youtube %s}}\" url)\n\n                       (and (string/includes? url \"twitter.com\")\n                            (string/includes? url \"status\"))\n                       (util/format \"{{twitter %s}}\" url)\n\n                       :else\n                       (if text\n                         (config/link-format format text url)\n                         url)))\n        template (get-in (state/get-config)\n                         [:quick-capture-templates :text]\n                         \"**{time}** [[quick capture]]: {text} {url}\")\n        values (-> (string/replace template \"{time}\" time)\n                   (string/replace \"{text}\" (or text \"\"))\n                   (string/replace \"{url}\" (or url \"\")))]\n    (if (state/get-edit-block)\n      (state/append-current-edit-content! values)\n      (editor-handler/api-insert-new-block! values {:page page\n                                                    :edit-block? false\n                                                    :replace-empty-target? true}))))\n\n(defn- embed-asset-file [url format]\n  (p/let [basename (path/basename url)\n          label (-> basename util/node-path.name)\n          time (date/get-current-time)\n          path (editor-handler/get-asset-path basename)\n          _file (p/catch\n                    (.copy Filesystem (clj->js {:from url :to path}))\n                    (fn [error]\n                      (log/error :copy-file-error {:error error})))\n          url (util/format \"../assets/%s\" basename)\n          url (editor-handler/get-asset-file-link format url label true)\n          template (get-in (state/get-config)\n                           [:quick-capture-templates :media]\n                           \"**{time}** [[quick capture]]: {url}\")]\n    (-> (string/replace template \"{time}\" time)\n        (string/replace \"{url}\" (or url \"\")))))\n\n(defn- embed-text-file [url title]\n  (p/let [time (date/get-current-time)\n          title (some-> (or title (path/basename url))\n                        js/decodeURIComponent\n                        util/node-path.name)\n          path (path/join (config/get-repo-dir (state/get-current-repo))\n                          (config/get-pages-directory)\n                          (path/basename url))\n          _ (p/catch\n                (.copy Filesystem (clj->js {:from url :to path}))\n                (fn [error]\n                  (log/error :copy-file-error {:error error})))\n          url (util/format \"[[%s]]\" title)\n          template (get-in (state/get-config)\n                           [:quick-capture-templates :text]\n                           \"**{time}** [[quick capture]]: {url}\")]\n    (-> (string/replace template \"{time}\" time)\n        (string/replace \"{url}\" (or url \"\")))))\n\n(defn- handle-received-media [result]\n  (p/let [{:keys [url]} result\n          page (or (state/get-current-page) (string/lower-case (date/journal-name)))\n          format (db/get-page-format page)\n          content (embed-asset-file url format)]\n    (if (state/get-edit-block)\n      (state/append-current-edit-content! content)\n      (editor-handler/api-insert-new-block! content {:page page\n                                                     :edit-block? false\n                                                     :replace-empty-target? true}))))\n\n(defn- handle-received-application [result]\n  (p/let [{:keys [title url type]} result\n          page (or (state/get-current-page) (string/lower-case (date/journal-name)))\n          format (db/get-page-format page)\n          application-type (last (string/split type \"/\"))\n          content (cond\n                    (config/mldoc-support? application-type)\n                    (embed-text-file url title)\n\n                    (contains? (set/union (config/doc-formats) config/media-formats)\n                               (keyword application-type))\n                    (embed-asset-file url format)\n\n                    :else\n                    (notification/show!\n                     [:div\n                      (str \"Import \" application-type \" file has not been supported. You can report it on \")\n                      [:a {:href \"https://github.com/logseq/logseq/issues\"\n                           :target \"_blank\"} \"Github\"]\n                      \". We will look into it soon.\"]\n                     :warning false))]\n    (if (state/get-edit-block)\n      (state/append-current-edit-content! content)\n      (editor-handler/api-insert-new-block! content {:page page\n                                                     :edit-block? false\n                                                     :replace-empty-target? true}))))\n\n(defn decode-received-result [m]\n  (into {} (for [[k v] m]\n             [k (cond (vector? v)\n                      (vec (map decode-received-result v))\n\n                      (string/blank? v)\n                      nil\n\n                      :else\n                      (if (mobile-util/native-ios?)\n                        (js/decodeURIComponent v)\n                        v))])))\n\n(defn handle-received []\n  (p/let [received (p/catch\n                    (.checkSendIntentReceived SendIntent)\n                    (fn [error]\n                      (log/error :intent-received-error {:error error})))]\n    (when received\n      (let [result (-> (js->clj received :keywordize-keys true)\n                       decode-received-result)]\n        (when-let [type (:type result)]\n          (cond\n            (string/starts-with? type \"text/\")\n            (handle-received-text result)\n\n            (or (string/starts-with? type \"image/\")\n                (string/starts-with? type \"video/\")\n                (string/starts-with? type \"audio/\"))\n            (handle-received-media result)\n\n            (string/starts-with? type \"application/\")\n            (handle-received-application result)\n\n            :else\n            (notification/show!\n             [:div\n              \"Parsing current shared content are not supported. Please report the following codes on \"\n              [:a {:href \"https://github.com/logseq/logseq/issues/new?labels=from:in-app&template=bug_report.yaml\"\n                   :target \"_blank\"} \"Github\"]\n              \". We will look into it soon.\"\n              [:pre.code (with-out-str (pprint/pprint result))]] :warning false)))))))\n"]}