shadow$provide.module$node_modules$jszip$lib$stream$DataWorker=function(global,require,module,exports){function DataWorker(dataP){GenericWorker.call(this,"DataWorker");var self=this;this.dataIsReady=!1;this.max=this.index=0;this.data=null;this.type="";this._tickScheduled=!1;dataP.then(function(data){self.dataIsReady=!0;self.data=data;self.max=data&&data.length||0;self.type=utils.getTypeOf(data);self.isPaused||self._tickAndRepeat()},function(e){self.error(e)})}var utils=require("module$node_modules$jszip$lib$utils"),
GenericWorker=require("module$node_modules$jszip$lib$stream$GenericWorker");utils.inherits(DataWorker,GenericWorker);DataWorker.prototype.cleanUp=function(){GenericWorker.prototype.cleanUp.call(this);this.data=null};DataWorker.prototype.resume=function(){if(!GenericWorker.prototype.resume.call(this))return!1;!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,utils.delay(this._tickAndRepeat,[],this));return!0};DataWorker.prototype._tickAndRepeat=function(){this._tickScheduled=!1;this.isPaused||
this.isFinished||(this._tick(),this.isFinished||(utils.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};DataWorker.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var data=null,nextIndex=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case "string":data=this.data.substring(this.index,nextIndex);break;case "uint8array":data=this.data.subarray(this.index,nextIndex);break;case "array":case "nodebuffer":data=this.data.slice(this.index,
nextIndex)}this.index=nextIndex;return this.push({data,meta:{percent:this.max?this.index/this.max*100:0}})};module.exports=DataWorker}
//# sourceMappingURL=module$node_modules$jszip$lib$stream$DataWorker.js.map
