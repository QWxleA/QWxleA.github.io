{
"version":3,
"file":"module$node_modules$$sentry$tracing$dist$transaction.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/@sentry/tracing/dist/transaction.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$tracing$dist$transaction\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar hub_1 = require(\"@sentry/hub\");\nvar utils_1 = require(\"@sentry/utils\");\nvar span_1 = require(\"./span\");\n/** JSDoc */\nvar Transaction = /** @class */ (function (_super) {\n    tslib_1.__extends(Transaction, _super);\n    /**\n     * This constructor should never be called manually. Those instrumenting tracing should use\n     * `Sentry.startTransaction()`, and internal methods should use `hub.startTransaction()`.\n     * @internal\n     * @hideconstructor\n     * @hidden\n     */\n    function Transaction(transactionContext, hub) {\n        var _this = _super.call(this, transactionContext) || this;\n        _this._measurements = {};\n        /**\n         * The reference to the current hub.\n         */\n        _this._hub = hub_1.getCurrentHub();\n        if (utils_1.isInstanceOf(hub, hub_1.Hub)) {\n            _this._hub = hub;\n        }\n        _this.name = transactionContext.name || '';\n        _this.metadata = transactionContext.metadata || {};\n        _this._trimEnd = transactionContext.trimEnd;\n        // this is because transactions are also spans, and spans have a transaction pointer\n        _this.transaction = _this;\n        return _this;\n    }\n    /**\n     * JSDoc\n     */\n    Transaction.prototype.setName = function (name) {\n        this.name = name;\n    };\n    /**\n     * Attaches SpanRecorder to the span itself\n     * @param maxlen maximum number of spans that can be recorded\n     */\n    Transaction.prototype.initSpanRecorder = function (maxlen) {\n        if (maxlen === void 0) { maxlen = 1000; }\n        if (!this.spanRecorder) {\n            this.spanRecorder = new span_1.SpanRecorder(maxlen);\n        }\n        this.spanRecorder.add(this);\n    };\n    /**\n     * Set observed measurements for this transaction.\n     * @hidden\n     */\n    Transaction.prototype.setMeasurements = function (measurements) {\n        this._measurements = tslib_1.__assign({}, measurements);\n    };\n    /**\n     * Set metadata for this transaction.\n     * @hidden\n     */\n    Transaction.prototype.setMetadata = function (newMetadata) {\n        this.metadata = tslib_1.__assign(tslib_1.__assign({}, this.metadata), newMetadata);\n    };\n    /**\n     * @inheritDoc\n     */\n    Transaction.prototype.finish = function (endTimestamp) {\n        var _this = this;\n        // This transaction is already finished, so we should not flush it again.\n        if (this.endTimestamp !== undefined) {\n            return undefined;\n        }\n        if (!this.name) {\n            utils_1.logger.warn('Transaction has no name, falling back to `<unlabeled transaction>`.');\n            this.name = '<unlabeled transaction>';\n        }\n        // just sets the end timestamp\n        _super.prototype.finish.call(this, endTimestamp);\n        if (this.sampled !== true) {\n            // At this point if `sampled !== true` we want to discard the transaction.\n            utils_1.logger.log('[Tracing] Discarding transaction because its trace was not chosen to be sampled.');\n            var client = this._hub.getClient();\n            var transport = client && client.getTransport && client.getTransport();\n            if (transport && transport.recordLostEvent) {\n                transport.recordLostEvent('sample_rate', 'transaction');\n            }\n            return undefined;\n        }\n        var finishedSpans = this.spanRecorder ? this.spanRecorder.spans.filter(function (s) { return s !== _this && s.endTimestamp; }) : [];\n        if (this._trimEnd && finishedSpans.length > 0) {\n            this.endTimestamp = finishedSpans.reduce(function (prev, current) {\n                if (prev.endTimestamp && current.endTimestamp) {\n                    return prev.endTimestamp > current.endTimestamp ? prev : current;\n                }\n                return prev;\n            }).endTimestamp;\n        }\n        var transaction = {\n            contexts: {\n                trace: this.getTraceContext(),\n            },\n            spans: finishedSpans,\n            start_timestamp: this.startTimestamp,\n            tags: this.tags,\n            timestamp: this.endTimestamp,\n            transaction: this.name,\n            type: 'transaction',\n            sdkProcessingMetadata: this.metadata,\n        };\n        var hasMeasurements = Object.keys(this._measurements).length > 0;\n        if (hasMeasurements) {\n            utils_1.logger.log('[Measurements] Adding measurements to transaction', JSON.stringify(this._measurements, undefined, 2));\n            transaction.measurements = this._measurements;\n        }\n        utils_1.logger.log(\"[Tracing] Finishing \" + this.op + \" transaction: \" + this.name + \".\");\n        return this._hub.captureEvent(transaction);\n    };\n    /**\n     * @inheritDoc\n     */\n    Transaction.prototype.toContext = function () {\n        var spanContext = _super.prototype.toContext.call(this);\n        return utils_1.dropUndefinedKeys(tslib_1.__assign(tslib_1.__assign({}, spanContext), { name: this.name, trimEnd: this._trimEnd }));\n    };\n    /**\n     * @inheritDoc\n     */\n    Transaction.prototype.updateWithContext = function (transactionContext) {\n        var _a;\n        _super.prototype.updateWithContext.call(this, transactionContext);\n        this.name = (_a = transactionContext.name, (_a !== null && _a !== void 0 ? _a : ''));\n        this._trimEnd = transactionContext.trimEnd;\n        return this;\n    };\n    return Transaction;\n}(span_1.Span));\nexports.Transaction = Transaction;\n//# sourceMappingURL=transaction.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","hub_1","utils_1","span_1","Transaction","_super","transactionContext","hub","_this","call","_measurements","_hub","getCurrentHub","isInstanceOf","Hub","name","metadata","_trimEnd","trimEnd","transaction","__extends","prototype","setName","Transaction.prototype.setName","initSpanRecorder","Transaction.prototype.initSpanRecorder","maxlen","spanRecorder","SpanRecorder","add","setMeasurements","Transaction.prototype.setMeasurements","measurements","__assign","setMetadata","Transaction.prototype.setMetadata","newMetadata","finish","Transaction.prototype.finish","endTimestamp","undefined","logger","warn","sampled","log","transport","client","getClient","getTransport","recordLostEvent","finishedSpans","spans","filter","s","length","reduce","prev","current","contexts","trace","getTraceContext","start_timestamp","startTimestamp","tags","timestamp","type","sdkProcessingMetadata","keys","JSON","stringify","op","captureEvent","toContext","Transaction.prototype.toContext","spanContext","dropUndefinedKeys","updateWithContext","Transaction.prototype.updateWithContext","_a","Span"]
}
