{
"version":3,
"file":"module$node_modules$chrono_node$dist$common$refiners$ForwardDateRefiner.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/chrono-node/dist/common/refiners/ForwardDateRefiner.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$chrono_node$dist$common$refiners$ForwardDateRefiner\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dayjs_1 = __importDefault(require(\"dayjs\"));\nclass ForwardDateRefiner {\n    refine(context, results) {\n        if (!context.option.forwardDate) {\n            return results;\n        }\n        results.forEach(function (result) {\n            let refMoment = dayjs_1.default(context.refDate);\n            if (result.start.isOnlyDayMonthComponent() && refMoment.isAfter(result.start.dayjs())) {\n                for (let i = 0; i < 3 && refMoment.isAfter(result.start.dayjs()); i++) {\n                    result.start.imply(\"year\", result.start.get(\"year\") + 1);\n                    context.debug(() => {\n                        console.log(`Forward yearly adjusted for ${result} (${result.start})`);\n                    });\n                    if (result.end && !result.end.isCertain(\"year\")) {\n                        result.end.imply(\"year\", result.end.get(\"year\") + 1);\n                        context.debug(() => {\n                            console.log(`Forward yearly adjusted for ${result} (${result.end})`);\n                        });\n                    }\n                }\n            }\n            if (result.start.isOnlyWeekdayComponent() && refMoment.isAfter(result.start.dayjs())) {\n                if (refMoment.day() > result.start.get(\"weekday\")) {\n                    refMoment = refMoment.day(result.start.get(\"weekday\") + 7);\n                }\n                else {\n                    refMoment = refMoment.day(result.start.get(\"weekday\"));\n                }\n                result.start.imply(\"day\", refMoment.date());\n                result.start.imply(\"month\", refMoment.month() + 1);\n                result.start.imply(\"year\", refMoment.year());\n                context.debug(() => {\n                    console.log(`Forward weekly adjusted for ${result} (${result.start})`);\n                });\n                if (result.end && result.end.isOnlyWeekdayComponent()) {\n                    if (refMoment.day() > result.end.get(\"weekday\")) {\n                        refMoment = refMoment.day(result.end.get(\"weekday\") + 7);\n                    }\n                    else {\n                        refMoment = refMoment.day(result.end.get(\"weekday\"));\n                    }\n                    result.end.imply(\"day\", refMoment.date());\n                    result.end.imply(\"month\", refMoment.month() + 1);\n                    result.end.imply(\"year\", refMoment.year());\n                    context.debug(() => {\n                        console.log(`Forward weekly adjusted for ${result} (${result.end})`);\n                    });\n                }\n            }\n        });\n        return results;\n    }\n}\nexports.default = ForwardDateRefiner;\n\n};"],
"names":["shadow$provide","global","require","module","exports","__importDefault","mod","__esModule","Object","defineProperty","value","dayjs_1","ForwardDateRefiner","refine","context","results","option","forwardDate","forEach","result","refMoment","default","refDate","start","isOnlyDayMonthComponent","isAfter","dayjs","i","imply","get","debug","console","log","end","isCertain","isOnlyWeekdayComponent","day","date","month","year"]
}
