shadow$provide.module$node_modules$$pixi$text$dist$cjs$text=function(global,require,module,exports){function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function getSingleColor(color){if("number"===typeof color)return utils.hex2string(color);"string"===typeof color&&0===color.indexOf("0x")&&(color=color.replace("0x","#"));return color}function getColor(color){if(Array.isArray(color)){for(var i=0;i<color.length;++i)color[i]=
getSingleColor(color[i]);return color}return getSingleColor(color)}function deepCopyProperties(target,source,propertyObj){for(var prop in propertyObj)Array.isArray(source[prop])?target[prop]=source[prop].slice():target[prop]=source[prop]}Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$$pixi$sprite$dist$cjs$sprite");var core=require("module$node_modules$$pixi$core$dist$cjs$core"),settings=require("module$node_modules$$pixi$settings$dist$cjs$settings"),math=
require("module$node_modules$$pixi$math$dist$cjs$math"),utils=require("module$node_modules$$pixi$utils$dist$cjs$utils"),extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};(function(TEXT_GRADIENT){TEXT_GRADIENT[TEXT_GRADIENT.LINEAR_VERTICAL=0]="LINEAR_VERTICAL";TEXT_GRADIENT[TEXT_GRADIENT.LINEAR_HORIZONTAL=
1]="LINEAR_HORIZONTAL"})(exports.TEXT_GRADIENT||(exports.TEXT_GRADIENT={}));var defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:exports.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",
strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},genericFontFamilies="serif sans-serif monospace cursive fantasy system-ui".split(" "),TextStyle=function(){function TextStyle(style){this.styleID=0;this.reset();deepCopyProperties(this,style,style)}TextStyle.prototype.clone=function(){var clonedProperties={};deepCopyProperties(clonedProperties,this,defaultStyle);return new TextStyle(clonedProperties)};TextStyle.prototype.reset=function(){deepCopyProperties(this,
defaultStyle,defaultStyle)};Object.defineProperty(TextStyle.prototype,"align",{get:function(){return this._align},set:function(align){this._align!==align&&(this._align=align,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"breakWords",{get:function(){return this._breakWords},set:function(breakWords){this._breakWords!==breakWords&&(this._breakWords=breakWords,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"dropShadow",
{get:function(){return this._dropShadow},set:function(dropShadow){this._dropShadow!==dropShadow&&(this._dropShadow=dropShadow,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(dropShadowAlpha){this._dropShadowAlpha!==dropShadowAlpha&&(this._dropShadowAlpha=dropShadowAlpha,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},
set:function(dropShadowAngle){this._dropShadowAngle!==dropShadowAngle&&(this._dropShadowAngle=dropShadowAngle,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(dropShadowBlur){this._dropShadowBlur!==dropShadowBlur&&(this._dropShadowBlur=dropShadowBlur,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},
set:function(dropShadowColor){dropShadowColor=getColor(dropShadowColor);this._dropShadowColor!==dropShadowColor&&(this._dropShadowColor=dropShadowColor,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(dropShadowDistance){this._dropShadowDistance!==dropShadowDistance&&(this._dropShadowDistance=dropShadowDistance,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,
"fill",{get:function(){return this._fill},set:function(fill){fill=getColor(fill);this._fill!==fill&&(this._fill=fill,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(fillGradientType){this._fillGradientType!==fillGradientType&&(this._fillGradientType=fillGradientType,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},
set:function(fillGradientStops){a:{var JSCompiler_inline_result=this._fillGradientStops;if(Array.isArray(JSCompiler_inline_result)&&Array.isArray(fillGradientStops)&&JSCompiler_inline_result.length===fillGradientStops.length){for(var i=0;i<JSCompiler_inline_result.length;++i)if(JSCompiler_inline_result[i]!==fillGradientStops[i]){JSCompiler_inline_result=!1;break a}JSCompiler_inline_result=!0}else JSCompiler_inline_result=!1}JSCompiler_inline_result||(this._fillGradientStops=fillGradientStops,this.styleID++)},
enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(fontFamily){this.fontFamily!==fontFamily&&(this._fontFamily=fontFamily,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"fontSize",{get:function(){return this._fontSize},set:function(fontSize){this._fontSize!==fontSize&&(this._fontSize=fontSize,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,
"fontStyle",{get:function(){return this._fontStyle},set:function(fontStyle){this._fontStyle!==fontStyle&&(this._fontStyle=fontStyle,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(fontVariant){this._fontVariant!==fontVariant&&(this._fontVariant=fontVariant,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"fontWeight",{get:function(){return this._fontWeight},
set:function(fontWeight){this._fontWeight!==fontWeight&&(this._fontWeight=fontWeight,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(letterSpacing){this._letterSpacing!==letterSpacing&&(this._letterSpacing=letterSpacing,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(lineHeight){this._lineHeight!==
lineHeight&&(this._lineHeight=lineHeight,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"leading",{get:function(){return this._leading},set:function(leading){this._leading!==leading&&(this._leading=leading,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(lineJoin){this._lineJoin!==lineJoin&&(this._lineJoin=lineJoin,this.styleID++)},enumerable:!1,configurable:!0});
Object.defineProperty(TextStyle.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(miterLimit){this._miterLimit!==miterLimit&&(this._miterLimit=miterLimit,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"padding",{get:function(){return this._padding},set:function(padding){this._padding!==padding&&(this._padding=padding,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"stroke",{get:function(){return this._stroke},
set:function(stroke){stroke=getColor(stroke);this._stroke!==stroke&&(this._stroke=stroke,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(strokeThickness){this._strokeThickness!==strokeThickness&&(this._strokeThickness=strokeThickness,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"textBaseline",{get:function(){return this._textBaseline},
set:function(textBaseline){this._textBaseline!==textBaseline&&(this._textBaseline=textBaseline,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"trim",{get:function(){return this._trim},set:function(trim){this._trim!==trim&&(this._trim=trim,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(whiteSpace){this._whiteSpace!==whiteSpace&&(this._whiteSpace=
whiteSpace,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(wordWrap){this._wordWrap!==wordWrap&&(this._wordWrap=wordWrap,this.styleID++)},enumerable:!1,configurable:!0});Object.defineProperty(TextStyle.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(wordWrapWidth){this._wordWrapWidth!==wordWrapWidth&&(this._wordWrapWidth=wordWrapWidth,this.styleID++)},enumerable:!1,
configurable:!0});TextStyle.prototype.toFontString=function(){var fontSizeString="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,fontFamilies=this.fontFamily;Array.isArray(this.fontFamily)||(fontFamilies=this.fontFamily.split(","));for(var i=fontFamilies.length-1;0<=i;i--){var fontFamily=fontFamilies[i].trim();!/(["'])[^'"]+\1/.test(fontFamily)&&0>genericFontFamilies.indexOf(fontFamily)&&(fontFamily='"'+fontFamily+'"');fontFamilies[i]=fontFamily}return this.fontStyle+" "+this.fontVariant+
" "+this.fontWeight+" "+fontSizeString+" "+fontFamilies.join(",")};return TextStyle}(),TextMetrics$jscomp$0=function(){function TextMetrics(text,style,width,height,lines,lineWidths,lineHeight,maxLineWidth,fontProperties){this.text=text;this.style=style;this.width=width;this.height=height;this.lines=lines;this.lineWidths=lineWidths;this.lineHeight=lineHeight;this.maxLineWidth=maxLineWidth;this.fontProperties=fontProperties}TextMetrics.measureText=function(text,style,wordWrap,canvas){void 0===canvas&&
(canvas=TextMetrics._canvas);wordWrap=void 0===wordWrap||null===wordWrap?style.wordWrap:wordWrap;var font=style.toFontString(),fontProperties=TextMetrics.measureFont(font);0===fontProperties.fontSize&&(fontProperties.fontSize=style.fontSize,fontProperties.ascent=style.fontSize);var context=canvas.getContext("2d");context.font=font;wordWrap=(wordWrap?TextMetrics.wordWrap(text,style,canvas):text).split(/(?:\r\n|\r|\n)/);canvas=Array(wordWrap.length);for(var i=font=0;i<wordWrap.length;i++){var lineWidth=
context.measureText(wordWrap[i]).width+(wordWrap[i].length-1)*style.letterSpacing;canvas[i]=lineWidth;font=Math.max(font,lineWidth)}context=font+style.strokeThickness;style.dropShadow&&(context+=style.dropShadowDistance);i=style.lineHeight||fontProperties.fontSize+style.strokeThickness;lineWidth=Math.max(i,fontProperties.fontSize+style.strokeThickness)+(wordWrap.length-1)*(i+style.leading);style.dropShadow&&(lineWidth+=style.dropShadowDistance);return new TextMetrics(text,style,context,lineWidth,
wordWrap,canvas,i+style.leading,font,fontProperties)};TextMetrics.wordWrap=function(text,style,canvas){void 0===canvas&&(canvas=TextMetrics._canvas);canvas=canvas.getContext("2d");var width=0,line="",lines="",cache=Object.create(null),letterSpacing=style.letterSpacing,whiteSpace=style.whiteSpace,collapseSpaces=TextMetrics.collapseSpaces(whiteSpace);whiteSpace=TextMetrics.collapseNewlines(whiteSpace);var canPrependSpaces=!collapseSpaces,wordWrapWidth=style.wordWrapWidth+letterSpacing;text=TextMetrics.tokenize(text);
for(var i=0;i<text.length;i++){var token=text[i];if(TextMetrics.isNewline(token)){if(!whiteSpace){lines+=TextMetrics.addLine(line);canPrependSpaces=!collapseSpaces;line="";width=0;continue}token=" "}if(collapseSpaces){var currIsBreakingSpace=TextMetrics.isBreakingSpace(token),lastIsBreakingSpace=TextMetrics.isBreakingSpace(line[line.length-1]);if(currIsBreakingSpace&&lastIsBreakingSpace)continue}currIsBreakingSpace=TextMetrics.getFromCache(token,letterSpacing,cache,canvas);if(currIsBreakingSpace>
wordWrapWidth)if(""!==line&&(lines+=TextMetrics.addLine(line),line="",width=0),TextMetrics.canBreakWords(token,style.breakWords))for(currIsBreakingSpace=TextMetrics.wordWrapSplit(token),lastIsBreakingSpace=0;lastIsBreakingSpace<currIsBreakingSpace.length;lastIsBreakingSpace++){for(var char=currIsBreakingSpace[lastIsBreakingSpace],k=1;currIsBreakingSpace[lastIsBreakingSpace+k];){var nextChar=currIsBreakingSpace[lastIsBreakingSpace+k];if(TextMetrics.canBreakChars(char[char.length-1],nextChar,token,
lastIsBreakingSpace,style.breakWords))break;else char+=nextChar;k++}lastIsBreakingSpace+=char.length-1;k=TextMetrics.getFromCache(char,letterSpacing,cache,canvas);k+width>wordWrapWidth&&(lines+=TextMetrics.addLine(line),canPrependSpaces=!1,line="",width=0);line+=char;width+=k}else 0<line.length&&(lines+=TextMetrics.addLine(line)),lines+=TextMetrics.addLine(token,i!==text.length-1),canPrependSpaces=!1,line="",width=0;else if(currIsBreakingSpace+width>wordWrapWidth&&(canPrependSpaces=!1,lines+=TextMetrics.addLine(line),
line="",width=0),0<line.length||!TextMetrics.isBreakingSpace(token)||canPrependSpaces)line+=token,width+=currIsBreakingSpace}return lines+=TextMetrics.addLine(line,!1)};TextMetrics.addLine=function(line,newLine){void 0===newLine&&(newLine=!0);line=TextMetrics.trimRight(line);return newLine?line+"\n":line};TextMetrics.getFromCache=function(key,letterSpacing,cache,context){var width=cache[key];"number"!==typeof width&&(letterSpacing*=key.length,width=context.measureText(key).width+letterSpacing,cache[key]=
width);return width};TextMetrics.collapseSpaces=function(whiteSpace){return"normal"===whiteSpace||"pre-line"===whiteSpace};TextMetrics.collapseNewlines=function(whiteSpace){return"normal"===whiteSpace};TextMetrics.trimRight=function(text){if("string"!==typeof text)return"";for(var i=text.length-1;0<=i&&TextMetrics.isBreakingSpace(text[i]);i--)text=text.slice(0,-1);return text};TextMetrics.isNewline=function(char){return"string"!==typeof char?!1:0<=TextMetrics._newlines.indexOf(char.charCodeAt(0))};
TextMetrics.isBreakingSpace=function(char,_nextChar){return"string"!==typeof char?!1:0<=TextMetrics._breakingSpaces.indexOf(char.charCodeAt(0))};TextMetrics.tokenize=function(text){var tokens=[],token="";if("string"!==typeof text)return tokens;for(var i=0;i<text.length;i++){var char=text[i];TextMetrics.isBreakingSpace(char,text[i+1])||TextMetrics.isNewline(char)?(""!==token&&(tokens.push(token),token=""),tokens.push(char)):token+=char}""!==token&&tokens.push(token);return tokens};TextMetrics.canBreakWords=
function(_token,breakWords){return breakWords};TextMetrics.canBreakChars=function(_char,_nextChar,_token,_index,_breakWords){return!0};TextMetrics.wordWrapSplit=function(token){return token.split("")};TextMetrics.measureFont=function(font){if(TextMetrics._fonts[font])return TextMetrics._fonts[font];var properties={ascent:0,descent:0,fontSize:0},canvas=TextMetrics._canvas,context=TextMetrics._context;context.font=font;var metricsString=TextMetrics.METRICS_STRING+TextMetrics.BASELINE_SYMBOL,width=Math.ceil(context.measureText(metricsString).width),
baseline=Math.ceil(context.measureText(TextMetrics.BASELINE_SYMBOL).width),height=Math.ceil(TextMetrics.HEIGHT_MULTIPLIER*baseline);baseline=baseline*TextMetrics.BASELINE_MULTIPLIER|0;canvas.width=width;canvas.height=height;context.fillStyle="#f00";context.fillRect(0,0,width,height);context.font=font;context.textBaseline="alphabetic";context.fillStyle="#000";context.fillText(metricsString,0,baseline);canvas=context.getImageData(0,0,width,height).data;context=canvas.length;width*=4;var idx=0,stop=
!1;for(metricsString=0;metricsString<baseline;++metricsString){for(var j=0;j<width;j+=4)if(255!==canvas[idx+j]){stop=!0;break}if(stop)break;else idx+=width}properties.ascent=baseline-metricsString;idx=context-width;stop=!1;for(metricsString=height;metricsString>baseline;--metricsString){for(j=0;j<width;j+=4)if(255!==canvas[idx+j]){stop=!0;break}if(stop)break;else idx-=width}properties.descent=metricsString-baseline;properties.fontSize=properties.ascent+properties.descent;return TextMetrics._fonts[font]=
properties};TextMetrics.clearMetrics=function(font){void 0===font&&(font="");font?delete TextMetrics._fonts[font]:TextMetrics._fonts={}};return TextMetrics}();require=function(){try{var c=new OffscreenCanvas(0,0),context=c.getContext("2d");return context&&context.measureText?c:document.createElement("canvas")}catch(ex){return document.createElement("canvas")}}();require.width=require.height=10;TextMetrics$jscomp$0._canvas=require;TextMetrics$jscomp$0._context=require.getContext("2d");TextMetrics$jscomp$0._fonts=
{};TextMetrics$jscomp$0.METRICS_STRING="|ÉqÅ";TextMetrics$jscomp$0.BASELINE_SYMBOL="M";TextMetrics$jscomp$0.BASELINE_MULTIPLIER=1.4;TextMetrics$jscomp$0.HEIGHT_MULTIPLIER=2;TextMetrics$jscomp$0._newlines=[10,13];TextMetrics$jscomp$0._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},supportLetterSpacing="letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype;
require=function(_super){function Text(text,style,canvas){var ownCanvas=!1;canvas||(canvas=document.createElement("canvas"),ownCanvas=!0);canvas.width=3;canvas.height=3;var _this=core.Texture.from(canvas);_this.orig=new math.Rectangle;_this.trim=new math.Rectangle;_this=_super.call(this,_this)||this;_this._ownCanvas=ownCanvas;_this.canvas=canvas;_this.context=_this.canvas.getContext("2d");_this._resolution=settings.settings.RESOLUTION;_this._autoResolution=!0;_this._text=null;_this._style=null;_this._styleListener=
null;_this._font="";_this.text=text;_this.style=style;_this.localStyleID=-1;return _this}__extends(Text,_super);Text.prototype.updateText=function(respectDirty){var style=this._style;this.localStyleID!==style.styleID&&(this.dirty=!0,this.localStyleID=style.styleID);if(this.dirty||!respectDirty){this._font=this._style.toFontString();respectDirty=this.context;var measured=TextMetrics$jscomp$0.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),height=measured.height,lines=measured.lines,
lineHeight=measured.lineHeight,lineWidths=measured.lineWidths,maxLineWidth=measured.maxLineWidth,fontProperties=measured.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,measured.width)+2*style.padding)*this._resolution);this.canvas.height=Math.ceil(Math.ceil(Math.max(1,height)+2*style.padding)*this._resolution);respectDirty.scale(this._resolution,this._resolution);respectDirty.clearRect(0,0,this.canvas.width,this.canvas.height);respectDirty.font=this._font;respectDirty.lineWidth=style.strokeThickness;
respectDirty.textBaseline=style.textBaseline;respectDirty.lineJoin=style.lineJoin;respectDirty.miterLimit=style.miterLimit;for(var linePositionX,linePositionY,passesCount=style.dropShadow?2:1,i=0;i<passesCount;++i){var dsOffsetText=(linePositionY=style.dropShadow&&0===i)?Math.ceil(Math.max(1,height)+2*style.padding):0;linePositionX=dsOffsetText*this._resolution;linePositionY?(respectDirty.fillStyle="black",respectDirty.strokeStyle="black",linePositionY=style.dropShadowColor,linePositionY=utils.hex2rgb("number"===
typeof linePositionY?linePositionY:utils.string2hex(linePositionY)),respectDirty.shadowColor="rgba("+255*linePositionY[0]+","+255*linePositionY[1]+","+255*linePositionY[2]+","+style.dropShadowAlpha+")",respectDirty.shadowBlur=style.dropShadowBlur,respectDirty.shadowOffsetX=Math.cos(style.dropShadowAngle)*style.dropShadowDistance,respectDirty.shadowOffsetY=Math.sin(style.dropShadowAngle)*style.dropShadowDistance+linePositionX):(respectDirty.fillStyle=this._generateFillStyle(style,lines,measured),respectDirty.strokeStyle=
style.stroke,respectDirty.shadowColor="black",respectDirty.shadowBlur=0,respectDirty.shadowOffsetX=0,respectDirty.shadowOffsetY=0);var linePositionYShift=(lineHeight-fontProperties.fontSize)/2;if(!Text.nextLineHeightBehavior||0>lineHeight-fontProperties.fontSize)linePositionYShift=0;for(var i_1=0;i_1<lines.length;i_1++)linePositionX=style.strokeThickness/2,linePositionY=style.strokeThickness/2+i_1*lineHeight+fontProperties.ascent+linePositionYShift,"right"===style.align?linePositionX+=maxLineWidth-
lineWidths[i_1]:"center"===style.align&&(linePositionX+=(maxLineWidth-lineWidths[i_1])/2),style.stroke&&style.strokeThickness&&this.drawLetterSpacing(lines[i_1],linePositionX+style.padding,linePositionY+style.padding-dsOffsetText,!0),style.fill&&this.drawLetterSpacing(lines[i_1],linePositionX+style.padding,linePositionY+style.padding-dsOffsetText)}this.updateTexture()}};Text.prototype.drawLetterSpacing=function(text,x,y,isStroke){void 0===isStroke&&(isStroke=!1);var letterSpacing=this._style.letterSpacing;
if(0===letterSpacing||supportLetterSpacing)supportLetterSpacing&&(this.context.letterSpacing=letterSpacing,this.context.textLetterSpacing=letterSpacing),isStroke?this.context.strokeText(text,x,y):this.context.fillText(text,x,y);else for(var stringArray=Array.from?Array.from(text):text.split(""),previousWidth=this.context.measureText(text).width,currentWidth,i=0;i<stringArray.length;++i)currentWidth=stringArray[i],isStroke?this.context.strokeText(currentWidth,x,y):this.context.fillText(currentWidth,
x,y),currentWidth=this.context.measureText(text.substring(i+1)).width,x+=previousWidth-currentWidth+letterSpacing,previousWidth=currentWidth};Text.prototype.updateTexture=function(){var canvas=this.canvas;if(this._style.trim){var trimmed=utils.trimCanvas(canvas);trimmed.data&&(canvas.width=trimmed.width,canvas.height=trimmed.height,this.context.putImageData(trimmed.data,0,0))}trimmed=this._texture;var style=this._style;style=style.trim?0:style.padding;var baseTexture=trimmed.baseTexture;trimmed.trim.width=
trimmed._frame.width=canvas.width/this._resolution;trimmed.trim.height=trimmed._frame.height=canvas.height/this._resolution;trimmed.trim.x=-style;trimmed.trim.y=-style;trimmed.orig.width=trimmed._frame.width-2*style;trimmed.orig.height=trimmed._frame.height-2*style;this._onTextureUpdate();baseTexture.setRealSize(canvas.width,canvas.height,this._resolution);trimmed.updateUvs();this._recursivePostUpdateTransform();this.dirty=!1};Text.prototype._render=function(renderer){this._autoResolution&&this._resolution!==
renderer.resolution&&(this._resolution=renderer.resolution,this.dirty=!0);this.updateText(!0);_super.prototype._render.call(this,renderer)};Text.prototype.getLocalBounds=function(rect){this.updateText(!0);return _super.prototype.getLocalBounds.call(this,rect)};Text.prototype._calculateBounds=function(){this.updateText(!0);this.calculateVertices();this._bounds.addQuad(this.vertexData)};Text.prototype._generateFillStyle=function(style,lines,metrics){var fillStyle=style.fill;if(!Array.isArray(fillStyle))return fillStyle;
if(1===fillStyle.length)return fillStyle[0];var dropShadowCorrection=style.dropShadow?style.dropShadowDistance:0,padding=style.padding||0,width=this.canvas.width/this._resolution-dropShadowCorrection-2*padding,height=this.canvas.height/this._resolution-dropShadowCorrection-2*padding;dropShadowCorrection=fillStyle.slice();var fillGradientStops=style.fillGradientStops.slice();if(!fillGradientStops.length)for(var lengthPlus1=dropShadowCorrection.length+1,i=1;i<lengthPlus1;++i)fillGradientStops.push(i/
lengthPlus1);dropShadowCorrection.unshift(fillStyle[0]);fillGradientStops.unshift(0);dropShadowCorrection.push(fillStyle[fillStyle.length-1]);fillGradientStops.push(1);if(style.fillGradientType===exports.TEXT_GRADIENT.LINEAR_VERTICAL)for(fillStyle=this.context.createLinearGradient(width/2,padding,width/2,height+padding),style=metrics.fontProperties.fontSize+style.strokeThickness,i=0;i<lines.length;i++){width=metrics.lineHeight*(i-1)+style;padding=lengthPlus1=metrics.lineHeight*i;0<i&&width>lengthPlus1&&
(padding=(lengthPlus1+width)/2);width=lengthPlus1+style;lengthPlus1=metrics.lineHeight*(i+1);var thisLineGradientEnd=width;i+1<lines.length&&lengthPlus1<width&&(thisLineGradientEnd=(width+lengthPlus1)/2);width=(thisLineGradientEnd-padding)/height;for(lengthPlus1=0;lengthPlus1<dropShadowCorrection.length;lengthPlus1++)thisLineGradientEnd=Math.min(1,Math.max(0,padding/height+("number"===typeof fillGradientStops[lengthPlus1]?fillGradientStops[lengthPlus1]:lengthPlus1/dropShadowCorrection.length)*width)),
thisLineGradientEnd=Number(thisLineGradientEnd.toFixed(5)),fillStyle.addColorStop(thisLineGradientEnd,dropShadowCorrection[lengthPlus1])}else for(fillStyle=this.context.createLinearGradient(padding,height/2,width+padding,height/2),lines=dropShadowCorrection.length+1,metrics=1,i=0;i<dropShadowCorrection.length;i++)fillStyle.addColorStop("number"===typeof fillGradientStops[i]?fillGradientStops[i]:metrics/lines,dropShadowCorrection[i]),metrics++;return fillStyle};Text.prototype.destroy=function(options){"boolean"===
typeof options&&(options={children:options});options=Object.assign({},defaultDestroyOptions,options);_super.prototype.destroy.call(this,options);this._ownCanvas&&(this.canvas.height=this.canvas.width=0);this._style=this.canvas=this.context=null};Object.defineProperty(Text.prototype,"width",{get:function(){this.updateText(!0);return Math.abs(this.scale.x)*this._texture.orig.width},set:function(value){this.updateText(!0);var s=utils.sign(this.scale.x)||1;this.scale.x=s*value/this._texture.orig.width;
this._width=value},enumerable:!1,configurable:!0});Object.defineProperty(Text.prototype,"height",{get:function(){this.updateText(!0);return Math.abs(this.scale.y)*this._texture.orig.height},set:function(value){this.updateText(!0);var s=utils.sign(this.scale.y)||1;this.scale.y=s*value/this._texture.orig.height;this._height=value},enumerable:!1,configurable:!0});Object.defineProperty(Text.prototype,"style",{get:function(){return this._style},set:function(style){style=style||{};this._style=style instanceof
TextStyle?style:new TextStyle(style);this.localStyleID=-1;this.dirty=!0},enumerable:!1,configurable:!0});Object.defineProperty(Text.prototype,"text",{get:function(){return this._text},set:function(text){text=String(null===text||void 0===text?"":text);this._text!==text&&(this._text=text,this.dirty=!0)},enumerable:!1,configurable:!0});Object.defineProperty(Text.prototype,"resolution",{get:function(){return this._resolution},set:function(value){this._autoResolution=!1;this._resolution!==value&&(this._resolution=
value,this.dirty=!0)},enumerable:!1,configurable:!0});Text.nextLineHeightBehavior=!1;return Text}(global.Sprite);exports.Text=require;exports.TextMetrics=TextMetrics$jscomp$0;exports.TextStyle=TextStyle}
//# sourceMappingURL=module$node_modules$$pixi$text$dist$cjs$text.js.map
