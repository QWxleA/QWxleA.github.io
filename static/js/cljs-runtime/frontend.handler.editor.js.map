{"version":3,"sources":["frontend/handler/editor.cljs"],"mappings":"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","names":["js/frontend","js/frontend.handler","js/frontend.handler.editor","js/frontend.handler.editor.*asset-uploading?","frontend.handler.editor/*asset-uploading?","cljs.core.atom","js/frontend.handler.editor.*asset-uploading-process","frontend.handler.editor/*asset-uploading-process","js/frontend.handler.editor.*selected-text","frontend.handler.editor/*selected-text","frontend.handler.editor/get-selection-and-format","temp__5720__auto__","block","frontend.state/get-edit-block","edit-id","frontend.state/get-edit-input-id","input","goog.dom/getElement","selection-start","frontend.util/get-selection-start","selection-end","frontend.util/get-selection-end","value","frontend.handler.editor.goog$module$goog$object.get","selection","cljs.core.not_EQ_","cljs.core.subs","cljs.core/count","p1__77502#","cljs.core.take_while","cljs.core._EQ_","p1__77503#","cljs.core/reverse","G__77504","clojure.string/trim","frontend.handler.editor/format-text!","pattern-fn","m","map__77506","cljs.core/--destructure-map","cljs.core.get","format","pattern","pattern-count","pattern-prefix","x__4336__auto__","y__4337__auto__","pattern-suffix","x__4339__auto__","y__4340__auto__","already-wrapped?","prefix","postfix","inner-value","G__77507","p1__77505#","new-value","frontend.state.set_edit_content_BANG_","frontend.util.cursor/set-selection-to","frontend.util.cursor/move-cursor-to","frontend.handler.editor/bold-format!","frontend.config/get-bold","frontend.handler.editor/italics-format!","frontend.config/get-italic","frontend.handler.editor/highlight-format!","frontend.config/get-highlight","frontend.handler.editor/strike-through-format!","frontend.config/get-strike-through","var_args","G__77514","frontend.handler.editor/html-link-format!","js/Error","frontend.handler.editor.html_link_format_BANG_","link","map__77521","vec__77522","cljs.core.nth","cur-pos","frontend.util.cursor/pos","empty-selection?","selection-link?","and__4251__auto__","frontend.util/starts-with?","content","forward-pos","frontend.config/get-empty-link-and-forward-pos","frontend.config/with-label-link","frontend.config/with-default-link","frontend.config/with-default-label","or__4253__auto__","frontend.handler.editor/open-block-in-sidebar!","block-id","G__77527","frontend.db/entity","page?","frontend.state/sidebar-add-block!","frontend.state/get-current-repo","frontend.handler.editor/reset-cursor-range!","node","frontend.state/set-cursor-range!","frontend.util/caret-range","frontend.handler.editor/restore-cursor-pos!","id","markup","cursor-range","frontend.state/get-cursor-range","pos","frontend.state/get-editor-last-pos","frontend.diff/find-position","frontend.state/clear-editor-last-pos!","frontend.handler.editor/highlight-block!","block-uuid","blocks","cljs.core.array_seq","js/document.getElementsByClassName","seq__77528","cljs.core/seq","chunk__77529","count__77530","i__77531","cljs.core/chunked-seq?","c__4679__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/first","cljs.core/next","dommy.core.add_class_BANG_","frontend.handler.editor/unhighlight-blocks!","G__77532","cljs.core.repeat","cljs.core.apply","cljs.core/concat","seq__77533","chunk__77534","count__77535","i__77536","goog.dom.classes/remove","frontend.handler.editor/get-edit-input-id-with-block-id","first-block","frontend.util/get-first-block-by-id","clojure.string/replace","frontend.handler.editor/clear-selection!","frontend.util/select-unhighlight!","dommy.utils/->Array","js/document","frontend.state/clear-selection!","p__77537","vec__77538","frontend.handler.editor/text-range-by-lst-fst-line","direction","G__77541","cljs.core/Keyword","last-new-line","clojure.string.last_index_of","end","clojure.string/split-lines","G__77545","frontend.handler.editor/edit-block!","p__77549","map__77551","frontend.handler.editor.edit_block_BANG_","custom-content","tail-len","move-cursor?","frontend.config/publishing?","G__77552","frontend.db/pull","edit-input-id","cljs.core/uuid?","content-length","text-range","cljs.core/vector?","frontend.util.property/remove-built-in-properties","frontend.util.drawer/remove-logbook","frontend.state.set_editing_BANG_","frontend.handler.editor/another-block-with-same-id-exists?","current-id","frontend.util/uuid-string?","cljs.core/uuid","G__77578","frontend.handler.editor/attach-page-properties-if-exists!","map__77579","page-properties","str->page","n","frontend.format.block.page_name__GT_map","refs","cljs.core.filter","p__77580","vec__77581","_","v","cljs.core/coll?","cljs.core/vals","cljs.core/set","cljs.core.map","cljs.core.concat","frontend.util/distinct-by","tags","alias","page-tx","retract-attributes","cljs.core.mapv","attribute","cljs.core.remove","cljs.core/nil?","tx","G__77584","cljs.core.assoc","cljs.core.conj","frontend.handler.editor/remove-non-existed-refs!","x","frontend.handler.editor/with-marker-time","new-marker","old-marker","frontend.state/enable-timetracking?","e77588","logbook-exists?","frontend.util.drawer/get-logbook","clojure.string/lower-case","cljs.core/name","new-content","cljs.core/not","frontend.util.clock/clock-in","cljs.core/contains?","frontend.util.clock/clock-out","_e","frontend.handler.editor/with-timetracking","cljs.core/last","frontend.util/safe-re-find","frontend.util.marker/marker-pattern","p__77592","map__77593","frontend.handler.editor/wrap-parse-block","left","page","uuid","level","pre-block?","vec__77594","G__77597","cljs.core.merge","frontend.format.block.parse_title_and_body","properties","real-content","frontend.util.property/with-built-in-properties","frontend.util.drawer/with-logbook","first-block?","ast","frontend.format.mldoc/->edn","logseq.graph_parser.mldoc.default_config","first-elem-type","cljs.core/ffirst","first-elem-meta","cljs.core/second","properties?","markdown-heading?","block-with-title?","frontend.format.mldoc/block-with-title?","clojure.string/triml","frontend.util.format","content'","frontend.config/get-block-pattern","cljs.core/dissoc","frontend.db-schema/retract-attributes","frontend.format.block.parse_block","cljs.core.dissoc","cljs.core.update","new-properties","cljs.core/select-keys","frontend.util.property/built-in-properties","p__77598","map__77599","frontend.handler.editor/save-block-inner!","js/goog.DEBUG","k__45296__auto__","js/console","res__45297__auto__","transact-data__61861__auto__","frontend.modules.outliner.core/*transaction-data*","opts__61862__auto__","*transaction-data*-orig-val__77600","*transaction-data*-temp-val__77601","cljs.core/transient","r__61863__auto__","cljs.core/persistent!","tx__61864__auto__","cljs.core.mapcat","tx-meta__61865__auto__","all-tx__61866__auto__","opts#__61867__auto__","result__61868__auto__","frontend.modules.outliner.datascript/transact!","*transaction-data*-orig-val__77603","*transaction-data*-temp-val__77604","frontend.modules.outliner.core/save-block!","title","cljs.core.get_in","old-page-name","G__77602","G__77605","clojure.string/blank?","frontend.util/page-name-sanity-lc","frontend.state/pub-event!","G__77607","frontend.handler.editor/save-block-if-changed!","p__77608","map__77609","frontend.handler.editor.save_block_if_changed_BANG_","force?","opts","map__77610","repo","frontend.state.get_preferred_format","G__77611","G__77612","cljs.core/map?","frontend.handler.notification.show_BANG_","content-changed?","frontend.handler.editor/compute-fst-snd-block-text","fst-block-text","snd-block-text","p__77613","map__77614","frontend.handler.editor/outliner-insert-block!","config","current-block","new-block","sibling?","keep-uuid?","replace-empty-target?","ref-query-top-block?","has-children?","G__77615","frontend.db/has-children?","cljs.core/boolean?","frontend.util/collapsed?","*transaction-data*-orig-val__77617","*transaction-data*-temp-val__77618","G__77616","G__77619","frontend.handler.editor/save-current-block!","frontend.modules.outliner.core/insert-blocks!","frontend.handler.editor/block-self-alone-when-insert?","current-page","frontend.state/get-current-page","medley.core/uuid","p__77620","map__77621","frontend.handler.editor/insert-new-block-before-block-aux!","_value","ok-handler","new-m","frontend.db/new-block-id","prev-block","left-block","G__77622","p__77623","p__77624","map__77625","map__77626","frontend.handler.editor/insert-new-block-aux!","_opts","vec__77627","block-self?","next-block","frontend.util/set-change-value","frontend.handler.editor/clear-when-saved!","frontend.state/clear-editor-show-state!","frontend.commands/restore-state","frontend.handler.editor/get-state","vec__77630","map__77633","on-hide","block-parent-id","sidebar?","frontend.state/get-editor-args","G__77634","G__77636","frontend.handler.editor/insert-new-block!","state","frontend.handler.editor.insert_new_block_BANG_","_state","block-value","frontend.state/get-editor-op","frontend.state/set-editor-op!","map__77637","vec__77638","G__77641","insert-fn","G__77642","G__77643","G__77644","G__77645","last-block","p__77647","map__77648","frontend.handler.editor/api-insert-new-block!","before?","custom-uuid","edit-block?","G__77649","G__77650","vec__77651","children","frontend.db/sort-by-left","last-block-id","G__77654","frontend.db/get-page-format","frontend.util.property/insert-properties","block-m","first-child?","p1__77646#","cljs.core/=","G__77655","G__77656","G__77657","js/setTimeout","G__77659","frontend.handler.editor/insert-first-page-block-if-not-exists!","page-title","frontend.handler.editor.insert_first_page_block_if_not_exists_BANG_","frontend.handler.editor/properties-block","logseq.graph-parser.block/get-page-refs-from-properties","G__77660","frontend.db/get-db","frontend.state/get-date-formatter","cljs.core/keys","p__77661","map__77662","frontend.handler.editor/update-timestamps-content!","repeated?","marker","scheduled-ast","frontend.handler.block/get-scheduled-ast","deadline-ast","frontend.handler.block/get-deadline-ast","G__77663","frontend.handler.repeated/repeated?","ts","frontend.handler.repeated.timestamp__GT_text","frontend.handler.repeated/next-timestamp-text","cljs.core.reduce","p__77664","vec__77665","old","new","clojure.string/replace-first","G__77668","frontend.util.drawer/insert-drawer","frontend.date/get-date-time-string-3","p__77669","map__77670","frontend.handler.editor/check","input-id","clojure.string/ends-with?","p__77671","map__77672","frontend.handler.editor/uncheck","frontend.state/get-preferred-workflow","frontend.handler.editor/get-selected-blocks","cljs.core.distinct","frontend.state/get-selection-blocks","G__77674","frontend.handler.editor/set-marker","p__77675","map__77676","frontend.handler.editor.set_marker","vec__77677","frontend.util.marker/cycle-marker","frontend.handler.editor/cycle-todos!","ids","p1__77680#","dommy.core/attr","seq__77681","chunk__77682","count__77683","i__77684","G__77687","G__77688","frontend.handler.editor/cycle-todo!","temp__5718__auto__","vec__77689","current-input","frontend.state/get-edit-content","G__77692","new-pos","frontend.commands/compute-pos-delta-when-change-marker","p__77693","map__77694","frontend.handler.editor/set-priority","priority","new-priority","frontend.handler.editor/cycle-priority!","G__77695","frontend.util.priority/cycle-priority-state","frontend.util.priority/add-or-update-priority","p__77696","map__77697","frontend.handler.editor/delete-block-aux!","_block","children?","G__77698","G__77699","G__77700","*transaction-data*-orig-val__77701","*transaction-data*-temp-val__77702","frontend.modules.outliner.core/delete-blocks!","frontend.handler.editor/move-to-prev-block","sibling-block","sibling-block-id","G__77703","G__77704","G__77705","original-content","frontend.util/trim-safe","value'","logseq.graph-parser.utf8/length","logseq.graph-parser.utf8/encode","G__77707","frontend.handler.editor/delete-block!","frontend.handler.editor.delete_block_BANG_","delete-children?","map__77708","page-id","G__77709","page-blocks-count","frontend.db/get-page-blocks-count","G__77710","G__77711","frontend.modules.outliner.tree/-get-left","frontend.modules.outliner.core/block","left-has-children?","G__77712","block-parent","frontend.util/get-prev-block-non-collapsed-non-embed","frontend.handler.editor/delete-blocks!","block-uuids","dom-blocks","uuid->dom-block","cljs.core/zipmap","*transaction-data*-orig-val__77713","*transaction-data*-temp-val__77714","frontend.handler.editor/batch-set-block-property!","col","*transaction-data*-orig-val__77735","*transaction-data*-temp-val__77736","seq__77715","chunk__77716","count__77717","i__77718","vec__77727","vec__77731","seq__77737","chunk__77738","count__77739","i__77740","vec__77749","vec__77753","key","G__77730","G__77734","G__77752","G__77756","frontend.util.property.remove_property","frontend.util.property.insert_property","frontend.util.property/remove-empty-properties","input-pos","frontend.state/get-edit-pos","editing-block","frontend.handler.editor/remove-block-property!","cljs.core.keyword","frontend.handler.editor/set-block-property!","frontend.handler.editor/set-block-query-properties!","all-properties","add?","G__77757","query-properties","frontend.handler.common/safe-read-string","cljs.core/vec","frontend.handler.editor/set-block-timestamp!","G__77758","map__77759","logseq.graph-parser.text/remove-timestamp","logseq.graph-parser.text/add-timestamp","frontend.handler.editor/set-blocks-id!","block-ids","G__77760","G__77763","frontend.handler.editor/copy-block-ref!","p1__77761#","frontend.handler.editor.copy_block_ref_BANG_","tap-clipboard","frontend.util.copy_to_clipboard_BANG_","frontend.handler.editor/select-block!","frontend.state.exit_editing_and_set_selected_blocks_BANG_","frontend.handler.editor/compose-copied-blocks-contents","frontend.db.utils.pull_many","top-level-block-uuids","frontend.modules.outliner.core/get-top-level-blocks","frontend.handler.export/export-blocks-as-markdown","frontend.state/get-export-block-text-indent-style","cljs.core.into","frontend.state/get-export-block-text-remove-options","frontend.handler.editor/copy-selection-blocks","p1__77764#","cljs.core.keep","G__77765","frontend.handler.common/copy-to-clipboard-without-id-property!","frontend.state/set-copied-blocks","frontend.handler.editor/copy-block-refs","selected-blocks","p1__77766#","first-root-level-index","p__77767","vec__77768","cljs.core.map_indexed","cljs.core/vector","root-level","adjusted-blocks","p__77771","map__77772","index","cljs.core/deref","cljs.core/reset!","G__77773","copy-str","G__77774","p__77775","map__77776","pred__77777","expr__77778","clojure.string.join","frontend.handler.editor/copy-block-embeds","p1__77780#","ids-str","G__77781","frontend.handler.editor/get-selected-toplevel-block-uuids","p1__77782#","blocks*","G__77783","frontend.handler.editor/cut-selection-blocks","copy?","p1__77784#","lookup-refs","G__77785","G__77786","G__77787","frontend.db/pull-many","frontend.state/set-copied-full-blocks","frontend.handler.editor/url-regex","args__4870__auto__","len__4864__auto__","i__4865__auto__","argseq__4871__auto__","cljs.core/IndexedSeq","frontend.handler.editor/extract-nearest-link-from-text","seq77790","G__77791","G__77792","self__4851__auto__","text","additional-patterns","vec__77793","page-pattern","block-pattern","tag-pattern","page-matches","frontend.util/re-pos","block-matches","tag-matches","additional-matches","p1__77788#","matches","match","cljs.core.sort_by","p__77796","vec__77797","start-pos","end-pos","cljs.core/>","p1__77789#","cljs.core/some","cljs.core/re-find","clojure.string/starts-with?","frontend.handler.editor/get-nearest-page-or-url","frontend.handler.editor.extract_nearest_link_from_text","frontend.handler.editor/get-nearest-page","frontend.handler.editor/follow-link-under-cursor!","js/window.open","page-name","frontend.db.model.get_redirect_page_name","frontend.state/clear-edit!","frontend.handler.editor/open-link-in-sidebar!","block?","frontend.db/get-page","frontend.handler.editor/zoom-in!","frontend.state/editing?","G__77800","frontend.handler.route.redirect_to_page_BANG_","js/window.history.forward","frontend.handler.editor/zoom-out!","frontend.db/get-block-parent","G__77801","G__77802","js/window.history.back","frontend.handler.editor/cut-block!","G__77803","md-content","frontend.handler.editor/clear-last-selected-block!","frontend.state/drop-last-selection-block!","frontend.handler.editor/highlight-selection-area!","end-block","start-block","frontend.state/get-selection-start-block","frontend.util/get-nodes-between-two-nodes","frontend.util/get-direction-between-two-nodes","frontend.handler.editor/select-block-up-down","frontend.state/get-editing-block-dom-id","frontend.state/selection?","f","frontend.util/get-prev-block-non-collapsed","frontend.util/get-next-block-non-collapsed-skip","element","G__77804","frontend.state/conj-selection-block!","frontend.state/get-selection-direction","first-last","G__77805","G__77806","frontend.handler.editor/on-select-block","_event","frontend.handler.editor/save-block-aux!","G__77808","frontend.handler.editor/save-block!","p__77809","map__77810","block-or-uuid","frontend.db.model/query-block-by-uuid","frontend.handler.editor.save_block_BANG_","G__77811","G__77812","G__77814","p__77815","map__77816","frontend.handler.editor.save_current_block_BANG_","skip-properties?","frontend.state/editor-in-composition?","frontend.commands/*show-commands","frontend.commands/*show-block-commands","frontend.state/get-editor-show-page-search?","frontend.state/get-editor-show-page-search-hashtag?","frontend.state/get-editor-show-block-search?","frontend.state/get-editor-show-date-picker?","frontend.state/get-editor-show-template-search?","frontend.state/get-editor-show-input","e77817","db-block","G__77818","elem","db-content","db-content-without-heading","logseq.graph_parser.util.safe_subs","frontend.db.model/top-block?","frontend.util.thingatpt.properties_at_point","error","lambdaisland.glogi.log","cljs.core/identity","frontend.handler.editor/clean-content!","logseq.graph_parser.text.remove_level_spaces","frontend.util.property/remove-properties","p__77819","map__77820","frontend.handler.editor/insert-command!","command-output","restore?","option","frontend.commands/insert!","frontend.commands/handle-steps","cljs.core/fn?","s","restore-slash-caret-pos?","cljs.core/seq?","frontend.handler.editor/get-asset-file-link","url","file-name","image?","pdf?","G__77821","frontend.handler.editor/ensure-assets-dir!","repo-dir","frontend.config/get-repo-dir","assets-dir","promesa.core.then","frontend.fs/mkdir-if-not-exists","frontend.handler.editor/get-asset-path","filename","promesa.core.bind","___42626__auto__","p__77822","vec__77823","promesa.protocols/-promise","path","js/module$node_modules$path$path.join","frontend.mobile.util/native-android?","js/encodeURI","js/decodeURI","G__77828","frontend.handler.editor/save-assets!","files","p__77829","vec__77830","frontend.handler.editor.save_assets_BANG_","file-base","js/Date","dir","gen-filename","promesa.core/all","iter__4652__auto__","s__77834","cljs.core/LazySeq","c__4650__auto__","size__4651__auto__","b__77836","cljs.core/chunk-buffer","i__77835","vec__77837","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__77833","vec__77844","cljs.core/cons","cljs.core/rest","file","vec__77840","vec__77847","G__77843","G__77850","frontend.util/node-path","ext","last-dot-index","frontend.util/electron?","from","p1__77826#","js/window.apis.copyFileToAssets","promesa.core/resolved","js/File","frontend.fs/write-file!","js/frontend.handler.editor.*assets-url-cache","frontend.handler.editor/*assets-url-cache","frontend.handler.editor/make-asset-url","frontend.mobile.util/is-native-platform?","frontend.mobile.util/convert-file-src","handle-path","cached-url","handle","frontend.idb/get-item","js/URL.createObjectURL","cljs.core.swap_BANG_","cljs.core/assoc","p__77851","map__77852","frontend.handler.editor/delete-asset-of-block!","href","full-text","local?","delete-local?","frontend.fs/unlink!","frontend.config/get-repo-path","frontend.handler.editor/resolve-relative-path","file-path","current-file","frontend.db.model/get-block-file-path","G__77853","G__77854","G__77855","frontend.config/get-pages-directory","frontend.util/get-relative-path","frontend.handler.editor/upload-asset","uploading?","drop-or-paste?","frontend.config/local-db?","cljs.core.js__GT_clj","res","vec__77856","asset-file-name","full-file-path","frontend.util/ext-of-image?","frontend.state.get_editor_command_trigger","promesa.core.finally$","frontend.image/upload","file-type","frontend.handler.image/request-presigned-url","signed-url","e","process","frontend.handler.editor/autopair-map","frontend.handler.editor/reversed-autopair-map","frontend.handler.editor/autopair-when-selected","frontend.handler.editor/delete-map","frontend.handler.editor/autopair","_format","_option","selected","frontend.util/get-selected-text","vec__77859","_pos","frontend.commands/simple-replace!","prefix-pos","G__77862","frontend.commands/handle-step","frontend.commands/*slash-caret-pos","frontend.util.cursor.get_caret_pos","frontend.handler.editor/surround-by?","before","logseq.graph-parser.text/surround-by?","frontend.handler.editor/wrapped-by?","logseq.graph-parser.text/wrapped-by?","frontend.handler.editor/get-matched-pages","q","editing-page","pages","frontend.search.page_search","p","frontend.handler.editor/get-matched-blocks","block-parents","G__77863","G__77864","G__77865","frontend.db/get-block-parents","cljs.core.comp","cljs.core/str","current-and-parents","clojure.set.union","result","frontend.search/block-search","h","frontend.handler.editor/get-matched-templates","frontend.search.template_search","frontend.handler.editor/get-matched-commands","e77866","edit-content","last-slash-caret-pos","last-command","frontend.util/nth-safe","frontend.commands/*initial-commands","frontend.commands.get_matched_commands","js/console.error","frontend.handler.editor/get-matched-block-commands","e77867","frontend.commands/*angle-bracket-caret-pos","frontend.commands/block-commands-map","_error","frontend.handler.editor/auto-complete?","frontend.handler.editor/get-current-input-char","frontend.handler.editor/move-up-down","up?","event","frontend.util/stop","edit-block-id","move-nodes","*transaction-data*-orig-val__77868","*transaction-data*-temp-val__77869","frontend.modules.outliner.core/move-blocks-up-down!","block-node","G__77870","frontend.state/get-selection-block-ids","G__77871","G__77872","G__77873","frontend.handler.editor/get-selected-ordered-blocks","G__77874","G__77875","G__77876","frontend.handler.editor/on-tab","*transaction-data*-orig-val__77877","*transaction-data*-temp-val__77878","frontend.modules.outliner.core/indent-outdent-blocks!","frontend.handler.editor/get-link","label","G__77879","frontend.handler.editor/get-image-link","G__77880","frontend.util/format","frontend.handler.editor/handle-command-input","command","G__77881","map__77882","map__77883","frontend.state/set-editor-show-input!","saved-cursor","frontend.handler.editor/get-search-q","current-pos","frontend.state/sub","frontend.handler.editor/close-autocomplete-if-outside","between","clojure.string/includes?","frontend.state/set-editor-show-block-search!","frontend.state/set-editor-show-page-search!","frontend.state/set-editor-show-page-search-hashtag!","frontend.handler.editor/resize-image!","metadata","full_text","size","new-meta","image-part","clojure.string.split","new-full-text","cljs.core.pr_str","G__77884","frontend.handler.editor/mark-last-input-time!","frontend.state/set-editor-last-input-time!","frontend.util/time-ms","frontend.db/clear-repo-persistent-job!","js/frontend.handler.editor.*auto-save-timeout","frontend.handler.editor/*auto-save-timeout","frontend.handler.editor/edit-box-on-change!","frontend.util/evalue","js/clearTimeout","frontend.state/input-idle?","frontend.handler.editor/handle-last-input","frontend.state/get-input","last-input-char","frontend.commands/angle-bracket","frontend.handler.editor/block-on-chosen-handler","_input","chosen","_click?","uuid-string","frontend.util/replace-first","frontend.handler.editor/block-non-exist-handler","frontend.util.cursor.move_cursor_forward","frontend.handler.editor/paste-block-cleanup","exclude-properties","content-update-fn","G__77885","frontend.handler.editor/edit-last-block-after-inserted!","last-block'","G__77886","p__77887","map__77888","frontend.handler.editor/paste-blocks","target-block","G__77889","G__77890","G__77891","G__77892","G__77893","*transaction-data*-orig-val__77894","*transaction-data*-temp-val__77895","blocks'","frontend.handler.editor/block-tree->blocks","tree-vec","frontend.modules.outliner.core.tree_vec_flatten","props","content*","frontend.format.block/extract-blocks","fst-block","frontend.handler.editor/insert-block-tree-after-target","target-block-id","logseq.graph-parser.block/with-parent-and-left","G__77897","frontend.handler.editor/insert-template!","p__77898","map__77899","element-id","db-id","frontend.handler.editor.insert_template_BANG_","target","cljs.core/integer?","frontend.db.model/get-template-by-name","template-including-parent?","frontend.db/get-block-and-children","root-block","blocks-exclude-root","b","sorted-blocks","frontend.modules.outliner.tree/sort-blocks","cljs.core.drop","frontend.template/resolve-dynamic-template!","G__77900","sibling?'","G__77901","*transaction-data*-orig-val__77902","*transaction-data*-temp-val__77903","frontend.handler.editor/template-on-chosen-handler","p__77904","vec__77905","_template","p__77908","map__77909","map__77910","frontend.handler.editor/parent-is-page?","parent","frontend.modules.outliner.tree/satisfied-inode?","frontend.handler.editor/outdent-on-enter","parent-node","frontend.modules.outliner.tree/-get-parent","*transaction-data*-orig-val__77911","*transaction-data*-temp-val__77912","frontend.modules.outliner.core/move-blocks!","p__77913","map__77914","frontend.handler.editor/last-top-level-child?","current-node","entity","G__77915","G__77916","frontend.modules.outliner.tree/-get-parent-id","frontend.handler.editor/insert","insertion","selected-start","selected-end","s1","s2","frontend.handler.editor/keydown-new-line","frontend.handler.editor/dwim-in-properties","map__77917","property-key","frontend.util.thingatpt.property_key_at_point","org?","move-to-pos","G__77918","frontend.util.cursor/move-cursor-to-line-end","frontend.util.cursor.move_cursor_backward","frontend.util.cursor/move-cursor-to-end","frontend.util.property/property-key-exist?","G__77919","G__77920","G__77921","frontend.handler.editor/delete-and-update","frontend.util.cursor/line-beginning-pos","frontend.util.cursor/line-end-pos","frontend.util.property/goto-properties-end","p__77922","map__77923","frontend.handler.editor/toggle-list-checkbox","old-item-content","new-item-content","frontend.handler.editor/dwim-in-list","map__77924","item","frontend.util.thingatpt.list_item_at_point","map__77925","full-content","indent","bullet","checkbox","ordered","next-bullet","G__77926","G__77927","G__77928","after","cursor-in-item-content?","after-lists-str","lines","after-lists-str'","frontend.util.list/re-order-items","cursor'","frontend.handler.editor/toggle-list!","map__77934","G__77935","new-unordered-bullet","G__77936","map__77937","list-beginning-pos","frontend.util.list.list_beginning_pos","list-end-pos","frontend.util.list.list_end_pos","list","items","splitter-reg","items-without-bullet","p1__77929#","new-list","p1__77930#","p1__77931#","p2__77932#","index-of-current-item","numbers-length","p1__77933#","cljs.core.subvec","pos-diff","prev-item","frontend.util.list.get_prev_item","frontend.util.cursor/move-cursor-down","frontend.util.cursor/move-cursor-to-line-beginning","map__77938","current-bullet","frontend.handler.editor/toggle-page-reference-embed","parent-id","map__77939","page-ref-fn","bounds","backward-pos","frontend.commands/simple-insert!","map__77940","embed-ref","frontend.util.thingatpt.embed_macro_at_point","map__77941","raw-content","start","page-ref","frontend.util.thingatpt.page_ref_at_point","map__77942","frontend.handler.editor/toggle-block-reference-embed","map__77943","block-ref-fn","map__77944","frontend.util.thingatpt.block_ref_at_point","map__77945","frontend.handler.editor/keydown-new-block","map__77946","has-right?","frontend.modules.outliner.tree/-get-right","thing-at-point","frontend.util.thingatpt/get-setting","frontend.util.thingatpt.admonition_AMPERSAND_src_at_point","frontend.util.thingatpt.markup_at_point","frontend.util.cursor/beginning-of-line?","G__77947","right-bound","clojure.string.index_of","G__77948","frontend.state/into-code-editor-mode!","frontend.handler.editor/keydown-new-block-handler","frontend.state/doc-mode-enter-for-new-line?","frontend.handler.editor/keydown-new-line-handler","frontend.handler.editor/select-first-last","G__77949","frontend.util/get-blocks-noncollapse","G__77950","frontend.handler.editor/select-up-down","G__77951","frontend.util/get-next-block-non-collapsed","frontend.handler.editor/move-cross-boundrary-up-down","map__77952","line-pos","frontend.util/get-first-or-last-line-pos","G__77953","G__77954","new-id","new-uuid","G__77955","G__77956","G__77957","frontend.handler.editor/keydown-up-down-handler","down?","frontend.util.cursor/textarea-cursor-first-row?","frontend.util.cursor/textarea-cursor-last-row?","frontend.util.cursor/move-cursor-up","frontend.handler.editor/move-to-block-when-cross-boundrary","map__77958","G__77959","G__77960","G__77961","G__77962","frontend.handler.editor/keydown-arrow-handler","js/document.activeElement","left?","right?","frontend.util.cursor/start?","frontend.util.cursor/end?","frontend.util.safe_set_range_text_BANG_","frontend.handler.editor/delete-concat","right","frontend.modules.outliner.core/get-right-node","current-block-has-children?","G__77963","collapsed?","first-child","frontend.modules.outliner.tree/-get-down","G__77964","frontend.modules.outliner.tree/-get-id","G__77965","frontend.handler.editor/keydown-delete-handler","end?","frontend.handler.editor/keydown-backspace-handler","cut?","deleted","top-block?","root-block?","js/document.execCommand","frontend.commands/delete-pair!","frontend.util/safe-dec-current-pos-from-end","frontend.handler.editor/indent-outdent","indent?","map__77966","G__77967","frontend.state/set-editor-last-pos!","*transaction-data*-orig-val__77968","*transaction-data*-temp-val__77969","frontend.handler.editor/keydown-tab-handler","frontend.handler.editor/keydown-not-matched-handler","_key-code","ctrlKey","metaKey","hashtag?","frontend.util.event_is_composing_QMARK_","clojure.set.difference","frontend.util.keycode/left-square-brackets-keys","frontend.util.keycode/left-paren-keys","sym","frontend.handler.editor/keyup-handler","search-timeout","key-code","k","code","frontend.handler.editor.goog$module$goog$object.getValueByKeys","c","last-key-code","frontend.state/get-last-key-code","blank-selected?","is-processed?","non-enter-processed?","frontend.util.keycode/enter-code","frontend.state/state","orig-pos","square-pos","command-step","matched-commands","frontend.commands/*matched-commands","matched-block-commands","frontend.commands/*matched-block-commands","frontend.state/set-last-key-code!","frontend.handler.editor/editor-on-click!","js/frontend.handler.editor.mobile-toolbar-height","frontend.handler.editor/mobile-toolbar-height","frontend.handler.editor/editor-on-height-change!","box-height","row-height","caret","cursor-bottom","box-top","cursor-y","vw-height","js/window.visualViewport","main-node","scroll-top","frontend.handler.editor/editor-on-change!","timeout","frontend.handler.editor/paste-text-parseable","frontend.handler.editor/paste-segmented-text","paragraphs","updated-paragraphs","frontend.handler.editor/get-all-blocks-by-ids","G__77972","G__77973","frontend.handler.editor/paste-copied-blocks-or-text","copied-blocks","frontend.state/get-copied-blocks","copied-block-ids","copied-graph","*stop-event?","frontend.state/set-copied-full-blocks!","logseq.graph-parser.util/url?","logseq.graph-parser.text/block-ref?","logseq.graph-parser.text/get-block-ref","G__77974","ocr-77975","ocr-77976","ocr-77977","cljs.core/keyword-identical?","cljs.core.match/backtrack","e78001","e__57908__auto__","e77990","e78000","e77991","e77998","e77999","e77997","e77992","e77995","e77996","e77994","e77993","frontend.handler.editor/paste-text-in-one-block-at-point","js/module$frontend$utils.getClipText","clipboard-data","frontend.state/append-current-edit-content!","frontend.handler.editor/editor-on-paste!","frontend.state/set-state!","frontend.util.thingatpt.org_admonition_AMPERSAND_src_at_point","frontend.mobile.util/native-ios?","_handled","frontend.handler.editor/cut-blocks-and-clear-selections!","frontend.handler.editor/shortcut-copy-selection","frontend.handler.editor/shortcut-cut-selection","frontend.handler.editor/shortcut-delete-selection","frontend.handler.editor/copy-current-block-ref","p1__78002#","frontend.handler.editor/shortcut-copy","frontend.handler.editor/shortcut-cut","frontend.handler.editor/delete-selection","frontend.handler.editor/editor-delete","frontend.handler.editor/editor-backspace","frontend.handler.editor/shortcut-up-down","frontend.handler.editor/shortcut-select-up-down","vec__78003","anchor","cursor","G__78006","frontend.util/get-selection-direction","cursor-rect","frontend.util.cursor/textarea-cursor-rect-first-row?","frontend.util.cursor/textarea-cursor-rect-last-row?","frontend.util.cursor/select-up-down","frontend.handler.editor/open-selected-block!","G__78007","frontend.handler.editor/shortcut-left-right","frontend.handler.editor/clear-block-content!","frontend.handler.editor/kill-line-before!","frontend.util/kill-line-before!","frontend.handler.editor/kill-line-after!","frontend.util/kill-line-after!","frontend.handler.editor/beginning-of-block","frontend.handler.editor/end-of-block","frontend.handler.editor/cursor-forward-word","frontend.util.cursor/move-cursor-forward-by-word","frontend.handler.editor/cursor-backward-word","frontend.util.cursor/move-cursor-backward-by-word","frontend.handler.editor/backward-kill-word","frontend.util/backward-kill-word","frontend.handler.editor/forward-kill-word","frontend.util/forward-kill-word","frontend.handler.editor/block-with-title?","semantic?","G__78009","frontend.handler.editor/collapsable?","p__78010","map__78011","frontend.handler.editor.collapsable_QMARK_","frontend.db.model.has_children_QMARK_","frontend.state.get_config","p__78012","map__78013","frontend.handler.editor/all-blocks-with-level","collapse?","expanded?","incremental?","frontend.date/today","G__78014","G__78015","frontend.db/get-page-blocks-no-cache","frontend.modules.outliner.tree.blocks__GT_vec_tree","G__78016","root","find","clojure.walk/postwalk","cljs.core/tree-seq","G__78017","frontend.handler.editor/skip-collapsing-in-db?","frontend.handler.editor/set-blocks-collapsed!","cljs.core/boolean","*transaction-data*-orig-val__78026","*transaction-data*-temp-val__78027","seq__78018","chunk__78019","count__78020","i__78021","seq__78028","chunk__78029","count__78030","i__78031","G__78024","G__78025","G__78034","G__78035","current-value","frontend.handler.editor/collapse-block!","frontend.state/set-collapsed-block!","frontend.handler.editor/expand-block!","G__78037","frontend.handler.editor/expand!","frontend.handler.editor.expand_BANG_","clear-selection?","dom","cljs.core.doall","blocks-with-level","max-level","cljs.core/max","blocks-to-expand","cljs.core/empty?","seq__78038","chunk__78039","count__78040","i__78041","map__78044","map__78045","G__78047","frontend.handler.editor/collapse!","frontend.handler.editor.collapse_BANG_","blocks-to-collapse","seq__78056","chunk__78057","count__78058","i__78059","map__78062","map__78063","G__78065","frontend.handler.editor/collapse-all!","frontend.handler.editor.collapse_all_BANG_","G__78067","frontend.handler.editor/expand-all!","frontend.handler.editor.expand_all_BANG_","frontend.handler.editor/toggle-open!","all-expanded?","frontend.handler.editor/select-all-blocks!","current-input-id","blocks-container","frontend.util/rec-get-blocks-container","goog.dom/getElementByClass","G__78069","frontend.handler.editor/escape-editing","frontend.handler.editor.escape_editing","select?","frontend.handler.editor/replace-block-reference-with-content-at-point","map__78070","frontend.util.thingatpt/block-ref-at-point","G__78071","block-content","block-content-without-prop","current-block-content","block-content*","frontend.state/set-block-content-and-last-pos!","frontend.handler.editor/copy-current-ref","frontend.handler.editor/delete-current-ref!","ref-id","cljs.core/re-pattern","frontend.handler.editor/replace-ref-with-text!","ref-block","G__78072","block-ref-content","frontend.handler.editor/replace-ref-with-embed!","frontend.handler.editor/block-default-collapsed?","frontend.state/get-ref-open-blocks-level","G__78073"],"sourcesContent":["(ns frontend.handler.editor\n  (:require [\"/frontend/utils\" :as utils]\n            [cljs.core.match :refer [match]]\n            [clojure.set :as set]\n            [clojure.string :as string]\n            [clojure.walk :as w]\n            [dommy.core :as dom]\n            [frontend.commands :as commands\n             :refer [*angle-bracket-caret-pos *show-block-commands\n                     *show-commands *slash-caret-pos]]\n            [frontend.config :as config]\n            [frontend.date :as date]\n            [frontend.db :as db]\n            [frontend.db-schema :as db-schema]\n            [frontend.db.model :as db-model]\n            [frontend.db.utils :as db-utils]\n            [frontend.diff :as diff]\n            [frontend.format.block :as block]\n            [frontend.format.mldoc :as mldoc]\n            [frontend.fs :as fs]\n            [frontend.handler.block :as block-handler]\n            [frontend.handler.common :as common-handler]\n            [frontend.handler.export :as export]\n            [frontend.handler.image :as image-handler]\n            [frontend.handler.notification :as notification]\n            [frontend.handler.repeated :as repeated]\n            [frontend.handler.route :as route-handler]\n            [frontend.image :as image]\n            [frontend.idb :as idb]\n            [frontend.mobile.util :as mobile-util]\n            [frontend.modules.outliner.core :as outliner-core]\n            [frontend.modules.outliner.tree :as tree]\n            [frontend.modules.outliner.transaction :as outliner-tx]\n            [frontend.search :as search]\n            [frontend.state :as state]\n            [frontend.template :as template]\n            [logseq.graph-parser.text :as text]\n            [logseq.graph-parser.utf8 :as utf8]\n            [frontend.util :as util :refer [profile]]\n            [frontend.util.clock :as clock]\n            [frontend.util.cursor :as cursor]\n            [frontend.util.drawer :as drawer]\n            [frontend.util.marker :as marker]\n            [frontend.util.property :as property]\n            [frontend.util.priority :as priority]\n            [frontend.util.thingatpt :as thingatpt]\n            [frontend.util.list :as list]\n            [goog.dom :as gdom]\n            [goog.dom.classes :as gdom-classes]\n            [goog.object :as gobj]\n            [lambdaisland.glogi :as log]\n            [medley.core :as medley]\n            [promesa.core :as p]\n            [frontend.util.keycode :as keycode]\n            [logseq.graph-parser.util :as gp-util]\n            [logseq.graph-parser.mldoc :as gp-mldoc]\n            [logseq.graph-parser.block :as gp-block]\n            [\"path\" :as path]))\n\n;; FIXME: should support multiple images concurrently uploading\n\n(defonce *asset-uploading? (atom false))\n(defonce *asset-uploading-process (atom 0))\n(defonce *selected-text (atom nil))\n\n(defn- get-selection-and-format\n  []\n  (when-let [block (state/get-edit-block)]\n    (when (:block/uuid block)\n      (when-let [edit-id (state/get-edit-input-id)]\n        (when-let [input (gdom/getElement edit-id)]\n          (let [selection-start (util/get-selection-start input)\n                selection-end (util/get-selection-end input)\n                value (gobj/get input \"value\")\n                selection (when (not= selection-start selection-end)\n                            (subs value selection-start selection-end))\n                selection-start (+ selection-start\n                                   (count (take-while #(= \" \" %) selection)))\n                selection-end (- selection-end\n                                 (count (take-while #(= \" \" %) (reverse selection))))]\n            {:selection-start selection-start\n             :selection-end selection-end\n             :selection (some-> selection\n                                string/trim)\n             :format (:block/format block)\n             :value value\n             :block block\n             :edit-id edit-id\n             :input input}))))))\n\n(defn- format-text!\n  [pattern-fn]\n  (when-let [m (get-selection-and-format)]\n    (let [{:keys [selection-start selection-end format selection value edit-id input]} m\n          pattern (pattern-fn format)\n          pattern-count (count pattern)\n          pattern-prefix (subs value (max 0 (- selection-start pattern-count)) selection-start)\n          pattern-suffix (subs value selection-end (min (count value) (+ selection-end pattern-count)))\n          already-wrapped? (= pattern pattern-prefix pattern-suffix)\n          prefix (if already-wrapped?\n                   (subs value 0 (- selection-start pattern-count))\n                   (subs value 0 selection-start))\n          postfix (if already-wrapped?\n                    (subs value (+ selection-end pattern-count))\n                    (subs value selection-end))\n          inner-value (cond-> selection\n                        (not already-wrapped?)\n                        (#(str pattern % pattern)))\n          new-value (str prefix inner-value postfix)]\n      (state/set-edit-content! edit-id new-value)\n      (cond\n        already-wrapped? (cursor/set-selection-to input (- selection-start pattern-count) (- selection-end pattern-count))\n        selection (cursor/move-cursor-to input (+ selection-end pattern-count))\n        :else (cursor/set-selection-to input (+ selection-start pattern-count) (+ selection-end pattern-count))))))\n\n(defn bold-format! []\n  (format-text! config/get-bold))\n\n(defn italics-format! []\n  (format-text! config/get-italic))\n\n(defn highlight-format! []\n  (when-let [block (state/get-edit-block)]\n    (let [format (:block/format block)]\n      (format-text! #(config/get-highlight format)))))\n\n(defn strike-through-format! []\n  (format-text! config/get-strike-through))\n\n(defn html-link-format!\n  ([]\n   (html-link-format! nil))\n  ([link]\n   (when-let [m (get-selection-and-format)]\n     (let [{:keys [selection-start selection-end format selection value edit-id input]} m\n           cur-pos (cursor/pos input)\n           empty-selection? (= selection-start selection-end)\n           selection-link? (and selection (or (util/starts-with? selection \"http://\")\n                                              (util/starts-with? selection \"https://\")))\n           [content forward-pos] (cond\n                                   empty-selection?\n                                   (config/get-empty-link-and-forward-pos format)\n\n                                   link\n                                   (config/with-label-link format selection link)\n\n                                   selection-link?\n                                   (config/with-default-link format selection)\n\n                                   :else\n                                   (config/with-default-label format selection))\n           new-value (str\n                      (subs value 0 selection-start)\n                      content\n                      (subs value selection-end))\n           cur-pos (or selection-start cur-pos)]\n       (state/set-edit-content! edit-id new-value)\n       (cursor/move-cursor-to input (+ cur-pos forward-pos))))))\n\n(defn open-block-in-sidebar!\n  [block-id]\n  (when block-id\n    (when-let [block (db/entity [:block/uuid block-id])]\n      (let [page? (nil? (:block/page block))]\n        (state/sidebar-add-block!\n         (state/get-current-repo)\n         (:db/id block)\n         (if page? :page :block))))))\n\n(defn reset-cursor-range!\n  [node]\n  (when node\n    (state/set-cursor-range! (util/caret-range node))))\n\n(defn restore-cursor-pos!\n  [id markup]\n  (when-let [node (gdom/getElement (str id))]\n    (let [cursor-range (state/get-cursor-range)\n          pos (or (state/get-editor-last-pos)\n                  (and cursor-range\n                       (diff/find-position markup cursor-range)))]\n      (cursor/move-cursor-to node pos)\n      (state/clear-editor-last-pos!))))\n\n(defn highlight-block!\n  [block-uuid]\n  (let [blocks (array-seq (js/document.getElementsByClassName (str block-uuid)))]\n    (doseq [block blocks]\n      (dom/add-class! block \"block-highlight\"))))\n\n(defn unhighlight-blocks!\n  []\n  (let [blocks (some->> (array-seq (js/document.getElementsByClassName \"block-highlight\"))\n                        (repeat 2)\n                        (apply concat))]\n    (doseq [block blocks]\n      (gdom-classes/remove block \"block-highlight\"))))\n\n(defn- get-edit-input-id-with-block-id\n  [block-id]\n  (when-let [first-block (util/get-first-block-by-id block-id)]\n    (string/replace (gobj/get first-block \"id\")\n                    \"ls-block\"\n                    \"edit-block\")))\n\n(defn clear-selection!\n  []\n  (util/select-unhighlight! (dom/by-class \"selected\"))\n  (state/clear-selection!))\n\n(defn- text-range-by-lst-fst-line [content [direction pos]]\n  (case direction\n    :up\n    (let [last-new-line (or (string/last-index-of content \\newline) -1)\n          end (+ last-new-line pos 1)]\n      (subs content 0 end))\n    :down\n    (-> (string/split-lines content)\n        first\n        (or \"\")\n        (subs 0 pos))))\n\n;; id: block dom id, \"ls-block-counter-uuid\"\n(defn edit-block!\n  ([block pos id]\n   (edit-block! block pos id nil))\n  ([block pos id {:keys [custom-content tail-len move-cursor?]\n                  :or {tail-len 0\n                       move-cursor? true}}]\n   (when-not config/publishing?\n     (when-let [block-id (:block/uuid block)]\n       (let [block (or (db/pull [:block/uuid block-id]) block)\n             edit-input-id (if (uuid? id)\n                             (get-edit-input-id-with-block-id id)\n                             (-> (str (subs id 0 (- (count id) 36)) block-id)\n                                 (string/replace \"ls-block\" \"edit-block\")))\n             content (or custom-content (:block/content block) \"\")\n             content-length (count content)\n             text-range (cond\n                          (vector? pos)\n                          (text-range-by-lst-fst-line content pos)\n\n                          (and (> tail-len 0) (>= (count content) tail-len))\n                          (subs content 0 (- (count content) tail-len))\n\n                          (or (= :max pos) (<= content-length pos))\n                          content\n\n                          :else\n                          (subs content 0 pos))\n             content (-> (property/remove-built-in-properties (:block/format block)\n                                                              content)\n                         (drawer/remove-logbook))]\n         (clear-selection!)\n         (state/set-editing! edit-input-id content block text-range move-cursor?))))))\n\n(defn- another-block-with-same-id-exists?\n  [current-id block-id]\n  (and (string? block-id)\n       (util/uuid-string? block-id)\n       (not= current-id (cljs.core/uuid block-id))\n       (db/entity [:block/uuid (cljs.core/uuid block-id)])))\n\n(defn- attach-page-properties-if-exists!\n  [block]\n  (if (and (:block/pre-block? block)\n           (seq (:block/properties block)))\n    (let [page-properties (:block/properties block)\n          str->page (fn [n] (block/page-name->map n true))\n          refs (->> page-properties\n                    (filter (fn [[_ v]] (coll? v)))\n                    (vals)\n                    (apply concat)\n                    (set)\n                    (map str->page)\n                    (concat (:block/refs block))\n                    (util/distinct-by :block/name))\n          {:keys [tags alias]} page-properties\n          page-tx (let [id (:db/id (:block/page block))\n                        retract-attributes (when id\n                                             (mapv (fn [attribute]\n                                                     [:db/retract id attribute])\n                                                   [:block/properties :block/tags :block/alias]))\n                        tags (->> (map str->page tags) (remove nil?))\n                        alias (->> (map str->page alias) (remove nil?))\n                        tx (cond-> {:db/id id\n                                    :block/properties page-properties}\n                             (seq tags)\n                             (assoc :block/tags tags)\n                             (seq alias)\n                             (assoc :block/alias alias))]\n                    (conj retract-attributes tx))]\n      (assoc block\n             :block/refs refs\n             :db/other-tx page-tx))\n    block))\n\n(defn- remove-non-existed-refs!\n  [refs]\n  (remove (fn [x] (or\n                   (and (vector? x)\n                        (= :block/uuid (first x))\n                        (nil? (db/entity x)))\n                   (nil? x))) refs))\n\n(defn- with-marker-time\n  [content block format new-marker old-marker]\n  (if (and (state/enable-timetracking?) new-marker)\n    (try\n      (let [logbook-exists? (and (:block/body block) (drawer/get-logbook (:block/body block)))\n            new-marker (string/trim (string/lower-case (name new-marker)))\n            old-marker (when old-marker (string/trim (string/lower-case (name old-marker))))\n            new-content (cond\n                          (or (and (nil? old-marker) (or (= new-marker \"doing\")\n                                                         (= new-marker \"now\")))\n                              (and (= old-marker \"todo\") (= new-marker \"doing\"))\n                              (and (= old-marker \"later\") (= new-marker \"now\"))\n                              (and (= old-marker new-marker \"now\") (not logbook-exists?))\n                              (and (= old-marker new-marker \"doing\") (not logbook-exists?)))\n                          (clock/clock-in format content)\n\n                          (or\n                           (and (= old-marker \"doing\") (= new-marker \"todo\"))\n                           (and (= old-marker \"now\") (= new-marker \"later\"))\n                           (and (contains? #{\"now\" \"doing\"} old-marker)\n                                (= new-marker \"done\")))\n                          (clock/clock-out format content)\n\n                          :else\n                          content)]\n        new-content)\n      (catch js/Error _e\n        content))\n    content))\n\n(defn- with-timetracking\n  [block value]\n  (if (and (state/enable-timetracking?)\n           (not= (:block/content block) value))\n    (let [format (:block/format block)\n          new-marker (last (util/safe-re-find (marker/marker-pattern format) (or value \"\")))\n          new-value (with-marker-time value block format\n                      new-marker\n                      (:block/marker block))]\n      new-value)\n    value))\n\n(defn wrap-parse-block\n  [{:block/keys [content format left page uuid level pre-block?] :as block}]\n  (let [block (or (and (:db/id block) (db/pull (:db/id block))) block)\n        block (merge block\n                     (block/parse-title-and-body uuid format pre-block? (:block/content block)))\n        properties (:block/properties block)\n        real-content (:block/content block)\n        content (if (and (seq properties) real-content (not= real-content content))\n                  (property/with-built-in-properties properties content format)\n                  content)\n        content (drawer/with-logbook block content)\n        content (with-timetracking block content)\n        first-block? (= left page)\n        ast (mldoc/->edn (string/trim content) (gp-mldoc/default-config format))\n        first-elem-type (first (ffirst ast))\n        first-elem-meta (second (ffirst ast))\n        properties? (contains? #{\"Property_Drawer\" \"Properties\"} first-elem-type)\n        markdown-heading? (and (= format :markdown)\n                               (= \"Heading\" first-elem-type)\n                               (nil? (:size first-elem-meta)))\n        block-with-title? (mldoc/block-with-title? first-elem-type)\n        content (string/triml content)\n        content (string/replace content (util/format \"((%s))\" (str uuid)) \"\")\n        [content content'] (cond\n                             (and first-block? properties?)\n                             [content content]\n\n                             markdown-heading?\n                             [content content]\n\n                             :else\n                             (let [content' (str (config/get-block-pattern format) (if block-with-title? \" \" \"\\n\") content)]\n                               [content content']))\n        block (assoc block\n                     :block/content content'\n                     :block/format format)\n        block (apply dissoc block (remove #{:block/pre-block?} db-schema/retract-attributes))\n        block (block/parse-block block)\n        block (if (and first-block? (:block/pre-block? block))\n                block\n                (dissoc block :block/pre-block?))\n        block (update block :block/refs remove-non-existed-refs!)\n        block (attach-page-properties-if-exists! block)\n        new-properties (merge\n                        (select-keys properties (property/built-in-properties))\n                        (:block/properties block))]\n    (-> block\n        (dissoc :block/top?\n                :block/bottom?)\n        (assoc :block/content content\n               :block/properties new-properties)\n        (merge (if level {:block/level level} {})))))\n\n(defn- save-block-inner!\n  [block value {}]\n  (let [block (assoc block :block/content value)\n        block (apply dissoc block db-schema/retract-attributes)]\n    (profile\n     \"Save block: \"\n     (let [block (wrap-parse-block block)]\n       (outliner-tx/transact!\n         {:outliner-op :save-block}\n         (outliner-core/save-block! block))\n\n       ;; sanitized page name changed\n       (when-let [title (get-in block [:block/properties :title])]\n         (when-let [old-page-name (:block/name (db/entity (:db/id (:block/page block))))]\n           (when (and (:block/pre-block? block)\n                      (not (string/blank? title))\n                      (not= (util/page-name-sanity-lc title) old-page-name))\n             (state/pub-event! [:page/title-property-changed old-page-name title]))))))))\n\n(defn save-block-if-changed!\n  ([block value]\n   (save-block-if-changed! block value nil))\n  ([block value\n    {:keys [force?]\n     :as opts}]\n   (let [{:block/keys [uuid page format repo content properties]} block\n         repo (or repo (state/get-current-repo))\n         format (or format (state/get-preferred-format))\n         page (db/entity repo (:db/id page))\n         block-id (when (map? properties) (get properties :id))\n         content (-> (property/remove-built-in-properties format content)\n                     (drawer/remove-logbook))]\n     (cond\n       (another-block-with-same-id-exists? uuid block-id)\n       (notification/show!\n        [:p.content\n         (util/format \"Block with the id %s already exists!\" block-id)]\n        :error)\n\n       force?\n       (save-block-inner! block value opts)\n\n       :else\n       (let [content-changed? (not= (string/trim content) (string/trim value))]\n         (when (and content-changed? page)\n           (save-block-inner! block value opts)))))))\n\n(defn- compute-fst-snd-block-text\n  [value pos]\n  (when (string? value)\n    (let [fst-block-text (subs value 0 pos)\n          snd-block-text (string/triml (subs value pos))]\n      [fst-block-text snd-block-text])))\n\n(declare save-current-block!)\n(defn outliner-insert-block!\n  [config current-block new-block {:keys [sibling? keep-uuid? replace-empty-target?]}]\n  (let [ref-query-top-block? (and (or (:ref? config)\n                                      (:custom-query? config))\n                                  (not (:ref-query-child? config)))\n        has-children? (db/has-children? (:block/uuid current-block))\n        sibling? (cond\n                   ref-query-top-block?\n                   false\n\n                   (boolean? sibling?)\n                   sibling?\n\n                   (util/collapsed? current-block)\n                   true\n\n                   :else\n                   (not has-children?))]\n    (outliner-tx/transact!\n      {:outliner-op :insert-blocks}\n      (save-current-block! {:current-block current-block})\n      (outliner-core/insert-blocks! [new-block] current-block {:sibling? sibling?\n                                                               :keep-uuid? keep-uuid?\n                                                               :replace-empty-target? replace-empty-target?}))))\n\n(defn- block-self-alone-when-insert?\n  [config uuid]\n  (let [current-page (state/get-current-page)\n        block-id (or\n                  (and (:id config)\n                       (util/uuid-string? (:id config))\n                       (:id config))\n                  (and current-page\n                       (util/uuid-string? current-page)\n                       current-page))]\n    (= uuid (and block-id (medley/uuid block-id)))))\n\n(defn insert-new-block-before-block-aux!\n  [config block _value {:keys [ok-handler]}]\n  (let [new-m {:block/uuid (db/new-block-id)\n               :block/content \"\"}\n        prev-block (-> (merge (select-keys block [:block/parent :block/left :block/format\n                                                  :block/page :block/journal?]) new-m)\n                       (wrap-parse-block))\n        left-block (db/pull (:db/id (:block/left block)))]\n    (profile\n     \"outliner insert block\"\n     (let [sibling? (not= (:db/id left-block) (:db/id (:block/parent block)))]\n       (outliner-insert-block! config left-block prev-block {:sibling? sibling?\n                                                             :keep-uuid? true})))\n    (ok-handler prev-block)))\n\n(defn insert-new-block-aux!\n  [config\n   {:block/keys [uuid]\n    :as block}\n   value\n   {:keys [ok-handler]\n    :as _opts}]\n  (let [block-self? (block-self-alone-when-insert? config uuid)\n        input (gdom/getElement (state/get-edit-input-id))\n        pos (cursor/pos input)\n        [fst-block-text snd-block-text] (compute-fst-snd-block-text value pos)\n        current-block (assoc block :block/content fst-block-text)\n        current-block (apply dissoc current-block db-schema/retract-attributes)\n        current-block (wrap-parse-block current-block)\n        new-m {:block/uuid (db/new-block-id)\n               :block/content snd-block-text}\n        next-block (-> (merge (select-keys block [:block/parent :block/left :block/format\n                                                  :block/page :block/journal?]) new-m)\n                       (wrap-parse-block))\n        sibling? (when block-self? false)]\n    (outliner-insert-block! config current-block next-block {:sibling? sibling?\n                                                             :keep-uuid? true})\n    (util/set-change-value input fst-block-text)\n    (ok-handler next-block)))\n\n(defn clear-when-saved!\n  []\n  (state/clear-editor-show-state!)\n  (commands/restore-state true))\n\n(defn get-state\n  []\n  (let [[{:keys [on-hide block block-id block-parent-id format sidebar?]} id config] (state/get-editor-args)\n        node (gdom/getElement id)]\n    (when node\n      (let [value (gobj/get node \"value\")\n            pos (util/get-selection-start node)]\n        {:config config\n         :on-hide on-hide\n         :sidebar? sidebar?\n         :format format\n         :id id\n         :block (or (db/pull [:block/uuid (:block/uuid block)]) block)\n         :block-id block-id\n         :block-parent-id block-parent-id\n         :node node\n         :value value\n         :pos pos}))))\n\n(defn insert-new-block!\n  \"Won't save previous block content - remember to save!\"\n  ([state]\n   (insert-new-block! state nil))\n  ([_state block-value]\n   (when (and (not config/publishing?)\n              (not= :insert (state/get-editor-op)))\n     (state/set-editor-op! :insert)\n     (when-let [state (get-state)]\n       (let [{:keys [block value id config]} state\n             value (if (string? block-value) block-value value)\n             block-id (:block/uuid block)\n             block (or (db/pull [:block/uuid block-id])\n                       block)\n             block-self? (block-self-alone-when-insert? config block-id)\n             input (gdom/getElement (state/get-edit-input-id))\n             pos (cursor/pos input)\n             [fst-block-text snd-block-text] (compute-fst-snd-block-text value pos)\n             insert-fn (cond\n                         block-self?\n                         insert-new-block-aux!\n\n                         (and (string/blank? fst-block-text) (not (string/blank? snd-block-text)))\n                         insert-new-block-before-block-aux!\n\n                         :else\n                         insert-new-block-aux!)]\n         (insert-fn config block value\n                    {:ok-handler\n                     (fn [last-block]\n                       (clear-when-saved!)\n                       (edit-block! last-block 0 id))}))))\n   (state/set-editor-op! nil)))\n\n(defn api-insert-new-block!\n  [content {:keys [page block-uuid sibling? before? properties\n                   custom-uuid replace-empty-target? edit-block?]\n            :or {sibling? false\n                 before? false\n                 edit-block? true}}]\n  (when (or page block-uuid)\n    (let [before? (if page false before?)\n          sibling? (if before? true (if page false sibling?))\n          block (if page\n                  (db/entity [:block/name (util/page-name-sanity-lc page)])\n                  (db/entity [:block/uuid block-uuid]))]\n      (when block\n        (let [last-block (when (not sibling?)\n                           (let [children (:block/_parent block)\n                                 blocks (db/sort-by-left children block)\n                                 last-block-id (:db/id (last blocks))]\n                             (when last-block-id\n                               (db/pull last-block-id))))\n              format (or\n                      (:block/format block)\n                      (db/get-page-format (:db/id block))\n                      (state/get-preferred-format))\n              content (if (seq properties)\n                        (property/insert-properties format content properties)\n                        content)\n              new-block (-> (select-keys block [:block/page :block/journal?\n                                                :block/journal-day])\n                            (assoc :block/content content\n                                   :block/format format))\n              new-block (assoc new-block :block/page\n                               (if page\n                                 (:db/id block)\n                                 (:db/id (:block/page new-block))))\n              new-block (-> new-block\n                            (wrap-parse-block)\n                            (assoc :block/uuid (or custom-uuid (db/new-block-id))))\n              [block-m sibling?] (cond\n                                   before?\n                                   (let [first-child? (->> [:block/parent :block/left]\n                                                           (map #(:db/id (get block %)))\n                                                           (apply =))\n                                         block (db/pull (:db/id (:block/left block)))\n                                         sibling? (if (or first-child? ;; insert as first child\n                                                          (:block/name block))\n                                                    false sibling?)]\n                                     [block sibling?])\n\n                                   sibling?\n                                   [(db/pull (:db/id block)) sibling?]\n\n                                   last-block\n                                   [last-block true]\n\n                                   block\n                                   [(db/pull (:db/id block)) sibling?]\n\n                                   ;; FIXME: assert\n                                   :else\n                                   nil)]\n          (when block-m\n            (outliner-insert-block! {} block-m new-block {:sibling? sibling?\n                                                          :keep-uuid? true\n                                                          :replace-empty-target? replace-empty-target?})\n            (when edit-block?\n              (if (and replace-empty-target?\n                       (string/blank? (:block/content last-block)))\n                (js/setTimeout #(edit-block! last-block :max (:block/uuid last-block)) 10)\n                (js/setTimeout #(edit-block! new-block :max (:block/uuid new-block)) 10)))\n            new-block))))))\n\n(defn insert-first-page-block-if-not-exists!\n  ([page-title]\n   (insert-first-page-block-if-not-exists! page-title {}))\n  ([page-title opts]\n   (when (and (string? page-title)\n              (not (string/blank? page-title)))\n     (state/pub-event! [:page/create page-title opts]))))\n\n(defn properties-block\n  [properties format page]\n  (let [content (property/insert-properties format \"\" properties)\n        refs (gp-block/get-page-refs-from-properties properties\n                                                     (db/get-db (state/get-current-repo))\n                                                     (state/get-date-formatter))]\n    {:block/pre-block? true\n     :block/uuid (db/new-block-id)\n     :block/properties properties\n     :block/properties-order (keys properties)\n     :block/refs refs\n     :block/left page\n     :block/format format\n     :block/content content\n     :block/parent page\n     :block/page page}))\n\n(defn update-timestamps-content!\n  [{:block/keys [repeated? marker format] :as block} content]\n  (if repeated?\n    (let [scheduled-ast (block-handler/get-scheduled-ast block)\n          deadline-ast (block-handler/get-deadline-ast block)\n          content (some->> (filter repeated/repeated? [scheduled-ast deadline-ast])\n                           (map (fn [ts]\n                                  [(repeated/timestamp->text ts)\n                                   (repeated/next-timestamp-text ts)]))\n                           (reduce (fn [content [old new]]\n                                     (string/replace content old new))\n                                   content))\n          content (string/replace-first\n                   content marker\n                   (case marker\n                     \"DOING\"\n                     \"TODO\"\n\n                     \"NOW\"\n                     \"LATER\"\n\n                     marker))\n          content (clock/clock-out format content)\n          content (drawer/insert-drawer\n                   format content \"logbook\"\n                   (util/format (str (if (= :org format) \"-\" \"*\")\n                                     \" State \\\"DONE\\\" from \\\"%s\\\" [%s]\")\n                                marker\n                                (date/get-date-time-string-3)))]\n      content)\n    content))\n\n(defn check\n  [{:block/keys [marker content repeated? uuid] :as block}]\n  (let [new-content (string/replace-first content marker \"DONE\")\n        new-content (if repeated?\n                      (update-timestamps-content! block content)\n                      new-content)\n        input-id (state/get-edit-input-id)]\n    (if (and input-id\n             (string/ends-with? input-id (str uuid)))\n      (state/set-edit-content! input-id new-content)\n      (save-block-if-changed! block new-content))))\n\n(defn uncheck\n  [{:block/keys [content uuid] :as block}]\n  (let [marker (if (= :now (state/get-preferred-workflow))\n                 \"LATER\"\n                 \"TODO\")\n        new-content (string/replace-first content \"DONE\" marker)\n        input-id (state/get-edit-input-id)]\n    (if (and input-id\n             (string/ends-with? input-id (str uuid)))\n      (state/set-edit-content! input-id new-content)\n      (save-block-if-changed! block new-content))))\n\n(defn get-selected-blocks\n  []\n  (distinct (seq (state/get-selection-blocks))))\n\n(defn set-marker\n  \"The set-marker will set a new marker on the selected block.\n  if the `new-marker` is nil, it will generate it automatically.\"\n  ([block]\n   (set-marker block nil))\n  ([{:block/keys [marker content format] :as block} new-marker]\n   (let [[new-content _] (marker/cycle-marker content marker new-marker format (state/get-preferred-workflow))]\n     (save-block-if-changed! block new-content))))\n\n(defn cycle-todos!\n  []\n  (when-let [blocks (seq (get-selected-blocks))]\n    (let [ids (->> (distinct (map #(when-let [id (dom/attr % \"blockid\")]\n                                     (uuid id)) blocks))\n                   (remove nil?))]\n      (doseq [id ids]\n        (let [block (db/pull [:block/uuid id])]\n          (set-marker block))))))\n\n(defn cycle-todo!\n  []\n  #_:clj-kondo/ignore\n  (if-let [blocks (seq (get-selected-blocks))]\n    (cycle-todos!)\n    (when (state/get-edit-block)\n      (let [edit-input-id (state/get-edit-input-id)\n            current-input (gdom/getElement edit-input-id)\n            content (state/get-edit-content)\n            format (or (db/get-page-format (state/get-current-page))\n                       (state/get-preferred-format))\n            [new-content marker] (marker/cycle-marker content nil nil format (state/get-preferred-workflow))\n            new-pos (commands/compute-pos-delta-when-change-marker\n                     content marker (cursor/pos current-input))]\n        (state/set-edit-content! edit-input-id new-content)\n        (cursor/move-cursor-to current-input new-pos)))))\n\n(defn set-priority\n  [{:block/keys [priority content] :as block} new-priority]\n  (let [new-content (string/replace-first content\n                                          (util/format \"[#%s]\" priority)\n                                          (util/format \"[#%s]\" new-priority))]\n    (save-block-if-changed! block new-content)))\n\n(defn cycle-priority!\n  []\n  (when (state/get-edit-block)\n    (let [format (or (db/get-page-format (state/get-current-page))\n                     (state/get-preferred-format))\n          input-id (state/get-edit-input-id)\n          content (state/get-edit-content)\n          new-priority (priority/cycle-priority-state content)\n          new-value (priority/add-or-update-priority content format new-priority)]\n      (state/set-edit-content! input-id new-value))))\n\n(defn delete-block-aux!\n  [{:block/keys [uuid repo] :as _block} children?]\n  (let [repo (or repo (state/get-current-repo))\n        block (db/pull repo '[*] [:block/uuid uuid])]\n    (when block\n      (outliner-tx/transact!\n        {:outliner-op :delete-blocks}\n        (outliner-core/delete-blocks! [block] {:children? children?})))))\n\n(defn- move-to-prev-block\n  [repo sibling-block format id value]\n  (when (and repo sibling-block)\n    (when-let [sibling-block-id (dom/attr sibling-block \"blockid\")]\n      (when-let [block (db/pull repo '[*] [:block/uuid (uuid sibling-block-id)])]\n        (let [original-content (util/trim-safe (:block/content block))\n              value' (-> (property/remove-built-in-properties format original-content)\n                         (drawer/remove-logbook))\n              new-value (str value' value)\n              tail-len (count value)\n              pos (max\n                   (if original-content\n                     (utf8/length (utf8/encode original-content))\n                     0)\n                   0)]\n          (edit-block! block pos id\n                       {:custom-content new-value\n                        :tail-len tail-len\n                        :move-cursor? false}))))))\n\n(defn delete-block!\n  ([repo]\n   (delete-block! repo true))\n  ([repo delete-children?]\n   (state/set-editor-op! :delete)\n   (let [{:keys [id block-id block-parent-id value format]} (get-state)]\n     (when block-id\n       (let [page-id (:db/id (:block/page (db/entity [:block/uuid block-id])))\n             page-blocks-count (and page-id (db/get-page-blocks-count repo page-id))]\n         (when (> page-blocks-count 1)\n           (let [block (db/entity [:block/uuid block-id])\n                 has-children? (seq (:block/_parent block))\n                 block (db/pull (:db/id block))\n                 left (tree/-get-left (outliner-core/block block))\n                 left-has-children? (and left\n                                         (when-let [block-id (:block/uuid (:data left))]\n                                           (let [block (db/entity [:block/uuid block-id])]\n                                             (seq (:block/_parent block)))))]\n             (when-not (and has-children? left-has-children?)\n               (when block-parent-id\n                 (let [block-parent (gdom/getElement block-parent-id)\n                       sibling-block (util/get-prev-block-non-collapsed-non-embed block-parent)]\n                   (delete-block-aux! block delete-children?)\n                   (move-to-prev-block repo sibling-block format id value)))))))))\n   (state/set-editor-op! nil)))\n\n(defn delete-blocks!\n  [repo block-uuids blocks dom-blocks]\n  (when (seq block-uuids)\n    (let [uuid->dom-block (zipmap block-uuids dom-blocks)\n          block (first blocks)\n          block-parent (get uuid->dom-block (:block/uuid block))\n          sibling-block (when block-parent (util/get-prev-block-non-collapsed-non-embed block-parent))]\n      (outliner-tx/transact!\n        {:outliner-op :delete-blocks}\n        (outliner-core/delete-blocks! blocks {}))\n      (when sibling-block\n        (move-to-prev-block repo sibling-block\n                            (:block/format block)\n                            (dom/attr sibling-block \"id\")\n                            \"\")))))\n\n(defn- batch-set-block-property!\n  \"col: a collection of [block-id property-key property-value].\"\n  [col]\n  #_:clj-kondo/ignore\n  (when-let [repo (state/get-current-repo)]\n    (outliner-tx/transact!\n      {:outliner-op :save-block}\n      (doseq [[block-id key value] col]\n        (let [block-id (if (string? block-id) (uuid block-id) block-id)]\n          (when-let [block (db/entity [:block/uuid block-id])]\n            (let [format (:block/format block)\n                  content (:block/content block)\n                  properties (:block/properties block)\n                  properties (if (nil? value)\n                               (dissoc properties key)\n                               (assoc properties key value))\n                  content (if (nil? value)\n                            (property/remove-property format key content)\n                            (property/insert-property format content key value))\n                  content (property/remove-empty-properties content)\n                  block {:block/uuid block-id\n                         :block/properties properties\n                         :block/content content}]\n              (outliner-core/save-block! block))))))\n\n    (let [block-id (ffirst col)\n          block-id (if (string? block-id) (uuid block-id) block-id)\n          input-pos (or (state/get-edit-pos) :max)]\n      ;; update editing input content\n      (when-let [editing-block (state/get-edit-block)]\n        (when (= (:block/uuid editing-block) block-id)\n          (edit-block! editing-block\n                       input-pos\n                       (state/get-edit-input-id)))))))\n\n(defn remove-block-property!\n  [block-id key]\n  (let [key (keyword key)]\n    (batch-set-block-property! [[block-id key nil]])))\n\n(defn set-block-property!\n  [block-id key value]\n  (let [key (keyword key)]\n    (batch-set-block-property! [[block-id key value]])))\n\n(defn set-block-query-properties!\n  [block-id all-properties key add?]\n  (when-let [block (db/entity [:block/uuid block-id])]\n    (let [query-properties (-> (get-in block [:block/properties :query-properties] \"\")\n                               (common-handler/safe-read-string \"Failed to parse query properties\"))\n          query-properties (if (seq query-properties)\n                             query-properties\n                             all-properties)\n          query-properties (if add?\n                             (distinct (conj query-properties key))\n                             (remove #{key} query-properties))\n          query-properties (vec query-properties)]\n      (if (seq query-properties)\n        (set-block-property! block-id :query-properties (str query-properties))\n        (remove-block-property! block-id :query-properties)))))\n\n(defn set-block-timestamp!\n  [block-id key value]\n  (let [key (string/lower-case key)\n        block-id (if (string? block-id) (uuid block-id) block-id)\n        key (string/lower-case (str key))\n        value (str value)]\n    (when-let [block (db/pull [:block/uuid block-id])]\n      (let [{:block/keys [content]} block\n            content (or content (state/get-edit-content))\n            new-content (-> (text/remove-timestamp content key)\n                            (text/add-timestamp key value))]\n        (when (not= content new-content)\n          (let [input-id (state/get-edit-input-id)]\n            (if (and input-id\n                     (string/ends-with? input-id (str block-id)))\n              (state/set-edit-content! input-id new-content)\n              (save-block-if-changed! block new-content))))))))\n\n(defn- set-blocks-id!\n  [block-ids]\n  (let [block-ids (remove nil? block-ids)\n        col (map (fn [block-id]\n                   (let [block (db/entity [:block/uuid block-id])]\n                     (when-not (:block/pre-block? block)\n                       [block-id :id (str block-id)])))\n                 block-ids)]\n    (batch-set-block-property! col)))\n\n(defn copy-block-ref!\n  ([block-id]\n   (copy-block-ref! block-id #(str %)))\n  ([block-id tap-clipboard]\n   (set-blocks-id! [block-id])\n   (util/copy-to-clipboard! (tap-clipboard block-id))))\n\n(defn select-block!\n  [block-uuid]\n  (let [blocks (js/document.getElementsByClassName (str block-uuid))]\n    (when (seq blocks)\n      (state/exit-editing-and-set-selected-blocks! blocks))))\n\n(defn- compose-copied-blocks-contents\n  [repo block-ids]\n  (let [blocks (db-utils/pull-many repo '[*] (mapv (fn [id] [:block/uuid id]) block-ids))\n        top-level-block-uuids (->> (outliner-core/get-top-level-blocks blocks)\n                                   (map :block/uuid))]\n    (export/export-blocks-as-markdown\n     repo top-level-block-uuids\n     (state/get-export-block-text-indent-style)\n     (into [] (state/get-export-block-text-remove-options)))))\n\n(defn copy-selection-blocks\n  []\n  (when-let [blocks (seq (state/get-selection-blocks))]\n    (let [repo (state/get-current-repo)\n          ids (distinct (keep #(when-let [id (dom/attr % \"blockid\")]\n                                 (uuid id)) blocks))\n          content (compose-copied-blocks-contents repo ids)\n          block (db/entity [:block/uuid (first ids)])]\n      (when block\n        (common-handler/copy-to-clipboard-without-id-property! (:block/format block) content)\n        (state/set-copied-blocks content ids)\n        (notification/show! \"Copied!\" :success)))))\n\n(defn copy-block-refs\n  []\n  (when-let [selected-blocks (seq (get-selected-blocks))]\n    (let [blocks (->> (distinct (map #(when-let [id (dom/attr % \"blockid\")]\n                                        (let [level (dom/attr % \"level\")]\n                                          {:id (uuid id)\n                                           :level (int level)}))\n                                     selected-blocks))\n                      (remove nil?))\n          first-block (first blocks)\n          first-root-level-index (ffirst\n                                  (filter (fn [[_ block]] (= (:level block) 1))\n                                          (map-indexed vector blocks)))\n          root-level (atom (:level first-block))\n          adjusted-blocks (map-indexed\n                           (fn [index {:keys [id level]}]\n                             {:id id\n                              :level (if (< index first-root-level-index)\n                                       (if (< level @root-level)\n                                         (do\n                                           (reset! root-level level)\n                                           1)\n                                         (inc (- level @root-level)))\n                                       level)})\n                           blocks)\n          block (db/pull [:block/uuid (:id first-block)])\n          copy-str (some->> adjusted-blocks\n                            (map (fn [{:keys [id level]}]\n                                   (condp = (:block/format block)\n                                     :org\n                                     (util/format (str (string/join (repeat level \"*\")) \" ((%s))\") id)\n                                     :markdown\n                                     (util/format (str (string/join (repeat (dec level) \"\\t\")) \"- ((%s))\") id))))\n                            (string/join \"\\n\\n\"))]\n      (set-blocks-id! (map :id blocks))\n      (util/copy-to-clipboard! copy-str))))\n\n(defn copy-block-embeds\n  []\n  (when-let [blocks (seq (get-selected-blocks))]\n    (let [ids (->> (distinct (map #(when-let [id (dom/attr % \"blockid\")]\n                                     (uuid id)) blocks))\n                   (remove nil?))\n          ids-str (some->> ids\n                           (map (fn [id] (util/format \"{{embed ((%s))}}\" id)))\n                           (string/join \"\\n\\n\"))]\n      (set-blocks-id! ids)\n      (util/copy-to-clipboard! ids-str))))\n\n(defn get-selected-toplevel-block-uuids\n  []\n  (when-let [blocks (seq (get-selected-blocks))]\n    (let [repo (state/get-current-repo)\n          block-ids (->> (distinct (map #(when-let [id (dom/attr % \"blockid\")]\n                                           (uuid id)) blocks))\n                         (remove nil?))\n          blocks (db-utils/pull-many repo '[*] (mapv (fn [id] [:block/uuid id]) block-ids))\n          page-id (:db/id (:block/page (first blocks)))\n          ;; filter out blocks not belong to page with 'page-id'\n          blocks* (remove (fn [block] (some-> (:db/id (:block/page block)) (not= page-id))) blocks)]\n      (->> (outliner-core/get-top-level-blocks blocks*)\n           (map :block/uuid)))))\n\n(defn cut-selection-blocks\n  [copy?]\n  (when copy? (copy-selection-blocks))\n  (when-let [blocks (seq (get-selected-blocks))]\n    ;; remove embeds, references and queries\n    (let [dom-blocks (remove (fn [block]\n                           (or (= \"true\" (dom/attr block \"data-transclude\"))\n                               (= \"true\" (dom/attr block \"data-query\")))) blocks)]\n      (when (seq dom-blocks)\n        (let [repo (state/get-current-repo)\n              block-uuids (distinct (map #(uuid (dom/attr % \"blockid\")) dom-blocks))\n              lookup-refs (map (fn [id] [:block/uuid id]) block-uuids)\n              blocks (db/pull-many repo '[*] lookup-refs)]\n          (state/set-copied-full-blocks nil blocks)\n          (delete-blocks! repo block-uuids blocks dom-blocks))))))\n\n(def url-regex\n  \"Didn't use link/plain-link as it is incorrectly detects words as urls.\"\n  #\"[^\\s\\(\\[]+://[^\\s\\)\\]]+\")\n\n(defn extract-nearest-link-from-text\n  [text pos & additional-patterns]\n  (let [page-pattern #\"\\[\\[([^\\]]+)]]\"\n        block-pattern #\"\\(\\(([^\\)]+)\\)\\)\"\n        tag-pattern #\"#\\S+\"\n        page-matches (util/re-pos page-pattern text)\n        block-matches (util/re-pos block-pattern text)\n        tag-matches (util/re-pos tag-pattern text)\n        additional-matches (mapcat #(util/re-pos % text) additional-patterns)\n        matches (->> (concat page-matches block-matches tag-matches additional-matches)\n                     (remove nil?))\n        [_ match] (first (sort-by\n                          (fn [[start-pos content]]\n                            (let [end-pos (+ start-pos (count content))]\n                              (cond\n                                (< pos start-pos)\n                                (- pos start-pos)\n\n                                (> pos end-pos)\n                                (- end-pos pos)\n\n                                :else\n                                0)))\n                          >\n                          matches))]\n    (when match\n      (cond\n        (some #(re-find % match) additional-patterns)\n        match\n        (string/starts-with? match \"#\")\n        (subs match 1 (count match))\n        :else\n        (subs match 2 (- (count match) 2))))))\n\n(defn- get-nearest-page-or-url\n  \"Return the nearest page-name (not dereferenced, may be an alias), block, tag or url\"\n  []\n  (when-let [block (state/get-edit-block)]\n    (when (:block/uuid block)\n      (when-let [edit-id (state/get-edit-input-id)]\n        (when-let [input (gdom/getElement edit-id)]\n          (when-let [pos (cursor/pos input)]\n            (let [value (gobj/get input \"value\")]\n              (extract-nearest-link-from-text value pos url-regex))))))))\n\n(defn- get-nearest-page\n  \"Return the nearest page-name (not dereferenced, may be an alias), block or tag\"\n  []\n  (when-let [block (state/get-edit-block)]\n    (when (:block/uuid block)\n      (when-let [edit-id (state/get-edit-input-id)]\n        (when-let [input (gdom/getElement edit-id)]\n          (when-let [pos (cursor/pos input)]\n            (let [value (gobj/get input \"value\")]\n              (extract-nearest-link-from-text value pos))))))))\n\n(defn follow-link-under-cursor!\n  []\n  (when-let [page (get-nearest-page-or-url)]\n    (when-not (string/blank? page)\n      (if (re-find url-regex page)\n        (js/window.open page)\n        (let [page-name (db-model/get-redirect-page-name page)]\n          (state/clear-edit!)\n          (insert-first-page-block-if-not-exists! page-name))))))\n\n(defn open-link-in-sidebar!\n  []\n  (when-let [page (get-nearest-page)]\n    (let [page-name (string/lower-case page)\n          block? (util/uuid-string? page-name)]\n      (when-let [page (db/get-page page-name)]\n        (if block?\n          (state/sidebar-add-block!\n           (state/get-current-repo)\n           (:db/id page)\n           :block)\n          (state/sidebar-add-block!\n           (state/get-current-repo)\n           (:db/id page)\n           :page))))))\n\n(defn zoom-in! []\n  (if (state/editing?)\n    (when-let [id (some-> (state/get-edit-block)\n                          :block/uuid\n                          ((fn [id] [:block/uuid id]))\n                          db/entity\n                          :block/uuid)]\n      (let [pos (state/get-edit-pos)]\n        (route-handler/redirect-to-page! id)\n        (js/setTimeout #(edit-block! {:block/uuid id} pos id) 0)))\n    (js/window.history.forward)))\n\n(defn zoom-out!\n  []\n  (if (state/editing?)\n    (let [page (state/get-current-page)\n          block-id (and\n                    (string? page)\n                    (util/uuid-string? page)\n                    (medley/uuid page))]\n      (when block-id\n        (let [block-parent (db/get-block-parent block-id)]\n          (if-let [id (and\n                       (nil? (:block/name block-parent))\n                       (:block/uuid block-parent))]\n            (do\n              (route-handler/redirect-to-page! id)\n              (js/setTimeout #(edit-block! {:block/uuid block-id} :max block-id) 0))\n            (let [page-id (some-> (db/entity [:block/uuid block-id])\n                                  :block/page\n                                  :db/id)]\n\n              (when-let [page-name (:block/name (db/entity page-id))]\n                (route-handler/redirect-to-page! page-name)\n                (js/setTimeout #(edit-block! {:block/uuid block-id} :max block-id) 0)))))))\n    (js/window.history.back)))\n\n(defn cut-block!\n  [block-id]\n  (when-let [block (db/pull [:block/uuid block-id])]\n    (let [repo (state/get-current-repo)\n          ;; TODO: support org mode\n          md-content (compose-copied-blocks-contents repo [block-id])]\n      (state/set-copied-full-blocks md-content [block])\n      (common-handler/copy-to-clipboard-without-id-property! (:block/format block) md-content)\n      (delete-block-aux! block true))))\n\n(defn clear-last-selected-block!\n  []\n  (let [block (state/drop-last-selection-block!)]\n    (util/select-unhighlight! [block])))\n\n(defn highlight-selection-area!\n  [end-block]\n  (when-let [start-block (state/get-selection-start-block)]\n    (let [blocks (util/get-nodes-between-two-nodes start-block end-block \"ls-block\")\n          direction (util/get-direction-between-two-nodes start-block end-block \"ls-block\")\n\n          blocks (if (= :up direction)\n                   (reverse blocks)\n                   blocks)]\n      (state/exit-editing-and-set-selected-blocks! blocks direction))))\n\n(defn- select-block-up-down\n  [direction]\n  (cond\n      ;; when editing, quit editing and select current block\n    (state/editing?)\n    (state/exit-editing-and-set-selected-blocks! [(gdom/getElement (state/get-editing-block-dom-id))])\n\n      ;; when selection and one block selected, select next block\n    (and (state/selection?) (== 1 (count (state/get-selection-blocks))))\n    (let [f (if (= :up direction) util/get-prev-block-non-collapsed util/get-next-block-non-collapsed-skip)\n          element (f (first (state/get-selection-blocks)))]\n      (when element\n        (state/conj-selection-block! element direction)))\n\n      ;; if same direction, keep conj on same direction\n    (and (state/selection?) (= direction (state/get-selection-direction)))\n    (let [f (if (= :up direction) util/get-prev-block-non-collapsed util/get-next-block-non-collapsed-skip)\n          first-last (if (= :up direction) first last)\n          element (f (first-last (state/get-selection-blocks)))]\n      (when element\n        (state/conj-selection-block! element direction)))\n\n      ;; if different direction, keep clear until one left\n    (state/selection?)\n    (clear-last-selected-block!)))\n\n(defn on-select-block\n  [direction]\n  (fn [_event]\n    (select-block-up-down direction)))\n\n(defn save-block-aux!\n  [block value opts]\n  (let [value (string/trim value)]\n    ;; FIXME: somehow frontend.components.editor's will-unmount event will loop forever\n    ;; maybe we shouldn't save the block/file in \"will-unmount\" event?\n    (save-block-if-changed! block value\n                            (merge\n                             {:init-properties (:block/properties block)}\n                             opts))))\n\n(defn save-block!\n  ([repo block-or-uuid content]\n   (let [block (if (or (uuid? block-or-uuid)\n                       (string? block-or-uuid))\n                 (db-model/query-block-by-uuid block-or-uuid) block-or-uuid)\n         format (:block/format block)]\n     (save-block! {:block block :repo repo :format format} content)))\n  ([{:keys [block repo] :as _state} value]\n   (when (:db/id (db/entity repo [:block/uuid (:block/uuid block)]))\n     (save-block-aux! block value {}))))\n\n(defn save-current-block!\n  \"skip-properties? if set true, when editing block is likely be properties, skip saving\"\n  ([]\n   (save-current-block! {}))\n  ([{:keys [force? skip-properties? current-block] :as opts}]\n   ;; non English input method\n   (when-not (state/editor-in-composition?)\n     (when (state/get-current-repo)\n       (when (and (not @commands/*show-commands)\n                  (not @commands/*show-block-commands)\n                  (not (state/get-editor-show-page-search?))\n                  (not (state/get-editor-show-page-search-hashtag?))\n                  (not (state/get-editor-show-block-search?))\n                  (not (state/get-editor-show-date-picker?))\n                  (not (state/get-editor-show-template-search?))\n                  (not (state/get-editor-show-input)))\n         (try\n           (let [input-id (state/get-edit-input-id)\n                 block (state/get-edit-block)\n                 db-block (when-let [block-id (:block/uuid block)]\n                            (db/pull [:block/uuid block-id]))\n                 elem (and input-id (gdom/getElement input-id))\n                 db-content (:block/content db-block)\n                 db-content-without-heading (and db-content\n                                                 (gp-util/safe-subs db-content (:block/level db-block)))\n                 value (or (:block/content current-block)\n                           (and elem (gobj/get elem \"value\")))]\n             (cond\n               force?\n               (save-block-aux! db-block value opts)\n\n               (and skip-properties?\n                    (db-model/top-block? block)\n                    (when elem (thingatpt/properties-at-point elem)))\n               nil\n\n               (and block value db-content-without-heading\n                    (not= (string/trim db-content-without-heading)\n                          (string/trim value)))\n               (save-block-aux! db-block value opts)))\n           (catch js/Error error\n             (log/error :save-block-failed error))))))))\n\n(defn- clean-content!\n  [format content]\n  (->> (text/remove-level-spaces content format (config/get-block-pattern format))\n       (drawer/remove-logbook)\n       (property/remove-properties format)\n       string/trim))\n\n(defn insert-command!\n  [id command-output format {:keys [restore?]\n                             :or {restore? true}\n                             :as option}]\n  (cond\n    ;; replace string\n    (string? command-output)\n    (commands/insert! id command-output option)\n\n    ;; steps\n    (vector? command-output)\n    (commands/handle-steps command-output format)\n\n    (fn? command-output)\n    (let [s (command-output)]\n      (commands/insert! id s option))\n\n    :else\n    nil)\n\n  (when restore?\n    (let [restore-slash-caret-pos? (if (and\n                                        (seq? command-output)\n                                        (= :editor/click-hidden-file-input\n                                           (ffirst command-output)))\n                                     false\n                                     true)]\n      (commands/restore-state restore-slash-caret-pos?))))\n\n(defn get-asset-file-link\n  [format url file-name image?]\n  (let [pdf? (and url (string/ends-with? url \".pdf\"))]\n    (case (keyword format)\n      :markdown (util/format (str (when (or image? pdf?) \"!\") \"[%s](%s)\") file-name url)\n      :org (if image?\n             (util/format \"[[%s]]\" url)\n             (util/format \"[[%s][%s]]\" url file-name))\n      nil)))\n\n(defn ensure-assets-dir!\n  [repo]\n  (let [repo-dir (config/get-repo-dir repo)\n        assets-dir \"assets\"]\n    (p/then\n     (fs/mkdir-if-not-exists (str repo-dir \"/\" assets-dir))\n     (fn [] [repo-dir assets-dir]))))\n\n(defn get-asset-path [filename]\n  (p/let [[repo-dir assets-dir] (ensure-assets-dir! (state/get-current-repo))\n          path (path/join repo-dir assets-dir filename)]\n    (if (mobile-util/native-android?)\n      path\n      (js/encodeURI (js/decodeURI path)))))\n\n(defn save-assets!\n  ([_ repo files]\n   (p/let [[repo-dir assets-dir] (ensure-assets-dir! repo)]\n     (save-assets! repo repo-dir assets-dir files\n                   (fn [index file-base]\n                     ;; TODO: maybe there're other chars we need to handle?\n                     (let [file-base (-> file-base\n                                         (string/replace \" \" \"_\")\n                                         (string/replace \"%\" \"_\")\n                                         (string/replace \"/\" \"_\"))\n                           file-name (str file-base \"_\" (.now js/Date) \"_\" index)]\n                       (string/replace file-name #\"_+\" \"_\"))))))\n  ([repo dir path files gen-filename]\n   (p/all\n    (for [[index ^js file] (map-indexed vector files)]\n      ;; WARN file name maybe fully qualified path when paste file\n      (let [file-name (util/node-path.basename (.-name file))\n            [file-base ext] (if file-name\n                              (let [last-dot-index (string/last-index-of file-name \".\")]\n                                [(subs file-name 0 last-dot-index)\n                                 (subs file-name last-dot-index)])\n                              [\"\" \"\"])\n            filename (str (gen-filename index file-base) ext)\n            filename (str path \"/\" filename)]\n                                        ;(js/console.debug \"Write asset #\" dir filename file)\n        (if (util/electron?)\n          (let [from (.-path file)\n                from (if (string/blank? from) nil from)]\n            (p/then (js/window.apis.copyFileToAssets dir filename from)\n                    #(p/resolved [filename (if (string? %) (js/File. #js[] %) file) (.join util/node-path dir filename)])))\n          (p/then (fs/write-file! repo dir filename (.stream file) nil)\n                  #(p/resolved [filename file]))))))))\n\n(defonce *assets-url-cache (atom {}))\n\n(defn make-asset-url\n  [path] ;; path start with \"/assets\" or compatible for \"../assets\"\n  (let [repo-dir (config/get-repo-dir (state/get-current-repo))\n        path (string/replace path \"../\" \"/\")]\n    (cond\n      (util/electron?)\n      (str \"assets://\" repo-dir path)\n\n      (mobile-util/is-native-platform?)\n      (mobile-util/convert-file-src (str repo-dir path))\n\n      :else\n      (let [handle-path (str \"handle\" repo-dir path)\n            cached-url (get @*assets-url-cache (keyword handle-path))]\n        (if cached-url\n          (p/resolved cached-url)\n          (p/let [handle (idb/get-item handle-path)\n                  file (and handle (.getFile handle))]\n            (when file\n              (p/let [url (js/URL.createObjectURL file)]\n                (swap! *assets-url-cache assoc (keyword handle-path) url)\n                url))))))))\n\n(defn delete-asset-of-block!\n  [{:keys [repo href full-text block-id local? delete-local?] :as _opts}]\n  (let [block (db-model/query-block-by-uuid block-id)\n        _ (or block (throw (str block-id \" not exists\")))\n        text (:block/content block)\n        content (string/replace text full-text \"\")]\n    (save-block! repo block content)\n    (when (and local? delete-local?)\n      ;; FIXME: should be relative to current block page path\n      (when-let [href (if (util/electron?) href (second (re-find #\"\\((.+)\\)$\" full-text)))]\n        (fs/unlink! repo\n                    (config/get-repo-path\n                     repo (-> href\n                              (string/replace #\"^../\" \"/\")\n                              (string/replace #\"^assets://\" \"\"))) nil)))))\n\n;; assets/journals_2021_02_03_1612350230540_0.png\n(defn resolve-relative-path\n  [file-path]\n  (if-let [current-file (or (db-model/get-block-file-path (state/get-edit-block))\n                            ;; fix dummy file path of page\n                            (and (util/electron?)\n                                 (util/node-path.join\n                                  (config/get-repo-dir (state/get-current-repo))\n                                  (config/get-pages-directory) \"_.md\")))]\n    (util/get-relative-path current-file file-path)\n    file-path))\n\n(defn upload-asset\n  [id ^js files format uploading? drop-or-paste?]\n  (let [repo (state/get-current-repo)\n        block (state/get-edit-block)]\n    (if (config/local-db? repo)\n      (-> (save-assets! block repo (js->clj files))\n          (p/then\n           (fn [res]\n             (when-let [[asset-file-name file full-file-path] (and (seq res) (first res))]\n               (let [image? (util/ext-of-image? asset-file-name)]\n                 (insert-command!\n                  id\n                  (get-asset-file-link format (resolve-relative-path (or full-file-path asset-file-name))\n                                       (if file (.-name file) (if image? \"image\" \"asset\"))\n                                       image?)\n                  format\n                  {:last-pattern (if drop-or-paste? \"\" (state/get-editor-command-trigger))\n                   :restore?     true})))))\n          (p/finally\n            (fn []\n              (reset! uploading? false)\n              (reset! *asset-uploading? false)\n              (reset! *asset-uploading-process 0))))\n      (image/upload\n       files\n       (fn [file file-name file-type]\n         (image-handler/request-presigned-url\n          file file-name file-type\n          uploading?\n          (fn [signed-url]\n            (insert-command! id\n                             (get-asset-file-link format signed-url file-name true)\n                             format\n                             {:last-pattern (if drop-or-paste? \"\" (state/get-editor-command-trigger))\n                              :restore?     true})\n\n            (reset! *asset-uploading? false)\n            (reset! *asset-uploading-process 0))\n          (fn [e]\n            (let [process (* (/ (gobj/get e \"loaded\")\n                                (gobj/get e \"total\"))\n                             100)]\n              (reset! *asset-uploading? false)\n              (reset! *asset-uploading-process process)))))))))\n\n;; Editor should track some useful information, like editor modes.\n;; For example:\n;; 1. Which file format is it, markdown or org mode?\n;; 2. Is it in the properties area? Then we can enable the \":\" autopair\n(def autopair-map\n  {\"[\" \"]\"\n   \"{\" \"}\"\n   \"(\" \")\"\n   \"`\" \"`\"\n   \"~\" \"~\"\n   \"*\" \"*\"\n   \"_\" \"_\"\n   \"^\" \"^\"\n   \"=\" \"=\"\n   \"/\" \"/\"\n   \"+\" \"+\"})\n;; \":\" \":\"                              ; TODO: only properties editing and org mode tag\n\n(def reversed-autopair-map\n  (zipmap (vals autopair-map)\n          (keys autopair-map)))\n\n(def autopair-when-selected\n  #{\"*\" \"^\" \"_\" \"=\" \"+\" \"/\"})\n\n(def delete-map\n  (assoc autopair-map\n         \"$\" \"$\"\n         \":\" \":\"))\n\n(defn autopair\n  [input-id prefix _format _option]\n  (let [value (get autopair-map prefix)\n        selected (util/get-selected-text)\n        postfix (str selected value)\n        value (str prefix postfix)\n        input (gdom/getElement input-id)]\n    (when value\n      (when-not (string/blank? selected) (reset! *selected-text selected))\n      (let [[prefix _pos] (commands/simple-replace! input-id value selected\n                                                    {:backward-pos (count postfix)\n                                                     :check-fn (fn [new-value prefix-pos]\n                                                                 (when (>= prefix-pos 0)\n                                                                   [(subs new-value prefix-pos (+ prefix-pos 2))\n                                                                    (+ prefix-pos 2)]))})]\n        (case prefix\n          \"[[\"\n          (do\n            (commands/handle-step [:editor/search-page])\n            (reset! commands/*slash-caret-pos (cursor/get-caret-pos input)))\n\n          \"((\"\n          (do\n            (commands/handle-step [:editor/search-block :reference])\n            (reset! commands/*slash-caret-pos (cursor/get-caret-pos input)))\n\n          nil)))))\n\n(defn surround-by?\n  [input before end]\n  (when input\n    (let [value (gobj/get input \"value\")\n          pos (cursor/pos input)]\n      (text/surround-by? value pos before end))))\n\n(defn wrapped-by?\n  [input before end]\n  (when input\n    (let [value (gobj/get input \"value\")\n          pos (dec (cursor/pos input))]\n      (when (>= pos 0)\n        (text/wrapped-by? value pos before end)))))\n\n(defn get-matched-pages\n  \"Return matched page names\"\n  [q]\n  (let [block (state/get-edit-block)\n        editing-page (and block\n                          (when-let [page-id (:db/id (:block/page block))]\n                            (:block/name (db/entity page-id))))\n        pages (search/page-search q 20)]\n    (if editing-page\n      ;; To prevent self references\n      (remove (fn [p] (= (util/page-name-sanity-lc p) editing-page)) pages)\n      pages)))\n\n(defn get-matched-blocks\n  [q block-id]\n  ;; remove current block\n  (let [current-block (state/get-edit-block)\n        block-parents (set (->> (db/get-block-parents (state/get-current-repo)\n                                                      block-id\n                                                      99)\n                                (map (comp str :block/uuid))))\n        current-and-parents (set/union #{(str (:block/uuid current-block))} block-parents)]\n    (p/let [result (search/block-search (state/get-current-repo) q {:limit 20})]\n      (remove\n       (fn [h]\n         (contains? current-and-parents (:block/uuid h)))\n       result))))\n\n(defn get-matched-templates\n  [q]\n  (search/template-search q))\n\n(defn get-matched-commands\n  [input]\n  (try\n    (let [edit-content (or (gobj/get input \"value\") \"\")\n          pos (cursor/pos input)\n          last-slash-caret-pos (:pos @*slash-caret-pos)\n          last-command (and last-slash-caret-pos (subs edit-content last-slash-caret-pos pos))]\n      (when (> pos 0)\n        (or\n         (and (= (state/get-editor-command-trigger) (util/nth-safe edit-content (dec pos)))\n              @commands/*initial-commands)\n         (and last-command\n              (commands/get-matched-commands last-command)))))\n    (catch js/Error e\n      (js/console.error e)\n      nil)))\n\n(defn get-matched-block-commands\n  [input]\n  (try\n    (let [edit-content (gobj/get input \"value\")\n          pos (cursor/pos input)\n          last-command (subs edit-content\n                             (:pos @*angle-bracket-caret-pos)\n                             pos)]\n      (when (> pos 0)\n        (or\n         (and (= \\< (util/nth-safe edit-content (dec pos)))\n              (commands/block-commands-map))\n         (and last-command\n              (commands/get-matched-commands\n               last-command\n               (commands/block-commands-map))))))\n    (catch js/Error _error\n      nil)))\n\n(defn auto-complete?\n  []\n  (or @*show-commands\n      @*show-block-commands\n      @*asset-uploading?\n      (state/get-editor-show-input)\n      (state/get-editor-show-page-search?)\n      (state/get-editor-show-block-search?)\n      (state/get-editor-show-template-search?)\n      (state/get-editor-show-date-picker?)))\n\n(defn get-current-input-char\n  [input]\n  (when-let [pos (cursor/pos input)]\n    (let [value (gobj/get input \"value\")]\n      (when (and (>= (count value) (inc pos))\n                 (>= pos 1))\n        (util/nth-safe value pos)))))\n\n(defn move-up-down\n  [up?]\n  (fn [event]\n    (util/stop event)\n    (let [edit-block-id (:block/uuid (state/get-edit-block))\n          move-nodes (fn [blocks]\n                       (outliner-tx/transact!\n                         {:outliner-op :move-blocks}\n                         (save-current-block!)\n                         (outliner-core/move-blocks-up-down! blocks up?))\n                       (when-let [block-node (util/get-first-block-by-id (:block/uuid (first blocks)))]\n                         (.scrollIntoView block-node #js {:behavior \"smooth\" :block \"nearest\"})))]\n      (if edit-block-id\n        (when-let [block (db/pull [:block/uuid edit-block-id])]\n          (let [blocks [block]]\n            (move-nodes blocks))\n          (when-let [input-id (state/get-edit-input-id)]\n            (when-let [input (gdom/getElement input-id)]\n              (.focus input))))\n        (let [ids (state/get-selection-block-ids)]\n          (when (seq ids)\n            (let [lookup-refs (map (fn [id] [:block/uuid id]) ids)\n                  blocks (db/pull-many (state/get-current-repo) '[*] lookup-refs)]\n              (move-nodes blocks))))))))\n\n(defn get-selected-ordered-blocks\n  []\n  (let [repo (state/get-current-repo)\n        ids (state/get-selection-block-ids)\n        lookup-refs (->> (map (fn [id] [:block/uuid id]) ids)\n                         (remove nil?))]\n    (db/pull-many repo '[*] lookup-refs)))\n\n(defn on-tab\n  \"`direction` = :left | :right.\"\n  [direction]\n  (let [blocks (get-selected-ordered-blocks)]\n    (when (seq blocks)\n      (outliner-tx/transact!\n        {:outliner-op :move-blocks\n         :real-outliner-op :indent-outdent}\n        (outliner-core/indent-outdent-blocks! blocks (= direction :right))))))\n\n(defn- get-link [format link label]\n  (let [link (or link \"\")\n        label (or label \"\")]\n    (case (keyword format)\n      :markdown (util/format \"[%s](%s)\" label link)\n      :org (util/format \"[[%s][%s]]\" link label)\n      nil)))\n\n(defn- get-image-link\n  [format link label]\n  (let [link (or link \"\")\n        label (or label \"\")]\n    (case (keyword format)\n      :markdown (util/format \"![%s](%s)\" label link)\n      :org (util/format \"[[%s]]\"))))\n\n(defn handle-command-input [command id format m]\n  ;; TODO: Add error handling for when user doesn't provide a required field.\n  ;; (The current behavior is to just revert back to the editor.)\n  (case command\n\n    :link (let [{:keys [link label]} m]\n            (when-not (or (string/blank? link) (string/blank? label))\n              (insert-command!\n               id\n               (get-link format link label)\n               format\n               {:last-pattern (str (state/get-editor-command-trigger) \"link\")})))\n\n    :image-link (let [{:keys [link label]} m]\n                  (when (not (string/blank? link))\n                    (insert-command!\n                     id\n                     (get-image-link format link label)\n                     format\n                     {:last-pattern (str (state/get-editor-command-trigger) \"link\")})))\n\n    nil)\n\n  (state/set-editor-show-input! nil)\n\n  (when-let [saved-cursor (state/get-editor-last-pos)]\n    (when-let [input (gdom/getElement id)]\n      (.focus input)\n      (cursor/move-cursor-to input saved-cursor))))\n\n(defn get-search-q\n  []\n  (when-let [id (state/get-edit-input-id)]\n    (when-let [input (gdom/getElement id)]\n      (let [current-pos (cursor/pos input)\n            pos (state/get-editor-last-pos)\n            edit-content (or (state/sub [:editor/content id]) \"\")]\n        (or\n         @*selected-text\n         (gp-util/safe-subs edit-content pos current-pos))))))\n\n(defn close-autocomplete-if-outside\n  [input]\n  (when (and input\n             (or (state/get-editor-show-page-search?)\n                 (state/get-editor-show-page-search-hashtag?)\n                 (state/get-editor-show-block-search?))\n             (not (wrapped-by? input \"[[\" \"]]\")))\n    (when (get-search-q)\n      (let [value (gobj/get input \"value\")\n            pos (state/get-editor-last-pos)\n            current-pos (cursor/pos input)\n            between (gp-util/safe-subs value (min pos current-pos) (max pos current-pos))]\n        (when (and between\n                   (or\n                    (string/includes? between \"[\")\n                    (string/includes? between \"]\")\n                    (string/includes? between \"(\")\n                    (string/includes? between \")\")))\n          (state/set-editor-show-block-search! false)\n          (state/set-editor-show-page-search! false)\n          (state/set-editor-show-page-search-hashtag! false))))))\n\n(defn resize-image!\n  [block-id metadata full_text size]\n  (let [new-meta (merge metadata size)\n        image-part (first (string/split full_text #\"\\{\"))\n        new-full-text (str image-part (pr-str new-meta))\n        block (db/pull [:block/uuid block-id])\n        value (:block/content block)\n        new-value (string/replace value full_text new-full-text)]\n    (save-block-aux! block new-value {})))\n\n(defn- mark-last-input-time!\n  [repo]\n  (when repo\n    (state/set-editor-last-input-time! repo (util/time-ms))\n    (db/clear-repo-persistent-job! repo)))\n\n(defonce *auto-save-timeout (atom nil))\n(defn edit-box-on-change!\n  [e _block id]\n  (let [value (util/evalue e)\n        repo (state/get-current-repo)]\n    (state/set-edit-content! id value false)\n    (when @*auto-save-timeout\n      (js/clearTimeout @*auto-save-timeout))\n    (mark-last-input-time! repo)\n    (reset! *auto-save-timeout\n            (js/setTimeout\n             (fn []\n               (when (state/input-idle? repo)\n                 (state/set-editor-op! :auto-save)\n                 ; don't auto-save for page's properties block\n                 (save-current-block! {:skip-properties? true})\n                 (state/set-editor-op! nil)))\n             500))))\n\n(defn handle-last-input []\n  (let [input           (state/get-input)\n        pos             (cursor/pos input)\n        last-input-char (util/nth-safe (.-value input) (dec pos))]\n\n    ;; TODO: is it cross-browser compatible?\n    ;; (not= (gobj/get native-e \"inputType\") \"insertFromPaste\")\n    (when (= last-input-char (state/get-editor-command-trigger))\n      (when (seq (get-matched-commands input))\n        (reset! commands/*slash-caret-pos (cursor/get-caret-pos input))\n        (reset! commands/*show-commands true)))\n\n    (if (= last-input-char commands/angle-bracket)\n      (when (seq (get-matched-block-commands input))\n        (reset! commands/*angle-bracket-caret-pos (cursor/get-caret-pos input))\n        (reset! commands/*show-block-commands true))\n      nil)))\n\n(defn block-on-chosen-handler\n  [_input id q format]\n  (fn [chosen _click?]\n    (state/set-editor-show-block-search! false)\n    (let [uuid-string (str (:block/uuid chosen))]\n\n      ;; block reference\n      (insert-command! id\n                       (util/format \"((%s))\" uuid-string)\n                       format\n                       {:last-pattern (str \"((\" (if @*selected-text \"\" q))\n                        :end-pattern \"))\"\n                        :postfix-fn   (fn [s] (util/replace-first \"))\" s \"\"))\n                        :forward-pos 3})\n\n      ;; Save it so it'll be parsed correctly in the future\n      (set-block-property! (:block/uuid chosen)\n                           :id\n                           uuid-string)\n\n      (when-let [input (gdom/getElement id)]\n        (.focus input)))))\n\n(defn block-non-exist-handler\n  [input]\n  (fn []\n    (state/set-editor-show-block-search! false)\n    (cursor/move-cursor-forward input 2)))\n\n(defn- paste-block-cleanup\n  [block page exclude-properties format content-update-fn]\n  (let [new-content\n        (if content-update-fn\n          (content-update-fn (:block/content block))\n          (:block/content block))\n        new-content\n        (->> new-content\n             (property/remove-property format \"id\")\n             (property/remove-property format \"custom_id\"))]\n    (merge (dissoc block\n                   :block/pre-block?\n                   :block/meta)\n           {:block/page {:db/id (:db/id page)}\n            :block/format format\n            :block/properties (apply dissoc (:block/properties block)\n                                (concat [:id :custom_id :custom-id]\n                                        exclude-properties))\n            :block/content new-content\n            :block/path-refs (->> (cons (:db/id page) (:block/path-refs block))\n                                  (remove nil?))})))\n\n(defn- edit-last-block-after-inserted!\n  [result]\n  (js/setTimeout\n   (fn []\n     (when-let [last-block (last (:blocks result))]\n       (clear-when-saved!)\n       (let [last-block' (db/pull [:block/uuid (:block/uuid last-block)])]\n         (edit-block! last-block' :max (:block/uuid last-block')))))\n   0))\n\n(defn paste-blocks\n  [blocks {:keys [content-update-fn\n                  exclude-properties\n                  target-block\n                  sibling?]\n           :or {exclude-properties []}}]\n  (let [editing-block (when-let [editing-block (state/get-edit-block)]\n                        (some-> (db/pull (:db/id editing-block))\n                                (assoc :block/content (state/get-edit-content))))\n        target-block (or target-block editing-block)\n        block (db/entity (:db/id target-block))\n        page (if (:block/name block) block\n                 (when target-block (:block/page (db/entity (:db/id target-block)))))\n        target-block (or target-block editing-block)\n        sibling? (cond\n                   (some? sibling?)\n                   sibling?\n\n                   (db/has-children? (:block/uuid target-block))\n                   false\n\n                   :else\n                   true)]\n    (outliner-tx/transact!\n      {:outliner-op :insert-blocks}\n      (when editing-block\n        (outliner-core/save-block! editing-block))\n      (when target-block\n        (let [format (or (:block/format target-block) (state/get-preferred-format))\n              blocks' (map (fn [block]\n                             (paste-block-cleanup block page exclude-properties format content-update-fn))\n                        blocks)\n              result (outliner-core/insert-blocks! blocks' target-block {:sibling? sibling?})]\n          (edit-last-block-after-inserted! result))))))\n\n(defn- block-tree->blocks\n  [tree-vec format]\n  (->> (outliner-core/tree-vec-flatten tree-vec)\n       (map (fn [block]\n              (let [content (:content block)\n                    props (into [] (:properties block))\n                    content* (str (if (= :markdown format) \"- \" \"* \")\n                                  (property/insert-properties format content props))\n                    ast (mldoc/->edn content* (gp-mldoc/default-config format))\n                    blocks (block/extract-blocks ast content* true format)\n                    fst-block (first blocks)]\n                (assert fst-block \"fst-block shouldn't be nil\")\n                (assoc fst-block :block/level (:block/level block)))))))\n\n(defn insert-block-tree-after-target\n  \"`tree-vec`: a vector of blocks.\n   Block element: {:content :properties :children [block-1, block-2, ...]}\"\n  [target-block-id sibling? tree-vec format]\n  (let [blocks (block-tree->blocks tree-vec format)\n        target-block (db/pull target-block-id)\n        page-id (:db/id (:block/page target-block))\n        blocks (gp-block/with-parent-and-left page-id blocks)]\n    (paste-blocks\n     blocks\n     {:target-block target-block\n      :sibling? sibling?})))\n\n(defn insert-template!\n  ([element-id db-id]\n   (insert-template! element-id db-id {}))\n  ([element-id db-id {:keys [target] :as opts}]\n   (when-let [db-id (if (integer? db-id)\n                      db-id\n                      (:db/id (db-model/get-template-by-name (name db-id))))]\n     (let [repo (state/get-current-repo)\n           target (or target (state/get-edit-block))\n           block (db/entity db-id)\n           format (:block/format block)\n           block-uuid (:block/uuid block)\n           template-including-parent? (not (false? (:template-including-parent (:block/properties block))))\n           blocks (db/get-block-and-children repo block-uuid)\n           root-block (db/pull db-id)\n           blocks-exclude-root (remove (fn [b] (= (:db/id b) db-id)) blocks)\n           sorted-blocks (tree/sort-blocks blocks-exclude-root root-block)\n           blocks (if template-including-parent?\n                    sorted-blocks\n                    (drop 1 sorted-blocks))]\n       (when element-id\n         (insert-command! element-id \"\" format {}))\n       (let [exclude-properties [:id :template :template-including-parent]\n             content-update-fn (fn [content]\n                                 (->> content\n                                      (property/remove-property format \"template\")\n                                      (property/remove-property format \"template-including-parent\")\n                                      template/resolve-dynamic-template!))\n             page (if (:block/name block) block\n                      (when target (:block/page (db/entity (:db/id target)))))\n             blocks' (map (fn [block]\n                            (paste-block-cleanup block page exclude-properties format content-update-fn))\n                       blocks)\n             sibling? (:sibling? opts)\n             sibling?' (cond\n                         (some? sibling?)\n                         sibling?\n\n                         (db/has-children? (:block/uuid target))\n                         false\n\n                         :else\n                         true)]\n         (outliner-tx/transact!\n           {:outliner-op :insert-blocks}\n           (save-current-block!)\n           (let [result (outliner-core/insert-blocks! blocks'\n                                                      target\n                                                      (assoc opts :sibling? sibling?'))]\n             (edit-last-block-after-inserted! result))))))))\n\n(defn template-on-chosen-handler\n  [element-id]\n  (fn [[_template db-id] _click?]\n    (insert-template! element-id db-id\n                      {:replace-empty-target? true})))\n\n(defn parent-is-page?\n  [{{:block/keys [parent page]} :data :as node}]\n  {:pre [(tree/satisfied-inode? node)]}\n  (= parent page))\n\n(defn outdent-on-enter\n  [node]\n  (when-not (parent-is-page? node)\n    (let [parent-node (tree/-get-parent node)]\n      (outliner-tx/transact!\n        {:outliner-op :move-blocks\n         :real-outliner-op :indent-outdent}\n        (save-current-block!)\n        (outliner-core/move-blocks! [(:data node)] (:data parent-node) true)))))\n\n(defn- last-top-level-child?\n  [{:keys [id]} current-node]\n  (when id\n    (when-let [entity (if (util/uuid-string? (str id))\n                        (db/entity [:block/uuid (uuid id)])\n                        (db/entity [:block/name (util/page-name-sanity-lc id)]))]\n      (= (:block/uuid entity) (tree/-get-parent-id current-node)))))\n\n(defn- insert\n  [insertion]\n  (when-not (auto-complete?)\n    (let [^js input (state/get-input)\n          selected-start (util/get-selection-start input)\n          selected-end (util/get-selection-end input)\n          value (.-value input)\n          s1 (subs value 0 selected-start)\n          s2 (subs value selected-end)]\n      (state/set-edit-content! (state/get-edit-input-id)\n                               (str s1 insertion s2))\n      (cursor/move-cursor-to input (+ selected-start (count insertion))))))\n\n(defn- keydown-new-line\n  []\n  (insert \"\\n\"))\n\n(declare delete-and-update)\n\n(defn- dwim-in-properties\n  [state]\n  (when-not (auto-complete?)\n    (let [{:keys [block]} (get-state)]\n      (when block\n        (let [input (state/get-input)\n              content (gobj/get input \"value\")\n              format (:block/format (:block (get-state)))\n              property-key (:raw-content (thingatpt/property-key-at-point input))\n              org? (= format :org)\n              move-to-pos (if org? 2 3)]\n          (if org?\n            (cond\n              (and property-key (not= property-key \"\"))\n              (case property-key\n                ;; When cursor in \"PROPERTIES\", add :|: in a new line and move cursor to |\n                \"PROPERTIES\"\n                (do (cursor/move-cursor-to-line-end input)\n                    (insert \"\\n:: \")\n                    (cursor/move-cursor-backward input move-to-pos))\n                ;; When cursor in \"END\", new block (respect the previous enter behavior)\n                \"END\"\n                (do\n                  (cursor/move-cursor-to-end input)\n                  (save-current-block!)\n                  (insert-new-block! state))\n                ;; cursor in other positions of :ke|y: or ke|y::, move to line end for inserting value.\n                (if (property/property-key-exist? format content property-key)\n                  (notification/show!\n                   [:p.content\n                    (util/format \"Property key \\\"%s\\\" already exists!\" property-key)]\n                   :error)\n                  (cursor/move-cursor-to-line-end input)))\n\n              ;; when cursor in empty property key\n              (and property-key (= property-key \"\"))\n              (do (delete-and-update\n                   input\n                   (cursor/line-beginning-pos input)\n                   (inc (cursor/line-end-pos input)))\n                  (property/goto-properties-end format input)\n                  (cursor/move-cursor-to-line-end input))\n              :else\n              ;;When cursor in other place of PROPERTIES drawer, add :|: in a new line and move cursor to |\n              (do\n                (insert \"\\n:: \")\n                (cursor/move-cursor-backward input move-to-pos)))\n            (insert \"\\n\")))))))\n\n(defn toggle-list-checkbox\n  [{:block/keys [content] :as block} old-item-content new-item-content]\n  (let [new-content (string/replace-first content old-item-content new-item-content)]\n    (save-block-if-changed! block new-content)))\n\n(defn- dwim-in-list\n  []\n  (when-not (auto-complete?)\n    (let [{:keys [block]} (get-state)]\n      (when block\n        (let [input (state/get-input)]\n          (when-let [item (thingatpt/list-item-at-point input)]\n            (let [{:keys [full-content indent bullet checkbox ordered _]} item\n                  next-bullet (if ordered (str (inc bullet) \".\") bullet)\n                  checkbox (when checkbox \"[ ] \")]\n              (if (and\n                   (= (count full-content)\n                      (+ (if ordered (+ (count (str bullet)) 2) 2) (when checkbox (count checkbox))))\n                   (string/includes? (.-value input) \"\\n\"))\n                (delete-and-update input (cursor/line-beginning-pos input) (cursor/line-end-pos input))\n                (let [start-pos (util/get-selection-start input)\n                      value (.-value input)\n                      before (subs value 0 start-pos)\n                      after (subs value start-pos)\n                      cursor-in-item-content? (and (re-find #\"^(\\d+){1}\\.\" (last (string/split-lines before)))\n                                                   (not (string/blank? (first (string/split-lines after)))))]\n                  (when-not cursor-in-item-content?\n                    (cursor/move-cursor-to-line-end input)\n                    (insert (str \"\\n\" indent next-bullet \" \" checkbox)))\n                  (when ordered\n                    (let [value (.-value input)\n                          start-pos (util/get-selection-start input)\n                          after-lists-str (string/trim (subs value start-pos))\n                          after-lists-str (if cursor-in-item-content?\n                                            (str indent next-bullet \" \" after-lists-str)\n                                            after-lists-str)\n                          lines (string/split-lines after-lists-str)\n                          after-lists-str' (list/re-order-items lines (if cursor-in-item-content? bullet (inc bullet)))\n                          value' (str (subs value 0 start-pos) \"\\n\" after-lists-str')\n                          cursor' (if cursor-in-item-content?\n                                    (inc (count (str (subs value 0 start-pos) indent next-bullet \" \")))\n                                    (+ (:end item) (count next-bullet) 2))]\n                      (state/set-edit-content! (state/get-edit-input-id) value')\n                      (cursor/move-cursor-to input cursor'))))))))))))\n\n(defn toggle-list!\n  []\n  (when-not (auto-complete?)\n    (let [{:keys [block]} (get-state)]\n      (when block\n        (let [input (state/get-input)\n              format (or (db/get-page-format (state/get-current-page)) (state/get-preferred-format))\n              new-unordered-bullet (case format :org \"-\" \"*\")\n              current-pos (cursor/pos input)\n              content (state/get-edit-content)\n              pos (atom current-pos)]\n          (if-let [item (thingatpt/list-item-at-point input)]\n            (let [{:keys [ordered]} item\n                  list-beginning-pos (list/list-beginning-pos input)\n                  list-end-pos (list/list-end-pos input)\n                  list (subs content list-beginning-pos list-end-pos)\n                  items (string/split-lines list)\n                  splitter-reg (if ordered #\"[\\d]*\\.\\s*\" #\"[-\\*]{1}\\s*\")\n                  items-without-bullet (vec (map #(last (string/split % splitter-reg 2)) items))\n                  new-list (string/join \"\\n\"\n                                        (if ordered\n                                          (map #(str new-unordered-bullet \" \" %) items-without-bullet)\n                                          (map-indexed #(str (inc %1) \". \" %2) items-without-bullet)))\n                  index-of-current-item (inc (.indexOf items-without-bullet\n                                                       (last (string/split (:raw-content item) splitter-reg 2))))\n                  numbers-length (->> (map-indexed\n                                       #_:clj-kondo/ignore\n                                       #(str (inc %1) \". \")\n                                       (subvec items-without-bullet 0 index-of-current-item))\n                                      string/join\n                                      count)\n                  pos-diff (- numbers-length (* 2 index-of-current-item))]\n              (delete-and-update input list-beginning-pos list-end-pos)\n              (insert new-list)\n              (reset! pos (if ordered\n                            (- current-pos pos-diff)\n                            (+ current-pos pos-diff))))\n            (let [prev-item (list/get-prev-item input)]\n              (cursor/move-cursor-down input)\n              (cursor/move-cursor-to-line-beginning input)\n              (if prev-item\n                (let [{:keys [bullet ordered]} prev-item\n                      current-bullet (if ordered (str (inc bullet) \".\") bullet)]\n                  (insert (str current-bullet \" \"))\n                  (reset! pos (+ current-pos (count current-bullet) 1)))\n                (do (insert (str new-unordered-bullet \" \"))\n                    (reset! pos (+ current-pos 2))))))\n          (cursor/move-cursor-to input @pos))))))\n\n(defn toggle-page-reference-embed\n  [parent-id]\n  (let [{:keys [block]} (get-state)]\n    (when block\n      (let [input (state/get-input)\n            new-pos (cursor/get-caret-pos input)\n            page-ref-fn (fn [bounds backward-pos]\n                          (commands/simple-insert!\n                           parent-id bounds\n                           {:backward-pos backward-pos\n                            :check-fn (fn [_ _ _]\n                                        (reset! commands/*slash-caret-pos new-pos)\n                                        (commands/handle-step [:editor/search-page]))}))]\n        (state/set-editor-show-page-search! false)\n        (let [selection (get-selection-and-format)\n              {:keys [selection-start selection-end selection]} selection]\n          (if selection\n            (do (delete-and-update input selection-start selection-end)\n                (insert (util/format \"[[%s]]\" selection)))\n            (if-let [embed-ref (thingatpt/embed-macro-at-point input)]\n              (let [{:keys [raw-content start end]} embed-ref]\n                (delete-and-update input start end)\n                (if (= 5 (count raw-content))\n                  (page-ref-fn \"[[]]\" 2)\n                  (insert raw-content)))\n              (if-let [page-ref (thingatpt/page-ref-at-point input)]\n                (let [{:keys [start end full-content raw-content]} page-ref]\n                  (delete-and-update input start end)\n                  (if (= raw-content \"\")\n                    (page-ref-fn \"{{embed [[]]}}\" 4)\n                    (insert (util/format \"{{embed %s}}\" full-content))))\n                (page-ref-fn \"[[]]\" 2)))))))))\n\n(defn toggle-block-reference-embed\n  [parent-id]\n  (let [{:keys [block]} (get-state)]\n    (when block\n      (let [input (state/get-input)\n            new-pos (cursor/get-caret-pos input)\n            block-ref-fn (fn [bounds backward-pos]\n                           (commands/simple-insert!\n                            parent-id bounds\n                            {:backward-pos backward-pos\n                             :check-fn     (fn [_ _ _]\n                                             (reset! commands/*slash-caret-pos new-pos)\n                                             (commands/handle-step [:editor/search-block]))}))]\n        (state/set-editor-show-block-search! false)\n        (if-let [embed-ref (thingatpt/embed-macro-at-point input)]\n          (let [{:keys [raw-content start end]} embed-ref]\n            (delete-and-update input start end)\n            (if (= 5 (count raw-content))\n              (block-ref-fn \"(())\" 2)\n              (insert raw-content)))\n          (if-let [page-ref (thingatpt/block-ref-at-point input)]\n            (let [{:keys [start end full-content raw-content]} page-ref]\n              (delete-and-update input start end)\n              (if (= raw-content \"\")\n                (block-ref-fn \"{{embed (())}}\" 4)\n                (insert (util/format \"{{embed %s}}\" full-content))))\n            (block-ref-fn \"(())\" 2)))))))\n\n(defn- keydown-new-block\n  [state]\n  (when-not (auto-complete?)\n    (let [{:keys [block config]} (get-state)]\n      (when block\n        (let [input (state/get-input)\n              content (gobj/get input \"value\")\n              pos (cursor/pos input)\n              current-node (outliner-core/block block)\n              has-right? (-> (tree/-get-right current-node)\n                             (tree/satisfied-inode?))\n              thing-at-point ;intern is not supported in cljs, need a more elegant solution\n              (or (when (thingatpt/get-setting :admonition&src?)\n                    (thingatpt/admonition&src-at-point input))\n                  (when (thingatpt/get-setting :markup?)\n                    (thingatpt/markup-at-point input))\n                  (when (thingatpt/get-setting :block-ref?)\n                    (thingatpt/block-ref-at-point input))\n                  (when (thingatpt/get-setting :page-ref?)\n                    (thingatpt/page-ref-at-point input))\n                  (when (thingatpt/get-setting :properties?)\n                    (thingatpt/properties-at-point input))\n                  (when (thingatpt/get-setting :list?)\n                    (and (not (cursor/beginning-of-line? input))\n                         (thingatpt/list-item-at-point input))))]\n          (cond\n            thing-at-point\n            (case (:type thing-at-point)\n              \"markup\" (let [right-bound (:bounds thing-at-point)]\n                         (cursor/move-cursor-to\n                          input\n                          (+ (string/index-of content right-bound pos)\n                             (count right-bound))))\n              \"admonition-block\" (keydown-new-line)\n              \"source-block\" (do\n                               (keydown-new-line)\n                               (case (:action thing-at-point)\n                                 :into-code-editor\n                                 (state/into-code-editor-mode!)\n                                 nil))\n              \"block-ref\" (open-block-in-sidebar! (:link thing-at-point))\n              \"page-ref\" (when-not (string/blank? (:link thing-at-point))\n                           (let [page (:link thing-at-point)\n                                 page-name (db-model/get-redirect-page-name page)]\n                             (insert-first-page-block-if-not-exists! page-name)))\n              \"list-item\" (dwim-in-list)\n              \"properties-drawer\" (dwim-in-properties state))\n\n            (and\n             (string/blank? content)\n             (not has-right?)\n             (not (last-top-level-child? config current-node)))\n            (outdent-on-enter current-node)\n\n            :else\n            (profile\n             \"Insert block\"\n             (do (save-current-block!)\n                 (insert-new-block! state)))))))))\n\n(defn keydown-new-block-handler [state e]\n  (if (state/doc-mode-enter-for-new-line?)\n    (keydown-new-line)\n    (do\n      (.preventDefault e)\n      (keydown-new-block state))))\n\n(defn keydown-new-line-handler [state e]\n  (if (state/doc-mode-enter-for-new-line?)\n    (keydown-new-block state)\n    (do\n      (.preventDefault e)\n      (keydown-new-line))))\n\n(defn- select-first-last\n  \"Select first or last block in viewpoint\"\n  [direction]\n  (let [f (case direction :up last :down first)\n        block (->> (util/get-blocks-noncollapse)\n                   (f))]\n    (when block\n      (.scrollIntoView block #js {:behavior \"smooth\" :block \"center\"})\n      (state/exit-editing-and-set-selected-blocks! [block]))))\n\n(defn- select-up-down [direction]\n  (let [selected (first (state/get-selection-blocks))\n        f (case direction\n            :up util/get-prev-block-non-collapsed\n            :down util/get-next-block-non-collapsed)\n        sibling-block (f selected)]\n    (when (and sibling-block (dom/attr sibling-block \"blockid\"))\n      (.scrollIntoView sibling-block #js {:behavior \"smooth\" :block \"center\"})\n      (state/exit-editing-and-set-selected-blocks! [sibling-block]))))\n\n(defn- move-cross-boundrary-up-down\n  [direction]\n  (let [input (state/get-input)\n        line-pos (util/get-first-or-last-line-pos input)\n        repo (state/get-current-repo)\n        f (case direction\n            :up util/get-prev-block-non-collapsed\n            :down util/get-next-block-non-collapsed)\n        sibling-block (f (gdom/getElement (state/get-editing-block-dom-id)))\n        {:block/keys [uuid content format]} (state/get-edit-block)]\n    (when sibling-block\n      (when-let [sibling-block-id (dom/attr sibling-block \"blockid\")]\n        (let [value (state/get-edit-content)]\n          (when (not= (clean-content! format content)\n                      (string/trim value))\n            (save-block! repo uuid value)))\n\n        (let [new-id (string/replace (gobj/get sibling-block \"id\") \"ls-block\" \"edit-block\")\n              new-uuid (cljs.core/uuid sibling-block-id)\n              block (db/pull repo '[*] [:block/uuid new-uuid])]\n          (edit-block! block\n                       [direction line-pos]\n                       new-id))))))\n\n(defn keydown-up-down-handler\n  [direction]\n  (let [input (state/get-input)\n        selected-start (util/get-selection-start input)\n        selected-end (util/get-selection-end input)\n        up? (= direction :up)\n        down? (= direction :down)]\n    (cond\n      (not= selected-start selected-end)\n      (if up?\n        (cursor/move-cursor-to input selected-start)\n        (cursor/move-cursor-to input selected-end))\n\n      (or (and up? (cursor/textarea-cursor-first-row? input))\n          (and down? (cursor/textarea-cursor-last-row? input)))\n      (move-cross-boundrary-up-down direction)\n\n      :else\n      (if up?\n        (cursor/move-cursor-up input)\n        (cursor/move-cursor-down input)))))\n\n(defn- move-to-block-when-cross-boundrary\n  [direction]\n  (let [up? (= :left direction)\n        pos (if up? :max 0)\n        {:block/keys [format uuid] :as block} (state/get-edit-block)\n        id (state/get-edit-input-id)\n        repo (state/get-current-repo)\n        f (if up? util/get-prev-block-non-collapsed util/get-next-block-non-collapsed)\n        sibling-block (f (gdom/getElement (state/get-editing-block-dom-id)))]\n    (when sibling-block\n      (when-let [sibling-block-id (dom/attr sibling-block \"blockid\")]\n        (let [content (:block/content block)\n              value (state/get-edit-content)]\n          (when (not= (clean-content! format content)\n                      (string/trim value))\n            (save-block! repo uuid value)))\n        (let [block (db/pull repo '[*] [:block/uuid (cljs.core/uuid sibling-block-id)])]\n          (edit-block! block pos id))))))\n\n(defn keydown-arrow-handler\n  [direction]\n  (let [input (state/get-input)\n        element js/document.activeElement\n        selected-start (util/get-selection-start input)\n        selected-end (util/get-selection-end input)\n        left? (= direction :left)\n        right? (= direction :right)]\n    (when (= input element)\n      (cond\n        (not= selected-start selected-end)\n        (if left?\n          (cursor/move-cursor-to input selected-start)\n          (cursor/move-cursor-to input selected-end))\n\n        (or (and left? (cursor/start? input))\n            (and right? (cursor/end? input)))\n        (move-to-block-when-cross-boundrary direction)\n\n        :else\n        (if left?\n          (cursor/move-cursor-backward input)\n          (cursor/move-cursor-forward input))))))\n\n(defn- delete-and-update [^js input start end]\n  (util/safe-set-range-text! input \"\" start end)\n  (state/set-edit-content! (state/get-edit-input-id) (.-value input)))\n\n(defn- delete-concat [current-block]\n  (let [input-id (state/get-edit-input-id)\n        ^js input (state/get-input)\n        current-pos (cursor/pos input)\n        value (gobj/get input \"value\")\n        right (outliner-core/get-right-node (outliner-core/block current-block))\n        current-block-has-children? (db/has-children? (:block/uuid current-block))\n        collapsed? (util/collapsed? current-block)\n        first-child (:data (tree/-get-down (outliner-core/block current-block)))\n        next-block (if (or collapsed? (not current-block-has-children?))\n                     (:data right)\n                     first-child)]\n    (cond\n      (and collapsed? right (db/has-children? (tree/-get-id right)))\n      nil\n\n      (and (not collapsed?) first-child (db/has-children? (:block/uuid first-child)))\n      nil\n\n      :else\n      (do\n        (delete-block-aux! next-block false)\n        (state/set-edit-content! input-id (str value \"\" (:block/content next-block)))\n        (cursor/move-cursor-to input current-pos)))))\n\n(defn keydown-delete-handler\n  [_e]\n  (let [^js input (state/get-input)\n        current-pos (cursor/pos input)\n        value (gobj/get input \"value\")\n        end? (= current-pos (count value))\n        current-block (state/get-edit-block)\n        selected-start (util/get-selection-start input)\n        selected-end (util/get-selection-end input)]\n    (when current-block\n      (cond\n        (not= selected-start selected-end)\n        (delete-and-update input selected-start selected-end)\n\n        (and end? current-block)\n        (delete-concat current-block)\n\n        :else\n        (delete-and-update input current-pos (inc current-pos))))))\n\n(defn keydown-backspace-handler\n  [cut? e]\n  (let [^js input (state/get-input)\n        id (state/get-edit-input-id)\n        current-pos (cursor/pos input)\n        value (gobj/get input \"value\")\n        deleted (and (> current-pos 0)\n                     (util/nth-safe value (dec current-pos)))\n        selected-start (util/get-selection-start input)\n        selected-end (util/get-selection-end input)\n        block (state/get-edit-block)\n        repo (state/get-current-repo)\n        top-block? (= (:block/left block) (:block/page block))\n        root-block? (= (:block/container block) (str (:block/uuid block)))]\n    (mark-last-input-time! repo)\n    (cond\n      (not= selected-start selected-end)\n      (do\n        (util/stop e)\n        (when cut?\n          (js/document.execCommand \"copy\"))\n        (delete-and-update input selected-start selected-end))\n\n      (zero? current-pos)\n      (do\n        (util/stop e)\n        (when (and (if top-block? (string/blank? value) true)\n                   (not root-block?))\n          (delete-block! repo false)))\n\n      (and (> current-pos 1)\n           (= (util/nth-safe value (dec current-pos)) (state/get-editor-command-trigger)))\n      (do\n        (util/stop e)\n        (reset! *slash-caret-pos nil)\n        (reset! *show-commands false)\n        (delete-and-update input (dec current-pos) current-pos))\n\n      (and (> current-pos 1)\n           (= (util/nth-safe value (dec current-pos)) commands/angle-bracket))\n      (do\n        (util/stop e)\n        (reset! *angle-bracket-caret-pos nil)\n        (reset! *show-block-commands false)\n        (delete-and-update input (dec current-pos) current-pos))\n\n      ;; pair\n      (and\n       deleted\n       (contains?\n        (set (keys delete-map))\n        deleted)\n       (>= (count value) (inc current-pos))\n       (= (util/nth-safe value current-pos)\n          (get delete-map deleted)))\n\n      (do\n        (util/stop e)\n        (commands/delete-pair! id)\n        (cond\n          (and (= deleted \"[\") (state/get-editor-show-page-search?))\n          (state/set-editor-show-page-search! false)\n\n          (and (= deleted \"(\") (state/get-editor-show-block-search?))\n          (state/set-editor-show-block-search! false)\n\n          :else\n          nil))\n\n      ;; deleting hashtag\n      (and (= deleted \"#\") (state/get-editor-show-page-search-hashtag?))\n      (do\n        (state/set-editor-show-page-search-hashtag! false)\n        (delete-and-update input (dec current-pos) current-pos))\n\n      ;; just delete\n      :else\n      (do\n        (util/stop e)\n        (delete-and-update\n         input (util/safe-dec-current-pos-from-end (.-value input) current-pos) current-pos)))))\n\n(defn indent-outdent\n  [indent?]\n  (state/set-editor-op! :indent-outdent)\n  (let [pos (some-> (state/get-input) cursor/pos)\n        {:keys [block]} (get-state)]\n    (when block\n      (state/set-editor-last-pos! pos)\n      (outliner-tx/transact!\n        {:outliner-op :move-blocks\n         :real-outliner-op :indent-outdent}\n        (save-current-block!)\n        (outliner-core/indent-outdent-blocks! [block] indent?)))\n    (state/set-editor-op! :nil)))\n\n(defn keydown-tab-handler\n  [direction]\n  (fn [e]\n    (cond\n      (state/editing?)\n      (when (and (not (state/get-editor-show-input))\n                 (not (state/get-editor-show-date-picker?))\n                 (not (state/get-editor-show-template-search?)))\n        (util/stop e)\n        (indent-outdent (not (= :left direction))))\n\n      (state/selection?)\n      (do\n        (util/stop e)\n        (on-tab direction)))\n    nil))\n\n(defn keydown-not-matched-handler\n  [format]\n  (fn [e _key-code]\n    (let [input-id (state/get-edit-input-id)\n          input (state/get-input)\n          key (gobj/get e \"key\")\n          value (gobj/get input \"value\")\n          ctrlKey (gobj/get e \"ctrlKey\")\n          metaKey (gobj/get e \"metaKey\")\n          pos (cursor/pos input)\n          hashtag? (or (surround-by? input \"#\" \" \")\n                       (surround-by? input \"#\" :end)\n                       (= key \"#\"))]\n      (cond\n        (and (util/event-is-composing? e true) ;; #3218\n             (not hashtag?) ;; #3283 @Rime\n             (not (state/get-editor-show-page-search-hashtag?))) ;; #3283 @MacOS pinyin\n        nil\n\n        (or ctrlKey metaKey)\n        nil\n\n        ;; FIXME: On mobile, a backspace click to call keydown-backspace-handler\n        ;; does not work sometimes in an empty block, hence the empty block\n        ;; can't be deleted. Need to figure out why and find a better solution.\n        (and (mobile-util/is-native-platform?)\n             (= key \"Backspace\")\n             (= value \"\"))\n        (do\n          (util/stop e)\n          (delete-block! (state/get-current-repo) false))\n\n        (and (= key \"#\")\n             (and\n              (> pos 0)\n              (= \"#\" (util/nth-safe value (dec pos)))))\n        (state/set-editor-show-page-search-hashtag! false)\n\n        (and\n         (contains? (set/difference (set (keys reversed-autopair-map))\n                                    #{\"`\"})\n                    key)\n         (= (get-current-input-char input) key))\n        (do\n          (util/stop e)\n          (cursor/move-cursor-forward input))\n\n        (and (autopair-when-selected key) (string/blank? (util/get-selected-text)))\n        nil\n\n        (and (not (string/blank? (util/get-selected-text)))\n             (contains? keycode/left-square-brackets-keys key))\n        (do\n          (autopair input-id \"[\" format nil)\n          (util/stop e))\n\n        (and (not (string/blank? (util/get-selected-text)))\n             (contains? keycode/left-paren-keys key))\n        (do\n          (util/stop e)\n          (autopair input-id \"(\" format nil))\n\n        (contains? (set (keys autopair-map)) key)\n        (do\n          (util/stop e)\n          (autopair input-id key format nil))\n\n        hashtag?\n        (do\n          (commands/handle-step [:editor/search-page-hashtag])\n          (if (= key \"#\")\n            (state/set-editor-last-pos! (inc (cursor/pos input))) ;; In keydown handler, the `#` is not inserted yet.\n            (state/set-editor-last-pos! (cursor/pos input)))\n          (reset! commands/*slash-caret-pos (cursor/get-caret-pos input)))\n\n        (let [sym \"$\"]\n          (and (= key sym)\n               (>= (count value) 1)\n               (> pos 0)\n               (= (nth value (dec pos)) sym)\n               (if (> (count value) pos)\n                 (not= (nth value pos) sym)\n                 true)))\n        (commands/simple-insert! input-id \"$$\" {:backward-pos 2})\n\n        (let [sym \"^\"]\n          (and (= key sym)\n               (>= (count value) 1)\n               (> pos 0)\n               (= (nth value (dec pos)) sym)\n               (if (> (count value) pos)\n                 (not= (nth value pos) sym)\n                 true)))\n        (commands/simple-insert! input-id \"^^\" {:backward-pos 2})\n\n        :else\n        nil))))\n\n(defn ^:large-vars/cleanup-todo keyup-handler\n  [_state input input-id search-timeout]\n  (fn [e key-code]\n    (when-not (util/event-is-composing? e)\n      (let [k (gobj/get e \"key\")\n            code (gobj/getValueByKeys e \"event_\" \"code\")\n            format (:format (get-state))\n            current-pos (cursor/pos input)\n            value (gobj/get input \"value\")\n            c (util/nth-safe value (dec current-pos))\n            last-key-code (state/get-last-key-code)\n            blank-selected? (string/blank? (util/get-selected-text))\n            is-processed? (util/event-is-composing? e true) ;; #3440\n            non-enter-processed? (and is-processed? ;; #3251\n                                      (not= code keycode/enter-code))] ;; #3459\n        (when-not (or (state/get-editor-show-input) non-enter-processed?)\n          (cond\n            (and (not (contains? #{\"ArrowDown\" \"ArrowLeft\" \"ArrowRight\" \"ArrowUp\"} k))\n                 (not (:editor/show-page-search? @state/state))\n                 (not (:editor/show-page-search-hashtag? @state/state))\n                 (wrapped-by? input \"[[\" \"]]\"))\n            (let [orig-pos (cursor/get-caret-pos input)\n                  value (gobj/get input \"value\")\n                  square-pos (string/last-index-of (subs value 0 (:pos orig-pos)) \"[[\")\n                  pos (+ square-pos 2)\n                  _ (state/set-editor-last-pos! pos)\n                  pos (assoc orig-pos :pos pos)\n                  command-step (if (= \\# (util/nth-safe value (dec square-pos)))\n                                 :editor/search-page-hashtag\n                                 :editor/search-page)]\n              (commands/handle-step [command-step])\n              (reset! commands/*slash-caret-pos pos))\n\n            (and blank-selected?\n                 (contains? keycode/left-square-brackets-keys k)\n                 (= (:key last-key-code) k)\n                 (> current-pos 0)\n                 (not (wrapped-by? input \"[[\" \"]]\")))\n            (do\n              (commands/handle-step [:editor/input \"[[]]\" {:backward-truncate-number 2\n                                                           :backward-pos 2}])\n              (commands/handle-step [:editor/search-page])\n              (reset! commands/*slash-caret-pos (cursor/get-caret-pos input)))\n\n            (and blank-selected?\n                 (contains? keycode/left-paren-keys k)\n                 (= (:key last-key-code) k)\n                 (> current-pos 0)\n                 (not (wrapped-by? input \"((\" \"))\")))\n            (do\n              (commands/handle-step [:editor/input \"(())\" {:backward-truncate-number 2\n                                                           :backward-pos 2}])\n              (commands/handle-step [:editor/search-block :reference])\n              (reset! commands/*slash-caret-pos (cursor/get-caret-pos input)))\n\n            (and (= \"\u3008\" c)\n                 (= \"\u300a\" (util/nth-safe value (dec (dec current-pos))))\n                 (> current-pos 0))\n            (do\n              (commands/handle-step [:editor/input commands/angle-bracket {:last-pattern \"\u300a\u3008\"\n                                                                           :backward-pos 0}])\n              (reset! commands/*angle-bracket-caret-pos (cursor/get-caret-pos input))\n              (reset! commands/*show-block-commands true))\n\n            (and (= c \" \")\n                 (or (= (util/nth-safe value (dec (dec current-pos))) \"#\")\n                     (not (state/get-editor-show-page-search?))\n                     (and (state/get-editor-show-page-search?)\n                          (not= (util/nth-safe value current-pos) \"]\"))))\n            (state/set-editor-show-page-search-hashtag! false)\n\n            (and @*show-commands (not= k (state/get-editor-command-trigger)))\n            (let [matched-commands (get-matched-commands input)]\n              (if (seq matched-commands)\n                (do\n                  (reset! *show-commands true)\n                  (reset! commands/*matched-commands matched-commands))\n                (reset! *show-commands false)))\n\n            (and @*show-block-commands (not= key-code 188)) ; not <\n            (let [matched-block-commands (get-matched-block-commands input)]\n              (if (seq matched-block-commands)\n                (cond\n                  (= key-code 9)       ;tab\n                  (when @*show-block-commands\n                    (util/stop e)\n                    (insert-command! input-id\n                                     (last (first matched-block-commands))\n                                     format\n                                     {:last-pattern commands/angle-bracket}))\n\n                  :else\n                  (reset! commands/*matched-block-commands matched-block-commands))\n                (reset! *show-block-commands false)))\n\n            (nil? @search-timeout)\n            (close-autocomplete-if-outside input)\n\n            :else\n            nil))\n        (when-not (or (= k \"Shift\") is-processed?)\n          (state/set-last-key-code! {:key-code key-code\n                                     :code code\n                                     :key k\n                                     :shift? (.-shiftKey e)}))))))\n\n(defn editor-on-click!\n  [id]\n  (fn [_e]\n    (let [input (gdom/getElement id)]\n      (close-autocomplete-if-outside input))))\n\n(defonce mobile-toolbar-height 40)\n(defn editor-on-height-change!\n  [id]\n  (fn [box-height ^js row-height]\n    (let [row-height (:rowHeight (js->clj row-height :keywordize-keys true))\n          input (gdom/getElement id)\n          caret (cursor/get-caret-pos input)\n          cursor-bottom (if caret (+ row-height (:top caret)) box-height)\n          box-top (gobj/get (.getBoundingClientRect input) \"top\")\n          cursor-y (+ cursor-bottom box-top)\n          vw-height (.-height js/window.visualViewport)]\n      (when (<  vw-height (+ cursor-y mobile-toolbar-height))\n        (let [main-node (gdom/getElement \"main-content-container\")\n              scroll-top (.-scrollTop main-node)]\n          (set! (.-scrollTop main-node) (+ scroll-top row-height)))))))\n\n(defn editor-on-change!\n  [block id search-timeout]\n  (fn [e]\n    (if (state/sub :editor/show-block-search?)\n      (let [timeout 300]\n        (when @search-timeout\n          (js/clearTimeout @search-timeout))\n        (reset! search-timeout\n                (js/setTimeout\n                 #(edit-box-on-change! e block id)\n                 timeout)))\n      (edit-box-on-change! e block id))))\n\n(defn- paste-text-parseable\n  [format text]\n  (when-let [editing-block (state/get-edit-block)]\n    (let [page-id (:db/id (:block/page editing-block))\n          blocks (block/extract-blocks\n                  (mldoc/->edn text (gp-mldoc/default-config format)) text true format)\n          blocks' (gp-block/with-parent-and-left page-id blocks)]\n      (paste-blocks blocks' {}))))\n\n(defn- paste-segmented-text\n  [format text]\n  (let [paragraphs (string/split text #\"(?:\\r?\\n){2,}\")\n        updated-paragraphs\n        (string/join \"\\n\"\n                     (mapv (fn [p] (->> (string/trim p)\n                                        ((fn [p]\n                                           (if (util/safe-re-find (if (= format :org)\n                                                                    #\"\\s*\\*+\\s+\"\n                                                                    #\"\\s*-\\s+\") p)\n                                             p\n                                             (str (if (= format :org) \"* \" \"- \") p))))))\n                           paragraphs))]\n    (paste-text-parseable format updated-paragraphs)))\n\n(defn- get-all-blocks-by-ids\n  [repo ids]\n  (loop [ids ids\n         result []]\n    (if (seq ids)\n      (let [blocks (db/get-block-and-children repo (first ids))\n            result (vec (concat result blocks))]\n        (recur (remove (set (map :block/uuid result)) (rest ids)) result))\n      result)))\n\n(defn- paste-copied-blocks-or-text\n  [text e]\n  (let [copied-blocks (state/get-copied-blocks)\n        copied-block-ids (:copy/block-ids copied-blocks)\n        copied-graph (:copy/graph copied-blocks)\n        input (state/get-input)\n        *stop-event? (atom true)]\n    (cond\n      ;; Internal blocks by either copy or cut blocks\n      (and\n       (= copied-graph (state/get-current-repo))\n       (or (seq copied-block-ids)\n           (seq (:copy/full-blocks copied-blocks)))\n       text\n       ;; not copied from the external clipboard\n       (= (string/replace (string/trim text) \"\\r\" \"\")\n          (string/replace (string/trim (or (:copy/content copied-blocks) \"\")) \"\\r\" \"\")))\n      (let [blocks (or\n                    (:copy/full-blocks copied-blocks)\n                    (get-all-blocks-by-ids (state/get-current-repo) copied-block-ids))]\n        (when (seq blocks)\n          (state/set-copied-full-blocks! blocks)\n          (paste-blocks blocks {})))\n\n      (and (gp-util/url? text)\n           (not (string/blank? (util/get-selected-text))))\n      (html-link-format! text)\n\n      (and (gp-util/url? text)\n           (or (string/includes? text \"youtube.com\")\n               (string/includes? text \"youtu.be\"))\n           (mobile-util/is-native-platform?))\n      (commands/simple-insert! (state/get-edit-input-id) (util/format \"{{youtube %s}}\" text) nil)\n\n      (and (gp-util/url? text)\n           (string/includes? text \"twitter.com\")\n           (mobile-util/is-native-platform?))\n      (commands/simple-insert! (state/get-edit-input-id) (util/format \"{{twitter %s}}\" text) nil)\n\n      (and (text/block-ref? text)\n           (wrapped-by? input \"((\" \"))\"))\n      (commands/simple-insert! (state/get-edit-input-id) (text/get-block-ref text) nil)\n\n      :else\n      ;; from external\n      (let [format (or (db/get-page-format (state/get-current-page)) :markdown)]\n        (match [format\n                (nil? (util/safe-re-find #\"(?m)^\\s*(?:[-+*]|#+)\\s+\" text))\n                (nil? (util/safe-re-find #\"(?m)^\\s*\\*+\\s+\" text))\n                (nil? (util/safe-re-find #\"(?:\\r?\\n){2,}\" text))]\n          [:markdown false _ _]\n          (paste-text-parseable format text)\n\n          [:org _ false _]\n          (paste-text-parseable format text)\n\n          [:markdown true _ false]\n          (paste-segmented-text format (string/trim text))\n\n          [:markdown true _ true]\n          (reset! *stop-event? false)\n\n          [:org _ true false]\n          (paste-segmented-text format (string/trim text))\n\n          [:org _ true true]\n          (reset! *stop-event? false))))\n    (when @*stop-event?\n      (util/stop e))))\n\n(defn paste-text-in-one-block-at-point\n  []\n  (utils/getClipText\n   (fn [clipboard-data]\n     (when-let [_ (state/get-input)]\n       (state/append-current-edit-content! clipboard-data)))\n   (fn [error]\n     (js/console.error error))))\n\n(defn editor-on-paste!\n  [id]\n  (fn [e]\n    (state/set-state! :editor/on-paste? true)\n    (let [text (.getData (gobj/get e \"clipboardData\") \"text\")\n          input (state/get-input)]\n      (if-not (string/blank? text)\n        (if (thingatpt/org-admonition&src-at-point input)\n          (when-not (mobile-util/native-ios?)\n            (util/stop e)\n            (paste-text-in-one-block-at-point))\n          (paste-copied-blocks-or-text text e))\n        (let [_handled\n              (let [clipboard-data (gobj/get e \"clipboardData\")\n                    files (.-files clipboard-data)]\n                (when-let [file (first files)]\n                  (when-let [block (state/get-edit-block)]\n                    (upload-asset id #js[file] (:block/format block) *asset-uploading? true))))]\n          (util/stop e))))))\n\n(defn- cut-blocks-and-clear-selections!\n  [copy?]\n  (cut-selection-blocks copy?)\n  (clear-selection!))\n\n(defn shortcut-copy-selection\n  [_e]\n  (copy-selection-blocks))\n\n(defn shortcut-cut-selection\n  [e]\n  (util/stop e)\n  (cut-blocks-and-clear-selections! true))\n\n(defn shortcut-delete-selection\n  [e]\n  (util/stop e)\n  (cut-blocks-and-clear-selections! false))\n\n;; credits to @pengx17\n(defn- copy-current-block-ref\n  []\n  (when-let [current-block (state/get-edit-block)]\n    (when-let [block-id (:block/uuid current-block)]\n      (copy-block-ref! block-id #(str \"((\" % \"))\"))\n      (notification/show!\n       [:div\n        [:span.mb-1.5 \"Block ref copied!\"]\n        [:div [:code.whitespace-nowrap (str \"((\" block-id \"))\")]]]\n       :success true\n       ;; use uuid to make sure there is only one toast a time\n       (str \"copied-block-ref:\" block-id)))))\n\n(defn shortcut-copy\n  \"shortcut copy action:\n  * when in selection mode, copy selected blocks\n  * when in edit mode but no text selected, copy current block ref\n  * when in edit mode with text selected, copy selected text as normal\"\n  [e]\n  (when-not (auto-complete?)\n    (cond\n      (state/selection?)\n      (shortcut-copy-selection e)\n\n      (state/editing?)\n      (let [input (state/get-input)\n            selected-start (util/get-selection-start input)\n            selected-end (util/get-selection-end input)]\n        (if (= selected-start selected-end)\n          (copy-current-block-ref)\n          (js/document.execCommand \"copy\")))\n\n      :else\n      (js/document.execCommand \"copy\"))))\n\n(defn shortcut-cut\n  \"shortcut cut action:\n  * when in selection mode, cut selected blocks\n  * when in edit mode with text selected, cut selected text\n  * otherwise same as delete shortcut\"\n  [e]\n  (cond\n    (state/selection?)\n    (shortcut-cut-selection e)\n\n    (state/editing?)\n    (keydown-backspace-handler true e)))\n\n(defn delete-selection\n  [e]\n  (when (state/selection?)\n    (shortcut-delete-selection e)))\n\n(defn editor-delete\n  [_state e]\n  (when (state/editing?)\n    (util/stop e)\n    (keydown-delete-handler e)))\n\n(defn editor-backspace\n  [_state e]\n  (when (state/editing?)\n    (keydown-backspace-handler false e)))\n\n(defn shortcut-up-down [direction]\n  (fn [e]\n    (when-not (auto-complete?)\n      (util/stop e)\n      (cond\n        (state/editing?)\n        (keydown-up-down-handler direction)\n\n        (and (state/selection?) (== 1 (count (state/get-selection-blocks))))\n        (select-up-down direction)\n\n        :else\n        (select-first-last direction)))))\n\n(defn shortcut-select-up-down [direction]\n  (fn [e]\n    (util/stop e)\n    (if (state/editing?)\n      (let [input (state/get-input)\n            selected-start (util/get-selection-start input)\n            selected-end (util/get-selection-end input)\n            [anchor cursor] (case (util/get-selection-direction input)\n                              \"backward\" [selected-end selected-start]\n                              [selected-start selected-end])\n            cursor-rect (cursor/get-caret-pos input cursor)]\n        (if\n          ;; if the move is to cross block boundary, select the whole block\n         (or (and (= direction :up) (cursor/textarea-cursor-rect-first-row? cursor-rect))\n             (and (= direction :down) (cursor/textarea-cursor-rect-last-row? cursor-rect)))\n          (select-block-up-down direction)\n          ;; simulate text selection\n          (cursor/select-up-down input direction anchor cursor-rect)))\n      (select-block-up-down direction))))\n\n(defn open-selected-block!\n  [direction e]\n  (when-let [block-id (some-> (state/get-selection-blocks)\n                              first\n                              (dom/attr \"blockid\")\n                              medley/uuid)]\n    (util/stop e)\n    (let [block    {:block/uuid block-id}\n          block-id (-> (state/get-selection-blocks)\n                       first\n                       (gobj/get \"id\")\n                       (string/replace \"ls-block\" \"edit-block\"))\n          left?    (= direction :left)]\n      (edit-block! block\n                   (if left? 0 :max)\n                   block-id))))\n\n(defn shortcut-left-right [direction]\n  (fn [e]\n    (when-not (auto-complete?)\n      (cond\n        (state/editing?)\n        (do\n          (util/stop e)\n          (keydown-arrow-handler direction))\n\n        (and (state/selection?) (== 1 (count (state/get-selection-blocks))))\n        (do\n          (util/stop e)\n          (open-selected-block! direction e))\n\n        :else\n        nil))))\n\n(defn clear-block-content! []\n  (save-current-block! {:force? true})\n  (state/set-edit-content! (state/get-edit-input-id) \"\"))\n\n(defn kill-line-before! []\n  (save-current-block! {:force? true})\n  (util/kill-line-before! (state/get-input)))\n\n(defn kill-line-after! []\n  (save-current-block! {:force? true})\n  (util/kill-line-after! (state/get-input)))\n\n(defn beginning-of-block []\n  (cursor/move-cursor-to (state/get-input) 0))\n\n(defn end-of-block []\n  (cursor/move-cursor-to-end (state/get-input)))\n\n(defn cursor-forward-word []\n  (cursor/move-cursor-forward-by-word (state/get-input)))\n\n(defn cursor-backward-word []\n  (cursor/move-cursor-backward-by-word (state/get-input)))\n\n(defn backward-kill-word []\n  (let [input (state/get-input)]\n    (save-current-block! {:force? true})\n    (util/backward-kill-word input)\n    (state/set-edit-content! (state/get-edit-input-id) (.-value input))))\n\n(defn forward-kill-word []\n  (let [input (state/get-input)]\n    (save-current-block! {:force? true})\n    (util/forward-kill-word input)\n    (state/set-edit-content! (state/get-edit-input-id) (.-value input))))\n\n(defn block-with-title?\n  [format content semantic?]\n  (and (string/includes? content \"\\n\")\n       (if semantic?\n         (let [ast (mldoc/->edn content (gp-mldoc/default-config format))\n               first-elem-type (first (ffirst ast))]\n           (mldoc/block-with-title? first-elem-type))\n         true)))\n\n(defn collapsable?\n  ([block-id]\n   (collapsable? block-id {}))\n  ([block-id {:keys [semantic?]\n              :or {semantic? false}}]\n   (when block-id\n     (if-let [block (db-model/query-block-by-uuid block-id)]\n       (and\n        (not (util/collapsed? block))\n        (or (db-model/has-children? block-id)\n            (and\n             (:outliner/block-title-collapse-enabled? (state/get-config))\n             (block-with-title? (:block/format block)\n                                (:block/content block)\n                                semantic?))))\n       false))))\n\n(defn all-blocks-with-level\n  \"Return all blocks associated with correct level\n   if :root-block is not nil, only return root block with its children\n   if :expanded? true, return expanded children\n   if :collapse? true, return without any collapsed children\n   if :incremental? true, collapse/expand will be step by step\n   for example:\n   - a\n    - b (collapsed)\n     - c\n     - d\n    - e\n   return:\n    blocks\n    [{:block a :level 1}\n     {:block b :level 2}\n     {:block e :level 2}]\"\n  [{:keys [collapse? expanded? incremental? root-block]\n    :or {collapse? false expanded? false incremental? true root-block nil}}]\n  (when-let [page (or (state/get-current-page)\n                      (date/today))]\n    (let [block? (util/uuid-string? page)\n          block-id (or root-block (and block? (uuid page)))\n          blocks (if block-id\n                   (db/get-block-and-children (state/get-current-repo) block-id)\n                   (db/get-page-blocks-no-cache page))\n          root-block (or block-id root-block)]\n      (if incremental?\n        (let [blocks (tree/blocks->vec-tree blocks (or block-id page))]\n          (->>\n           (cond->> blocks\n             root-block\n             (map (fn find [root]\n                    (if (= root-block (:block/uuid root))\n                      root\n                      (first (filter find (:block/children root []))))))\n\n             collapse?\n             (w/postwalk\n              (fn [b]\n                (if (and (map? b)\n                         (util/collapsed? b)\n                         (not= root-block (:block/uuid b)))\n                  (assoc b :block/children []) b)))\n\n             true\n             (mapcat (fn [x] (tree-seq map? :block/children x)))\n\n             expanded?\n             (filter (fn [b] (collapsable? (:block/uuid b))))\n\n             true\n             (map (fn [x] (dissoc x :block/children))))\n           (remove nil?)))\n\n        (cond->> blocks\n          collapse?\n          (filter util/collapsed?)\n\n          expanded?\n          (filter (fn [b] (collapsable? (:block/uuid b))))\n\n          true\n          (remove nil?))))))\n\n(defn- skip-collapsing-in-db?\n  []\n  (let [config (last (state/get-editor-args))]\n    (:ref? config)))\n\n(defn- set-blocks-collapsed!\n  [block-ids value]\n  (let [block-ids (map (fn [block-id] (if (string? block-id) (uuid block-id) block-id)) block-ids)\n        repo (state/get-current-repo)\n        value (boolean value)]\n    (when repo\n      (outliner-tx/transact!\n        {:outliner-op :collapse-expand-blocks}\n        (doseq [block-id block-ids]\n          (when-let [block (db/entity [:block/uuid block-id])]\n            (let [current-value (:block/collapsed? block)]\n              (when-not (= current-value value)\n                (let [block {:block/uuid block-id\n                             :block/collapsed? value}]\n                  (outliner-core/save-block! block)))))))\n      (let [block-id (first block-ids)\n            input-pos (or (state/get-edit-pos) :max)]\n        ;; update editing input content\n        (when-let [editing-block (state/get-edit-block)]\n          (when (= (:block/uuid editing-block) block-id)\n            (edit-block! editing-block\n                         input-pos\n                         (state/get-edit-input-id))))))))\n\n(defn collapse-block! [block-id]\n  (when (collapsable? block-id)\n    (when-not (skip-collapsing-in-db?)\n      (set-blocks-collapsed! [block-id] true)))\n  (state/set-collapsed-block! block-id true))\n\n(defn expand-block! [block-id]\n  (when-not (skip-collapsing-in-db?)\n    (set-blocks-collapsed! [block-id] false)\n    (state/set-collapsed-block! block-id false)))\n\n(defn expand!\n  ([e] (expand! e false))\n  ([e clear-selection?]\n   (util/stop e)\n   (cond\n     (state/editing?)\n     (when-let [block-id (:block/uuid (state/get-edit-block))]\n       (expand-block! block-id))\n\n     (state/selection?)\n     (do\n       (->> (get-selected-blocks)\n            (map (fn [dom]\n                   (-> (dom/attr dom \"blockid\")\n                       medley/uuid\n                       expand-block!)))\n            doall)\n       (and clear-selection? (clear-selection!)))\n     :else\n     ;; expand one level\n     (let [blocks-with-level (all-blocks-with-level {})\n           max-level (or (apply max (map :block/level blocks-with-level)) 99)]\n       (loop [level 1]\n         (if (> level max-level)\n           nil\n           (let [blocks-to-expand (->> blocks-with-level\n                                       (filter (fn [b] (= (:block/level b) level)))\n                                       (filter util/collapsed?))]\n             (if (empty? blocks-to-expand)\n               (recur (inc level))\n               (doseq [{:block/keys [uuid]} blocks-to-expand]\n                 (expand-block! uuid))))))))))\n\n(defn collapse!\n  ([e] (collapse! e false))\n  ([e clear-selection?]\n   (when e (util/stop e))\n   (cond\n     (state/editing?)\n     (when-let [block-id (:block/uuid (state/get-edit-block))]\n       (collapse-block! block-id))\n\n     (state/selection?)\n     (do\n       (->> (get-selected-blocks)\n            (map (fn [dom]\n                   (-> (dom/attr dom \"blockid\")\n                       medley/uuid\n                       collapse-block!)))\n            doall)\n       (and clear-selection? (clear-selection!)))\n\n     :else\n     ;; collapse by one level from outside\n     (let [blocks-with-level\n           (all-blocks-with-level {:collapse? true})\n           max-level (or (apply max (map :block/level blocks-with-level)) 99)]\n       (loop [level max-level]\n         (if (zero? level)\n           nil\n           (let [blocks-to-collapse\n                 (->> blocks-with-level\n                      (filter (fn [b] (= (:block/level b) level)))\n                      (filter (fn [b] (collapsable? (:block/uuid b)))))]\n             (if (empty? blocks-to-collapse)\n               (recur (dec level))\n               (doseq [{:block/keys [uuid]} blocks-to-collapse]\n                 (collapse-block! uuid))))))))))\n\n(defn collapse-all!\n  ([]\n   (collapse-all! nil))\n  ([block-id]\n   (let [blocks (all-blocks-with-level {:incremental? false\n                                        :expanded? true\n                                        :root-block block-id})\n         block-ids (map :block/uuid blocks)]\n     (set-blocks-collapsed! block-ids true))))\n\n(defn expand-all!\n  ([]\n   (expand-all! nil))\n  ([block-id]\n   (let [blocks (all-blocks-with-level {:incremental? false\n                                        :collapse? true\n                                        :root-block block-id})\n         block-ids (map :block/uuid blocks)]\n     (set-blocks-collapsed! block-ids false))))\n\n(defn toggle-open! []\n  (let [all-expanded? (empty? (all-blocks-with-level {:incremental? false\n                                                      :collapse? true}))]\n    (if all-expanded?\n      (collapse-all!)\n      (expand-all!))))\n\n(defn select-all-blocks!\n  []\n  (if-let [current-input-id (state/get-edit-input-id)]\n    (let [input (gdom/getElement current-input-id)\n          blocks-container (util/rec-get-blocks-container input)\n          blocks (dom/by-class blocks-container \"ls-block\")]\n      (state/exit-editing-and-set-selected-blocks! blocks))\n    (->> (all-blocks-with-level {:collapse? true})\n         (map (comp gdom/getElementByClass str :block/uuid))\n         state/exit-editing-and-set-selected-blocks!)))\n\n(defn escape-editing\n  ([]\n   (escape-editing true))\n  ([select?]\n   (when (state/editing?)\n     (if select?\n       (->> (:block/uuid (state/get-edit-block))\n            select-block!)\n       (state/clear-edit!)))))\n\n(defn replace-block-reference-with-content-at-point\n  []\n  (when-let [{:keys [start end link]} (thingatpt/block-ref-at-point)]\n    (when-let [block (db/pull [:block/uuid link])]\n      (let [block-content (:block/content block)\n            format (or (:block/format block) :markdown)\n            block-content-without-prop (-> (property/remove-properties format block-content)\n                                           (drawer/remove-logbook))]\n        (when-let [input (state/get-input)]\n          (when-let [current-block-content (gobj/get input \"value\")]\n            (let [block-content* (str (subs current-block-content 0 start)\n                                      block-content-without-prop\n                                      (subs current-block-content end))]\n              (state/set-block-content-and-last-pos! input block-content* 1))))))))\n\n(defn copy-current-ref\n  [block-id]\n  (when block-id\n    (util/copy-to-clipboard! (util/format \"((%s))\" (str block-id)))))\n\n(defn delete-current-ref!\n  [block ref-id]\n  (when (and block ref-id)\n    (let [match (re-pattern (str \"\\\\s?\" (util/format \"\\\\(\\\\(%s\\\\)\\\\)\" (str ref-id))))\n          content (string/replace-first (:block/content block) match \"\")]\n      (save-block! (state/get-current-repo)\n                   (:block/uuid block)\n                   content))))\n\n(defn replace-ref-with-text!\n  [block ref-id]\n  (when (and block ref-id)\n    (let [match (util/format \"((%s))\" (str ref-id))\n          ref-block (db/entity [:block/uuid ref-id])\n          block-ref-content (->> (or (:block/content ref-block)\n                                     \"\")\n                                 (property/remove-built-in-properties (:block/format ref-block))\n                                 (drawer/remove-logbook))\n          content (string/replace-first (:block/content block) match\n                                        block-ref-content)]\n      (save-block! (state/get-current-repo)\n                   (:block/uuid block)\n                   content))))\n\n(defn replace-ref-with-embed!\n  [block ref-id]\n  (when (and block ref-id)\n    (let [match (util/format \"((%s))\" (str ref-id))\n          content (string/replace-first (:block/content block) match\n                                        (util/format \"{{embed ((%s))}}\"\n                                                     (str ref-id)))]\n      (save-block! (state/get-current-repo)\n                   (:block/uuid block)\n                   content))))\n\n(defn block-default-collapsed?\n  \"Whether a block should be collapsed by default.\n  Currently, this handles several cases:\n  1. References.\n  2. Custom queries.\"\n  [block config]\n  (or\n   (and\n    (or (:ref? config) (:custom-query? config))\n    (>= (inc (:block/level block))\n        (state/get-ref-open-blocks-level))\n    ;; has children\n    (first (:block/_parent (db/entity (:db/id block)))))\n   (util/collapsed? block)))\n"]}