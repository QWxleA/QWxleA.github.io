shadow$provide.module$node_modules$$sentry$utils$dist$ratelimit=function(global,require,module,exports){function parseRetryAfterHeader(header,now){void 0===now&&(now=Date.now());var headerDelay=parseInt(""+header,10);if(!isNaN(headerDelay))return 1E3*headerDelay;header=Date.parse(""+header);return isNaN(header)?exports.DEFAULT_RETRY_AFTER:header-now}function disabledUntil(limits,category){return limits[category]||limits.all||0}Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("module$node_modules$$sentry$utils$node_modules$tslib$tslib");
exports.DEFAULT_RETRY_AFTER=6E4;exports.parseRetryAfterHeader=parseRetryAfterHeader;exports.disabledUntil=disabledUntil;exports.isRateLimited=function(limits,category,now){void 0===now&&(now=Date.now());return disabledUntil(limits,category)>now};exports.updateRateLimits=function(limits,headers,now){var _a,e_2,_b;void 0===now&&(now=Date.now());limits=tslib_1.__assign({},limits);var rateLimitHeader=headers["x-sentry-rate-limits"];headers=headers["retry-after"];if(rateLimitHeader)try{for(var _c=tslib_1.__values(rateLimitHeader.trim().split(",")),
_d=_c.next();!_d.done;_d=_c.next()){var parameters=_d.value.split(":",2),headerDelay=parseInt(parameters[0],10),delay=1E3*(isNaN(headerDelay)?60:headerDelay);if(parameters[1])try{for(var _e=(e_2=void 0,tslib_1.__values(parameters[1].split(";"))),_f=_e.next();!_f.done;_f=_e.next())limits[_f.value]=now+delay}catch(e_2_1){e_2={error:e_2_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_2)throw e_2.error;}}else limits.all=now+delay}}catch(e_1_1){var e_1={error:e_1_1}}finally{try{_d&&
!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error;}}else headers&&(limits.all=now+parseRetryAfterHeader(headers,now));return limits}}
//# sourceMappingURL=module$node_modules$$sentry$utils$dist$ratelimit.js.map
