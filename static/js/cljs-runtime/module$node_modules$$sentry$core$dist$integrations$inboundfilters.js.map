{
"version":3,
"file":"module$node_modules$$sentry$core$dist$integrations$inboundfilters.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@sentry/core/dist/integrations/inboundfilters.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$core$dist$integrations$inboundfilters\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar hub_1 = require(\"@sentry/hub\");\nvar utils_1 = require(\"@sentry/utils\");\n// \"Script error.\" is hard coded into browsers for errors that it can't read.\n// this is the result of a script being pulled in from an external domain and CORS.\nvar DEFAULT_IGNORE_ERRORS = [/^Script error\\.?$/, /^Javascript error: Script error\\.? on line 0$/];\n/** Inbound filters configurable by the user */\nvar InboundFilters = /** @class */ (function () {\n    function InboundFilters(_options) {\n        if (_options === void 0) { _options = {}; }\n        this._options = _options;\n        /**\n         * @inheritDoc\n         */\n        this.name = InboundFilters.id;\n    }\n    /**\n     * @inheritDoc\n     */\n    InboundFilters.prototype.setupOnce = function () {\n        hub_1.addGlobalEventProcessor(function (event) {\n            var hub = hub_1.getCurrentHub();\n            if (!hub) {\n                return event;\n            }\n            var self = hub.getIntegration(InboundFilters);\n            if (self) {\n                var client = hub.getClient();\n                var clientOptions = client ? client.getOptions() : {};\n                // This checks prevents most of the occurrences of the bug linked below:\n                // https://github.com/getsentry/sentry-javascript/issues/2622\n                // The bug is caused by multiple SDK instances, where one is minified and one is using non-mangled code.\n                // Unfortunatelly we cannot fix it reliably (thus reserved property in rollup's terser config),\n                // as we cannot force people using multiple instances in their apps to sync SDK versions.\n                var options = typeof self._mergeOptions === 'function' ? self._mergeOptions(clientOptions) : {};\n                if (typeof self._shouldDropEvent !== 'function') {\n                    return event;\n                }\n                return self._shouldDropEvent(event, options) ? null : event;\n            }\n            return event;\n        });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._shouldDropEvent = function (event, options) {\n        if (this._isSentryError(event, options)) {\n            if (utils_1.isDebugBuild()) {\n                utils_1.logger.warn(\"Event dropped due to being internal Sentry Error.\\nEvent: \" + utils_1.getEventDescription(event));\n            }\n            return true;\n        }\n        if (this._isIgnoredError(event, options)) {\n            if (utils_1.isDebugBuild()) {\n                utils_1.logger.warn(\"Event dropped due to being matched by `ignoreErrors` option.\\nEvent: \" + utils_1.getEventDescription(event));\n            }\n            return true;\n        }\n        if (this._isDeniedUrl(event, options)) {\n            if (utils_1.isDebugBuild()) {\n                utils_1.logger.warn(\"Event dropped due to being matched by `denyUrls` option.\\nEvent: \" + utils_1.getEventDescription(event) + \".\\nUrl: \" + this._getEventFilterUrl(event));\n            }\n            return true;\n        }\n        if (!this._isAllowedUrl(event, options)) {\n            if (utils_1.isDebugBuild()) {\n                utils_1.logger.warn(\"Event dropped due to not being matched by `allowUrls` option.\\nEvent: \" + utils_1.getEventDescription(event) + \".\\nUrl: \" + this._getEventFilterUrl(event));\n            }\n            return true;\n        }\n        return false;\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isSentryError = function (event, options) {\n        if (!options.ignoreInternal) {\n            return false;\n        }\n        try {\n            // @ts-ignore can't be a sentry error if undefined\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            return event.exception.values[0].type === 'SentryError';\n        }\n        catch (e) {\n            // ignore\n        }\n        return false;\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isIgnoredError = function (event, options) {\n        if (!options.ignoreErrors || !options.ignoreErrors.length) {\n            return false;\n        }\n        return this._getPossibleEventMessages(event).some(function (message) {\n            // Not sure why TypeScript complains here...\n            return options.ignoreErrors.some(function (pattern) { return utils_1.isMatchingPattern(message, pattern); });\n        });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isDeniedUrl = function (event, options) {\n        // TODO: Use Glob instead?\n        if (!options.denyUrls || !options.denyUrls.length) {\n            return false;\n        }\n        var url = this._getEventFilterUrl(event);\n        return !url ? false : options.denyUrls.some(function (pattern) { return utils_1.isMatchingPattern(url, pattern); });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isAllowedUrl = function (event, options) {\n        // TODO: Use Glob instead?\n        if (!options.allowUrls || !options.allowUrls.length) {\n            return true;\n        }\n        var url = this._getEventFilterUrl(event);\n        return !url ? true : options.allowUrls.some(function (pattern) { return utils_1.isMatchingPattern(url, pattern); });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._mergeOptions = function (clientOptions) {\n        if (clientOptions === void 0) { clientOptions = {}; }\n        return {\n            allowUrls: tslib_1.__spread((this._options.whitelistUrls || []), (this._options.allowUrls || []), (clientOptions.whitelistUrls || []), (clientOptions.allowUrls || [])),\n            denyUrls: tslib_1.__spread((this._options.blacklistUrls || []), (this._options.denyUrls || []), (clientOptions.blacklistUrls || []), (clientOptions.denyUrls || [])),\n            ignoreErrors: tslib_1.__spread((this._options.ignoreErrors || []), (clientOptions.ignoreErrors || []), DEFAULT_IGNORE_ERRORS),\n            ignoreInternal: typeof this._options.ignoreInternal !== 'undefined' ? this._options.ignoreInternal : true,\n        };\n    };\n    /** JSDoc */\n    InboundFilters.prototype._getPossibleEventMessages = function (event) {\n        if (event.message) {\n            return [event.message];\n        }\n        if (event.exception) {\n            try {\n                var _a = (event.exception.values && event.exception.values[0]) || {}, _b = _a.type, type = _b === void 0 ? '' : _b, _c = _a.value, value = _c === void 0 ? '' : _c;\n                return [\"\" + value, type + \": \" + value];\n            }\n            catch (oO) {\n                if (utils_1.isDebugBuild()) {\n                    utils_1.logger.error(\"Cannot extract message for event \" + utils_1.getEventDescription(event));\n                }\n                return [];\n            }\n        }\n        return [];\n    };\n    /** JSDoc */\n    InboundFilters.prototype._getLastValidUrl = function (frames) {\n        if (frames === void 0) { frames = []; }\n        for (var i = frames.length - 1; i >= 0; i--) {\n            var frame = frames[i];\n            if (frame && frame.filename !== '<anonymous>' && frame.filename !== '[native code]') {\n                return frame.filename || null;\n            }\n        }\n        return null;\n    };\n    /** JSDoc */\n    InboundFilters.prototype._getEventFilterUrl = function (event) {\n        try {\n            if (event.stacktrace) {\n                return this._getLastValidUrl(event.stacktrace.frames);\n            }\n            var frames_1;\n            try {\n                // @ts-ignore we only care about frames if the whole thing here is defined\n                frames_1 = event.exception.values[0].stacktrace.frames;\n            }\n            catch (e) {\n                // ignore\n            }\n            return frames_1 ? this._getLastValidUrl(frames_1) : null;\n        }\n        catch (oO) {\n            if (utils_1.isDebugBuild()) {\n                utils_1.logger.error(\"Cannot extract url for event \" + utils_1.getEventDescription(event));\n            }\n            return null;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    InboundFilters.id = 'InboundFilters';\n    return InboundFilters;\n}());\nexports.InboundFilters = InboundFilters;\n//# sourceMappingURL=inboundfilters.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","hub_1","utils_1","DEFAULT_IGNORE_ERRORS","InboundFilters","_options","name","id","prototype","setupOnce","InboundFilters.prototype.setupOnce","addGlobalEventProcessor","event","hub","getCurrentHub","self","getIntegration","clientOptions","client","getClient","getOptions","options","_mergeOptions","_shouldDropEvent","InboundFilters.prototype._shouldDropEvent","_isSentryError","isDebugBuild","logger","warn","getEventDescription","_isIgnoredError","_isDeniedUrl","_getEventFilterUrl","_isAllowedUrl","InboundFilters.prototype._isSentryError","ignoreInternal","exception","values","type","e","InboundFilters.prototype._isIgnoredError","ignoreErrors","length","_getPossibleEventMessages","some","message","pattern","isMatchingPattern","InboundFilters.prototype._isDeniedUrl","denyUrls","url","InboundFilters.prototype._isAllowedUrl","allowUrls","InboundFilters.prototype._mergeOptions","__spread","whitelistUrls","blacklistUrls","InboundFilters.prototype._getPossibleEventMessages","_a","_b","_c","oO","error","_getLastValidUrl","InboundFilters.prototype._getLastValidUrl","frames","i","frame","filename","InboundFilters.prototype._getEventFilterUrl","stacktrace","frames_1"]
}
