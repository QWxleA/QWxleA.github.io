{"version":3,"sources":["frontend/handler/file_sync.cljs"],"mappings":"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","names":["frontend.handler.file-sync/hiding-login&file-sync","cljs.core/not","frontend.config/dev?","frontend.handler.file-sync/refresh-file-sync-component","cljs.core.atom","frontend.handler.file-sync/graph-txid-exists?","vec__69505","cljs.core/deref","cljs.core.nth","_user-uuid","graph-uuid","_txid","frontend.fs.sync/graphs-txid","frontend.handler.file-sync/create-graph","name","c__41861__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__41862__auto__","switch__41838__auto__","state_69548","state_val_69549","inst_69519","statearr-69550","inst_69509","cljs.core.async.impl.ioc-helpers/take!","inst_69511","inst_69515","statearr-69551","inst_69517","inst_69541","inst_69542","statearr-69552","inst_69521","statearr-69553","statearr-69554","inst_69538","inst_69539","statearr-69556","inst_69512","statearr-69558","statearr-69559","statearr-69560","inst_69546","cljs.core.async.impl.ioc-helpers/return-chan","inst_69526","inst_69527","inst_69528","inst_69529","statearr-69561","statearr-69562","inst_69518","statearr-69563","statearr-69564","statearr-69565","inst_69544","statearr-69566","inst_69531","inst_69532","cljs.core/PersistentVector","inst_69533","inst_69534","inst_69535","inst_69536","statearr-69567","statearr-69568","inst_69524","statearr-69569","statearr-69570","statearr-69573","state-machine__41839__auto__","ret-value__41840__auto__","result__41841__auto__","cljs.core/keyword-identical?","ex__41842__auto__","e69574","statearr-69575","cljs.core/seq","statearr-69576","cljs.core/first","state__41863__auto__","statearr-69579","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","frontend.fs.sync/remoteapi","cljs.core/ExceptionInfo","frontend.fs.sync/update-graphs-txid!","frontend.handler.user/user-uuid","frontend.state/get-current-repo","cljs.core.swap_BANG_","cljs.core._EQ_","cljs.core.get_in","cljs.core/ex-data","frontend.handler.notification.show_BANG_","frontend.handler.file-sync/delete-graph","frontend.fs.sync/sync-stop","state_69607","state_val_69608","inst_69580","inst_69582","inst_69583","statearr-69609","statearr-69610","inst_69585","inst_69586","statearr-69611","inst_69591","inst_69592","inst_69593","inst_69594","inst_69595","statearr-69612","statearr-69613","statearr-69614","inst_69605","inst_69597","inst_69598","inst_69599","statearr-69615","statearr-69617","statearr-69618","inst_69602","inst_69603","statearr-69619","statearr-69620","statearr-69625","e69626","statearr-69627","statearr-69630","statearr-69632","frontend.fs.sync/clear-graphs-txid!","frontend.handler.file-sync/list-graphs","state_69643","state_val_69644","inst_69638","inst_69640","inst_69641","statearr-69648","e69649","statearr-69650","statearr-69651","statearr-69653","frontend.handler.file-sync/switch-graph","frontend.handler.file-sync/download-version-file","file-uuid","version-uuid","state_69689","state_val_69690","inst_69660","inst_69661","inst_69662","inst_69665","inst_69666","inst_69667","inst_69668","statearr-69692","inst_69670","inst_69671","statearr-69693","statearr-69694","statearr-69695","inst_69673","inst_69674","statearr-69696","inst_69676","inst_69677","inst_69678","inst_69679","inst_69680","inst_69681","inst_69682","inst_69683","inst_69684","inst_69685","statearr-69697","inst_69687","statearr-69698","e69699","statearr-69700","statearr-69706","statearr-69707","js/module$node_modules$path$path.join","frontend.fs.sync/update-local-files","frontend.fs.sync/rsapi","frontend.config/get-repo-dir","cljs.core/ex-cause","frontend.handler.file-sync/list-file-versions","page","file-id","temp__5720__auto__","path","frontend.db/entity","base-path","path*","clojure.string/replace-first","state_69734","state_val_69735","inst_69712","inst_69714","inst_69715","inst_69716","inst_69717","inst_69718","inst_69719","inst_69720","inst_69722","inst_69723","inst_69728","s__69725","cljs.core/LazySeq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","cljs.core/count","b__69727","cljs.core/chunk-buffer","i__69726","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__69724","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","inst_69729","inst_69730","inst_69731","inst_69732","statearr-69750","e69751","statearr-69752","statearr-69753","statearr-69754","version-list","version","frontend.util/time-ago","cljs-time.coerce/from-string","frontend.handler.file-sync/get-current-graph-uuid","cljs.core/second","cljs.core/chunk-first"],"sourcesContent":["(ns frontend.handler.file-sync\n  (:require [\"path\" :as path]\n            [cljs-time.coerce :as tc]\n            [cljs.core.async :as async :refer [go <!]]\n            [clojure.string :as string]\n            [frontend.config :as config]\n            [frontend.db :as db]\n            [frontend.fs.sync :as sync]\n            [frontend.handler.notification :as notification]\n            [frontend.state :as state]\n            [frontend.util :as util]\n            [frontend.handler.user :as user]))\n\n(def hiding-login&file-sync (not config/dev?))\n(def refresh-file-sync-component (atom false))\n\n(defn graph-txid-exists?\n  []\n  (let [[_user-uuid graph-uuid _txid] @sync/graphs-txid]\n    (some? graph-uuid)))\n\n\n(defn create-graph\n  [name]\n  (go\n    (let [r* (<! (sync/create-graph sync/remoteapi name))\n          r (if (instance? ExceptionInfo r*) r* (:GraphUUID r*))]\n      (if (and (not (instance? ExceptionInfo r))\n               (string? r))\n        (do\n          (sync/update-graphs-txid! 0 r (user/user-uuid) (state/get-current-repo))\n          (swap! refresh-file-sync-component not))\n        (if (= 404 (get-in (ex-data r) [:err :status]))\n          (notification/show! (str \"Create graph failed: already existed graph: \" name) :warning)\n          (notification/show! (str \"Create graph failed: \" r) :warning))))))\n\n(defn delete-graph\n  [graph-uuid]\n  (sync/sync-stop)\n  (go\n    (let [r (<! (sync/delete-graph sync/remoteapi graph-uuid))]\n      (if (instance? ExceptionInfo r)\n        (notification/show! (str \"Delete graph failed: \" graph-uuid) :warning)\n        (let [[_ local-graph-uuid _] @sync/graphs-txid]\n          (when (= graph-uuid local-graph-uuid)\n            (sync/clear-graphs-txid! (state/get-current-repo))\n            (swap! refresh-file-sync-component not))\n          (notification/show! (str \"Graph deleted\") :success))))))\n\n(defn list-graphs\n  []\n  (go (:Graphs (<! (sync/list-remote-graphs sync/remoteapi)))))\n\n(defn switch-graph [graph-uuid]\n  (sync/update-graphs-txid! 0 graph-uuid (user/user-uuid) (state/get-current-repo))\n  (swap! refresh-file-sync-component not))\n\n(defn- download-version-file [graph-uuid file-uuid version-uuid]\n\n  (go\n    (let [key (path/join \"version-files\" file-uuid version-uuid)\n          r (<! (sync/update-local-files\n                 sync/rsapi graph-uuid (config/get-repo-dir (state/get-current-repo)) [key]))]\n      (if (instance? ExceptionInfo r)\n        (notification/show! (ex-cause r) :error)\n        (notification/show! [:div\n                             [:div \"Downloaded version file at: \"]\n                             [:div key]] :success false)))))\n\n(defn list-file-versions [graph-uuid page]\n  (let [file-id (:db/id (:block/file page))]\n    (when-let [path (:file/path (db/entity file-id))]\n      (let [base-path (config/get-repo-dir (state/get-current-repo))\n            path* (string/replace-first path base-path \"\")]\n        (go\n          (let [version-list (:VersionList\n                              (<! (sync/get-remote-file-versions sync/remoteapi graph-uuid path*)))]\n            (notification/show! [:div\n                                 [:div.font-bold \"File history - \" path*]\n                                 [:hr.my-2]\n                                 (for [version version-list]\n                                   (let [version-uuid (:VersionUUID version)]\n                                     [:div.my-4 {:key version-uuid}\n                                      [:div\n                                       [:a.text-xs.inline\n                                        {:on-click #(download-version-file graph-uuid\n                                                                           (:FileUUID version)\n                                                                           (:VersionUUID version))}\n                                        version-uuid]\n                                       [:div.opacity-70 (str \"Size: \" (:Size version))]]\n                                      [:div.opacity-50\n                                       (util/time-ago (tc/from-string (:CreateTime version)))]]))]\n                                :success false)))))))\n\n(defn get-current-graph-uuid [] (second @sync/graphs-txid))\n"]}