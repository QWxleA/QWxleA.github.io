{
"version":3,
"file":"module$frontend$selection.js",
"lineCount":74,
"mappings":"AACA,IAAMA,0CAAa,CAACC,MAAD,EAASC,KAAT,CAAAF,IAAkB;AAEhC,MAAIG,OAAOD,KAAX;AACA,OAAA,EAAOC,IAAP,IAAe,IAAf,CAAA,CAAqB;AACjB,QAAIA,IAAJ,IAAYF,MAAZ;AACI,aAAO,IAAP;AADJ;AAGAE,QAAA,GAAOA,IAAKC,CAAAA,UAAZ;AAJiB;AAMrB,SAAO,KAAP;AATgC,CAArC;AAYA,IAAMC,6CAAgB,CAACC,QAAD,EAAWC,KAAX,EAAkBC,KAAlB,CAAAH,IAA2B;AAC/C,QAAMI,cAAc,EAApB;AACA,MAAIC,iBAAiB,KAArB;AACA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,CAAhB,GAAoBL,QAASM,CAAAA,UAAWC,CAAAA,MAAxC,EAAgDF,CAAhD,IAAoD,CAApD;AACE,QAAIX,uCAAA,CAAaM,QAASM,CAAAA,UAAT,CAAoBD,CAApB,CAAb,EAAqCJ,KAArC,CAAJ,IAAmDP,uCAAA,CAAaM,QAASM,CAAAA,UAAT,CAAoBD,CAApB,CAAb,EAAqCH,KAArC,CAAnD,CAAgG;AAC9F,UAAIC,WAAYI,CAAAA,MAAhB,IAA0B,CAA1B;AACEH,sBAAA,GAAiB,IAAjB;AADF;AAGEA,sBAAA,GAAiB,KAAjB;AAHF;AAKAD,iBAAYK,CAAAA,IAAZ,CAAiBR,QAASM,CAAAA,UAAT,CAAoBD,CAApB,CAAjB,CAAA;AAN8F,KAAhG,KAOO,KAAIF,WAAYI,CAAAA,MAAhB,IAA0B,CAA1B;UACA,KAAIH,cAAJ;AACLD,iBAAYK,CAAAA,IAAZ,CAAiBR,QAASM,CAAAA,UAAT,CAAoBD,CAApB,CAAjB,CAAA;AADK;AAGL,aAAOF,WAAP;AAHK;AATT;AAeD,MAAIA,WAAYI,CAAAA,MAAhB,IAA0B,CAA1B;AACG,WAAO,CAACP,QAAD,CAAP;AADH,QAEQ,KAAIN,uCAAA,CAAaS,WAAA,CAAYA,WAAYI,CAAAA,MAAxB,GAAiC,CAAjC,CAAb,EAAkDN,KAAlD,CAAJ,IAAgEP,uCAAA,CAAaS,WAAA,CAAYA,WAAYI,CAAAA,MAAxB,GAAiC,CAAjC,CAAb,EAAkDL,KAAlD,CAAhE;AACL,WAAOC,WAAP;AADK;AAIL,WAAO,CAACA,WAAA,CAAY,CAAZ,CAAD,CAAP;AAJK;AApBwC,CAAjD;AA4BO,IAAMM,8CAAoB,CAACC,iBAAD,EAAoBC,SAApB,CAAAF,IAAiC;AAEhE,MAAIG,YAAY,IAAhB;AACA,MAAGC,MAAOC,CAAAA,YAAV;AACEF,aAAA,GAAYC,MAAOC,CAAAA,YAAP,EAAZ;AADF,QAEO,KAAGC,QAASH,CAAAA,SAAZ;AACLA,aAAA,GAAYG,QAASH,CAAAA,SAArB;AADK;AAIP,MAAGA,SAAH,CAAc;AACZ,QAAIA,SAAUI,CAAAA,WAAd;AACE,aAAO,EAAP;AADF;AAGA,UAAMd,QAAQU,SAAUK,CAAAA,SAAxB;AACA,WAAOlB,0CAAA,CAAgBW,iBAAhB,EAAmCC,SAAnC,EAA8CT,KAA9C,CAAP;AALY;AATkD,CAA3D;AAkBA,IAAMgB,4CAAkB,EAAAA,IAAK;AAClC,MAAIN,YAAY,IAAhB;AACA,MAAGC,MAAOC,CAAAA,YAAV;AACEF,aAAA,GAAYC,MAAOC,CAAAA,YAAP,EAAZ;AADF,QAEO,KAAGC,QAASH,CAAAA,SAAZ;AACLA,aAAA,GAAYG,QAASH,CAAAA,SAArB;AADK;AAGP,MAAGA,SAAH,CAAa;AACX,QAAGA,SAAUO,CAAAA,KAAb;AACEP,eAAUO,CAAAA,KAAV,EAAA;AADF;AAGA,QAAGP,SAAUQ,CAAAA,eAAb;AACER,eAAUQ,CAAAA,eAAV,EAAA;AADF;AAJW;AAPqB,CAA7B;AA1DP;AAAA,IAAAC,4BAAA,EAAA;AA0DaH;AAAAA,yBAAAA,CAAAA,cAAAA,GAAAA,yCAAAA;AAlBAT;AAAAA,yBAAAA,CAAAA,gBAAAA,GAAAA,2CAAAA;;",
"sources":["frontend/selection.js"],
"sourcesContent":["// Copied from https://stackoverflow.com/a/20336116\nconst isDescendant=(parent, child)=> {\n     // from http://stackoverflow.com/questions/2234979/how-to-check-in-javascript-if-one-element-is-a-child-of-another\n     let node = child;\n     while (node != null) {\n         if (node == parent) {\n             return true;\n         }\n         node = node.parentNode;\n     }\n     return false;\n}\n\nconst getNodesBetween=(rootNode, node1, node2)=> {\n  const resultNodes = [];\n  let isBetweenNodes = false;\n  for (let i = 0; i < rootNode.childNodes.length; i+= 1) {\n    if (isDescendant(rootNode.childNodes[i], node1) || isDescendant(rootNode.childNodes[i], node2)) {\n      if (resultNodes.length == 0) {\n        isBetweenNodes = true;\n      } else {\n        isBetweenNodes = false;\n      }\n      resultNodes.push(rootNode.childNodes[i]);\n    } else if (resultNodes.length == 0) {\n    } else if (isBetweenNodes) {\n      resultNodes.push(rootNode.childNodes[i]);\n    } else {\n      return resultNodes;\n    }\n  };\n if (resultNodes.length == 0) {\n    return [rootNode];\n  } else if (isDescendant(resultNodes[resultNodes.length - 1], node1) || isDescendant(resultNodes[resultNodes.length - 1], node2)) {\n    return resultNodes;\n  } else {\n    // same child node for both should never happen\n    return [resultNodes[0]];\n  }\n}\n\nexport const getSelectedNodes =  (selectionAncestor, startNode)=> {\n  // from https://developer.mozilla.org/en-US/docs/Web/API/Selection\n  let selection = null;\n  if(window.getSelection){\n    selection = window.getSelection();\n  } else if(document.selection){\n    selection = document.selection;\n  }\n\n  if(selection) {\n    if (selection.isCollapsed) {\n      return [];\n    };\n    const node2 = selection.focusNode;\n    return getNodesBetween(selectionAncestor, startNode, node2);\n  }\n};\n\nexport const clearSelection =  ()=> {\n  let selection = null;\n  if(window.getSelection){\n    selection = window.getSelection();\n  } else if(document.selection){\n    selection = document.selection;\n  }\n  if(selection){\n    if(selection.empty){\n      selection.empty();\n    }\n    if(selection.removeAllRanges){\n      selection.removeAllRanges();\n    }\n  }\n}\n"],
"names":["isDescendant","parent","child","node","parentNode","getNodesBetween","rootNode","node1","node2","resultNodes","isBetweenNodes","i","childNodes","length","push","getSelectedNodes","selectionAncestor","startNode","selection","window","getSelection","document","isCollapsed","focusNode","clearSelection","empty","removeAllRanges","$jscomp$tmp$exports$module$name"]
}
