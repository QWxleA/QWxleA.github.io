shadow$provide.module$node_modules$$pixi$text_bitmap$dist$cjs$text_bitmap=function(global,require,module,exports){function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function autoDetectFormat(data){for(var i=0;i<formats.length;i++)if(formats[i].test(data))return formats[i];return null}function splitTextToCharacters(text){return Array.from?Array.from(text):text.split("")}function extractCharCode(str){return str.codePointAt?
str.codePointAt(0):str.charCodeAt(0)}Object.defineProperty(exports,"__esModule",{value:!0});var math=require("module$node_modules$$pixi$math$dist$cjs$math"),settings=require("module$node_modules$$pixi$settings$dist$cjs$settings"),mesh=require("module$node_modules$$pixi$mesh$dist$cjs$mesh"),utils=require("module$node_modules$$pixi$utils$dist$cjs$utils"),core=require("module$node_modules$$pixi$core$dist$cjs$core"),text$jscomp$0=require("module$node_modules$$pixi$text$dist$cjs$text"),constants=require("module$node_modules$$pixi$constants$dist$cjs$constants");
global=require("module$node_modules$$pixi$display$dist$cjs$display");var loaders=require("module$node_modules$$pixi$loaders$dist$cjs$loaders"),extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)},BitmapFontData=function(){return function(){this.info=[];this.common=[];this.page=[];this.char=[];this.kerning=
[];this.distanceField=[]}}();require=function(){function TextFormat(){}TextFormat.test=function(data){return"string"===typeof data&&0===data.indexOf("info face\x3d")};TextFormat.parse=function(txt){txt=txt.match(/^[a-z]+\s+.+$/gm);var rawData={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]},i;for(i in txt){var name=txt[i].match(/^[a-z]+/gm)[0],attributeList=txt[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),itemData={},i_1;for(i_1 in attributeList){var split=attributeList[i_1].split("\x3d"),
key=split[0];split=split[1].replace(/"/gm,"");var floatValue=parseFloat(split);split=isNaN(floatValue)?split:floatValue;itemData[key]=split}rawData[name].push(itemData)}var font=new BitmapFontData;rawData.info.forEach(function(info){return font.info.push({face:info.face,size:parseInt(info.size,10)})});rawData.common.forEach(function(common){return font.common.push({lineHeight:parseInt(common.lineHeight,10)})});rawData.page.forEach(function(page){return font.page.push({id:parseInt(page.id,10),file:page.file})});
rawData.char.forEach(function(char){return font.char.push({id:parseInt(char.id,10),page:parseInt(char.page,10),x:parseInt(char.x,10),y:parseInt(char.y,10),width:parseInt(char.width,10),height:parseInt(char.height,10),xoffset:parseInt(char.xoffset,10),yoffset:parseInt(char.yoffset,10),xadvance:parseInt(char.xadvance,10)})});rawData.kerning.forEach(function(kerning){return font.kerning.push({first:parseInt(kerning.first,10),second:parseInt(kerning.second,10),amount:parseInt(kerning.amount,10)})});rawData.distanceField.forEach(function(df){return font.distanceField.push({distanceRange:parseInt(df.distanceRange,
10),fieldType:df.fieldType})});return font};return TextFormat}();var XMLFormat=function(){function XMLFormat(){}XMLFormat.test=function(data){return data instanceof XMLDocument&&data.getElementsByTagName("page").length&&null!==data.getElementsByTagName("info")[0].getAttribute("face")};XMLFormat.parse=function(xml){var data=new BitmapFontData,info=xml.getElementsByTagName("info"),common=xml.getElementsByTagName("common"),page=xml.getElementsByTagName("page"),char=xml.getElementsByTagName("char"),kerning=
xml.getElementsByTagName("kerning");xml=xml.getElementsByTagName("distanceField");for(var i=0;i<info.length;i++)data.info.push({face:info[i].getAttribute("face"),size:parseInt(info[i].getAttribute("size"),10)});for(i=0;i<common.length;i++)data.common.push({lineHeight:parseInt(common[i].getAttribute("lineHeight"),10)});for(i=0;i<page.length;i++)data.page.push({id:parseInt(page[i].getAttribute("id"),10)||0,file:page[i].getAttribute("file")});for(i=0;i<char.length;i++)info=char[i],data.char.push({id:parseInt(info.getAttribute("id"),
10),page:parseInt(info.getAttribute("page"),10)||0,x:parseInt(info.getAttribute("x"),10),y:parseInt(info.getAttribute("y"),10),width:parseInt(info.getAttribute("width"),10),height:parseInt(info.getAttribute("height"),10),xoffset:parseInt(info.getAttribute("xoffset"),10),yoffset:parseInt(info.getAttribute("yoffset"),10),xadvance:parseInt(info.getAttribute("xadvance"),10)});for(i=0;i<kerning.length;i++)data.kerning.push({first:parseInt(kerning[i].getAttribute("first"),10),second:parseInt(kerning[i].getAttribute("second"),
10),amount:parseInt(kerning[i].getAttribute("amount"),10)});for(i=0;i<xml.length;i++)data.distanceField.push({fieldType:xml[i].getAttribute("fieldType"),distanceRange:parseInt(xml[i].getAttribute("distanceRange"),10)});return data};return XMLFormat}();module=function(){function XMLStringFormat(){}XMLStringFormat.test=function(data){return"string"===typeof data&&-1<data.indexOf("\x3cfont\x3e")?(data=(new self.DOMParser).parseFromString(data,"text/xml"),XMLFormat.test(data)):!1};XMLStringFormat.parse=
function(xmlTxt){xmlTxt=(new self.DOMParser).parseFromString(xmlTxt,"text/xml");return XMLFormat.parse(xmlTxt)};return XMLStringFormat}();var formats=[require,XMLFormat,module],BitmapFont=function(){function BitmapFont(data,textures,ownsTextures){var _a,_b,info=data.info[0],common=data.common[0],distanceField=data.distanceField[0],res=utils.getResolutionOfUrl(data.page[0].file),pageTextures={};this._ownsTextures=ownsTextures;this.font=info.face;this.size=info.size;this.lineHeight=common.lineHeight/
res;this.chars={};this.pageTextures=pageTextures;for(ownsTextures=0;ownsTextures<data.page.length;ownsTextures++)common=data.page[ownsTextures],info=common.id,common=common.file,pageTextures[info]=textures instanceof Array?textures[ownsTextures]:textures[common],(null===distanceField||void 0===distanceField?0:distanceField.fieldType)&&"none"!==distanceField.fieldType&&(pageTextures[info].baseTexture.alphaMode=constants.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA);for(ownsTextures=0;ownsTextures<data.char.length;ownsTextures++){textures=
data.char[ownsTextures];info=textures.id;textures=textures.page;var _e=data.char[ownsTextures],x=_e.x,y=_e.y,width=_e.width,height=_e.height;common=_e.xoffset;var yoffset=_e.yoffset;_e=_e.xadvance;x/=res;y/=res;width/=res;height/=res;common/=res;yoffset/=res;_e/=res;x=new math.Rectangle(x+pageTextures[textures].frame.x/res,y+pageTextures[textures].frame.y/res,width,height);this.chars[info]={xOffset:common,yOffset:yoffset,xAdvance:_e,kerning:{},texture:new core.Texture(pageTextures[textures].baseTexture,
x),page:textures}}for(ownsTextures=0;ownsTextures<data.kerning.length;ownsTextures++)textures=data.kerning[ownsTextures],pageTextures=textures.first,info=textures.second,textures=textures.amount,pageTextures/=res,info/=res,textures/=res,this.chars[info]&&(this.chars[info].kerning[pageTextures]=textures);this.distanceFieldRange=null===distanceField||void 0===distanceField?void 0:distanceField.distanceRange;this.distanceFieldType=null!==(_b=null===(_a=null===distanceField||void 0===distanceField?void 0:
distanceField.fieldType)||void 0===_a?void 0:_a.toLowerCase())&&void 0!==_b?_b:"none"}BitmapFont.prototype.destroy=function(){for(var id in this.chars)this.chars[id].texture.destroy(),this.chars[id].texture=null;for(id in this.pageTextures)this._ownsTextures&&this.pageTextures[id].destroy(!0),this.pageTextures[id]=null;this.pageTextures=this.chars=null};BitmapFont.install=function(data,textures,ownsTextures){if(!(data instanceof BitmapFontData)){var format=autoDetectFormat(data);if(!format)throw Error("Unrecognized data format for font.");
data=format.parse(data)}textures instanceof core.Texture&&(textures=[textures]);textures=new BitmapFont(data,textures,ownsTextures);return BitmapFont.available[textures.font]=textures};BitmapFont.uninstall=function(name){var font=BitmapFont.available[name];if(!font)throw Error("No font found named '"+name+"'");font.destroy();delete BitmapFont.available[name]};BitmapFont.from=function(name,textStyle,options){if(!name)throw Error("[BitmapFont] Property `name` is required.");options=Object.assign({},
BitmapFont.defaultOptions,options);var padding=options.padding,resolution=options.resolution,textureWidth=options.textureWidth,textureHeight=options.textureHeight,chars=options.chars;"string"===typeof chars&&(chars=[chars]);options=[];for(var i=0,j=chars.length;i<j;i++){var item=chars[i];if(Array.isArray(item)){if(2!==item.length)throw Error("[BitmapFont]: Invalid character range length, expecting 2 got "+item.length+".");var startCode=item[0].charCodeAt(0);item=item[1].charCodeAt(0);if(item<startCode)throw Error("[BitmapFont]: Invalid character range.");
for(;startCode<=item;startCode++)options.push(String.fromCharCode(startCode))}else options.push.apply(options,splitTextToCharacters(item))}if(0===options.length)throw Error("[BitmapFont]: Empty set when resolving characters.");j=textStyle instanceof text$jscomp$0.TextStyle?textStyle:new text$jscomp$0.TextStyle(textStyle);textStyle=new BitmapFontData;textStyle.info[0]={face:j.fontFamily,size:j.fontSize};textStyle.common[0]={lineHeight:j.fontSize};item=startCode=0;var maxCharHeight=0;chars=[];for(i=
0;i<options.length;i++){if(!canvas){var canvas=document.createElement("canvas");canvas.width=textureWidth;canvas.height=textureHeight;var context=canvas.getContext("2d");var baseTexture=new core.BaseTexture(canvas,{resolution});chars.push(new core.Texture(baseTexture));textStyle.page.push({id:chars.length-1,file:""})}var metrics=text$jscomp$0.TextMetrics.measureText(options[i],j,!1,canvas);baseTexture=metrics.width;var height=Math.ceil(metrics.height),textureGlyphWidth=Math.ceil(("italic"===j.fontStyle?
2:1)*baseTexture);if(item>=textureHeight-height*resolution){if(0===item)throw Error("[BitmapFont] textureHeight "+textureHeight+"px is too small for "+(j.fontSize+"px fonts"));--i;context=canvas=null;maxCharHeight=startCode=item=0}else if(maxCharHeight=Math.max(height+metrics.fontProperties.descent,maxCharHeight),textureGlyphWidth*resolution+startCode>=textureWidth)--i,item+=maxCharHeight*resolution,item=Math.ceil(item),maxCharHeight=startCode=0;else{var canvas$jscomp$0=canvas,context$jscomp$0=context,
metrics$jscomp$0=metrics,resolution$jscomp$0=resolution,style=j,char=metrics$jscomp$0.text,fontProperties=metrics$jscomp$0.fontProperties;context$jscomp$0.translate(startCode,item);context$jscomp$0.scale(resolution$jscomp$0,resolution$jscomp$0);var tx=style.strokeThickness/2,ty=-(style.strokeThickness/2);context$jscomp$0.font=style.toFontString();context$jscomp$0.lineWidth=style.strokeThickness;context$jscomp$0.textBaseline=style.textBaseline;context$jscomp$0.lineJoin=style.lineJoin;context$jscomp$0.miterLimit=
style.miterLimit;var JSCompiler_temp_const=context$jscomp$0;var canvas$jscomp$1=canvas$jscomp$0;var gradient=context$jscomp$0;var style$jscomp$0=style,resolution$jscomp$1=resolution$jscomp$0;resolution$jscomp$0=[char];canvas$jscomp$0=metrics$jscomp$0;var fillStyle=style$jscomp$0.fill;if(Array.isArray(fillStyle))if(1===fillStyle.length)resolution$jscomp$0=fillStyle[0];else{var dropShadowCorrection=style$jscomp$0.dropShadow?style$jscomp$0.dropShadowDistance:0,padding$jscomp$0=style$jscomp$0.padding||
0,width=canvas$jscomp$1.width/resolution$jscomp$1-dropShadowCorrection-2*padding$jscomp$0,height$jscomp$0=canvas$jscomp$1.height/resolution$jscomp$1-dropShadowCorrection-2*padding$jscomp$0;canvas$jscomp$1=fillStyle.slice();resolution$jscomp$1=style$jscomp$0.fillGradientStops.slice();if(!resolution$jscomp$1.length){var lengthPlus1=canvas$jscomp$1.length+1;for(dropShadowCorrection=1;dropShadowCorrection<lengthPlus1;++dropShadowCorrection)resolution$jscomp$1.push(dropShadowCorrection/lengthPlus1)}canvas$jscomp$1.unshift(fillStyle[0]);
resolution$jscomp$1.unshift(0);canvas$jscomp$1.push(fillStyle[fillStyle.length-1]);resolution$jscomp$1.push(1);if(style$jscomp$0.fillGradientType===text$jscomp$0.TEXT_GRADIENT.LINEAR_VERTICAL)for(gradient=gradient.createLinearGradient(width/2,padding$jscomp$0,width/2,height$jscomp$0+padding$jscomp$0),fillStyle=0,style$jscomp$0=(canvas$jscomp$0.fontProperties.fontSize+style$jscomp$0.strokeThickness)/height$jscomp$0,dropShadowCorrection=0;dropShadowCorrection<resolution$jscomp$0.length;dropShadowCorrection++)for(padding$jscomp$0=
canvas$jscomp$0.lineHeight*dropShadowCorrection,width=0;width<canvas$jscomp$1.length;width++)fillStyle=Math.max(fillStyle,padding$jscomp$0/height$jscomp$0+("number"===typeof resolution$jscomp$1[width]?resolution$jscomp$1[width]:width/canvas$jscomp$1.length)*style$jscomp$0),fillStyle=Math.min(fillStyle,1),gradient.addColorStop(fillStyle,canvas$jscomp$1[width]);else for(gradient=gradient.createLinearGradient(padding$jscomp$0,height$jscomp$0/2,width+padding$jscomp$0,height$jscomp$0/2),resolution$jscomp$0=
canvas$jscomp$1.length+1,canvas$jscomp$0=1,dropShadowCorrection=0;dropShadowCorrection<canvas$jscomp$1.length;dropShadowCorrection++)gradient.addColorStop("number"===typeof resolution$jscomp$1[dropShadowCorrection]?resolution$jscomp$1[dropShadowCorrection]:canvas$jscomp$0/resolution$jscomp$0,canvas$jscomp$1[dropShadowCorrection]),canvas$jscomp$0++;resolution$jscomp$0=gradient}else resolution$jscomp$0=fillStyle;JSCompiler_temp_const.fillStyle=resolution$jscomp$0;context$jscomp$0.strokeStyle=style.stroke;
JSCompiler_temp_const=style.dropShadowColor;JSCompiler_temp_const=utils.hex2rgb("number"===typeof JSCompiler_temp_const?JSCompiler_temp_const:utils.string2hex(JSCompiler_temp_const));style.dropShadow?(context$jscomp$0.shadowColor="rgba("+255*JSCompiler_temp_const[0]+","+255*JSCompiler_temp_const[1]+","+255*JSCompiler_temp_const[2]+","+style.dropShadowAlpha+")",context$jscomp$0.shadowBlur=style.dropShadowBlur,context$jscomp$0.shadowOffsetX=Math.cos(style.dropShadowAngle)*style.dropShadowDistance,context$jscomp$0.shadowOffsetY=
Math.sin(style.dropShadowAngle)*style.dropShadowDistance):(context$jscomp$0.shadowColor="black",context$jscomp$0.shadowBlur=0,context$jscomp$0.shadowOffsetX=0,context$jscomp$0.shadowOffsetY=0);style.stroke&&style.strokeThickness&&context$jscomp$0.strokeText(char,tx,ty+metrics$jscomp$0.lineHeight-fontProperties.descent);style.fill&&context$jscomp$0.fillText(char,tx,ty+metrics$jscomp$0.lineHeight-fontProperties.descent);context$jscomp$0.setTransform(1,0,0,1,0,0);context$jscomp$0.fillStyle="rgba(0, 0, 0, 0)";
metrics=extractCharCode(metrics.text);textStyle.char.push({id:metrics,page:chars.length-1,x:startCode/resolution,y:item/resolution,width:textureGlyphWidth,height,xoffset:0,yoffset:0,xadvance:Math.ceil(baseTexture-(j.dropShadow?j.dropShadowDistance:0)-(j.stroke?j.strokeThickness:0))});startCode+=(textureGlyphWidth+2*padding)*resolution;startCode=Math.ceil(startCode)}}i=0;for(canvas=options.length;i<canvas;i++)for(padding=options[i],resolution=0;resolution<canvas;resolution++)textureWidth=options[resolution],
textureHeight=context.measureText(padding).width,j=context.measureText(textureWidth).width,(textureHeight=context.measureText(padding+textureWidth).width-(textureHeight+j))&&textStyle.kerning.push({first:extractCharCode(padding),second:extractCharCode(textureWidth),amount:textureHeight});context=new BitmapFont(textStyle,chars,!0);void 0!==BitmapFont.available[name]&&BitmapFont.uninstall(name);return BitmapFont.available[name]=context};BitmapFont.ALPHA=[["a","z"],["A","Z"]," "];BitmapFont.NUMERIC=
[["0","9"]];BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];BitmapFont.ASCII=[[" ","~"]];BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:BitmapFont.ALPHANUMERIC};BitmapFont.available={};return BitmapFont}(),pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[];require=function(_super){function BitmapText(text,style){void 0===style&&(style={});var _this=_super.call(this)||this;_this._tint=16777215;var _a=Object.assign({},
BitmapText.styleDefaults,style);style=_a.align;var tint=_a.tint,maxWidth=_a.maxWidth,letterSpacing=_a.letterSpacing,fontName=_a.fontName;_a=_a.fontSize;if(!BitmapFont.available[fontName])throw Error('Missing BitmapFont "'+fontName+'"');_this._activePagesMeshData=[];_this._textWidth=0;_this._textHeight=0;_this._align=style;_this._tint=tint;_this._fontName=fontName;_this._fontSize=_a||BitmapFont.available[fontName].size;_this._text=text;_this._maxWidth=maxWidth;_this._maxLineHeight=0;_this._letterSpacing=
letterSpacing;_this._anchor=new math.ObservablePoint(function(){_this.dirty=!0},_this,0,0);_this._roundPixels=settings.settings.ROUND_PIXELS;_this.dirty=!0;_this._textureCache={};return _this}__extends(BitmapText,_super);BitmapText.prototype.updateText=function(){for(var _a,data=BitmapFont.available[this._fontName],scale=this._fontSize/data.size,pos=new math.Point,chars=[],lineWidths=[],lineSpaces=[],text=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",charsInput=splitTextToCharacters(text),maxWidth=
this._maxWidth*data.size/this._fontSize,pageMeshDataPool="none"===data.distanceFieldType?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData,prevCharCode=null,lastLineWidth=0,maxLineWidth=0,line=0,lastBreakPos=-1,lastBreakWidth=0,spacesRemoved=0,spaceCount=text=0,i=0;i<charsInput.length;i++){var char=charsInput[i],charCode=extractCharCode(char);/(?:\s)/.test(char)&&(lastBreakPos=i,lastBreakWidth=lastLineWidth,spaceCount++);if("\r"===char||"\n"===char)lineWidths.push(lastLineWidth),lineSpaces.push(-1),
maxLineWidth=Math.max(maxLineWidth,lastLineWidth),++line,++spacesRemoved,pos.x=0,pos.y+=data.lineHeight,prevCharCode=null,spaceCount=0;else if(char=data.chars[charCode])prevCharCode&&char.kerning[prevCharCode]&&(pos.x+=char.kerning[prevCharCode]),lastLineWidth=charRenderDataPool.pop()||{texture:core.Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new math.Point},lastLineWidth.texture=char.texture,lastLineWidth.line=line,lastLineWidth.charCode=charCode,lastLineWidth.position.x=pos.x+char.xOffset+
this._letterSpacing/2,lastLineWidth.position.y=pos.y+char.yOffset,lastLineWidth.prevSpaces=spaceCount,chars.push(lastLineWidth),lastLineWidth=lastLineWidth.position.x+char.texture.orig.width,pos.x+=char.xAdvance+this._letterSpacing,text=Math.max(text,char.yOffset+char.texture.height),prevCharCode=charCode,-1!==lastBreakPos&&0<maxWidth&&pos.x>maxWidth&&(++spacesRemoved,utils.removeItems(chars,1+lastBreakPos-spacesRemoved,1+i-lastBreakPos),i=lastBreakPos,lastBreakPos=-1,lineWidths.push(lastBreakWidth),
lineSpaces.push(0<chars.length?chars[chars.length-1].prevSpaces:0),maxLineWidth=Math.max(maxLineWidth,lastBreakWidth),line++,pos.x=0,pos.y+=data.lineHeight,prevCharCode=null,spaceCount=0)}i=charsInput[charsInput.length-1];"\r"!==i&&"\n"!==i&&(/(?:\s)/.test(i)&&(lastLineWidth=lastBreakWidth),lineWidths.push(lastLineWidth),maxLineWidth=Math.max(maxLineWidth,lastLineWidth),lineSpaces.push(-1));lastBreakWidth=[];for(i=0;i<=line;i++)char=0,"right"===this._align?char=maxLineWidth-lineWidths[i]:"center"===
this._align?char=(maxLineWidth-lineWidths[i])/2:"justify"===this._align&&(char=0>lineSpaces[i]?0:(maxLineWidth-lineWidths[i])/lineSpaces[i]),lastBreakWidth.push(char);lineSpaces=chars.length;lineWidths={};charsInput=[];maxWidth=this._activePagesMeshData;for(i=0;i<maxWidth.length;i++)pageMeshDataPool.push(maxWidth[i]);for(i=0;i<lineSpaces;i++)line=chars[i].texture,lastLineWidth=line.baseTexture.uid,lineWidths[lastLineWidth]||(char=pageMeshDataPool.pop(),char||(lastBreakPos=new mesh.MeshGeometry,"none"===
data.distanceFieldType?(spacesRemoved=new mesh.MeshMaterial(core.Texture.EMPTY),char=constants.BLEND_MODES.NORMAL):(spacesRemoved=new mesh.MeshMaterial(core.Texture.EMPTY,{program:core.Program.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position \x3d vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord \x3d (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n",
"// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor \x3d texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median \x3d texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median \x3d min(median, texColor.a);\r\n\r\n  float screenPxDistance \x3d uFWidth * (median - 0.5);\r\n  float alpha \x3d clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor \x3d vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),
uniforms:{uFWidth:0}}),char=constants.BLEND_MODES.NORMAL_NPM),lastBreakPos=new mesh.Mesh(lastBreakPos,spacesRemoved),lastBreakPos.blendMode=char,char={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:lastBreakPos,vertices:null,uvs:null,indices:null}),char.index=0,char.indexCount=0,char.vertexCount=0,char.uvsCount=0,char.total=0,lastBreakPos=this._textureCache,lastBreakPos[lastLineWidth]=lastBreakPos[lastLineWidth]||new core.Texture(line.baseTexture),char.mesh.texture=lastBreakPos[lastLineWidth],
char.mesh.tint=this._tint,charsInput.push(char),lineWidths[lastLineWidth]=char),lineWidths[lastLineWidth].total++;for(i=0;i<maxWidth.length;i++)-1===charsInput.indexOf(maxWidth[i])&&this.removeChild(maxWidth[i].mesh);for(i=0;i<charsInput.length;i++)charsInput[i].mesh.parent!==this&&this.addChild(charsInput[i].mesh);this._activePagesMeshData=charsInput;for(i in lineWidths){char=lineWidths[i];pageMeshDataPool=char.total;if(!((null===(_a=char.indices)||void 0===_a?void 0:_a.length)>6*pageMeshDataPool)||
char.vertices.length<2*mesh.Mesh.BATCHABLE_SIZE)char.vertices=new Float32Array(8*pageMeshDataPool),char.uvs=new Float32Array(8*pageMeshDataPool),char.indices=new Uint16Array(6*pageMeshDataPool);else for(line=char.vertices,charsInput=8*char.total;charsInput<line.length;charsInput++)line[charsInput]=0;char.mesh.size=6*pageMeshDataPool}for(i=0;i<lineSpaces;i++)char=chars[i],_a=char.position.x+lastBreakWidth[char.line]*("justify"===this._align?char.prevSpaces:1),this._roundPixels&&(_a=Math.round(_a)),
_a*=scale,pageMeshDataPool=char.position.y*scale,line=char.texture,char=lineWidths[line.baseTexture.uid],charsInput=line.frame,line=line._uvs,maxWidth=char.index++,char.indices[6*maxWidth]=4*maxWidth,char.indices[6*maxWidth+1]=1+4*maxWidth,char.indices[6*maxWidth+2]=2+4*maxWidth,char.indices[6*maxWidth+3]=4*maxWidth,char.indices[6*maxWidth+4]=2+4*maxWidth,char.indices[6*maxWidth+5]=3+4*maxWidth,char.vertices[8*maxWidth]=_a,char.vertices[8*maxWidth+1]=pageMeshDataPool,char.vertices[8*maxWidth+2]=_a+
charsInput.width*scale,char.vertices[8*maxWidth+3]=pageMeshDataPool,char.vertices[8*maxWidth+4]=_a+charsInput.width*scale,char.vertices[8*maxWidth+5]=pageMeshDataPool+charsInput.height*scale,char.vertices[8*maxWidth+6]=_a,char.vertices[8*maxWidth+7]=pageMeshDataPool+charsInput.height*scale,char.uvs[8*maxWidth]=line.x0,char.uvs[8*maxWidth+1]=line.y0,char.uvs[8*maxWidth+2]=line.x1,char.uvs[8*maxWidth+3]=line.y1,char.uvs[8*maxWidth+4]=line.x2,char.uvs[8*maxWidth+5]=line.y2,char.uvs[8*maxWidth+6]=line.x3,
char.uvs[8*maxWidth+7]=line.y3;this._textWidth=maxLineWidth*scale;this._textHeight=(pos.y+data.lineHeight)*scale;for(i in lineWidths){char=lineWidths[i];if(0!==this.anchor.x||0!==this.anchor.y)for(data=0,pos=this._textWidth*this.anchor.x,maxLineWidth=this._textHeight*this.anchor.y,_a=0;_a<char.total;_a++)char.vertices[data++]-=pos,char.vertices[data++]-=maxLineWidth,char.vertices[data++]-=pos,char.vertices[data++]-=maxLineWidth,char.vertices[data++]-=pos,char.vertices[data++]-=maxLineWidth,char.vertices[data++]-=
pos,char.vertices[data++]-=maxLineWidth;this._maxLineHeight=text*scale;data=char.mesh.geometry.getBuffer("aVertexPosition");pos=char.mesh.geometry.getBuffer("aTextureCoord");maxLineWidth=char.mesh.geometry.getIndex();data.data=char.vertices;pos.data=char.uvs;maxLineWidth.data=char.indices;data.update();pos.update();maxLineWidth.update()}for(i=0;i<chars.length;i++)charRenderDataPool.push(chars[i])};BitmapText.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};BitmapText.prototype._render=
function(renderer){var _a=BitmapFont.available[this._fontName],distanceFieldRange=_a.distanceFieldRange,size=_a.size;if("none"!==_a.distanceFieldType){var _b=this.worldTransform;_a=_b.a;var b=_b.b,c=_b.c;_b=_b.d;_a=(Math.abs(Math.sqrt(_a*_a+b*b))+Math.abs(Math.sqrt(c*c+_b*_b)))/2;size=this._fontSize/size;b=0;for(c=this._activePagesMeshData;b<c.length;b++)c[b].mesh.shader.uniforms.uFWidth=_a*distanceFieldRange*size*renderer.resolution}_super.prototype._render.call(this,renderer)};BitmapText.prototype.getLocalBounds=
function(){this.validate();return _super.prototype.getLocalBounds.call(this)};BitmapText.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)};Object.defineProperty(BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(value){if(this._tint!==value){this._tint=value;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=value}},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,"align",{get:function(){return this._align},
set:function(value){this._align!==value&&(this._align=value,this.dirty=!0)},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,"fontName",{get:function(){return this._fontName},set:function(value){if(!BitmapFont.available[value])throw Error('Missing BitmapFont "'+value+'"');this._fontName!==value&&(this._fontName=value,this.dirty=!0)},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(value){this._fontSize!==
value&&(this._fontSize=value,this.dirty=!0)},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,"anchor",{get:function(){return this._anchor},set:function(value){"number"===typeof value?this._anchor.set(value):this._anchor.copyFrom(value)},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,"text",{get:function(){return this._text},set:function(text){text=String(null===text||void 0===text?"":text);this._text!==text&&(this._text=text,this.dirty=!0)},enumerable:!1,
configurable:!0});Object.defineProperty(BitmapText.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(value){this._maxWidth!==value&&(this._maxWidth=value,this.dirty=!0)},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,"maxLineHeight",{get:function(){this.validate();return this._maxLineHeight},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,"textWidth",{get:function(){this.validate();return this._textWidth},enumerable:!1,
configurable:!0});Object.defineProperty(BitmapText.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(value){this._letterSpacing!==value&&(this._letterSpacing=value,this.dirty=!0)},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(value){value!==this._roundPixels&&(this._roundPixels=value,this.dirty=!0)},enumerable:!1,configurable:!0});Object.defineProperty(BitmapText.prototype,
"textHeight",{get:function(){this.validate();return this._textHeight},enumerable:!1,configurable:!0});BitmapText.prototype.destroy=function(options){var _textureCache=this._textureCache,id;for(id in _textureCache)_textureCache[id].destroy(),delete _textureCache[id];this._textureCache=null;_super.prototype.destroy.call(this,options)};BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};return BitmapText}(global.Container);global=function(){function BitmapFontLoader(){}BitmapFontLoader.add=
function(){loaders.LoaderResource.setExtensionXhrType("fnt",loaders.LoaderResource.XHR_RESPONSE_TYPE.TEXT)};BitmapFontLoader.use=function(resource,next){var format=autoDetectFormat(resource.data);if(format){var baseUrl=BitmapFontLoader.getBaseUrl(this,resource),data=format.parse(resource.data),textures={};format=function(page){textures[page.metadata.pageFile]=page.texture;Object.keys(textures).length===data.page.length&&(resource.bitmapFont=BitmapFont.install(data,textures,!0),next())};for(var i=
0;i<data.page.length;++i){var pageFile=data.page[i].file,url=baseUrl+pageFile,exists=!1,name;for(name in this.resources){var bitmapResource=this.resources[name];if(bitmapResource.url===url){bitmapResource.metadata.pageFile=pageFile;bitmapResource.texture?format(bitmapResource):bitmapResource.onAfterMiddleware.add(format);exists=!0;break}}exists||(pageFile={crossOrigin:resource.crossOrigin,loadType:loaders.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile},resource.metadata.imageMetadata),
parentResource:resource},this.add(url,pageFile,format))}}else next()};BitmapFontLoader.getBaseUrl=function(loader,resource){var resUrl=resource.isDataUrl?"":BitmapFontLoader.dirname(resource.url);resource.isDataUrl&&("."===resUrl&&(resUrl=""),loader.baseUrl&&resUrl&&"/"===loader.baseUrl.charAt(loader.baseUrl.length-1)&&(resUrl+="/"));(resUrl=resUrl.replace(loader.baseUrl,""))&&"/"!==resUrl.charAt(resUrl.length-1)&&(resUrl+="/");return resUrl};BitmapFontLoader.dirname=function(url){var dir=url.replace(/\\/g,
"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return dir===url?".":""===dir?"/":dir};return BitmapFontLoader}();exports.BitmapFont=BitmapFont;exports.BitmapFontData=BitmapFontData;exports.BitmapFontLoader=global;exports.BitmapText=require}
//# sourceMappingURL=module$node_modules$$pixi$text_bitmap$dist$cjs$text_bitmap.js.map
