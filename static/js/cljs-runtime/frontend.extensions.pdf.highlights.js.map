{"version":3,"sources":["frontend/extensions/pdf/highlights.cljs"],"mappings":";AAkBA,AAAA,wCAAA,gDAAAA,xFAAMM;AAAN,AAAA,IAAAL,qBAAA;AAAA,AAAA,IAAAC,0BAAA,AAAA;AAAA,AAAA,IAAAC,wBAAA;;AAAA,AAAA,GAAA,CAAAA,wBAAAD;AAAA,AAAA,AAAAD,wBAAA,CAAA,UAAAE;;AAAA,eAAA,CAAAA,wBAAA;;;;AAAA;;;;AAAA,IAAAC,uBAAA,EAAA,CAAA,MAAA,AAAAH,4BAAA,AAAA,KAAAI,qBAAA,AAAAJ,yBAAA,KAAA,IAAA,OAAA;AAAA,AAAA,OAAAK,2EAAAF;;;AAAA,AAAA,CAAA,6EAAA,7EAAME,wFAAMI;AAAZ,AACE,OAACC,8CAAMC,cAAiBF;;;AAD1B,CAAA,gEAAA,hEAAMJ;;AAAN;AAAA,CAAA,0DAAA,WAAAC,rEAAMD;AAAN,AAAA,IAAAE,qBAAA;AAAA,AAAA,OAAAA,wDAAA,AAAAC,cAAAF;;;AAAA,AAGA,AAAKM,4DAAY,6CAAA,7CAACC;AAClB,AAAKC,iEAAiB,6CAAA,7CAACD;AACvB,AAAKE,gEAAsB,6CAAA,7CAACF;AAC5B,AAAKG,8DAAc,AAACH,6CAAK,AAAC,gEAAA,hEAACI,6CAAKC,0BAAgB,AAACC,qBAAY;AAE7D,6DAAA,7DAAMC;AAAN,AAEE,sCAAA,iEAAA,hGAACC;;AAEH,0DAAA,AAAAC,oBAAAC,qBAAA,nGAAWC,8GAERG,MAAUC;AAFb,AAAA,AAAA,oBAGQA;AAHR,AAII,IAAAC,qBAAkB,mBAAA,nBAACE;AAAnB,AAAA,oBAAAF;AAAA,AAAA,aAAAA,TAAWC;AAAX,AAEE,WAAA,XAACE;AAAD,AAAgB,OAACC,kDAA8BL,OAAOE;GAAtD;;AACA,kBAAA,XAACE;AAAD,AAAgB,sCAAA,6EAAA,5GAACX;GAAjB;;AAHF;;;AAJJ;;GAAA,8HAAA,3CACII,iBAAWC;AAQf,qDAAA,AAAAJ,oBAAAY,oBAAA,7FAAUC,wGACHP;AADP,AAAA,AAEE,oBAAMA;AAAN,AACE,IAAAC,2BAAmB,AAAA,+FAAA,AAAAQ,gBAAeC;AAAlC,AAAA,oBAAAT;AAAA,AAAA,oBAAAA,hBAAWO;AAAX,AACE,IAAMG,kBAAU,AAAA,2GAAA,AAAAF,gBAAqBC;IAC/BE,iBAAS,AAAA,4FAAWJ;IACpBK,kBAAU,iBAAAC,oBAAKF;AAAL,AAAA,oBAAAE;AACK,OAACC,6BAAoB,AAACxB,qBAAY,CAAA,gEAAyBqB;;AADhEE;;;AAFhB,AAKE,oBAAM,iBAAAA,oBAAKD;AAAL,AAAA,oBAAAC;AAAe,2BAAA,nBAAMH;;AAArBG;;;AAAN,AACE,CAAM,AAAqBd,2BAAQa;;AADrC;;AANJ;;AADF;;AAFF;GAAA,4GAAA,zBAA4BhB;AAa5B,iDAAA,AAAAH,oBAAAY,oBAAA,zFAAUW,oGACHjB;AADP,AAAA,AAAA,IAEQkB,SAAO,iBAAA,jBAACC;IACRC,yBACA,qDAAA,rDAACC,2DACK,WAAKC;AAAL,AACE,IAAMC,UAAQC;AAAd,AACE,0BAAA,1BAAc,AAASD,sDAAqCD;;AAC5D,QAACG,uFAAAA,+FAAAA,VAA8BzB,2EAAAA;;AARjD,AAWI,AAAC0B,wDACC;AAAA,AACE,IAAAzB,2BAAc,iBAAAa,oBAAK,AAACc,oBAAIC;AAAV,AAAA,GAAAf;AAA8B,OAACgB,eAAUZ;;AAAzCJ;;;AAAd,AAAA,oBAAAb;AAAA,AAAA,eAAAA,XAAW0B;AAAX,AACM,AAACI,SAAYJ,TACb,6BACE,uBAAA,2CAAA,8DAAA,2CAAA,3KAACK,iOAGG,WAAoBC,zQAU1B,AACA,AACA;AAZM,AACE,IAAMX,QAAMY;IACNC,SAAO,AAAQ,AAAQF;IACvBG,WAAS,yBAAA,zBAAU,CAAGD,SAAOb;IAC7Be,YAAU,wBAAA,xBAACC;AAHjB,AAIE,oBAAMD;AAAN,AACE,IAAMf,YAAM,6CAAK,iBAAAiB,kBAAK,iBAAAE,kBAAK,YAAA,XAAGL;IAARM,kBAAA;AAAA,AAAA,SAAAD,kBAAAC,mBAAAD,kBAAAC;;IAALF,kBAAA;AAAA,AAAA,SAAAD,kBAAAC,mBAAAD,kBAAAC;MAAL;AAAZ,AACE,4BAAA,5BAAc,AAASH,oCAAmBf;;AAC1C,QAACF,uDAAAA,kEAAAA,bAAkBE,8CAAAA;;AAHvB;;iCAKV,UACA,YAAA;AAAA,AAAkB,OAAA,uCAAA,vCAAIE;OACtB,UAAA;AAAA,AAAgB,OAAA,0CAAA,1CAAIA;;;AAlB1B;;AADF;AAAA,AAAA;;GADF;;AAXJ,OAAAR,6BAAA,OAAA,0BAAA,2BAAA,9CAkCyCE;GAlCzC,KAAA;AAoCA,6DAAA,AAAAxB,oBAAAY,oBAAA,kBAAAqC,SAAAC,hIAAU0B,gHACHtE;AADP,AAAA,IAAA6C,aAAAF;IAAAE,iBAAA,AAAAC,4BAAAD;gBAAA,AAAAE,4CAAAF,eAAA,vEAEW0B;YAFX,AAAAxB,4CAAAF,eAAA,nEAEqB2B;YAFrB,AAAAzB,4CAAAF,eAAA,nEAE+B4B;IAF/BzB,aAAAJ;IAAAI,iBAAA,AAAAF,4BAAAE;0BAAA,AAAAD,4CAAAC,eAAA,jFAGW0B;mBAHX,AAAA3B,4CAAAC,eAAA,1EAG0B2B;mBAH1B,AAAA5B,4CAAAC,eAAA,1EAGkC4B;mBAHlC,AAAA7B,4CAAAC,eAAA,1EAG0C6B;AAH1C,AAAA,AAKE,AAACnD,wDACC;AAAA,AACE,SAAA,LAAMoD;AAAN,AAAU,QAACJ,oDAAAA,sDAAAA;;AAAX,AACE,WAAA,XAACtE;AAAD,AAAgB,iCAAA,1BAAC2E,kCAAqCD;;;AADxD;AAAA,AAEG,oCAAA,7BAACE,qCAAwCF;;GAJhD;;AALF,IAiBQG,WAAI,iBAAA,jBAAC9D;IACD+D,MAAI,AAAalF;kBAlB7B,dAmBQmF;IACAC,MAAI,CAAG,CAAG,AAAA,8EAAIZ,SAAO,AAAaU,iBAAMC;IACxCE,OAAK,CAAG,AAAA,6EAAIb,SAAO,AAAcU;IACjCI,KAAG,AAAA,gFAAKf;IACRgB,aAAK,OAAA,NAAMD;IACXE,UAAQ,AAAA,uFAAUjB;IAClBkB,kBAAW,WAAKC,OAAOC;AAAZ,AACC,IAAA1F,qBAAkB,iBAAAa,oBAAK4E;AAAL,AAAA,oBAAA5E;AAAY,OAAC8E,eAAKF;;AAAlB5E;;;AAAlB,AAAA,oBAAAb;AAAA,AAAA,iBAAAA,bAAWyF;AAAX,AACE,IAAAG,iBAAMH;AAAN,AAAA,QAAAG;KAAA;AAEE,AAACC,iDAAwBvB;;;KAF3B;AAKE,AACE,AAACwB,oEACC,iBAAAC,mBAAI,AAAA,oFAAOR;AAAX,AAAA,oBAAAQ;AAAAA;;AAAoB,OAAWvB;;;;AACjC,AAACwB;;;KARL;AAWE,AAACC,oDAA2B3B;;;KAX9B;AAcE,AACE,CAACM,6CAAAA,wDAAAA,bAAQN,oCAAAA;;AACT,AAAC4B,mDAA0B5B;;AAC3B,AAAC6B,qDAAiCpG,OAAO,AAAA,+FAAA,AAAAS,gBAAeC,uBAAa6D;;;;AAGvE,uBAAA,2CAAA,9DAAM8B,qHAAmBX;AAAzB,AACE,GAAA,AAAAY,cAAQhB;AAEN,IAAMf,sBAAU,iQAAA,2CAAA,2FAAA,vYAACgC,uGAAM,EAAI,AAAC3E,oBAAI2C,YAAW,CAACA,0CAAAA,4CAAAA,sBAAWA,wGACnB,AAACiC,yGACDH;AAFpC,AAGE,CAAC1B,6CAAAA,kEAAAA,vBAAQJ,8CAAAA;;AACT,AAAC0B;;AACD,AAACH,iDAAwBvB;;AAG3B,IAAAkC,iBAAS,wDAAA,xDAACC,8CAAMnC,0EAAsB8B;AAAtC,AAAA,yFAAAI,yCAAAA,jIAAC7B,6CAAAA,6DAAAA;;;AAEH,AAAC+B,sBAAOxH,8DAAsB,AAACyH,gDAAQlB;;;;AAE3C,IAAA5E,oBAAK6E;AAAL,AAAA,oBAAA7E;AAAY,kBAAA,XAACV;AAAD,AAAgB,QAACsE,oDAAAA,sDAAAA;GAAjB;;AAAZ5D;;;AApCF;;;AA1BpB,AAgEI,AAACY,wDACC;AAAA,AACE,oBAAI,iBAAAZ,oBAAA,AAAAL,gBAAMvB;AAAN,AAAA,oBAAA4B;AAAuByE;;AAAvBzE;;;AACF,gBAAA,AAAAL,+EAAA,/FAACgF,gCAAYtG;;AACb,IAAUwC,WAAG,AAACG,eAAUmD;IAAxB4B,mBACoB,AAACG,qCAA4BrF,SAAG,iBAAA,jBAAUA;IAD9DkF,uBAAA,AAAA/D,4BAAA+D;cAAA,AAAA9D,4CAAA8D,qBAAA,3EACcC;cADd,AAAA/D,4CAAA8D,qBAAA,3EACgBE;AADhB,AAEE,CAAM,AAAA,AAAIpF,2BACJ,CAAA,oGAAA,2FAAA,KAAA,zIAAoB,mCAAA,jCAAI,WAAA,VAAMmF,gBAAG,WAAA,VAAGA,uEAAc,mCAAA,jCAAI,WAAA,VAAMC,gBAAG,WAAA,VAAGA;;;AAN9E;AAAA,AAAA;;GADF;;AAhEJ,OAAA/F,6BAAA,KAAA,wBAAA,jBA4EgBiE,wBACMG,WAAUC,kBAAiB,kBAAI,iBAAAvE,oBAAA,AAAAL,gBAAMvB;AAAN,AAAA,oBAAA4B;AAAuByE;;AAAvBzE;;MAAJ,SAAA,sBACjC,WAAoBmB;AAApB,AACE,IAAAhC,qBAAkB,AAAA,AAAA,AAAIgC;AAAtB,AAAA,oBAAAhC;AAAA,AAAA,aAAAA,TAAWyF;AAAX,AACE,8BAAA,vBAACD,gBAAWC;;AADd;;eA/ElB,gCAAA,CAAA,AAAA1E,6BAAA,KAAA,aAAA,eAAA,CAAA,AAAAiC,mDAAA,iBAAAC,qBAAA,yDAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAAlD,qBAAA,AAAArB,cAAAuE;AAAA,AAAA,GAAAlD;AAAA,AAAA,IAAAkD,eAAAlD;AAAA,AAAA,GAAA,AAAAoD,6BAAAF;AAAA,IAAAG,kBAm3EmD,AAAAiQ,sBAAApQ;IAn3EnDI,qBAAA,AAAAC,gBAAAF;IAAAG,WAAA,AAAAC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAI,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAJ;AAAA,SAAA,AAAAK,eAAAN,gBAAAK,pCAmFYsD;AAnFZ,AAAA,AAAA,AAAApD,uBAAAJ,SAAA,AAAAzC,6BAAA,IAAA,4CAAA,CAAA,AAAA8C,tCAoFkBmD,gBAAeA,iBAAgBA,oCAAIA;;AApFrD,eAAA,CAAAtD,WAAA;;;;AAAA;;;;;AAAA,OAAAI,qBAAA,AAAAC,gBAAAP,UAAA,AAAAQ,+CAAA,AAAAC,qBAAAf;;AAAA,OAAAY,qBAAA,AAAAC,gBAAAP,UAAA;;;AAAA,SAAA,AAAAU,gBAAAhB,rBAmFY8D;AAnFZ,AAAA,OAAA7C,eAAA,AAAApD,6BAAA,IAAA,4CAAA,CAAA,AAAA8C,qCAAA,AAAAG,+CAAA,AAAAI,eAAAlB,zIAoFkB8D,gBAAeA,iBAAgBA,oCAAIA;;;AApFrD;;;;GAAA,KAAA;;AAAA,AAAA,OAAA/D,mBAAA,mFAAA,SAAA,OAAA,QAAA,MAAA;QAAA,AAAAY,+BAuFK,iBAAAhD,oBAAKwE;AAAL,AAAA,oBAAAxE;AAAA,0FAAA,2DAAA,2CAAA,kEAAA,cAAuC,+GAAA,/GAACoG;;AAAxCpG;;MAvFL,AAAAgD,+BAyFK,iBAAAhD,oBAAK,AAACwF,cAAI,AAAA,oFAAQd;AAAlB,AAAA,GAAA1E;AAAA,0FAAA,2DAAA,2CAAA,kEAAA,eAA4D,+GAAA,/GAACoG;;AAA7DpG;;MAzFL,AAAAgD,+BA2FK,iBAAAhD,oBAAKwE;AAAL,AAAA,oBAAAxE;AAAA,0FAAA,2DAAA,2CAAA,kEAAA,eAAwC,+GAAA,/GAACoG;;AAAzCpG;;MA3FL,AAAAgD,+BA6FK,iBAAAhD,oBAAKwE;AAAL,AAAA,oBAAAxE;AAAA,0FAAA,2DAAA,2CAAA,kEAAA,cAAuC,+GAAA,/GAACoG;;AAAxCpG;;;GA7FL,KAAA;AAgGA,gEAAA,AAAApB,oBAAAY,oBAAA,2BAAA6G,nIAAUI,mHACHvH,OAAOwH,MAAMC;AADpB,AAAA,IAAAL,aAAAD;IAAAC,iBAAA,AAAAtE,4BAAAsE;yBAAA,AAAArE,4CAAAqE,eAAA,hFAEWM;AAFX,AAAA,AAAA,IAAAL,aAIwB,AAAA,4FAAWG;IAJnCH,iBAAA,AAAAvE,4BAAAuE;YAAA,AAAAtE,4CAAAsE,eAAA,nEAIgBM;IAJhBL,aAKwB,AAAA,8FAAaG;IALrCH,iBAAA,AAAAxE,4BAAAwE;YAAA,AAAAvE,4CAAAuE,eAAA,nEAKgBM;IACRC,iBAAU,WAAoB5F;AAApB,AACE,AAAiBA;;AACjB,IAAM6E,IAAE,AAAW7E;IACb8E,IAAE,AAAW9E;AADnB,AAGE,IAAA6F,WAAe9H;IAAf+H,WAAsBN;IAAtBO,WAAA,2CAAA,iDAAA,FAA6BlB,kDAAKC;AAAlC,AAAA,4GAAAe,SAAAC,SAAAC,yCAAAF,SAAAC,SAAAC,jLAACN,mDAAAA,+EAAAA;;AAXvB,AAAA,OAAA1G,6BAAA,MAAA,qEAAA,mCAAA,CAAA,AAAA8C,9FAcuB+D,+BACAA,8FAElB,AAACI,oDACC,WAAKC,IAAIC;AAAT,AAAA,0FAAA,8FAAA,2CAAA,wDAAA,4DAAA,hEAEgBD,2DACAC,uEACAP;GAChBD;GAvBP,KAAA;AAyBA,+DAAA,AAAAjI,oBAAAY,oBAAA,2BAAA8H,lIAAoCE,kHAC7BtI,OAAOwH,MAAMC;AADpB,AAAA,IAAAY,aAAAD;IAAAC,iBAAA,AAAAvF,4BAAAuF;yBAAA,AAAAtF,4CAAAsF,eAAA,hFAEWX;mBAFX,AAAA3E,4CAAAsF,eAAA,1EAEyBzD;AAFzB,AAAA,AAAA,IAIQK,WAAI,iBAAA,jBAAC9D;IACLoH,cAAO,iBAAA,jBAACpH;IACR0G,iBAAU,WAAoB5F;AAApB,AACE,AAAiBA;;AACjB,oBAAU,AAACH,eAAUyG;AAArB;;AAAA,AACE,IAAMzB,IAAE,AAAW7E;IACb8E,IAAE,AAAW9E;AADnB,AAGE,IAAAuG,WAAexI;IAAfyI,WAAsBhB;IAAtBiB,WAAA,2CAAA,iDAAA,FAA6B5B,kDAAKC;AAAlC,AAAA,4GAAAyB,SAAAC,SAAAC,yCAAAF,SAAAC,SAAAC,jLAAChB,mDAAAA,+EAAAA;;;AAZzB,AAeI,AAAChG,wDACC;AAAA,AACE,IAAUC,KAAG,AAACG,eAAUmD;IACdgC,KAAO,AAAClF,SAAYJ,TACb,uBACE,uBAAA,2CAAA,uDAAA,2CAAA,qDAAA,KAAA,uDAAA,KAAA,oDAAA,KAAA,0DAAA,aAAA,8DAAA,2CAAA,ngBAACK,0jBAEqB,WAAoB2G;AAApB,AACE,0CAAA,nCAACC,uBAAaL;GAHtC,mDAKsB,WAAoBtG;AAApB,AACE,IAAM8G,SAAO,AAAA,4FAAWvB;IACdwB,SAAO,AAAG/G;IACVgH,UAAQ,AAAGhH;IAFrB4G,aAGe,6CAAA,WAAAO,xDAACC;AAAD,AAAO,IAAMC,MAAI,AAAeN,oBAAO,CAAA,QAAa,eAAAI,fAACxD;AAA9C,AACE,GAAA,GAAQ,QAAA,PAAM0D;AAAK,OAACC,WAAcD;;AAAlC;;GADT,mFAAA,+CAAA;SAHf,AAAAR,4CAAAD,WAAA,IAAA,hEAGOK;SAHP,AAAAJ,4CAAAD,WAAA,IAAA,hEAGWM;IAELK,SAAO,CAAG,sDAAA,mFAAA,8DAAA,vMAACC,+CAAOV,uNAAyBI;IAC3CO,UAAQ,CAAG,sDAAA,mFAAA,8DAAA,vMAACD,+CAAOV,wNAA0BG;IAC7CS,OAAK,AAAGV;IACRW,OAAK,AAAGX;IACRY,YAAU,6DAAA,8EAAA,2DAAA,+GAAA,4DAAA,jXAACC,sDAAOf,qEAAiBgB,oEACZP,8GACCE,+DACCC,8DACCC;IAE1BI,YAAU,AAACC,+CAA2BjK,OAAO6J;AAfnD,AAkBE,IAAMK,wBAAI,iDAAA,jDAACxD,8CAAMe,iEAAauC;IACxBE,4BAAI,yCAAA,mFAAA,yDAAA,rLAACC,mBAASD,gOAAsB,AAACE;AAD3C,AAGE,AAACC,gDACC,AAACC,sDAAkCtK,OACA,AAAA,+FAAA,AAAAS,gBAAeC,uBACfwJ,0BAAIzC,GAAG,AAAA,4FAAWoC,YACrD;AAAA,AAAO,kBAAA,XAACzJ;AAAD,AACG,AAEE,CAAM,AAAA,AAAI4I,yBAA0B;;AACpC,uBAAA,vBAAkBA;;AAClB,uBAAA,vBAAkBA;;AAElB,QAACpE,6CAAAA,wEAAAA,7BAAQsF,oDAAAA;GAPd;;;AAUX,kBAAA,XAAC9J;AAAD,AAAgB,0CAAA,nCAACwI,uBAAaL;;GAzCxD,sDA2CsB,WAAoBtG;AAApB,AACE,IAAsB+G,SAAO,AAAU/G;IACjC6E,IAAE,oBAAA,pBAAekC;IACjBjC,IAAE,oBAAA,pBAAeiC;IACjBuB,KAAG,EAAA,gCAAA,7BAAQ,MAAA,LAAMzD,cAAG,AAACyC,WAAczC;IACnC0D,KAAG,EAAA,gCAAA,7BAAQ,MAAA,LAAMzD,cAAG,AAACwC,WAAcxC;AAJzC,AAOE,CAAM,AAAA,AAAIiC,qBAAsB,2DAAA,dAAK,AAAA,AAAI/G;;AACzC,CAAM,AAAA,AAAI+G,sBAAuB,4DAAA,fAAK,AAAA,AAAI/G;;AAG1C,IAAMwI,KAAG,CAAGF,KAAG,AAAA,AAAItI;IACbyI,KAAG,CAAGF,KAAG,AAAA,AAAIvI;AADnB,AAGE,CAAM,AAAA,AAAI+G,yBAA0B,CAAA,6DAAA,uDAAA,3DAAkByB,uDAAUC;;AAGhE,oBAAA,pBAAe1B,6BAAgByB;;AAC/B,2BAAA,pBAAezB,6BAAgB0B;WA9D3D,6DAAA,saAAA,4DAAA,/YAiEe,AAACC,gCACC,uBAAA,2CAAA,kDAAA,2CAAA,uDAAA,KAAA,yDAAA,pRAAC3I;AArErC,AAAA;AAAA,AAyEG,OAAQiF;;GA3Ef,mFA4EGQ;;AA3FP,OAAA3D,+BA6FI,iBAAA7D,qBAAuB,qDAAA,mFAAA,8DAAA,tMAACwJ,+CAAOjC;AAA/B,AAAA,oBAAAvH;AAAA,AAAA,kBAAAA,dAAW2K;AAAX,AACE,IAAAC,aAAsB,AAAA,8FAAapD;IAAnCoD,iBAAA,AAAA/H,4BAAA+H;YAAA,AAAA9H,4CAAA8H,eAAA,nEAAcjD;AAAd,AAAA,0FAAA,mHAAA,2CAAA,4DAAA,mEAAA,wEAAA,4EAAA,hOAEqB3C,gEACA2F,8EACAhD,mEACAC,2FACAA;;AAPvB;;;GA7FJ,KAAA;AAsGA,qEAAA,AAAAnI,oBAAAY,oBAAA,7GAAU4K,wHACHlL,OAAOmL,SAASC;AADvB,AAAA,AAAA,OAAApK,6BAAA,MAAA,aAAA,wBAAA,CAAA,AAAAiC,mDAAA,iBAAAC,qBAAA,yDAAA4H;AAAA,AAAA,YAAA1H,kBAAA,KAAA;AAAA,AAAA,IAAA0H,eAAAA;;AAAA,AAAA,IAAA7K,qBAAA,AAAArB,cAAAkM;AAAA,AAAA,GAAA7K;AAAA,AAAA,IAAA6K,eAAA7K;AAAA,AAAA,GAAA,AAAAoD,6BAAAyH;AAAA,IAAAxH,kBAopEmD,AAAAiQ,sBAAAzI;IAppEnDvH,qBAAA,AAAAC,gBAAAF;IAAAyH,WAAA,AAAArH,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAyH,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAzH;AAAA,SAAA,AAAAK,eAAAN,gBAAA0H,pCAISvD;AAJT,AAAA,AAAA,AAAA5D,uBAAAkH,SAAA,iBAKWvD,QAAM,qDAAA,mFAAA,sEAAA,9MAAC8D,kDAAU7D;kBAAX4D;AAAA,AAA2B,6DAAAA,tDAACE,+CAA2BvL;;;AALxE,AAMO,OAACwL,kBACC,kBAAI,kDAAA,mFAAA,yDAAA,9LAAC/B,+CAAOhC,+MACV,AAACa,6DAA0BtI,OAAOwH,MAAMC,GAAG2D,KAC3C,AAAC7D,8DAA2BvH,OAAOwH,MAAMC,GAAG2D,MAC9C,AAAA,gFAAK3D;;;AAVd,eAAA,CAAAuD,WAAA;;;;AAAA;;;;;AAAA,OAAAjH,qBAAA,AAAAC,gBAAA+G,UAAA,AAAAE,+CAAA,AAAA/G,qBAAA4G;;AAAA,OAAA/G,qBAAA,AAAAC,gBAAA+G,UAAA;;;AAAA,SAAA,AAAA5G,gBAAA2G,rBAISrD;AAJT,AAAA,OAAArD,eAAA,iBAKWoD,QAAM,qDAAA,mFAAA,sEAAA,9MAAC8D,kDAAU7D;kBAAX4D;AAAA,AAA2B,6DAAAA,tDAACE,+CAA2BvL;;;AALxE,AAMO,OAACwL,kBACC,kBAAI,kDAAA,mFAAA,yDAAA,9LAAC/B,+CAAOhC,+MACV,AAACa,6DAA0BtI,OAAOwH,MAAMC,GAAG2D,KAC3C,AAAC7D,8DAA2BvH,OAAOwH,MAAMC,GAAG2D,MAC9C,AAAA,gFAAK3D;KAVd,AAAAwD,+CAAA,AAAA5G,eAAAyG;;;AAAA;;;;GAAA,KAAA;;AAAA,AAAA,OAAA5H,mBAIYiI;;GAJZ,KAAA;AAaA,kEAAA,AAAAzL,oBAAAY,oBAAA,kBAAAmL,5HAAoCO,qHAC7BhM;AADP,AAAA,IAAA0L,aAAAD;IAAAC,iBAAA,AAAA5I,4BAAA4I;yBAAA,AAAA3I,4CAAA2I,eAAA,hFACsBhE;AADtB,AAAA,AAAA,IAGYuE,aAAW,AAAA,AAAIjM;IACfkM,SAAO,AAAalM;IACxBiF,WAAI,iBAAA,jBAAC9D;IACLgL,eAAQ,iBAAA,jBAAChL;IACTiL,iBAAU,iBAAA,jBAACjL;IAPnBwK,aASwC,mBAAA,nBAACY;kBATzC,AAAAzD,4CAAA6C,WAAA,IAAA,zEASSU;4BATT,AAAAvD,4CAAA6C,WAAA,IAAA,nFASsBW;IATtBV,aAUoC,mBAAA,nBAACW;gBAVrC,AAAAzD,4CAAA8C,WAAA,IAAA,vEAUSY;0BAVT,AAAA1D,4CAAA8C,WAAA,IAAA,jFAUoBa;IAVpBZ,aAW2B,AAACe,sBAAS5N;QAXrC,AAAA8J,4CAAA+C,WAAA,IAAA,/DAWSa;0BAXT,AAAA5D,4CAAA+C,WAAA,IAAA,jFAWWc;IAEHE,eAAa,WAAS5K;AAAT,AACE,IAAU+G,SAAO,AAAU/G;AAA3B,AACE,oBAAM,iBAAAnB,oBAAK,AAACwF,cACC,0BAAA,1BAAW,AAAa0C;AAD/B,AAAA,GAAAlI;AAEK,sBAAA,fAAUkI;;AAFflI;;;AAAN,AAGE,IAAAA,oBAAKmB;AAAL,AAAA,oBAAAnB;AAAO,IAAAkF,mBAAI,AAAW/D;AAAf,AAAA,oBAAA+D;AAAAA;;AAAA,IAAAA,uBACI,iBAAAlF,wBAAKgM;AAAL,AAAA,oBAAAhM;AAAiB,OAAYmB;;AAA7BnB;;;AADJ,AAAA,oBAAAkF;AAAAA;;AAAA,OAAAvF,gBAEKzB;;;;AAFZ8B;;;AAHF;;;mBAfzB,fAsBQiM;AAtBR,AAsBsB,AACE,2GAAA,wCAAA,lJAACT,sDAAAA,4DAAAA;;AACD,uGAAA,sCAAA,5IAACG,oDAAAA,0DAAAA;;AACD,2CAAA,pCAAC7D,uBAAauD;;IAE9Ba,cAAY,WAAKC,OAAOC;AAAZ,AACE,oBAAMhB;AAAN,AACE,IAAMiB,WAAS,AAACrL,eAAUsK;IACpBe,eAAS,iBAAAnH,mBAAImH;AAAJ,AAAA,oBAAAnH;AAAAA;;AAAa,OAACoH,wBAAW,AAAS,AAAwBlB;;;IACnEQ,QAAE,AAAC9D,uBAAawD,eAAUe;AAFhC,AAAA,kDAAA,iLAAA,hIAIUF,DACF,UAAG,AAAA,mFAAOE,9FACV,+GAAG,AAAcjB,qEACfgB,DACF,UAAG,AAAA,kFAAMC,7FACT,8GAAG,AAAajB;;AAV1B;;;IAYdmB,WAAS,WAAKC,MAAMC;AAAX,AAAA,kDAAA,qDACW,iBAAAhL,kBAAK,AAAA,6EAAI+K;IAAT9K,kBAAgB,AAAA,6EAAI+K;AAApB,AAAA,SAAAhL,kBAAAC,mBAAAD,kBAAAC;KADX,oDAEW,iBAAAD,kBAAK,AAAA,8EAAI+K;IAAT9K,kBAAgB,AAAA,8EAAI+K;AAApB,AAAA,SAAAhL,kBAAAC,mBAAAD,kBAAAC;KAFX,2OAAA,pLAGW,AAACgL,SAAY,CAAG,AAAA,6EAAID,OAAK,AAAA,6EAAID,kEAC7B,AAACE,SAAY,CAAG,AAAA,8EAAID,OAAK,AAAA,8EAAID;;mCA5CzD,WAAAxB,1CA8CQ2B;AA9CR,AA8CiC,iLAAA,1KAACC,yDAAUzB,WAAW,kBAAAH,kBAAA,MAAA;;IAE/C6B,UAAQ,AAACC,oDACC,WAAoB3L;AAApB,AACE,IAAA4L,WAAgB,AAACb,YAAY,AAAS/K,QAAG,AAASA;AAAlD,AAAA,8GAAA4L,0CAAAA,hJAACpB,oDAAAA,8DAAAA;GAFL;AAhDhB,AAqDI,AAAC/K,wDACC;AAAA,AACE,IAAAzB,qBAAgCiM;AAAhC,AAAA,oBAAAjM;AAAA,AAAA,WAAAA,PAA2B6N;AAA3B,AACE,IAAMC,WAAS,WAAoB9L;AAApB,AACE,oBAAI,AAAC4K,aAAa5K;AAChB,AACE,AAAC2G,uBAAauD,aAAQ,AAAUlK;;AAChC,IAAA+L,iBAAkB,AAAChB,YAAY,AAAS/K,QAAG,AAASA;AAApD,AAAA,2GAAA+L,kDAAAA,5JAAC1B,sDAAAA,sEAAAA;;AACD,6BAAA,7BAACmB;;AAED,6BAAA,tBAAmBK,kCAAiBH;;AAGtC,OAACZ;;;IAEdkB,SAAO,WAAoBhM;AAApB,AACE,IAAAhC,yBAAoB,AAAC6B,eAAUqK;AAA/B,AAAA,oBAAAlM;AAAA,AAAA,eAAAA,XAAWiO;AAAX,AACE,IAAMX,YAAI,AAACP,YAAY,AAAS/K,QAAG,AAASA;IACtCkM,YAAI,AAACd,SAAShB,YAAYkB;AADhC,AAGE,GAAI,EAAK,mGAAA,lGAAG,AAAA,qFAAQY,wBACX,qGAAA,pGAAG,AAAA,uFAASA;AAEnB,IAAAlO,+BAAuB,iBAAA,jBAAUiO;AAAjC,AAAA,oBAAAjO;AAAA,AAAA,oBAAAA,hBAAemO;AAAf,AACE,IAAMC,oBAAY,oCAAA,nCAAK,AAAc,AAAWD;IAC1CE,iBAAS,iHAAA,2CAAA,6KAAA,zUAAC/H,uGAAM4H,yGAAW,CAAG,AAAA,kFAAMA,aAAK,AAAaC,8EAC3B,CAAG,AAAA,mFAAOD,aAAK,AAAcC;mBAF9D,2CAAA,6EAAA,uDAAA,iCAAA,/NAGMrF,wHAAkBuF,2JAAyBD;IAC3CE,eAAO,AAACtE,+CAA2BjK,OAAO+I;kBAJhD,2CAAA,yDAAA,lHAMMvE,wGAAU,AAAWvC,0DAAM,AAAWA;eAN5C,2CAAA,kDAAA,KAAA,sEAAA,2EAAA,yDAAA,2CAAA,sDAAA,UAAA,yEAAA,gEAAA,3iBAOMwF,iKACgB4G,gFACAE,uOACwB,AAACnE;AAV/C,AAcE,IAAAoE,iBAAexO;IAAfyO,iBAAsBhH;IAAtBiH,iBAAyBlK;IAAzBmK,iBAAA,2CAAA,6DAAA;AAAA,AAA2C,OAAC5B;;AAA5C,AAAA,qGAAAyB,eAAAC,eAAAC,eAAAC,+CAAAH,eAAAC,eAAAC,eAAAC,7OAACjH,mDAAAA,gHAAAA;;AAWH,uGAAA,uCAAA,7IAACiF,oDAAAA,2DAAAA;;AA1BH;;AA6BA,AAACI;;;AAEL,6BAAA,7BAACU;;AACD,gCAAA,zBAAsBK,qCAAiBH;;AAvCzC;;;AAbf,AAsDE,IAAAiB,iBAAMd;AAAN,AAAA,AAAAc,gCAAA,YACiCb;;AADjC,AAAAa,gCAAA,iBAAA,UAAA,jBAE+BX;;AAF/BW;AAtDF;AAAA,AA2DG,IAAAC,WAAMf;AAAN,AAAA,AAAAe,6BAAA,YACoCd;;AADpC,AAAAc,6BAAA,UAEkCZ;;AAFlCY;;;AA5DL;;GAFJ,mFAiEGxC;;AAtHP,OAAArL,6BAAA,MAAA,4BAAA,kCAAA,CAAA,xDAyHWiE,0EACA,iBAAAnE,oBAAKuL;AAAL,AAAA,oBAAAvL;AAAiB0L;;AAAjB1L;;MA1HX,AAAA,AAAAE,6BAAA,MAAA,SAAA,AAAA+K,qFAAA,eAAA,IAAA,hEA2HiC,AAACsB,SAAShB,YAAYG;GA3HvD,KAAA;AA6HA,oDAAA,AAAA9M,oBAAAY,oBAAA,8CAAAwO,1IAAoCK,uGAC7BxN,GAAO3B,OAAOoP,YAAYC;AADjC,AAAA,IAAAN,aAAAD;IAAAC,iBAAA,AAAAjM,4BAAAiM;0BAAA,AAAAhM,4CAAAgM,eAAA,jFACsDO;AADtD,AAAA,AAAA,IAGYC,MAAI,AAAiB5N;IACrB6N,MAAI,AAAeD;IACvBE,gBAAS,iBAAA,jBAACtO;IALlB6N,aAMoC,mBAAA,2CAAA,uDAAA,KAAA,+DAAA,KAAA,uDAAA,rPAACzC;gBANrC,AAAAzD,4CAAAkG,WAAA,IAAA,vEAMSU;0BANT,AAAA5G,4CAAAkG,WAAA,IAAA,jFAMoBW;IANpBV,aAOsC,AAAC1C,mBAAc6C;iBAPrD,AAAAtG,4CAAAmG,WAAA,IAAA,xEAOSW;2BAPT,AAAA9G,4CAAAmG,WAAA,IAAA,lFAOqBY;IAPrBX,aAQoC,mBAAA,2CAAA,+DAAA,KAAA,yDAAA,KAAA,uDAAA,KAAA,uDAAA,KAAA,6DAAA,rXAAC3C;gBARrC,AAAAzD,4CAAAoG,WAAA,IAAA,vEAQSY;0BART,AAAAhH,4CAAAoG,WAAA,IAAA,jFAQoBa;IAEZrL,sBAAe,oDAAA,pDAACkJ;AAAD,AACG,IAAMoC,WAAS,AAAA,2FAAWF;AAA1B,AACE,IAAAG,iBAAA;AAAA,AAAA,uGAAAA,gDAAAA,tJAACF,oDAAAA,oEAAAA;;AACD,IAAAjP,oBAAK,AAACc,oBAAIoO;AAAV,AAAA,GAAAlP;AAAoB,QAACkP,yCAAAA,2CAAAA;;AAArBlP;;GAHL,mFAIGgP;IAElBpI,qBAAc;mCAAS1H,WAAOyH,GAAGjD,MAAQ4G;AAA3B,AACE,IAAMrC,SAAO,AAACwC,+CAA2BvL,WAAO,AAAA,4FAAWyH;AAA3D,AACE,IAAAyI,WAAgB,AAACpR,8CAAMqR,gBAAM,mDAAA,2CAAA,kEAAA,gEAAA,hOAACC,6JAAkB3I,4DAAWsB,8DAAcvE,cAAO4G;AAAhF,AAAA,8GAAA8E,0CAAAA,hJAACH,oDAAAA,8DAAAA;;yBAFI/P,WAAOyH,GAAGjD;IAAQ4G;;;;EAAAA;;oCAAlBpL,WAAOyH,GAAGjD,MAAQ4G;;;IAAlBpL;;IAAOyH;;IAAGjD;IAAQ4G;0BAAlBpL,WAAOyH,GAAGjD,MAAQ4G;;;;;;IAIzCzG,eAAQ,WAAK8C;AAAL,AAAS,oBAAM,AAAA,gFAAKA;AAAX,AAEE,IAAMmI,uBAAW,AAACS,4CAAwBT;AAA1C,AACE,IAAAU,iBAAiB,AAACC,6CAAKX,qBAAWnI;AAAlC,AAAA,yGAAA6I,iDAAAA,zJAACT,qDAAAA,qEAAAA;;AAEH,IAAA5P,qBAAkB,iBAAAa,oBAAK,AAAC0P,qDAA2B/I;AAAjC,AAAA,oBAAA3G;AACK,OAACyK,+CAA2BvL,OAAO,AAAA,4FAAWyH;;AADnD3G;;;AAAlB,AAAA,oBAAAb;AAAA,AAAA,aAAAA,TAAW8I;AAAX,AAGE,6MAAA,tMAACuB,sDAAkCtK,OAAO,AAAA,+FAAA,AAAAS,gBAAeC,uBACtB+G,QAAO,AAAA,4FAAWsB;;AAJvD;;;AALF;;;IAWjBnE,eAAQ,WAAK6C;AAAL,AACE,IAAMmI,iBAAW,AAACS,4CAAwBT;AAA1C,AACE,IAAA3P,qBAAwB,qDAAA,WAAA0Q,hEAACC;AAAD,AACG,OAACC,6CAAE,AAAA,gFAAK,iBAAAF,jBAACG,oCAAW,AAAA,gFAAKrJ;GAC1B,AAACsJ,kDAAenB;AAF1C,AAAA,oBAAA3P;AAAA,AAAA,IAAAwQ,aAAAxQ;iBAAA,AAAA6I,4CAAA2H,WAAA,IAAA,xEAAYC;AAAZ,AAGE,IAAAM,iBAAiB,kCAAA,lCAAC7G,mBAASyF,kGAAYc,mBAAYjJ;AAAnD,AAAA,yGAAAuJ,iDAAAA,zJAACnB,qDAAAA,qEAAAA;;AACD,OAACoB,0DAAiCxJ;;AAJpC;;;IAMZ5C,eAAQ,WAAK4C;AAAL,AAAS,IAAAxH,qBAAc,AAAA,gFAAKwH;AAAnB,AAAA,oBAAAxH;AAAA,AAAA,SAAAA,LAAWqF;AAAX,AAAwB,IAAA4L,WAAiB,6CAAA,7CAACC,8EAAQ,+CAAA,WAAAC,1DAACC;AAAD,AAAS,OAACR,6CAAEvL,GAAG,AAAA,gFAAA8L;GAASxB;AAAlD,AAAA,gHAAAsB,2CAAAA,nJAACrB,qDAAAA,+DAAAA;;AAAzB;;;AAvCzB,AA0CI,AAACnO,wDACC;AAAA,AACE,oBAAI,AAACI,eAAU2N;AACb,QAACH,oDAAAA,gEAAAA,dAAeM,4CAAAA;;AAChB,4CAAA,rCAAChH,uBAAa6G;;GAJpB,mFAKGG;;AAGH,AAAClO,wDACC;AAAA,AACE,IAAM4P,kBACA,WAAoBrP;AAApB,AACE,IAAoBsP,YAAU,AAACC;IACfC,YAAU,qBAAA,rBAAaF;AADvC,AAGE,oBACE,AAAeA;AACf,IAAAG,WAAA,2CAAA,+DAAA;AAAA,AAAA,8GAAAA,0CAAAA,hJAAC/B,oDAAAA,8DAAAA;;AAFH,oBAIE,iBAAA7O,oBAAK2Q;AAAL,AAAA,oBAAA3Q;AAAe,OAAWa,YAAG,AAA2B8P;;AAAxD3Q;;;AACA,IAAA6Q,WAAA,2CAAA,+DAAA,MAAA,iEAAA,uDAAA,2CAAA,yDAAA,rKAAyCF,2JAAqB,AAAWxP,0DAAM,AAAWA;AAA1F,AAAA,8GAAA0P,0CAAAA,hJAAChC,oDAAAA,8DAAAA;;AALH;;;;IAOJiC,eACA;AAAA,AACE,IAAMrJ,cAAO,yBAAA,zBAACsJ;eAAd,XACMC;AADN,AACgB,0CAAA,nCAACC,uBAAQxJ;;AADzB,AAGE,0BAAA,1BAACxD,4CAA+C+M;;AAChD,iCAAA,1BAAC/M,oCAC6B,WAAS9C;AAAT,AACE,IAAAnB,0BAAA,AAAAL,gBAAM8H;AAAN,AAAA,oBAAAzH;AAAa,AAACwQ,gBAAgBrP;;AAA9BnB;;AACA,oCAAA,7BAACkE,+CAAkD8M;GAHnF,UAAA;;IAMJE,YACA,AAACC,gDAAQxQ,uDAA8BzB;AAzB7C,AA6BE,IAAAkS,iBAAMvQ;AAAN,AAAA,AAAAuQ,gCAAA,YACiCN;;AADjCM;AAGA,IAAAC,iBAAM3C;AAAN,AAAA,AAAA2C,gCAAA,SAC8BH;;AAD9BG;AAhCF;AAAA,AAoCG,AAGE,IAAAC,iBAAMzQ;AAAN,AAAA,AAAAyQ,mCAAA,YACoCR;;AADpCQ;AAGA,IAAAC,WAAM7C;AAAN,AAAA,AAAA6C,6BAAA,SACiCL;;AADjCK;;GA5CT,mFA+CGrS;;AAGH,AAAC0B,wDACC;AAAA,AACE,IAAAzB,qBAAyB,iBAAAa,oBAAK,AAACwF,cAAI,AAAA,6FAAYoJ;AAAtB,AAAA,GAAA5O;AAAkC,OAAA,qFAAQ4O;;AAA1C5O;;;AAAzB,AAAA,oBAAAb;AAAA,AAAA,gBAAAA,ZAAewR;AAAf,AACE,IAAUjN,QAAM,AAAA,qFAAQkL;YAAxB,RACM4C;AADN,AACa,IAAArS,yBAAqB,AAACuS,kDAA8Bf;AAApD,AAAA,oBAAAxR;AAAA,AAAA,gBAAAA,ZAAWsS;AAAX,AACE,IAAAtS,yBAAqB,AAACyS,2DAAoCjB,UAAU,AAAA,yFAAUc;AAA9E,AAAA,oBAAAtS;AAAA,AAAA,gBAAAA,ZAAWwS;AAAX,AACE,IAAME,OAAK,8GAAA,7GAAK,AAAA,gGAAcJ;IACpBK,WAAS,AAACC,gDAA4BJ;aADhD,2CAAA,uEAAA,iEAAA,5LAEM1J,kHAAkB6J,gEAAgBH,8DAAgBE;IAClDpE,SAAO,AAACtE,+CAA2BjK,OAAO+I;AAHhD,AAAA,kDAAA,kDAAA,KAAA,yDAAA,qEAAA,yDAAA,2CAAA,mFAAA,gEAAA,jUAYe4J,mEACApE,iKACO,AAAWkD;;AAfnC;;;AADF;;;AADb,AAqBE,IAAAqB,WAAA,2CAAA,qEAAA,iEAAA,vEAA4BR,6DACAb,iEACAjN;AAF5B,AAAA,8GAAAsO,0CAAAA,hJAAC/C,oDAAAA,8DAAAA;;AAtBL;;GAFJ,mFA4BG,AAAA,qFAAQL;;AAGX,AAAChO,wDACC;AAAA,AAGE,IAAAzB,2BAAuB,iBAAAa,oBAAK,AAACkS,4BAAYpD;AAAlB,AAAA,GAAA9O;AAA8B,0BAAA,nBAACmS,uEAAerD;;AAA9C9O;;;AAAvB,AAAA,oBAAAb;AAAA,AAAA,wBAAAA,pBAAW8S;AAAX,AACE,IAAAG,mBAAA,AAAAtU,cAAayQ;IAAb8D,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,iBAAA,AAAAD,wDAAAE,rEAAQV;AAAR,AAAA,AACE,IAAA1S,+BAAwC,AAACyT,sDAA6B1T,OAAO2S;AAA7E,AAAA,oBAAA1S;AAAA,AAAA,sBAAAA,lBAA8BwT;AAA9B,AACE,IAAMtI,iBAAS,AAACpI,4CAAIgQ,kBAAYJ;AAAhC,AAEE,AAACgB,eAEC,yFAAA,2CAAA,0FAAA,9NAACzI,mEACClL,OAAOmL,iIAAyBzD,8EACA9C,sBAElC6O;;AATN;;AADF;AAAA,eAAAP;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAApT,+BAAA,AAAArB,cAAAsU;AAAA,AAAA,GAAAjT;AAAA,AAAA,IAAAiT,uBAAAjT;AAAA,AAAA,GAAA,AAAAoD,6BAAA6P;AAAA,IAAAI,wBAAA,AAAAC,sBAAAL;AAAA,AAAA,eAAA,AAAAhP,qBAAAgP;eAAAI;eAAA,AAAA9P,gBAAA8P;eAAA;;;;;;;AAAA,iBAAA,AAAAnP,gBAAA+O,7BAAQP;AAAR,AAAA,AACE,IAAA1S,+BAAwC,AAACyT,sDAA6B1T,OAAO2S;AAA7E,AAAA,oBAAA1S;AAAA,AAAA,sBAAAA,lBAA8BwT;AAA9B,AACE,IAAMtI,iBAAS,AAACpI,4CAAIgQ,kBAAYJ;AAAhC,AAEE,AAACgB,eAEC,yFAAA,2CAAA,0FAAA,9NAACzI,mEACClL,OAAOmL,iIAAyBzD,8EACA9C,sBAElC6O;;AATN;;AADF;AAAA,eAAA,AAAAD,eAAAN;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AADF;;AAHF;AAAA,AAAA;;GADF,mFAmBG7D,aAAaO;;AAtJpB,OAAA5O,6BAAA,MAAA,aAAA,kCAAA,CAAA,2HAAA,0eAAA,nlBA2JW,AAAA,6FAAY8O,YAChB,AAAC8D,sBACC,4EAAA,2CAAA,4FAAA,wEAAA,wEAAA,nWAACtP,2DACCtE,OAAO8P,6HAEUpL,+EACAC,wEACAE,wEACAD,sBAEnB,iBAAA,jBAAgBjD,sCAapB,AAAC/B,wDAAqBI,QACtB,AAACO,mDAAgBP,QAGjB,uEAAA,2CAAA,4FAAA,0FAAA,xSAACgM,gEACChM,0HACiB0E,2FACAgD,8EACA/C;GA1LxB,KAAA;AA6LA,kDAAA,AAAAjF,oBAAAY,oBAAA,yBAAAuT,nHAAUO,qGACHC,QAAQC;AADf,AAAA,IAAAR,aAAAD;IAAAC,iBAAA,AAAAhR,4BAAAgR;0BAAA,AAAA/Q,4CAAA+Q,eAAA,jFAC6BS;yBAD7B,AAAAxR,4CAAA+Q,eAAA,hFAC4CU;QAD5C,AAAAzR,4CAAA+Q,eAAA,/DAC0DW;AAD1D,AAAA,AAAA,IAGQC,iBAAU,iBAAA,jBAACvT;IAHnB4S,aAIwC,AAACnH,sBAASxN;yBAJlD,AAAA0J,4CAAAiL,WAAA,IAAA,hFAISY;6BAJT,AAAA7L,4CAAAiL,WAAA,IAAA,pFAIsBa;AAJtB,AAMI,AAAClT,wDACC;AAAA,AACE,IAAMmT,WAAS,AAAC/S,eAAU4S;IACpB5P,KAAG,WAAS7C;AAAT,AACE,IAAAnB,oBAAK,qDAAA,rDAAC+P,6CAAE,AAAA5O;AAAR,AAAA,GAAAnB;AAAoB,QAACyT,oDAAAA,sDAAAA;;AAArBzT;;;AAFX,AAIE,WAAA,XAACV;AAAD,AAAgB,OAAQyU;;;AACxB,0BAAA,1BAAmBA,kCAAiB/P;;AALtC;AAAA,AAMG,oCAAA,7BAAsB+P,qCAAiB/P;;GAR9C;;AAWA,AAACpD,wDACC;AAAA,AACE,4BAAA,rBAACoT,6CAAoC,AAACC,mBAAQJ;GAFlD,mFAGGA;;AApBP,OAAA3T,6BAAA,MAAA,WAuBgB,WAAoBiB;AAApB,AACE,IAAM+G,SAAO,AAAU/G;AAAvB,AACE,oBAAU,AAAW,AAACH,eAAU4S,yBAAW1L;AAA3C;;AAAA,AACE,QAACuL,oDAAAA,sDAAAA;;eA1BvB,mDAAA,CAAA,AAAAvT,6BAAA,MAAA,iCAAA,iBAAA,gDAAA,CAAA,iBAAAgT,7GA6BkBU,0HAIX,AAACM,4CAAI,WAAK/N;AAAL,AAAA,0FAAA,4HAAA,2CAAA,uDAAA,2DAAA,6DAAA,3HAESA,2DAAUA;AAFnB,AAEiC,AAAI,CAACuN,mDAAAA,uDAAAA,NAAcvN,mCAAAA;;AAAI,QAACsN,oDAAAA,sDAAAA;WACtD,0DAAA,8DAAA,tHAAM,AAAC1D,6CAAEyD,MAAMrN,KAAI,AAACgO;GAH5B,mFAAA,QAAA,OAAA;AAjCP,AAAA,OAAAjU,6BAAA,MAAA,EAAA,AAAAiT,qBAAAD,aAAA,AAAAjI,wCAAA,AAAAmI,2HAAA,2CAAA,wDAAA,mFAAA,gCAAA,+BAAAF,kBAAA,aAAA,+CAAA,EAAA,AAAAC,qBAAAD,aAAA,KAAA,CAAA,AAAAlQ,+BAAAkQ;KAAA,AAAAhT,6BAAA,MAAA,aAAA,8CAAA,CAAA,iBAAAmT,aAwCe,mEAAA,0FAAA,5JAACM,kCAAAA,8GAAAA;AAxChB,AAAA,OAAAzT,6BAAA,QAAA,EAAA,AAAAiT,qBAAAE,aAAA,AAAApI,wCAAAoI,YAAA,MAAA,EAAA,AAAAF,qBAAAE,aAAA,KAAA,CAAA,AAAArQ,+BAAAqQ;KAAA,AAAArQ,+BAyCO,oEAAA,pEAACoR,iDAAUP;AAAX,AAAyB,IAAAQ,WAAkB,AAAC7O,cAAIqO;AAAvB,AAAA,oHAAAQ,6CAAAA,zJAACP,uDAAAA,iEAAAA;GAA1B;GAzCP,KAAA;AA4CA,sDAAA,AAAAlV,oBAAAY,oBAAA,kBAAA8U,SAAAC,zHAAUO,yGACH5V;AADP,AAAA,IAAAsV,aAAAF;IAAAE,iBAAA,AAAAxS,4BAAAwS;YAAA,AAAAvS,4CAAAuS,eAAA,nEAEWO;YAFX,AAAA9S,4CAAAuS,eAAA,nEAEiBQ;aAFjB,AAAA/S,4CAAAuS,eAAA,pEAEuBS;WAFvB,AAAAhT,4CAAAuS,eAAA,lEAE8BU;eAF9B,AAAAjT,4CAAAuS,eAAA,tEAEmCW;IAFnCV,aAAAF;IAAAE,iBAAA,AAAAzS,4BAAAyS;UAAAA,NAGkCnK;6BAHlC,AAAArI,4CAAAwS,eAAA,pFAGWW;AAHX,AAAA,AAAA,IAIQC,mBAAW,AAACvX,cAAIkX;IAChBM,kBAAU,AAACrB,mBAAQkB;AAL3B,AAAA,OAAAjV,6BAAA,MAAA,aAAA,AAAAwU,2BAAA,mFAAA,uXAAA,CAAA,AAAAxU,6BAAA,MAAA,aAAA,SAAA,CAAA,AAAAA,6BAAA,IAAA,QAAA,5bAQa,yBAAA,mFAAA,2CAAA,sFAAA,7OAACqV,4NAAgCF,iFAAsBC,iLAIjD,AAACE,eAAkB,AAACtU,uBAAUgU,iBAC9B,WAAoB/T;AAApB,AACE,IAAM+G,SAAO,AAAU/G;AAAvB,AACE,oBAAI,eAAA,fAAU+G;AACZ,IAAMuN,OAAK,4CAAA,WAAAC,vDAACxB;AAAD,AAAM,oBAAI,kBAAA,MAAAwB,xBAACC;AAAkB,QAAAD,mBAAA;;AAAQ,uDAAAA,hDAAC5P;;GACjC,0DAAA,1DAAC8P,mDAAaX;AAD9B,AAEE,AAAiB9T;;AACjB,IAAA0U,WAAmBJ;IAAnBK,WAAA,2CAAA,2DAAmC,GAAKR;AAAxC,AAAA,oHAAAO,SAAAC,6CAAAD,SAAAC,3KAACV,uDAAAA,0EAAAA;;AACH,IAAAjW,qBAAoB,iBAAAa,oBAAKkV;AAAL,AAAA,oBAAAlV;AAAU,OAACkB,uBAAUgU;;AAArBlV;;;AAApB,AAAA,oBAAAb;AAAA,AAAA,eAAAA,XAAe+V;AAAf,AACE,OAAkB,AAAehW,mCAAQgW;;AAD3C;;;IApBzB,CAAA,iBAAAP,aAuBiBoB;AAvBjB,AAAA,OAAA7V,6BAAA,IAAA,EAAA,AAAAiT,qBAAAwB,aAAA,AAAA1J,wCAAA,AAAAmI,2HAAA,2CAAA,wDAAA,mFAAA,wBAAAuB,kBAAA,aAAA,UAAA,EAAA,AAAAxB,qBAAAwB,aAAA,KAAA,CAAA,AAAA3R,+BAAA2R;KAAA,iBAAAC,aAwBcG;AAxBd,AAAA,OAAA7U,6BAAA,OAAA,EAAA,AAAAiT,qBAAAyB,aAAA,AAAA3J,wCAAA2J,YAAA,MAAA,EAAA,AAAAzB,qBAAAyB,aAAA,KAAA,CAAA,AAAA5R,+BAAA4R;SAAA,6CAAA,AAAA,iBAAAC,5DA2BW,EAAKQ,sBAAWC,iDAEnB,AAACnO,oDACC,WAAKC,IAAI4O;AAAT,AACE,IAAMf,aAAO,qDAAA,RAAKA,8DAAiB7N;AAAnC,AACE,OAACsD,kBACC,iBAAAuL,WACE/W;IADFgX,WAEE,2GAAA,2CAAA,tJAACzQ,uGAAMuQ,wGAAaf;IAFtBkB,WAGE7L;AAHF,AAAA,8KAAA2L,SAAAC,SAAAC,0EAAAF,SAAAC,SAAAC,pRAACrB,oFAAAA,gHAAAA;KAGMG;GAAUD;AApCjC,AAAA,OAAA9U,6BAAA,MAAA,EAAA,AAAAiT,qBAAA0B,aAAA,AAAA5J,wCAAA,AAAAmI,2HAAA,2CAAA,wDAAA,mFAAA,2BAAAyB,kBAAA,aAAA,aAAA,EAAA,AAAA1B,qBAAA0B,aAAA,KAAA,CAAA,AAAA7R,+BAAA6R;KAAA;GAAA,KAAA;AAsCA,iDAAA,AAAAjW,oBAAAY,oBAAA,zFAAU4W,oGACHlX,OAAOmX,eAASC;AADvB,AAAA,AAAA,OAAAtT,+BAEE,iBAAA7D,qBAAuB,iBAAAa,oBAAKd;AAAL,AAAA,oBAAAc;AAAY,OAAed;;AAA3Bc;;;AAAvB,AAAA,oBAAAb;AAAA,AAAA,cAAAA,VAAeoX;AAAf,AACE,IAAME,mBAAY,iBAAA,jBAACpW;IAAnBmW,aACwC,mBAAA,nBAAC/K;mBADzC,AAAAzD,4CAAAwO,WAAA,IAAA,1EACOE;6BADP,AAAA1O,4CAAAwO,WAAA,IAAA,pFACqBG;IACfvB,yBAAkB,AAACtI,oDACC,WAAK2I,KAAKmB;AAAV,AACE,IAAAC,WAAmB,AAACrM,kDAAUkM,aAAajB,KAAKpG,gBAAMuH;AAAtD,AAAA,oHAAAC,6CAAAA,zJAACF,uDAAAA,iEAAAA;GAFL,mFAGGD;AAL3B,AAOE,AAAC9V,wDACC;AAAA,AACE,OAACkW,kDACA,AAAAC,gDAAA,KAAA,WAAAC;AAAA,AAAA,OAAAD,qEAAA,WAAYG,hCAAK,AAAaX;AAA9B,AAAA,OAAAU,2BAAA;AAEO,IAAA9X,+BAAgB,iBAAAa,oBAAKkX;AAAL,AAAA,oBAAAlX;AAAU,OAAMkX,SAAK,WAAS/Q;AAAT,AACE,CAAM,AAAQA,UAAI,AAAA,AAAIjH,sCAAwC,AAAQiH;;AACtE,eAAA,dAAM,AAAYA;;AAClBA;;;AAHvBnG;;;AAAhB,AAAA,oBAAAb;AAAA,AAAA,qBAAAA,jBAAW+X;AAAX,AAAA;AAAA;;AAIA,IAAAC,WAAmB,AAAC7K,wBAAW4K;AAA/B,AAAA,oHAAAC,6CAAAA,zJAACR,uDAAAA,iEAAAA;;;;IAEP,WAAKxV;AAAL,AACE,qBAAA,dAACiW,qCAAwCjW;;GAZjD,mFAaGoV;;AAEH,AAAC3V,wDACC;AAAA,AACE,IAAMyW,aAAW,AAACrW,eAAUyV;IACtBzS,KAAG,WAAS7C;AAAT,AACE,IAAAnB,oBAAK,qDAAA,rDAAC+P,6CAAE,AAAA5O;AAAR,AAAA,GAAAnB;AAAoB,0GAAA,qCAAA,vIAACsW,kDAAAA,yDAAAA;;AAArBtW;;;AAFX,AAIE,WAAA,XAACV;AAAD,AAAgB,OAAQ+X;;;AACxB,4BAAA,5BAAmBA,oCAAmBrT;;AALxC;AAAA,AAMG,sCAAA,/BAAsBqT,uCAAmBrT;;GARhD;;AAtBF,0FAAA,4IAAA,2CAAA,2SAAA,nPAkCc,yBAAA,mFAAA,2CAAA,vJAACuR,mNAA2Bc,6FAC5B,WAAoBlV;AAApB,AACE,IAAM+G,SAAO,AAAU/G;AAAvB,AACE,oBAAU,AAAW,AAACH,eAAUyV,2BAAavO;AAA7C;;AAAA,AACE,0GAAA,qCAAA,vIAACoO,kDAAAA,yDAAAA;;WAtCrB,mFAAA,gIAAA,2CAAA,oEAAA,8DAAA,/EAyCgBG,4FAEZ,+BAAA,mFAAA,hHAAI,AAAC3Y,cAAI4Y,6JAEN,AAACvP,oDAAY,WAAKC,IAAI4O;AAAT,AACE,OAACtL,kBACC,4RAAA,2CAAA,vUAACoK,oDACC5V,OACA,2GAAA,2CAAA,tJAACuG,uGAAMuQ,wGAAa5O,6IACAgO,gCACtBhO;yBARpB,mFAAA,6EAAA,tLASgBsP;;AArDtB;;;GAFF,KAAA;AA0DA,qDAAA,AAAA9X,oBAAAY,oBAAA,7FAAUsY,wGACPC,KAAKC;AADR,AAAA,AAAA,OAAA9X,6BAAA,MAAA,MAAA,0BAAA,4BAAA,CAAA,AAAAA,6BAAA,MAAA,aAAA,cAAA,CAAA,AAAAiC,mDAAA,iBAAAC,qBAAA,yDAAAkV;AAAA,AAAA,YAAAhV,kBAAA,KAAA;AAAA,AAAA,IAAAgV,eAAAA;;AAAA,AAAA,IAAAnY,qBAAA,AAAArB,cAAAwZ;AAAA,AAAA,GAAAnY;AAAA,AAAA,IAAAmY,eAAAnY;AAAA,AAAA,GAAA,AAAAoD,6BAAA+U;AAAA,IAAA9U,kBAisDmD,AAAAiQ,sBAAA6E;IAjsDnD7U,qBAAA,AAAAC,gBAAAF;IAAA+U,WAAA,AAAA3U,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAA+U,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAA/U;AAAA,IAAAgV,aAAA,AAAA3U,eAAAN,gBAAAgV;QAAA,AAAAxP,4CAAAyP,WAAA,IAAA,/DAIWQ;QAJX,AAAAjQ,4CAAAyP,WAAA,IAAA,/DAIaS;AAJb,AAAA,IAKgBD,QAAE,wJAAA,vJAAK,6IAAA,MAAA,nJAACE,6BAAqB,AAACC,wGAAOH;AALrD,AAAA,AAAA,AAAAlV,uBAAAwU,SAAA,AAAArX,6BAAA,IAAA,cAAA,CAAA,iBAAAwX,zBAMgBO,sCAAYA;AAN5B,AAAA,OAAA/X,6BAAA,SAAA,EAAA,AAAAiT,qBAAAuE,aAAA,AAAAzM,wCAAAyM,YAAA,MAAA,EAAA,AAAAvE,qBAAAuE,aAAA,KAAA,CAAAA;KAAA,KAAA,AAAAxX,6BAAA,IAAA,KAAA,CAMwC,AAACkY,wGAAOF;;AANhD,eAAA,CAAAV,WAAA;;;;AAAA;;;;;AAAA,OAAAvU,qBAAA,AAAAC,gBAAAqU,UAAA,AAAAI,+CAAA,AAAAvU,qBAAAkU;;AAAA,OAAArU,qBAAA,AAAAC,gBAAAqU,UAAA;;;AAAA,IAAAK,aAAA,AAAAvU,gBAAAiU;QAAA,AAAAtP,4CAAA4P,WAAA,IAAA,/DAIWK;QAJX,AAAAjQ,4CAAA4P,WAAA,IAAA,/DAIaM;AAJb,AAAA,IAKgBD,QAAE,wJAAA,vJAAK,6IAAA,MAAA,nJAACE,6BAAqB,AAACC,wGAAOH;AALrD,AAAA,OAAA3U,eAAA,AAAApD,6BAAA,IAAA,cAAA,CAAA,iBAAAwX,zBAMgBO,sCAAYA;AAN5B,AAAA,OAAA/X,6BAAA,SAAA,EAAA,AAAAiT,qBAAAuE,aAAA,AAAAzM,wCAAAyM,YAAA,MAAA,EAAA,AAAAvE,qBAAAuE,aAAA,KAAA,CAAAA;KAAA,KAAA,AAAAxX,6BAAA,IAAA,KAAA,qHAAA,AAAAyX,+CAAA,AAAApU,eAAA+T,lLAMwC,AAACc,wGAAOF;;;AANhD;;;;GAAA,KAAA;;AAAA,AAAA,OAAA9V,mBAIgB2V;QAJhB,iBAAAF,aASI,wDAAA,6DAAA,rHAACQ,kLAEU;AAAA,AACE,IAAMC,OAAK,AAAa,uBAAA,vBAACC;IACnBD,WAAK,4BAAA,UAAA,tCAACE,uBAAeF;AAD3B,AAEE,AAACrT,oEAAwBqT;;AACzB,uEAAA,UAAA,jFAACG;;AACD,QAACT,+CAAAA,iDAAAA;;AAhBpB,AAAA,OAAA9X,6BAAA,MAAA,EAAA,AAAAiT,qBAAA0E,aAAA,AAAA5M,wCAAA,AAAAmI,2HAAA,2CAAA,wDAAA,mFAAA,OAAA,eAAA,iBAAA,OAAA,wBAAAyE,kBAAA,aAAA,gDAAA,EAAA,AAAA1E,qBAAA0E,aAAA,KAAA,CAAA,AAAA7U,+BAAA6U;;GAAA,KAAA;AAkBA,2DAAA,3DAAMa,8HACHX;AADH,AAEE,kBAAKC;AAAL,AACE,OAACF,mDAAgBC,KAAKC;;;AAE1B,iDAAA,AAAApZ,oBAAAY,oBAAA,zFAAoC2Z,oGAC7Bja;AADP,AAAA,AAAA,IAAAyZ,aAEoC,AAAC7M,sBAAS5N;uBAF9C,AAAA8J,4CAAA2Q,WAAA,IAAA,9EAESS;0BAFT,AAAApR,4CAAA2Q,WAAA,IAAA,jFAEoB9M;IAFpB+M,aAGiD,mBAAA,nBAACnN;6BAHlD,AAAAzD,4CAAA4Q,WAAA,IAAA,pFAGSS;gCAHT,AAAArR,4CAAA4Q,WAAA,IAAA,vFAG2BU;IAH3BT,aAI+C,AAAC/M,sBAAS1N;4BAJzD,AAAA4J,4CAAA6Q,WAAA,IAAA,nFAISU;+BAJT,AAAAvR,4CAAA6Q,WAAA,IAAA,tFAI0BW;IAJ1BV,aAKmD,mBAAA,nBAACrN;8BALpD,AAAAzD,4CAAA8Q,WAAA,IAAA,rFAKSW;iCALT,AAAAzR,4CAAA8Q,WAAA,IAAA,xFAK4BY;IACpBC,iBAAU,iBAAA,jBAACtZ;IANnB0Y,aAOkD,mBAAA,nBAACtN;uBAPnD,AAAAzD,4CAAA+Q,WAAA,IAAA,9EAOSa;iCAPT,AAAA5R,4CAAA+Q,WAAA,IAAA,xFAO2Bc;IAP3Bb,aAQ8C,mBAAA,nBAACvN;qBAR/C,AAAAzD,4CAAAgR,WAAA,IAAA,5EAQSc;+BART,AAAA9R,4CAAAgR,WAAA,IAAA,tFAQyBe;IARzBd,aAS0C,AAACxN,mBAAc,iBAAAvG,mBAAI,qBAAA,rBAACzG;AAAL,AAAA,oBAAAyG;AAAAA;;AAAA;;;mBATzD,AAAA8C,4CAAAiR,WAAA,IAAA,1EASSe;6BATT,AAAAhS,4CAAAiR,WAAA,IAAA,pFASuBgB;AATvB,AAYI,AAACrZ,wDACC;AAAA,AACE,IAAAzB,qBAAkB,wBAAA,xBAACqC;AAAnB,AAAA,oBAAArC;AAAA,AAAA,SAAAA,LAAe0B;AAAf,AACE,CAAM,AAAG,AAAGA,mBAAqBmZ;;AACjC,qBAAA,rBAAChG,2CAAkCgG;;AAFrC;AAAA,AAGG,yBAAA,XAAW,AAAGnZ;;;AAHjB;;GAFJ,mFAMGmZ;;AAGH,AAACpZ,wDACC;AAAA,AACE,IAAAzB,qBAAiB,iBAAAa,oBAAKd;AAAL,AAAA,oBAAAc;AAAY,OAAY,AAAed;;AAAvCc;;;AAAjB,AAAA,oBAAAb;AAAA,AAAA,YAAAA,RAAW+a;AAAX,AACE,IAAUC,MAAI,AAAYjb;IACpBkb,UAAQ,WAASC;AAAT,AACE,IAAMC,MAAI,AAAcD;AAAxB,AACE,QAACR,2DAAAA,gEAAAA,PAAsBS,4CAAAA;;AAHzC,AAKE,CAACP,yDAAAA,gEAAAA,TAAoBG,4CAAAA;;AACrB,IAAAK,iBAAuB,AAAqBrb;AAA5C,AAAA,qHAAAqb,uDAAAA,3KAACV,2DAAAA,2EAAAA;;AACD,OAAA,PAAKM,sBAAmBC;;AAP1B;AAAA,AAQG,eAAA,RAAMD,uBAAmBC;;;AAT9B;;GAFJ,mFAYGlb;;AAEH,AAAC0B,wDACC;AAAA,AACE,IAAU4Z,QAAM,AAACxZ,eAAU2Y;AAA3B,AACE,QAAM,AAAGa,cAAcZ;GAH7B,mFAIGA;;AAvCP,OAAA1Z,6BAAA,MAAA,aAAA,2BAAA,CAAA,AAAAA,6BAAA,MAAA,aAAA,SAAA,CAAA,AAAAA,6BAAA,MAAA,aAAA,kBAAA,CAAA,AAAAA,6BAAA,IAAA,SAAA,0BAAA;AAAA,AAgDoB,IAAAua,WAAuB,AAACjV,cAAIiU;AAA5B,AAAA,4HAAAgB,iDAAAA,rKAACf,2DAAAA,qEAAAA;eAhDrB,UAAA,CAAA,AAAA1W,0GAAA,AAAA9C,6BAAA,IAAA,mHAAA,/NAiDQ,kEAAA,lEAACwa,qHAIU,CAAA,iFAAA,9DAAwB,4CAAA,SAAA,nCAAIC;AArD/C,AAuDoB,IAAAC,WAAgB,AAACpV,cAAI4T;AAArB,AAAA,8GAAAwB,0CAAAA,hJAAC/O,oDAAAA,8DAAAA;eAvDrB,AAAA6I,2BAAA,mFAAA,yEAAA,CAAA,AAAA1R,wGAAA,AAAA9C,6BAAA,IAAA,SAAA,2BAAA,9OAsDmB,oCAAA,AAAA,YAAA,9BAAMkZ,8EAEjB,gEAAA,hEAACyB;AAxDT,AA6DoB,IAAAC,WAAqB,AAACtV,cAAI+T;AAA1B,AAAA,wHAAAuB,+CAAAA,/JAACtB,yDAAAA,mEAAAA;eA7DrB,AAAA9E,2BAAA,mFAAA,8EAAA,CAAA,AAAA1R,0GAAA,AAAA9C,6BAAA,IAAA,SAAA,uIAAA,UAAA,CAAA,AAAA8C,uGAAA,AAAA9C,6BAAA,IAAA,SAAA,qIAAA,UAAA,CAAA,AAAA8C,sGAAA,AAAA9C,6BAAA,IAAA,SAAA,oBAAA,jzBA4DmB,yCAAA,AAAA,YAAA,nCAAMqZ,mFAEjB,kEAAA,lEAACwB,0IAKU,AAAC5J,gDAAQ6J,8CAA0B9b,8DAC9C,+DAAA,/DAAC+b,sIAIU,AAAC9J,gDAAQ+J,6CAAyBhc,8DAC7C,8DAAA,9DAACic;AAzET,AA6EoB,IAAAC,WAAsB,AAAC5V,cAAI6T;AAA3B,AAAA,0HAAA+B,gDAAAA,lKAAC9B,0DAAAA,oEAAAA;eA7ErB,UAAA,CAAA,AAAAtW,wGAAA,AAAA9C,6BAAA,IAAA,SAAA,0BAAA,7IA8EQ,gEAAA,hEAACmb;AA9ET,AAmFoB,OAAAtE,gDAAA,KAAA,WAAAC;AAAA,AAAA,OAAAD,qGAAA,WAAQuE,hEAAI,AAACC,6CAAyBrc;AAAtC,AAAA,OAAA+X,2BAAA,AACO,AAACuE,6DAAiB,AAAC9C,yDAAsB4C;;;eApFpE,kBAAA,CAAA,AAAAtY,oGAAA,AAAA9C,6BAAA,IAAA,SAAA,6BAAA,5IAqFQ,AAACub;AArFT,AA0FoB,OAACC,yFAAkC,AAAA,+FAAA,AAAA/b,gBAAeC;eA1FtE,UAAA,CAAA,AAAAoD,0GAAA,AAAA9C,6BAAA,MAAA,aAAA,gCAAA,CAAA,AAAAA,6BAAA,OAAA,aAAA,mCAAA,CAAA,AAAAA,6BAAA,QAAA,6BAAA,wDAAA,WAAAgZ,tXA2FQ,kEAAA,lEAACyC,6RAMyBhC,8CAEAC;AAnGlC,AAoGmC,OAAS,AAAAV;aACV,WAAS/X;AAAT,AACE,IAAUqZ,QAAM,AAAUrZ;IACpBya,QAAM,AAAC3b,6BAAoB,AAASua;AAD1C,AAEE,oBAAM,iBAAAxa,oBAAK,uDAAA,vDAAC+P,6CAAE,AAAW5O;AAAnB,AAAA,GAAAnB;AAAA,IAAAA,wBAA0B4b;AAA1B,AAAA,oBAAA5b;AAAgC,gBAAA,RAAG4b;;AAAnC5b;;;AAAAA;;;AAAN,AACE,QAAM,AAAGd,2BACH,EAAI,CAAG0c,QAAM9B,iBAAgBA,eAAe8B;;AAFpD;;IAxGtC,IAAA,AAAA1b,6BAAA,QAAA,KAAA,CAAA,KAAA,AAAA8C,mDAAA,AAAA9C,6BAAA,OAAA,aAAA,wBAAA,CAAA,AAAAA,6BAAA,IAAA,WAAA,1IA2GsB4Z;AA3GtB,AA8GgC,OAAG5a;eA9GnC,UAAA,CAAA,AAAA8D,oGAAA,AAAA9C,6BAAA,IAAA,WAAA,jHA8GyD,AAAC2b;AA9G1D,AA+GgC,OAAG3c;eA/GnC,UAAA,CAAA,AAAA8D,0GAAA,AAAA9C,6BAAA,IAAA,WAAA,vHA+GqD,AAAC4b;AA/GtD,AAkHoB,sCAAA,iEAAA,hGAACnd;eAlHrB,UAAA,CAAA,AAAAqE,0TAAA,AAAAA,3RAmHQ,+GAAA,/GAACoD,mLAGJ,AAACgQ,+CAAYlX,OAAOma,uBAAiBC,0DAGrC,iBAAAtZ,oBAAKyZ;AAAL,AAAA,oBAAAzZ;AACK,2EAAA,2CAAA,wEAAA,yEAAA,hQAACsT,gDACCpU,OACA8a,wGACiBgC;AAHnB,AAIoB,4HAAA,8CAAA,lKAACtC,2DAAAA,kEAAAA;GAJrB,uEAAA,WAAAqC;AAAA,AAKoB,oHAAAA,qDAAAA,jKAAC9B,uDAAAA,yEAAAA;;;AAN1Bja;;;GAzHL,KAAA;AAiIA,gDAAA,AAAApB,oBAAAY,oBAAA,xFAAU4c,mGACPC,IAAI/N,YAAgBgO,aAAahS;AADpC,AAAA,AAAA,IAKQiS,eAAQ,AAACC;IALjBP,aAM4B,mBAAA,2CAAA,yDAAA,KAAA,oDAAA,KAAA,sDAAA,KAAA,kDAAA,lSAACxQ;YAN7B,AAAAzD,4CAAAiU,WAAA,IAAA,nEAMShd;sBANT,AAAA+I,4CAAAiU,WAAA,IAAA,7EAMgBQ;IANhBP,aAOoC,mBAAA,2CAAA,qEAAA,nIAACzQ;gBAPrC,AAAAzD,4CAAAkU,WAAA,IAAA,vEAOSQ;0BAPT,AAAA1U,4CAAAkU,WAAA,IAAA,jFAOoBS;IAPpBR,aAQuC,mBAAA,nBAAC1Q;wBARxC,AAAAzD,4CAAAmU,WAAA,IAAA,/EAQSS;2BART,AAAA5U,4CAAAmU,WAAA,IAAA,lFAQsBU;AARtB,AAWI,AAACjc,wDACC;AAAA,AAAO,IAAUkc,YAAU,KAAAC;IACVC,eAAa,KAAAC,2BAAA,+CAAA,jCAA+CH;IAC5Djc,KAAG,AAACG,eAAUub;IACdrd,SAAO,KAAAge,sBAAA,+FAAA,uBAAA,0BAAA,jIAC6Brc,gBACAic,0BACAE;AAN9C,AAUE,AAAGA,yBAAyBV;;AAC5B,AAAGU,uBAAuB9d;;AAG1B,CAAM,AAAGie,qBAAwBje;;AAEjC,iFAAA,jFAACqK,gDAAO,AAAGrK,mBAAmBod;AAA9B,AACS,IAAAc,WAAA,2CAAA,gEAAA,8DAAA,mEAAA,xIAAqBle,2DAAY4d,gEAAgBE,+DAAiBnc;AAAlE,AAAA,sGAAAuc,sCAAAA,pIAACX,gDAAAA,0DAAAA;;;AAGV;AAAA,AACE,IAAAtd,2BAAqB,AAAqBD;AAA1C,AAAA,oBAAAC;AAAA,AAAA,sBAAAA,lBAAWY;AAAX,AACE,AAACiU,qBAAY,CAAA,gEAAyB,CAAC,AAAAqJ,iEAAA,AAAAA,sEAAA,AAAAA,PAAwBhB,kDAAAA,iBAAMtc;;AADvE;;AAGA,oBAAMuc;AAAN,AAAmB,OAAUA;;AAA7B;;;GAzBb;;AA6BA,AAAC1b,wDACC;AAAA,AACE,IAAAzB,qBAAsB,AAAA,uFAASF;AAA/B,AAAA,oBAAAE;AAAA,AAAA,aAAAA,TAAeD;AAAf,AACE,IAAMoe,qBACA,WAASC;AAAT,AACE,IAAAC,WAAA,2CAAA,qEAA+B,AAAC/N,6CAAK,AAAA,mGAAeiN,WAAW,gBAAA,fAAK,AAAca;AAAlF,AAAA,8GAAAC,0CAAAA,hJAACb,oDAAAA,8DAAAA;;IAEHc,gBACA;AAAA,AACE,4BAAA,3BAAM,AAAGve;;AACT,gHAAA,uCAAA,/IAAC2d,qDAAAA,2DAAAA;;AAPT,AASE,IAAAa,iBAAM,AAAYxe;AAAlB,AAAA,AAAAwe,kBAAA,YACmBD;;AADnB,AAAAC,kBAAA,oBAE2BJ;;AAF3BI;AATF;AAAA,AAaG,AACE,IAAAC,WAAM,AAAYze;AAAlB,AAAA,AAAAye,aAAA,YACoBF;;AADpB,AAAAE,aAAA,oBAE4BL;;AAF5BK;;;AAfP;;GAFJ,mFAqBG,AAAA,uFAAS1e,OACT,AAAA,mGAAeyd;;AA9DtB,IAgEcxd,SAAO,AAAA,uFAASD;AAhE9B,AAAA,OAAAiB,6BAAA,MAAA,aAAA,8BAAA,CAAA,AAAAA,6BAAA,MAAA,gCAAA,AAAAwU,2BAAA,mFAAA,gWAAA,CAAA,AAAAxU,6BAAA,MAAA,aAAA,aAAA,CAAA,eAAA,AAAAA,6BAAA,MAAA,aAAA,aAAA,MAAA,xnBAmEcqc,gKAAe,yBAAA,mFAAA,2CAAA,wEAAA,AAAA5c,/NAAC4V,+OAAmCjX,2PAInD,iBAAA0B,oBAAK4c;AAAL,AAAA,oBAAA5c;AAAiBd;;AAAjBc;;MAvEd,AAAA,AAAAgD,+BAAA,+YAAA,QAAA,pUAwEW,iSAAA,jSAAC0H,kBACC,AAAC2D,kDACC,AAAA,gFAAKpP,OAAOC,OACZoP,YAAY,AAAA,mGAAeoO,WAC3BpS,0DAEF,iBAAAtK,oBAAK4c;AAAL,AAAA,oBAAA5c;AAAiBd;;AAAjBc;;MA9Eb,AAAA,AAAAgD,+BAAA,4QAAA,zLA+EU,yEAAA,zEAAC0H,kBAAa,AAACvK,+CAAYjB,uBAC3B,yEAAA,zEAACwL,kBAAa,AAACyO,+CAAYja;GAhFrC,KAAA;AAkFA,gDAAA,AAAAN,oBAAAY,oBAAA,WAAAoe,nGAAUK;AAAV,AAAA,IAAAJ,aAAAD;IAAAC,iBAAA,AAAA7b,4BAAA6b;kBAAAA,dAC6BM;UAD7B,AAAAlc,4CAAA4b,eAAA,jEACWxB;eADX,AAAApa,4CAAA4b,eAAA,tEACeK;AADf,AAAA,AAAA,IAEQE,gBAAS,iBAAA,jBAAC/d;IAFlByd,aAG4B,mBAAA,2CAAA,uDAAA,KAAA,sEAAA,KAAA,0DAAA,/PAACrS;YAH7B,AAAAzD,4CAAA8V,WAAA,IAAA,nEAGS7e;sBAHT,AAAA+I,4CAAA8V,WAAA,IAAA,7EAGgBrB;IAHhBsB,aAIoC,mBAAA,2CAAA,mEAAA,KAAA,iEAAA,vMAACtS;gBAJrC,AAAAzD,4CAAA+V,WAAA,IAAA,vEAISM;0BAJT,AAAArW,4CAAA+V,WAAA,IAAA,jFAIoBO;IACZ9P,sBAAe,WAAK+P;AAAL,AACE,IAAAC,WAAA,2CAAA,mEAAA,iCAAA,iEAA6CD;AAA7C,AAAA,8GAAAC,0CAAAA,hJAACF,oDAAAA,8DAAAA;;AAN1B,AASI,AAAC1d,wDACC;AAAA,AACE,AAACkW,kDACC,AAAAC,gDAAA,KAAA,WAAAC;AAAA,AAAA,OAAAD,2GAAA,WAAQG,tEAAK,AAACuH,8CAA0BN;AAAxC,AAAA,OAAApH,oJAAA,WACQjI,/GAAW,AAAA,8FAAaoI;AADhC,AAAA,OAAAD,2BAAA,AAEE,iBAAAyH,WAAA,2CAAA,mEAA8B5P;AAA9B,AAAA,8GAAA4P,0CAAAA,hJAACJ,oDAAAA,8DAAAA;;;;IAGH,WAAKnd;AAAL,AACE,cAAA,dAACiW,iCAAoCjW;;AACrC,IAAAwd,WAAA,2CAAA,mEAAA;AAAA,AAAA,8GAAAA,0CAAAA,hJAACL,oDAAAA,8DAAAA;;;AATP;AAAA,AAAA;;GADF,mFAcGJ;;AAGH,AAACtd,wDACC;AAAA,AACE,IAAAzB,qBAAe,AAAA,+FAAakf;AAA5B,AAAA,oBAAAlf;AAAA,AAAA,UAAAA,NAAWyf;AAAX,AACE,OAAC9H,kDACC,AAAC+H,iDAA6BV,YAAYS,KAG1C,WAAKzd;AAAL,AACE,qBAAA,dAACiW,kCAAqCjW;;;AAN5C;;GAFJ,mFAUG,AAAA,+FAAakd;;AAGhB,AAACzd,wDACC;AAAA,AACE,IAAMke,WAAS,WAASC;AAAT,AAAe,OAAW,AAACC,qBAAwBD;;WAAlE,2CAAA,sDAAA,gFAAA,4DAAA,oBAAA,gEAAA,xUACMA,oGAAqB1C,2EACA4C;AAF3B,AAOE,AAACC,oDACC,AAACpI,kDAAQ,AAACvN,gDACC;AACE,IAAA8V,iBAAA,2CAAA,0DAAA;AAAA,AAAA,+FAAAA,4CAAAA,1IAAC5C,gDAAAA,gEAAAA;;AACD,OAACqC,SAAS,AAACQ,qBAAQP;;CAHvB,WAAAK;AAAA,AAIG,IAAAG,WAAA,2CAAA,sEAAAH;AAAA,AAAA,sGAAAG,sCAAAA,pIAAC9C,gDAAAA,0DAAAA;IAJb,WAAA0C;AAAA,AAKU,IAAAK,WAAA,2CAAA,uDAAAL;AAAA,AAAA,sGAAAK,sCAAAA,pIAAC/C,gDAAAA,0DAAAA;IANb;AAAA,AAOG,IAAAgD,WAAA,2CAAA,0DAAA;AAAA,AAAA,sGAAAA,sCAAAA,pIAAChD,gDAAAA,0DAAAA;;;AAdN;AAAA,AAAA;;GAFJ,mFAmBGJ;;AAEH,AAACzb,wDACC;AAAA,AACE,IAAAzB,qBAAiB,AAAA,qFAAQF;AAAzB,AAAA,oBAAAE;AAAA,AAAA,YAAAA,RAAWugB;AAAX,AACE,6HAAA,7HAACC,8IAAoB,AAAA,qFAAQ1gB;;AAC7B,IAAA2gB,WAAM,AAAQF;AAAd,AAAA,QAAAE;KAAA;AAEE,AACE,0KAAA,uDAAA,jOAACnH,uEACA,4DAAA,fAAK,AAAWiH;;AAGjB,sCAAA,iEAAA,hGAAC/gB;;;KAPL;AAUE,AACE,8NAAA,uDAAA,rRAAC8Z,uEACA,4DAAA,KAAA,iCAAA,rDAAK,AAAWiH;;AAKjB,sCAAA,iEAAA,hGAAC/gB;;;;AAjBL,MAAA,KAAAkhB,MAAA,CAAA,mEAAAD;;;;AAFF;;GAFJ,mFAsBG,AAAA,qFAAQ3gB;;AAlFf,OAAAiB,6BAAA,MAAA,iCAAA,0BAAA,CAAA,rDAoFuCke,sEAC5B0B,aAAW,AAAA,wFAAS7gB;IACpBqP,cAAY,AAAA,iGAAc+P;AAtFrC,AAAA,GAwFW,EAAI,wDAAA,xDAACtO,6CAAE+P,4EACH,gBAAA,fAAMxR;AAzFrB,IAAA0P,aA4FU+B;AA5FV,AAAA,OAAA7f,6BAAA,MAAA,EAAA,AAAAiT,qBAAA6K,aAAA,AAAA/S,wCAAA,AAAAmI,2HAAA,2CAAA,wDAAA,mFAAA,OAAA,iBAAA,eAAA,WAAA,gBAAA,0BAAA4K,kBAAA,aAAA,oEAAA,EAAA,AAAA7K,qBAAA6K,aAAA,KAAA,CAAA,AAAAhb,+BAAAgb;;AAAA,OAAAhb,+BAAA,mFA8FU,6UAAA,7UAAC0H,kBAAa,yKAAA,2CAAA,pNAAC0R,8CACCC,IAAI/N,YACJ,AAAA,oGAAerP,4HACEuP;;;GAjG3C,KAAA;AAmGA,mDAAA,AAAA5P,oBAAAY,oBAAA,WAAAwgB,tGAAUK;AAAV,AAAA,IAAAJ,aAAAD;IAAAC,iBAAA,AAAAje,4BAAAie;kBAAAA,dACyB9B;eADzB,AAAAlc,4CAAAge,eAAA,tEACWK;AADX,AAAA,AAAA,IAAAJ,aAEiC,mBAAA,nBAACzU;eAFlC,AAAAzD,4CAAAkY,WAAA,IAAA,tEAESK;yBAFT,AAAAvY,4CAAAkY,WAAA,IAAA,hFAEkBM;IAFlBL,aAG2B,mBAAA,nBAAC1U;YAH5B,AAAAzD,4CAAAmY,WAAA,IAAA,nEAGSM;sBAHT,AAAAzY,4CAAAmY,WAAA,IAAA,7EAGeO;AAHf,AAMI,AAAC9f,wDACC;AAAA,AACE,OAAC2I,gDACC,AAACoX,kDACD;AAAA,AAAO,4GAAA,qCAAA,zIAACH,mDAAAA,yDAAAA;;GAJd;;AAQA,AAAC5f,wDACC;AAAA,AACE,WAAA,XAACtB;AAAD,AAAgB,sGAAA,kCAAA,hIAACohB,gDAAAA,sDAAAA;GAAjB;;AADF;AAAA,AAEG,sGAAA,mCAAA,jIAACA,gDAAAA,uDAAAA;;GAHN,mFAIGJ;;AAlBP,IAAAF,aAqBK,kBAAM,iBAAApgB,oBAAKugB;AAAL,AAAA,oBAAAvgB;AAAA,IAAAA,wBAAcsgB;AAAd,AAAA,oBAAAtgB;AAAuBygB;;AAAvBzgB;;;AAAAA;;MAAN,2DAAA,3DACE,AAACie,8CAAWE;AAtBnB,AAAA,OAAAje,6BAAA,MAAA,EAAA,AAAAiT,qBAAAiN,aAAA,AAAAnV,wCAAA,AAAAmI,2HAAA,2CAAA,kDAAA,uBAAA,wDAAA,mFAAA,4CAAAgN,kBAAA,MAAA,mCAAA,8BAAA,EAAA,AAAAjN,qBAAAiN,aAAA,KAAA,CAAA,AAAApd,+BAAAod;GAAA,KAAA;AAwBA,wDAAA,AAAAxhB,oBAAAY,oBAAA,hGAAUohB,2GACPC;AADH,AAAA,AAGE,AAACjgB,wDACC;AAAA,AACE,UAAA,NAAMkgB;IACIC,MAAI,AAAaC;AAD3B,AAEE,IAAAhhB,0BAAK6gB;AAAL,AAAA,oBAAA7gB;AAAY,AAAM+gB,QAAID;;AAAtB9gB;;AAFF;AAAA,AAIG,OAAS+gB,WAAID;;GANpB,mFAQGD;;AAXL;GAAA,KAAA;AAcA,gDAAA,AAAAjiB,oBAAAC,qBAAA,zFAAWoiB,oGAGRhiB;AAHH,AAAA,AAAA,IAIQkf,cAAY,mBAAA,nBAAC9e;AAJrB,AAAA,OAAAa,6BAAA,MAAA,aAAA,8BAAA,mFAAA,+BAAA,qIAAA,tPAOK,AAAC0gB,sDAAmB,GAAK,gBAAA,fAAMzC,0CAEzBA,aACJ,AAACrL,sBACC,AAACuN,iDAAclC,aACf,uBAAA,vBAAC5F;GAZV,qPAAA,lKACIxZ,iBAAWC,kBACX,qCAAA,rCAACkiB","names":["var_args","args__5772__auto__","len__5766__auto__","i__5767__auto__","argseq__5773__auto__","cljs.core/IndexedSeq","frontend.extensions.pdf.highlights/dd","seq61605","self__5752__auto__","cljs.core/seq","args","cljs.core.apply","js/console.debug","frontend.extensions.pdf.highlights/*area-mode?","cljs.core.atom","frontend.extensions.pdf.highlights/*highlight-mode?","frontend.extensions.pdf.highlights/*highlight-last-color","frontend.extensions.pdf.highlights/*area-dashed?","cljs.core.fnil","cljs.core/identity","frontend.storage/get","frontend.extensions.pdf.highlights/reset-current-pdf!","frontend.state/set-state!","rum.core/lazy-build","rum.core/build-defcs","frontend.extensions.pdf.highlights/pdf-highlight-finder","rum.core/static","rum.core/reactive","state","viewer","temp__5720__auto__","ref-hl","frontend.state/sub","js/setTimeout","frontend.extensions.pdf.utils/scroll-to-highlight","rum.core/build-defc","frontend.extensions.pdf.highlights/pdf-page-finder","current","cljs.core/deref","frontend.state/state","active-hl","page-key","last-page","and__5041__auto__","frontend.util/safe-parse-int","daiquiri.core/create-element","frontend.extensions.pdf.highlights/pdf-resizer","el-ref","rum.core/use-ref","adjust-main-size!","frontend.util.debounce","width","root-el","js/document.documentElement","frontend.extensions.pdf.utils/adjust-viewer-size!","rum.core.use_effect_BANG_","el","cljs.core/fn?","js/window.interact","rum.core/deref","js/interact","cljs-bean.core/->js","e","js/document.documentElement.clientWidth","offset","el-ratio","target-el","js/document.getElementById","x__5131__auto__","y__5132__auto__","x__5128__auto__","y__5129__auto__","p__61624","p__61625","map__61626","cljs.core/--destructure-map","cljs.core.get","map__61627","cljs.core.into_array","iter__5520__auto__","s__61634","cljs.core/LazySeq","cljs.core/chunked-seq?","c__5518__auto__","size__5519__auto__","cljs.core/count","b__61636","cljs.core/chunk-buffer","i__61635","cljs.core/-nth","cljs.core/chunk-append","daiquiri.interpreter/interpret","cljs.core/chunk-cons","cljs.core/chunk","iter__61633","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","frontend.extensions.pdf.highlights/pdf-highlights-ctx-menu","highlight","point","range","clear-ctx-tip!","add-hl!","upd-hl!","del-hl!","cb","js/document.addEventListener","js/document.removeEventListener","*el","cnt","head-height","top","left","id","new?","content","action-fn!","action","clear?","cljs.core/name","G__61630","frontend.extensions.pdf.assets/copy-hl-ref!","frontend.util.copy_to_clipboard_BANG_","or__5043__auto__","frontend.extensions.pdf.utils/clear-all-selection","frontend.extensions.pdf.assets/goto-block-ref!","frontend.extensions.pdf.assets/del-ref-block!","frontend.extensions.pdf.assets/unlink-hl-area-image$","properties","cljs.core/not","cljs.core.merge","frontend.extensions.pdf.utils/gen-uuid","G__61631","cljs.core.assoc","cljs.core/reset!","cljs.core.keyword","map__61632","x","y","frontend.util/calc-delta-rect-offset","it","frontend.context.i18n.t","p__61642","map__61643","map__61644","map__61645","frontend.extensions.pdf.highlights/pdf-highlights-text-region","vw-hl","hl","show-ctx-tip!","rects","color","open-tip!","G__61646","G__61647","G__61648","cljs.core.map_indexed","idx","rect","p__61650","map__61651","frontend.extensions.pdf.highlights/pdf-highlight-area-region","*dirty","G__61652","G__61653","G__61654","_e","rum.core/set-ref!","vec__61655","cljs.core.nth","vw-pos","target","vw-rect","dx","dy","p1__61649#","cljs.core.mapv","val","js/parseFloat","to-top","cljs.core.get_in","to-left","to-w","to-h","to-vw-pos","cljs.core.update","cljs.core/assoc","to-sc-pos","frontend.extensions.pdf.utils/vw-to-scaled-pos","hl'","cljs.core/assoc-in","js/Date.now","promesa.core.then","frontend.extensions.pdf.assets/persist-hl-area-image$","bx","by","ax","ay","js/interact.modifiers.restrictSize","vw-bounding","map__61659","s__61662","b__61664","i__61663","iter__61661","frontend.extensions.pdf.highlights/pdf-highlights-region-container","page-hls","ops","p1__61660#","cljs.core.update_in","frontend.extensions.pdf.utils/scaled-to-vw-pos","rum.core/with-key","p__61671","map__61672","vec__61673","vec__61676","vec__61679","p1__61665#","daiquiri.interpreter/element-attributes","frontend.extensions.pdf.highlights/pdf-highlight-area-selection","viewer-clt","cnt-el","*sta-el","*cnt-rect","start-coord","set-start-coord!","rum.core/use-state","end-coord","set-end-coord!","_","set-area-mode!","frontend.rum/use-atom","should-start","frontend.util/win32?","reset-coords","calc-coords","page-x","page-y","cnt-rect","cljs-bean.core/->clj","calc-pos","start","end","js/Math.abs","disable-text-selection!","cljs.core.js_invoke","fn-move","rum.core.use_callback","G__61686","root","fn-start","G__61687","fn-end","start-el","pos","page-el","page-number","page-pos","sc-pos","G__61689","G__61690","G__61691","G__61692","G__61693","G__61694","p__61712","map__61713","vec__61715","vec__61718","vec__61721","frontend.extensions.pdf.highlights/pdf-highlights","initial-hls","loaded-pages","set-dirty-hls!","doc","win","*mounted","sel-state","set-sel-state!","highlights","set-highlights!","tip-state","set-tip-state!","reset-fn","G__61728","G__61729","cljs.core/merge","cljs.core.list_STAR_","frontend.extensions.pdf.utils/fix-nested-js","G__61731","cljs.core.conj","frontend.extensions.pdf.assets/area-highlight?","vec__61733","target-idx","p1__61695#","medley.core.find_first","cljs.core._EQ_","cljs.core/second","medley.core.indexed","G__61736","frontend.extensions.pdf.assets/update-hl-area-block!","G__61737","cljs.core.into","p1__61696#","cljs.core.remove","fn-selection-ok","selection","js/document.getSelection","sel-range","G__61738","G__61740","fn-selection","cljs.core/volatile!","fn-dirty","cljs.core/vreset!","fn-resize","cljs.core.partial","G__61741","G__61742","G__61743","G__61744","hl-fn","page-info","frontend.extensions.pdf.utils/get-page-from-range","sel-rects","frontend.extensions.pdf.utils/get-range-rects<-page-cnt","page","bounding","frontend.extensions.pdf.utils/get-bounding-rect","G__61745","grouped-hls","cljs.core/sequential?","cljs.core/group-by","seq__61747","chunk__61748","count__61749","i__61750","c__5565__auto__","cljs.core/chunk-first","cljs.core/next","hls-layer","frontend.extensions.pdf.utils/resolve-hls-layer!","rum.core/mount","js/ReactDOM.createPortal","p__61759","map__61760","vec__61763","attrs61772","cljs.core/map?","daiquiri.normalize.merge_with_class","attrs61773","frontend.extensions.pdf.highlights/pdf-settings","_viewer","theme","hide-settings!","select-theme!","t","*el-popup","area-dashed?","set-area-dashed?","el-popup","frontend.storage/set","cljs.core/boolean","cljs.core.map","frontend.components.svg.check","frontend.ui.toggle","G__61775","p__61777","p__61778","map__61779","map__61780","daiquiri.util/join-classes","attrs61794","attrs61799","attrs61791","frontend.extensions.pdf.highlights/pdf-outline-item","title","items","parent","dest","expanded","upt-outline-node!","has-child?","expanded?","frontend.util/classnames","js/JSON.stringify","path","p1__61776#","cljs.core/re-find","clojure.string.split","G__61792","G__61793","frontend.components.svg/arrow-right-v2","itm","G__61802","G__61803","G__61804","frontend.extensions.pdf.highlights/pdf-outline","visible?","set-visible!","pdf-doc","vec__61827","*el-outline","outline-data","set-outline-data!","attrs","G__61830","promesa.core.catch$","promesa.core.bind","___28360__auto__","promesa.protocols/-promise","data","G__61831","js/console.error","el-outline","s__61838","b__61840","i__61839","vec__61841","attrs61844","iter__61837","vec__61847","attrs61836","frontend.extensions.pdf.highlights/docinfo-display","info","close-fn!","k","v","clojure.string/replace-first","cljs.core.pr_str","frontend.ui.button","text","js/document.querySelector","clojure.string/replace","frontend.handler.notification.show_BANG_","frontend.extensions.pdf.highlights/make-docinfo-in-modal","vec__61853","vec__61856","vec__61859","vec__61862","vec__61865","vec__61868","vec__61871","p1__61851#","frontend.extensions.pdf.highlights/pdf-toolbar","area-mode?","outline-visible?","set-outline-visible!","highlight-mode?","set-highlight-mode!","settings-visible?","set-settings-visible!","*page-ref","current-page-num","set-current-page-num!","total-page-num","set-total-page-num!","viewer-theme","set-viewer-theme!","total","bus","page-fn","evt","num","G__61875","input","G__61876","frontend.components.svg.adjustments","frontend.util/mac?","G__61877","frontend.components.svg.icon_area","G__61878","frontend.components.svg.highlighter","frontend.extensions.pdf.utils/zoom-out-viewer","frontend.components.svg.zoom_out","frontend.extensions.pdf.utils/zoom-in-viewer","frontend.components.svg.zoom_in","G__61879","frontend.components.svg.view_list","ret","frontend.extensions.pdf.utils/get-meta-data$","frontend.state.set_modal_BANG_","frontend.components.svg.icon_info","frontend.extensions.pdf.assets.goto_annotations_page_BANG_","frontend.components.svg.annotations","value","frontend.components.svg.up_narrow","frontend.components.svg.down_narrow","p1__61852#","frontend.context.i18n/t","vec__61880","vec__61883","vec__61886","frontend.extensions.pdf.highlights/pdf-viewer","url","pdf-document","*el-ref","rum.core/create-ref","set-state!","ano-state","set-ano-state!","page-ready?","set-page-ready!","event-bus","js/pdfjsViewer.EventBus","link-service","js/pdfjsViewer.PDFLinkService","js/pdfjsViewer.PDFViewer","js/window","G__61896","frontend.util/node-path","fn-textlayer-ready","p","G__61898","fn-page-ready","G__61900","G__61901","p__61921","map__61922","vec__61923","vec__61926","attrs61941","frontend.extensions.pdf.highlights/pdf-loader","hls-file","pdf-current","*doc-ref","hls-state","set-hls-state!","latest-hls","G__61929","frontend.extensions.pdf.assets/load-hls-data$","G__61933","G__61934","hls","frontend.extensions.pdf.assets/persist-hls-data$","get-doc$","opts","js/pdfjsLib.getDocument","js/document","promesa.core.finally$","p1__61920#","p1__61919#","G__61936","cljs.core/clj->js","G__61937","G__61938","G__61939","error","frontend.extensions.pdf.highlights.dd","G__61940","js/Error","status-doc","frontend.components.svg/loading","p__61943","map__61944","vec__61945","vec__61948","attrs61942","frontend.extensions.pdf.highlights/pdf-container","identity","prepared","set-prepared!","ready","set-ready!","frontend.extensions.pdf.utils/load-base-assets$","frontend.extensions.pdf.highlights/playground-effects","active","flg","cls","js/document.body","frontend.extensions.pdf.highlights/playground","frontend.modules.shortcut.core/mixin"],"sourcesContent":["(ns frontend.extensions.pdf.highlights\n  (:require [cljs-bean.core :as bean]\n            [clojure.string :as string]\n            [frontend.components.svg :as svg]\n            [frontend.context.i18n :refer [t]]\n            [frontend.extensions.pdf.assets :as pdf-assets]\n            [frontend.extensions.pdf.utils :as pdf-utils]\n            [frontend.handler.notification :as notification]\n            [frontend.modules.shortcut.core :as shortcut]\n            [frontend.rum :refer [use-atom]]\n            [frontend.state :as state]\n            [frontend.storage :as storage]\n            [frontend.ui :as ui]\n            [frontend.util :as util]\n            [medley.core :as medley]\n            [promesa.core :as p]\n            [rum.core :as rum]))\n\n(defn dd [& args]\n  (apply js/console.debug args))\n\n(def *area-mode? (atom false))\n(def *highlight-mode? (atom false))\n(def *highlight-last-color (atom :yellow))\n(def *area-dashed? (atom ((fnil identity false) (storage/get (str \"ls-pdf-area-is-dashed\")))))\n\n(defn reset-current-pdf!\n  []\n  (state/set-state! :pdf/current nil))\n\n(rum/defcs pdf-highlight-finder\n  < rum/static rum/reactive\n  [state ^js viewer]\n  (when viewer\n    (when-let [ref-hl (state/sub :pdf/ref-highlight)]\n      ;; delay handle: aim to fix page blink\n      (js/setTimeout #(pdf-utils/scroll-to-highlight viewer ref-hl) 100)\n      (js/setTimeout #(state/set-state! :pdf/ref-highlight nil) 1000))))\n\n(rum/defc pdf-page-finder < rum/static\n  [^js viewer]\n  (when viewer\n    (when-let [current (:pdf/current @state/state)]\n      (let [active-hl (:pdf/ref-highlight @state/state)\n            page-key (:filename current)\n            last-page (and page-key\n                           (util/safe-parse-int (storage/get (str \"ls-pdf-last-page-\" page-key))))]\n\n        (when (and last-page (nil? active-hl))\n          (set! (.-currentPageNumber viewer) last-page)))))\n  nil)\n\n(rum/defc pdf-resizer\n  [^js viewer]\n  (let [el-ref (rum/use-ref nil)\n        adjust-main-size!\n        (util/debounce\n          200 (fn [width]\n                (let [root-el js/document.documentElement]\n                  (.setProperty (.-style root-el) \"--ph-view-container-width\" width)\n                  (pdf-utils/adjust-viewer-size! viewer))))]\n\n    ;; draggable handler\n    (rum/use-effect!\n      (fn []\n        (when-let [el (and (fn? js/window.interact) (rum/deref el-ref))]\n          (-> (js/interact el)\n              (.draggable\n                (bean/->js\n                  {:listeners\n                   {:move\n                    (fn [^js/MouseEvent e]\n                      (let [width js/document.documentElement.clientWidth\n                            offset (.-left (.-rect e))\n                            el-ratio (.toFixed (/ offset width) 6)\n                            target-el (js/document.getElementById \"pdf-layout-container\")]\n                        (when target-el\n                          (let [width (str (min (max (* el-ratio 100) 20) 80) \"vw\")]\n                            (.setProperty (.-style target-el) \"width\" width)\n                            (adjust-main-size! width)))))}}))\n\n              (.styleCursor false)\n              (.on \"dragstart\" #(.. js/document.documentElement -classList (add \"is-resizing-buf\")))\n              (.on \"dragend\" #(.. js/document.documentElement -classList (remove \"is-resizing-buf\")))))\n        #())\n      [])\n    [:span.extensions__pdf-resizer {:ref el-ref}]))\n\n(rum/defc pdf-highlights-ctx-menu\n  [^js viewer\n   {:keys [highlight point ^js range]}\n   {:keys [clear-ctx-tip! add-hl! upd-hl! del-hl!]}]\n\n  (rum/use-effect!\n    (fn []\n      (let [cb #(clear-ctx-tip!)]\n        (js/setTimeout #(js/document.addEventListener \"click\" cb))\n        #(js/document.removeEventListener \"click\" cb)))\n    [])\n\n  ;; TODO: precise position\n  ;;(when-let [\n  ;;page-bounding (and highlight (pdf-utils/get-page-bounding viewer (:page highlight)))\n  ;;])\n\n  (let [*el (rum/use-ref nil)\n        ^js cnt (.-container viewer)\n        head-height 0          ;; 48 temp\n        top (- (+ (:y point) (.-scrollTop cnt)) head-height)\n        left (+ (:x point) (.-scrollLeft cnt))\n        id (:id highlight)\n        new? (nil? id)\n        content (:content highlight)\n        action-fn! (fn [action clear?]\n                    (when-let [action (and action (name action))]\n                      (case action\n                        \"ref\"\n                        (pdf-assets/copy-hl-ref! highlight)\n\n                        \"copy\"\n                        (do\n                          (util/copy-to-clipboard!\n                            (or (:text content) (.toString range)))\n                          (pdf-utils/clear-all-selection))\n\n                        \"link\"\n                        (pdf-assets/goto-block-ref! highlight)\n\n                        \"del\"\n                        (do\n                          (del-hl! highlight)\n                          (pdf-assets/del-ref-block! highlight)\n                          (pdf-assets/unlink-hl-area-image$ viewer (:pdf/current @state/state) highlight))\n\n                        ;; colors\n                        (let [properties {:color action}]\n                          (if-not id\n                            ;; add highlight\n                            (let [highlight (merge (if (fn? highlight) (highlight) highlight)\n                                                   {:id         (pdf-utils/gen-uuid)\n                                                    :properties properties})]\n                              (add-hl! highlight)\n                              (pdf-utils/clear-all-selection)\n                              (pdf-assets/copy-hl-ref! highlight))\n\n                            ;; update highlight\n                            (upd-hl! (assoc highlight :properties properties)))\n\n                          (reset! *highlight-last-color (keyword action))))\n\n                      (and clear? (js/setTimeout #(clear-ctx-tip!) 68))))]\n\n    (rum/use-effect!\n      (fn []\n        (if (and @*highlight-mode? new?)\n          (action-fn! @*highlight-last-color true)\n          (let [^js el (rum/deref *el)\n                {:keys [x y]} (util/calc-delta-rect-offset el (.closest el \".extensions__pdf-viewer\"))]\n            (set! (.. el -style -transform)\n                  (str \"translate3d(\" (if (neg? x) (- x 5) 0) \"px,\" (if (neg? y) (- y 5) 0) \"px\" \",0)\"))))\n        #())\n      [])\n\n    [:ul.extensions__pdf-hls-ctx-menu\n     {:ref      *el\n      :style    {:top top :left left :visibility (if (and @*highlight-mode? new?) \"hidden\" \"visible\")}\n      :on-click (fn [^js/MouseEvent e]\n                  (when-let [action (.. e -target -dataset -action)]\n                    (action-fn! action true)))}\n\n     [:li.item-colors\n      (for [it [\"yellow\", \"blue\", \"green\", \"red\", \"purple\"]]\n        [:a {:key it :data-color it :data-action it} it])]\n\n\n     (and id [:li.item {:data-action \"ref\"} (t :pdf/copy-ref)])\n\n     (and (not (:image content)) [:li.item {:data-action \"copy\"} (t :pdf/copy-text)])\n\n     (and id [:li.item {:data-action \"link\"} (t :pdf/linked-ref)])\n\n     (and id [:li.item {:data-action \"del\"} (t :delete)])\n     ]))\n\n(rum/defc pdf-highlights-text-region\n  [^js viewer vw-hl hl\n   {:keys [show-ctx-tip!]}]\n\n  (let [{:keys [rects]} (:position vw-hl)\n        {:keys [color]} (:properties hl)\n        open-tip! (fn [^js/MouseEvent e]\n                    (.preventDefault e)\n                    (let [x (.-clientX e)\n                          y (.-clientY e)]\n\n                      (show-ctx-tip! viewer hl {:x x :y y})))]\n\n    [:div.extensions__pdf-hls-text-region\n     {:on-click        open-tip!\n      :on-context-menu open-tip!}\n\n     (map-indexed\n       (fn [idx rect]\n         [:div.hls-text-region-item\n          {:key        idx\n           :style      rect\n           :data-color color}])\n       rects)]))\n\n(rum/defc ^:large-vars/cleanup-todo pdf-highlight-area-region\n  [^js viewer vw-hl hl\n   {:keys [show-ctx-tip! upd-hl!]}]\n\n  (let [*el (rum/use-ref nil)\n        *dirty (rum/use-ref nil)\n        open-tip! (fn [^js/MouseEvent e]\n                    (.preventDefault e)\n                    (when-not (rum/deref *dirty)\n                      (let [x (.-clientX e)\n                            y (.-clientY e)]\n\n                        (show-ctx-tip! viewer hl {:x x :y y}))))]\n\n    ;; resizable\n    (rum/use-effect!\n      (fn []\n        (let [^js el (rum/deref *el)\n              ^js it (-> (js/interact el)\n                         (.resizable\n                           (bean/->js\n                             {:edges     {:left true :right true :top true :bottom true}\n                              :listeners {:start (fn [^js/MouseEvent _e]\n                                                   (rum/set-ref! *dirty true))\n\n                                          :end   (fn [^js/MouseEvent e]\n                                                   (let [vw-pos (:position vw-hl)\n                                                         ^js target (. e -target)\n                                                         ^js vw-rect (. e -rect)\n                                                         [dx, dy] (mapv #(let [val (.getAttribute target (str \"data-\" (name %)))]\n                                                                           (if-not (nil? val) (js/parseFloat val) 0)) [:x :y])\n                                                         to-top (+ (get-in vw-pos [:bounding :top]) dy)\n                                                         to-left (+ (get-in vw-pos [:bounding :left]) dx)\n                                                         to-w (. vw-rect -width)\n                                                         to-h (. vw-rect -height)\n                                                         to-vw-pos (update vw-pos :bounding assoc\n                                                                           :top to-top\n                                                                           :left to-left\n                                                                           :width to-w\n                                                                           :height to-h)\n\n                                                         to-sc-pos (pdf-utils/vw-to-scaled-pos viewer to-vw-pos)]\n\n                                                     ;; TODO: exception\n                                                     (let [hl' (assoc hl :position to-sc-pos)\n                                                           hl' (assoc-in hl' [:content :image] (js/Date.now))]\n\n                                                       (p/then\n                                                         (pdf-assets/persist-hl-area-image$ viewer\n                                                                                            (:pdf/current @state/state)\n                                                                                            hl' hl (:bounding to-vw-pos))\n                                                         (fn [] (js/setTimeout\n                                                                  #(do\n                                                                     ;; reset dom effects\n                                                                     (set! (.. target -style -transform) (str \"translate(0, 0)\"))\n                                                                     (.removeAttribute target \"data-x\")\n                                                                     (.removeAttribute target \"data-y\")\n\n                                                                     (upd-hl! hl')) 200))))\n\n\n                                                     (js/setTimeout #(rum/set-ref! *dirty false))))\n\n                                          :move  (fn [^js/MouseEvent e]\n                                                   (let [^js/HTMLElement target (.-target e)\n                                                         x (.getAttribute target \"data-x\")\n                                                         y (.getAttribute target \"data-y\")\n                                                         bx (if-not (nil? x) (js/parseFloat x) 0)\n                                                         by (if-not (nil? y) (js/parseFloat y) 0)]\n\n                                                     ;; update element style\n                                                     (set! (.. target -style -width) (str (.. e -rect -width) \"px\"))\n                                                     (set! (.. target -style -height) (str (.. e -rect -height) \"px\"))\n\n                                                     ;; translate when resizing from top or left edges\n                                                     (let [ax (+ bx (.. e -deltaRect -left))\n                                                           ay (+ by (.. e -deltaRect -top))]\n\n                                                       (set! (.. target -style -transform) (str \"translate(\" ax \"px, \" ay \"px)\"))\n\n                                                       ;; cache pos\n                                                       (.setAttribute target \"data-x\" ax)\n                                                       (.setAttribute target \"data-y\" ay))\n                                                     ))}\n                              :modifiers [;; minimum\n                                          (js/interact.modifiers.restrictSize\n                                            (bean/->js {:min {:width 60 :height 25}}))]\n                              :inertia   true})\n                           ))]\n          ;; destroy\n          #(.unset it)))\n      [hl])\n\n    (when-let [vw-bounding (get-in vw-hl [:position :bounding])]\n      (let [{:keys [color]} (:properties hl)]\n        [:div.extensions__pdf-hls-area-region\n         {:ref             *el\n          :style           vw-bounding\n          :data-color      color\n          :on-click        open-tip!\n          :on-context-menu open-tip!}]))))\n\n(rum/defc pdf-highlights-region-container\n  [^js viewer page-hls ops]\n\n  [:div.hls-region-container\n   (for [hl page-hls]\n     (let [vw-hl (update-in hl [:position] #(pdf-utils/scaled-to-vw-pos viewer %))]\n       (rum/with-key\n         (if (get-in hl [:content :image])\n           (pdf-highlight-area-region viewer vw-hl hl ops)\n           (pdf-highlights-text-region viewer vw-hl hl ops))\n         (:id hl))\n       ))])\n\n(rum/defc ^:large-vars/cleanup-todo pdf-highlight-area-selection\n  [^js viewer {:keys [show-ctx-tip!]}]\n\n  (let [^js viewer-clt (.. viewer -viewer -classList)\n        ^js cnt-el (.-container viewer)\n        *el (rum/use-ref nil)\n        *sta-el (rum/use-ref nil)\n        *cnt-rect (rum/use-ref nil)\n\n        [start-coord, set-start-coord!] (rum/use-state nil)\n        [end-coord, set-end-coord!] (rum/use-state nil)\n        [_ set-area-mode!] (use-atom *area-mode?)\n\n        should-start (fn [^js e]\n                       (let [^js target (.-target e)]\n                         (when (and (not\n                                      (.contains (.-classList target) \"extensions__pdf-hls-area-region\"))\n                                    (.closest target \".page\"))\n                           (and e (or (.-metaKey e)\n                                      (and util/win32? (.-shiftKey e))\n                                      @*area-mode?)))))\n\n        reset-coords #(do\n                        (set-start-coord! nil)\n                        (set-end-coord! nil)\n                        (rum/set-ref! *sta-el nil))\n\n        calc-coords (fn [page-x page-y]\n                      (when cnt-el\n                        (let [cnt-rect (rum/deref *cnt-rect)\n                              cnt-rect (or cnt-rect (bean/->clj (.toJSON (.getBoundingClientRect cnt-el))))\n                              _ (rum/set-ref! *cnt-rect cnt-rect)]\n\n                          {:x (-> page-x\n                                (- (:left cnt-rect))\n                                (+ (.-scrollLeft cnt-el)))\n                           :y (-> page-y\n                                (- (:top cnt-rect))\n                                (+ (.-scrollTop cnt-el)))})))\n\n        calc-pos (fn [start end]\n                   {:left   (min (:x start) (:x end))\n                    :top    (min (:y start) (:y end))\n                    :width  (js/Math.abs (- (:x end) (:x start)))\n                    :height (js/Math.abs (- (:y end) (:y start)))})\n\n        disable-text-selection! #(js-invoke viewer-clt (if % \"add\" \"remove\") \"disabled-text-selection\")\n\n        fn-move (rum/use-callback\n                  (fn [^js/MouseEvent e]\n                    (set-end-coord! (calc-coords (.-pageX e) (.-pageY e))))\n                  [])]\n\n    (rum/use-effect!\n      (fn []\n        (when-let [^js/HTMLElement root cnt-el]\n          (let [fn-start (fn [^js/MouseEvent e]\n                           (if (should-start e)\n                             (do\n                               (rum/set-ref! *sta-el (.-target e))\n                               (set-start-coord! (calc-coords (.-pageX e) (.-pageY e)))\n                               (disable-text-selection! true)\n\n                               (.addEventListener root \"mousemove\" fn-move))\n\n                             ;; reset\n                             (reset-coords)))\n\n                fn-end (fn [^js/MouseEvent e]\n                         (when-let [start-el (rum/deref *sta-el)]\n                           (let [end (calc-coords (.-pageX e) (.-pageY e))\n                                 pos (calc-pos start-coord end)]\n\n                             (if (and (> (:width pos) 10)\n                                      (> (:height pos) 10))\n\n                               (when-let [^js page-el (.closest start-el \".page\")]\n                                 (let [page-number (int (.-pageNumber (.-dataset page-el)))\n                                       page-pos (merge pos {:top  (- (:top pos) (.-offsetTop page-el))\n                                                            :left (- (:left pos) (.-offsetLeft page-el))})\n                                       vw-pos {:bounding page-pos :rects [] :page page-number}\n                                       sc-pos (pdf-utils/vw-to-scaled-pos viewer vw-pos)\n\n                                       point {:x (.-clientX e) :y (.-clientY e)}\n                                       hl {:id         nil\n                                           :page       page-number\n                                           :position   sc-pos\n                                           :content    {:text \"[:span]\" :image (js/Date.now)}\n                                           :properties {}}]\n\n                                   ;; ctx tips\n                                   (show-ctx-tip! viewer hl point {:reset-fn #(reset-coords)})\n\n                                   ;; export area highlight\n                                   ;;(dd \"[selection end] :start\"\n                                   ;;    start-coord \":end\" end \":pos\" pos\n                                   ;;    \":page\" page-number\n                                   ;;    \":offset\" page-pos\n                                   ;;    \":vw-pos\" vw-pos\n                                   ;;    \":sc-pos\" sc-pos)\n                                   )\n\n                                 (set-area-mode! false))\n\n                               ;; reset\n                               (reset-coords)))\n\n                           (disable-text-selection! false)\n                           (.removeEventListener root \"mousemove\" fn-move)))]\n\n            (doto root\n              (.addEventListener \"mousedown\" fn-start)\n              (.addEventListener \"mouseup\" fn-end #js {:once true}))\n\n            ;; destroy\n            #(doto root\n               (.removeEventListener \"mousedown\" fn-start)\n               (.removeEventListener \"mouseup\" fn-end)))))\n      [start-coord])\n\n    [:div.extensions__pdf-area-selection\n     {:ref *el}\n     (when (and start-coord end-coord)\n       [:div.shadow-rect {:style (calc-pos start-coord end-coord)}])]))\n\n(rum/defc ^:large-vars/cleanup-todo pdf-highlights\n  [^js el ^js viewer initial-hls loaded-pages {:keys [set-dirty-hls!]}]\n\n  (let [^js doc (.-ownerDocument el)\n        ^js win (.-defaultView doc)\n        *mounted (rum/use-ref false)\n        [sel-state, set-sel-state!] (rum/use-state {:range nil :collapsed nil :point nil})\n        [highlights, set-highlights!] (rum/use-state initial-hls)\n        [tip-state, set-tip-state!] (rum/use-state {:highlight nil :vw-pos nil :range nil :point nil :reset-fn nil})\n\n        clear-ctx-tip! (rum/use-callback\n                         #(let [reset-fn (:reset-fn tip-state)]\n                            (set-tip-state! {})\n                            (and (fn? reset-fn) (reset-fn)))\n                         [tip-state])\n\n        show-ctx-tip! (fn [^js viewer hl point & ops]\n                        (let [vw-pos (pdf-utils/scaled-to-vw-pos viewer (:position hl))]\n                          (set-tip-state! (apply merge (list* {:highlight hl :vw-pos vw-pos :point point} ops)))))\n\n        add-hl! (fn [hl] (when (:id hl)\n                           ;; fix js object\n                           (let [highlights (pdf-utils/fix-nested-js highlights)]\n                             (set-highlights! (conj highlights hl)))\n\n                           (when-let [vw-pos (and (pdf-assets/area-highlight? hl)\n                                                  (pdf-utils/scaled-to-vw-pos viewer (:position hl)))]\n                             ;; exceptions\n                             (pdf-assets/persist-hl-area-image$ viewer (:pdf/current @state/state)\n                                                                hl nil (:bounding vw-pos)))))\n\n        upd-hl! (fn [hl]\n                  (let [highlights (pdf-utils/fix-nested-js highlights)]\n                    (when-let [[target-idx] (medley/find-first\n                                              #(= (:id (second %)) (:id hl))\n                                              (medley/indexed highlights))]\n                      (set-highlights! (assoc-in highlights [target-idx] hl))\n                      (pdf-assets/update-hl-area-block! hl))))\n\n        del-hl! (fn [hl] (when-let [id (:id hl)] (set-highlights! (into [] (remove #(= id (:id %)) highlights)))))]\n\n    ;; consume dirtied\n    (rum/use-effect!\n      (fn []\n        (if (rum/deref *mounted)\n          (set-dirty-hls! highlights)\n          (rum/set-ref! *mounted true)))\n      [highlights])\n\n    ;; selection events\n    (rum/use-effect!\n      (fn []\n        (let [fn-selection-ok\n              (fn [^js/MouseEvent e]\n                (let [^js/Selection selection (js/document.getSelection)\n                      ^js/Range sel-range (.getRangeAt selection 0)]\n\n                  (cond\n                    (.-isCollapsed selection)\n                    (set-sel-state! {:collapsed true})\n\n                    (and sel-range (.contains el (.-commonAncestorContainer sel-range)))\n                    (set-sel-state! {:collapsed false :range sel-range :point {:x (.-clientX e) :y (.-clientY e)}}))))\n\n              fn-selection\n              (fn []\n                (let [*dirty (volatile! false)\n                      fn-dirty #(vreset! *dirty true)]\n\n                  (js/document.addEventListener \"selectionchange\" fn-dirty)\n                  (js/document.addEventListener \"mouseup\"\n                                                (fn [^js e]\n                                                  (and @*dirty (fn-selection-ok e))\n                                                  (js/document.removeEventListener \"selectionchange\" fn-dirty))\n                                                #js {:once true})))\n\n              fn-resize\n              (partial pdf-utils/adjust-viewer-size! viewer)]\n\n          ;;(doto (.-eventBus viewer))\n\n          (doto el\n            (.addEventListener \"mousedown\" fn-selection))\n\n          (doto win\n            (.addEventListener \"resize\" fn-resize))\n\n          ;; destroy\n          #(do\n             ;;(doto (.-eventBus viewer))\n\n             (doto el\n               (.removeEventListener \"mousedown\" fn-selection))\n\n             (doto win\n               (.removeEventListener \"resize\" fn-resize)))))\n\n      [viewer])\n\n    ;; selection context menu\n    (rum/use-effect!\n      (fn []\n        (when-let [^js sel-range (and (not (:collapsed sel-state)) (:range sel-state))]\n          (let [^js point (:point sel-state)\n                hl-fn #(when-let [page-info (pdf-utils/get-page-from-range sel-range)]\n                         (when-let [sel-rects (pdf-utils/get-range-rects<-page-cnt sel-range (:page-el page-info))]\n                           (let [page (int (:page-number page-info))\n                                 ^js bounding (pdf-utils/get-bounding-rect sel-rects)\n                                 vw-pos {:bounding bounding :rects sel-rects :page page}\n                                 sc-pos (pdf-utils/vw-to-scaled-pos viewer vw-pos)]\n\n                             ;; TODO: debug\n                             ;;(dd \"[VW x SC] ====>\" vw-pos sc-pos)\n                             ;;(dd \"[Range] ====> [\" page-info \"]\" (.toString sel-range) point)\n                             ;;(dd \"[Rects] ====>\" sel-rects \" [Bounding] ====>\" bounding)\n\n\n                             {:id         nil\n                              :page       page\n                              :position   sc-pos\n                              :content    {:text (.toString sel-range)}\n                              :properties {}})))]\n\n            ;; show ctx menu\n            (set-tip-state! {:highlight hl-fn\n                             :range     sel-range\n                             :point     point}))))\n\n      [(:range sel-state)])\n\n    ;; render hls\n    (rum/use-effect!\n      (fn []\n        ;;(dd \"=== rebuild highlights ===\" (count highlights))\n\n        (when-let [grouped-hls (and (sequential? highlights) (group-by :page highlights))]\n          (doseq [page loaded-pages]\n            (when-let [^js/HTMLDivElement hls-layer (pdf-utils/resolve-hls-layer! viewer page)]\n              (let [page-hls (get grouped-hls page)]\n\n                (rum/mount\n                  ;; TODO: area & text hls\n                  (pdf-highlights-region-container\n                    viewer page-hls {:show-ctx-tip! show-ctx-tip!\n                                     :upd-hl!       upd-hl!})\n\n                  hls-layer)))))\n\n        ;; destroy\n        #())\n      [loaded-pages highlights])\n\n    [:div.extensions__pdf-highlights-cnt\n\n     ;; hl context tip menu\n     (when (:highlight tip-state)\n       (js/ReactDOM.createPortal\n         (pdf-highlights-ctx-menu\n           viewer tip-state\n\n           {:clear-ctx-tip! clear-ctx-tip!\n            :add-hl!        add-hl!\n            :del-hl!        del-hl!\n            :upd-hl!        upd-hl!})\n\n         (.querySelector el \".pp-holder\")))\n\n     ;; debug highlights anchor\n     ;;(if (seq highlights)\n     ;;  [:ul.extensions__pdf-highlights\n     ;;   (for [hl highlights]\n     ;;     [:li\n     ;;      [:a\n     ;;       {:on-click #(pdf-utils/scroll-to-highlight viewer hl)}\n     ;;       (str \"#\" (:id hl) \"#  \")]\n     ;;      (:text (:content hl))])\n     ;;   ])\n     ;; refs\n     (pdf-highlight-finder viewer)\n     (pdf-page-finder viewer)\n\n     ;; area selection container\n     (pdf-highlight-area-selection\n       viewer\n       {:clear-ctx-tip! clear-ctx-tip!\n        :show-ctx-tip!  show-ctx-tip!\n        :add-hl!        add-hl!\n        })]))\n\n(rum/defc pdf-settings\n  [^js _viewer theme {:keys [hide-settings! select-theme! t]}]\n\n  (let [*el-popup (rum/use-ref nil)\n        [area-dashed? set-area-dashed?] (use-atom *area-dashed?)]\n\n    (rum/use-effect!\n      (fn []\n        (let [el-popup (rum/deref *el-popup)\n              cb (fn [^js e]\n                   (and (= e.which 27) (hide-settings!)))]\n\n          (js/setTimeout #(.focus el-popup))\n          (.addEventListener el-popup \"keyup\" cb)\n          #(.removeEventListener el-popup \"keyup\" cb)))\n      [])\n\n    (rum/use-effect!\n      (fn []\n        (storage/set \"ls-pdf-area-is-dashed\" (boolean area-dashed?)))\n      [area-dashed?])\n\n    [:div.extensions__pdf-settings.hls-popup-wrap.visible\n     {:on-click (fn [^js/MouseEvent e]\n                  (let [target (.-target e)]\n                    (when-not (.contains (rum/deref *el-popup) target)\n                      (hide-settings!))))}\n\n     [:div.extensions__pdf-settings-inner.hls-popup-box\n      {:ref       *el-popup\n       :tab-index -1}\n\n      [:div.extensions__pdf-settings-item.theme-picker\n       (map (fn [it]\n              [:button.flex.items-center.justify-center\n               {:key it :class it :on-click #(do (select-theme! it) (hide-settings!))}\n               (when (= theme it) (svg/check))])\n            [\"light\", \"warm\", \"dark\"])]\n\n      [:div.extensions__pdf-settings-item.toggle-input\n       [:label (t :pdf/toggle-dashed)]\n       (ui/toggle area-dashed? #(set-area-dashed? (not area-dashed?)) true)]\n      ]]))\n\n(rum/defc pdf-outline-item\n  [^js viewer\n   {:keys [title items parent dest expanded]}\n   {:keys [upt-outline-node!] :as ops}]\n  (let [has-child? (seq items)\n        expanded? (boolean expanded)]\n\n    [:div.extensions__pdf-outline-item\n     {:class (util/classnames [{:has-children has-child? :is-expand expanded?}])}\n     [:div.inner\n      [:a\n       {:href      \"javascript:void(0);\"\n        :data-dest (js/JSON.stringify (bean/->js dest))\n        :on-click  (fn [^js/MouseEvent e]\n                     (let [target (.-target e)]\n                       (if (.closest target \"i\")\n                         (let [path (map #(if (re-find #\"\\d+\" %) (int %) (keyword %))\n                                         (string/split parent #\"\\-\"))]\n                           (.preventDefault e)\n                           (upt-outline-node! path {:expanded (not expanded?)}))\n                         (when-let [^js dest (and dest (bean/->js dest))]\n                           (.goToDestination (.-linkService viewer) dest)))))}\n\n       [:i.arrow svg/arrow-right-v2]\n       [:span title]]]\n\n     ;; children\n     (when (and has-child? expanded?)\n       [:div.children\n        (map-indexed\n          (fn [idx itm]\n            (let [parent (str parent \"-items-\" idx)]\n              (rum/with-key\n                (pdf-outline-item\n                  viewer\n                  (merge itm {:parent parent})\n                  ops) parent))) items)])]))\n\n(rum/defc pdf-outline\n  [^js viewer visible? set-visible!]\n  (when-let [^js pdf-doc (and viewer (.-pdfDocument viewer))]\n    (let [*el-outline (rum/use-ref nil)\n          [outline-data, set-outline-data!] (rum/use-state [])\n          upt-outline-node! (rum/use-callback\n                              (fn [path attrs]\n                                (set-outline-data! (update-in outline-data path merge attrs)))\n                              [outline-data])]\n\n      (rum/use-effect!\n        (fn []\n          (p/catch\n           (p/let [^js data (.getOutline pdf-doc)]\n                  #_:clj-kondo/ignore\n                  (when-let [data (and data (.map data (fn [^js it]\n                                                         (set! (.-href it) (.. viewer -linkService (getDestinationHash (.-dest it))))\n                                                         (set! (.-expanded it) false)\n                                                         it)))])\n                  (set-outline-data! (bean/->clj data)))\n\n            (fn [e]\n              (js/console.error \"[Load outline Error]\" e))))\n        [pdf-doc])\n\n      (rum/use-effect!\n        (fn []\n          (let [el-outline (rum/deref *el-outline)\n                cb (fn [^js e]\n                     (and (= e.which 27) (set-visible! false)))]\n\n            (js/setTimeout #(.focus el-outline))\n            (.addEventListener el-outline \"keyup\" cb)\n            #(.removeEventListener el-outline \"keyup\" cb)))\n        [])\n\n      [:div.extensions__pdf-outline-wrap.hls-popup-wrap\n       {:class    (util/classnames [{:visible visible?}])\n        :on-click (fn [^js/MouseEvent e]\n                    (let [target (.-target e)]\n                      (when-not (.contains (rum/deref *el-outline) target)\n                        (set-visible! false))))}\n\n       [:div.extensions__pdf-outline.hls-popup-box\n        {:ref       *el-outline\n         :tab-index -1}\n        (if (seq outline-data)\n          [:section\n           (map-indexed (fn [idx itm]\n                          (rum/with-key\n                            (pdf-outline-item\n                              viewer\n                              (merge itm {:parent idx})\n                              {:upt-outline-node! upt-outline-node!})\n                            idx))\n                        outline-data)]\n          [:section.is-empty \"No outlines\"])]])))\n\n(rum/defc docinfo-display\n  [info close-fn!]\n  [:div#pdf-docinfo.extensions__pdf-doc-info\n   [:div.inner-text\n    (for [[k v] info\n          :let [k (str (string/replace-first (pr-str k) #\"^\\:\" \"\") \"::\")]]\n      [:p {:key k} [:strong k] \"  \" [:i (pr-str v)]])]\n\n   [:div.flex.items-center.justify-center.pt-2.pb--2\n    (ui/button \"Copy all\"\n               :on-click\n               (fn []\n                 (let [text (.-innerText (js/document.querySelector \"#pdf-docinfo > .inner-text\"))\n                       text (string/replace text #\"[\\n\\t]+\" \"\\n\")]\n                   (util/copy-to-clipboard! text)\n                   (notification/show! \"Copied!\" :success)\n                   (close-fn!))))]])\n\n(defn make-docinfo-in-modal\n  [info]\n  (fn [close-fn!]\n    (docinfo-display info close-fn!)))\n\n(rum/defc ^:large-vars/cleanup-todo pdf-toolbar\n  [^js viewer]\n  (let [[area-mode? set-area-mode!] (use-atom *area-mode?)\n        [outline-visible?, set-outline-visible!] (rum/use-state false)\n        [highlight-mode?, set-highlight-mode!] (use-atom *highlight-mode?)\n        [settings-visible?, set-settings-visible!] (rum/use-state false)\n        *page-ref (rum/use-ref nil)\n        [current-page-num, set-current-page-num!] (rum/use-state 1)\n        [total-page-num, set-total-page-num!] (rum/use-state 1)\n        [viewer-theme, set-viewer-theme!] (rum/use-state (or (storage/get \"ls-pdf-viewer-theme\") \"light\"))]\n\n    ;; themes hooks\n    (rum/use-effect!\n      (fn []\n        (when-let [^js el (js/document.getElementById \"pdf-layout-container\")]\n          (set! (. (. el -dataset) -theme) viewer-theme)\n          (storage/set \"ls-pdf-viewer-theme\" viewer-theme)\n          #(js-delete (. el -dataset) \"theme\")))\n      [viewer-theme])\n\n    ;; pager hooks\n    (rum/use-effect!\n      (fn []\n        (when-let [total (and viewer (.-numPages (.-pdfDocument viewer)))]\n          (let [^js bus (.-eventBus viewer)\n                page-fn (fn [^js evt]\n                          (let [num (.-pageNumber evt)]\n                            (set-current-page-num! num)))]\n\n            (set-total-page-num! total)\n            (set-current-page-num! (.-currentPageNumber viewer))\n            (.on bus \"pagechanging\" page-fn)\n            #(.off bus \"pagechanging\" page-fn))))\n      [viewer])\n\n    (rum/use-effect!\n      (fn []\n        (let [^js input (rum/deref *page-ref)]\n          (set! (. input -value) current-page-num)))\n      [current-page-num])\n\n    [:div.extensions__pdf-toolbar\n     [:div.inner\n      [:div.r.flex.buttons\n\n       ;; appearance\n       [:a.button\n        {:title    \"More settings\"\n         :on-click #(set-settings-visible! (not settings-visible?))}\n        (svg/adjustments 18)]\n\n       ;; selection\n       [:a.button\n        {:title    (str \"Area highlight (\" (if util/mac? \"\u2318\" \"Shift\") \")\")\n         :class    (when area-mode? \"is-active\")\n         :on-click #(set-area-mode! (not area-mode?))}\n        (svg/icon-area 18)]\n\n       [:a.button\n        {:title    \"Highlight mode\"\n         :class    (when highlight-mode? \"is-active\")\n         :on-click #(set-highlight-mode! (not highlight-mode?))}\n        (svg/highlighter 16)]\n\n       ;; zoom\n       [:a.button\n        {:title    \"Zoom out\"\n         :on-click (partial pdf-utils/zoom-out-viewer viewer)}\n        (svg/zoom-out 18)]\n\n       [:a.button\n        {:title    \"Zoom in\"\n         :on-click (partial pdf-utils/zoom-in-viewer viewer)}\n        (svg/zoom-in 18)]\n\n       [:a.button\n        {:title    \"Outline\"\n         :on-click #(set-outline-visible! (not outline-visible?))}\n        (svg/view-list 16)]\n\n       ;; metadata\n       [:a.button.is-info\n        {:title    \"Document info\"\n         :on-click #(p/let [ret (pdf-utils/get-meta-data$ viewer)]\n                           (state/set-modal! (make-docinfo-in-modal ret)))}\n        (svg/icon-info)]\n\n       ;; annotations\n       [:a.button\n        {:title    \"Annotations page\"\n         :on-click #(pdf-assets/goto-annotations-page! (:pdf/current @state/state))}\n        (svg/annotations 16)]\n\n       ;; pager\n       [:div.pager.flex.items-center.ml-1\n\n        [:span.nu.flex.items-center.opacity-70\n         [:input {:ref            *page-ref\n                  :type           \"number\"\n                  :default-value  current-page-num\n                  :on-mouse-enter #(.select ^js (.-target %))\n                  :on-key-up      (fn [^js e]\n                                    (let [^js input (.-target e)\n                                          value (util/safe-parse-int (.-value input))]\n                                      (when (and (= (.-keyCode e) 13) value (> value 0))\n                                        (set! (. viewer -currentPageNumber)\n                                              (if (> value total-page-num) total-page-num value)))))}]\n         [:small \"/ \" total-page-num]]\n\n        [:span.ct.flex.items-center\n         [:a.button {:on-click #(. viewer previousPage)} (svg/up-narrow)]\n         [:a.button {:on-click #(. viewer nextPage)} (svg/down-narrow)]]]\n\n       [:a.button\n        {:on-click #(state/set-state! :pdf/current nil)}\n        (t :close)]]]\n\n     ;; contents outline\n     (pdf-outline viewer outline-visible? set-outline-visible!)\n\n     ;; settings\n     (and settings-visible?\n          (pdf-settings\n            viewer\n            viewer-theme\n            {:t              t\n             :hide-settings! #(set-settings-visible! false)\n             :select-theme!  #(set-viewer-theme! %)}))]))\n\n(rum/defc pdf-viewer\n  [url initial-hls ^js pdf-document ops]\n\n  ;;(dd \"==== render pdf-viewer ====\")\n\n  (let [*el-ref (rum/create-ref)\n        [state, set-state!] (rum/use-state {:viewer nil :bus nil :link nil :el nil})\n        [ano-state, set-ano-state!] (rum/use-state {:loaded-pages []})\n        [page-ready?, set-page-ready!] (rum/use-state false)]\n\n    ;; instant pdfjs viewer\n    (rum/use-effect!\n      (fn [] (let [^js event-bus (js/pdfjsViewer.EventBus.)\n                   ^js link-service (js/pdfjsViewer.PDFLinkService. #js {:eventBus event-bus :externalLinkTarget 2})\n                   ^js el (rum/deref *el-ref)\n                   ^js viewer (js/pdfjsViewer.PDFViewer.\n                                #js {:container            el\n                                     :eventBus             event-bus\n                                     :linkService          link-service\n                                     :enhanceTextSelection true\n                                     :textLayerMode        2\n                                     :removePageBorders    true})]\n               (. link-service setDocument pdf-document)\n               (. link-service setViewer viewer)\n\n               ;; TODO: debug\n               (set! (. js/window -lsPdfViewer) viewer)\n\n               (p/then (. viewer setDocument pdf-document)\n                       #(set-state! {:viewer viewer :bus event-bus :link link-service :el el}))\n\n               ;;TODO: destroy\n               (fn []\n                 (when-let [last-page (.-currentPageNumber viewer)]\n                   (storage/set (str \"ls-pdf-last-page-\" (util/node-path.basename url)) last-page))\n\n                 (when pdf-document (.destroy pdf-document)))))\n      [])\n\n    ;; interaction events\n    (rum/use-effect!\n      (fn []\n        (when-let [^js viewer (:viewer state)]\n          (let [fn-textlayer-ready\n                (fn [^js p]\n                  (set-ano-state! {:loaded-pages (conj (:loaded-pages ano-state) (int (.-pageNumber p)))}))\n\n                fn-page-ready\n                (fn []\n                  (set! (. viewer -currentScaleValue) \"auto\")\n                  (set-page-ready! true))]\n\n            (doto (.-eventBus viewer)\n              (.on \"pagesinit\" fn-page-ready)\n              (.on \"textlayerrendered\" fn-textlayer-ready))\n\n            #(do\n               (doto (.-eventBus viewer)\n                 (.off \"pagesinit\" fn-page-ready)\n                 (.off \"textlayerrendered\" fn-textlayer-ready))))))\n\n      [(:viewer state)\n       (:loaded-pages ano-state)])\n\n    (let [^js viewer (:viewer state)]\n      [:div.extensions__pdf-viewer-cnt\n       [:div.extensions__pdf-viewer\n        {:ref *el-ref :class (util/classnames [{:is-area-dashed @*area-dashed?}])}\n        [:div.pdfViewer \"viewer pdf\"]\n        [:div.pp-holder]\n\n        (when (and page-ready? viewer)\n          [(rum/with-key\n             (pdf-highlights\n               (:el state) viewer\n               initial-hls (:loaded-pages ano-state)\n               ops) \"pdf-highlights\")])]\n\n       (when (and page-ready? viewer)\n         [(rum/with-key (pdf-resizer viewer) \"pdf-resizer\")\n          (rum/with-key (pdf-toolbar viewer) \"pdf-toolbar\")])])))\n\n(rum/defc pdf-loader\n  [{:keys [url hls-file] :as pdf-current}]\n  (let [*doc-ref (rum/use-ref nil)\n        [state, set-state!] (rum/use-state {:error nil :pdf-document nil :status nil})\n        [hls-state, set-hls-state!] (rum/use-state {:initial-hls nil :latest-hls nil})\n        set-dirty-hls! (fn [latest-hls]                     ;; TODO: incremental\n                         (set-hls-state! {:initial-hls [] :latest-hls latest-hls}))]\n\n    ;; load highlights\n    (rum/use-effect!\n      (fn []\n        (p/catch\n          (p/let [data (pdf-assets/load-hls-data$ pdf-current)\n                  highlights (:highlights data)]\n            (set-hls-state! {:initial-hls highlights}))\n\n          ;; error\n          (fn [e]\n            (js/console.error \"[load hls error]\" e)\n            (set-hls-state! {:initial-hls []})))\n\n        ;; cancel\n        #())\n      [hls-file])\n\n    ;; cache highlights\n    (rum/use-effect!\n      (fn []\n        (when-let [hls (:latest-hls hls-state)]\n          (p/catch\n            (pdf-assets/persist-hls-data$ pdf-current hls)\n\n            ;; write hls file error\n            (fn [e]\n              (js/console.error \"[write hls error]\" e)))))\n\n      [(:latest-hls hls-state)])\n\n    ;; load document\n    (rum/use-effect!\n      (fn []\n        (let [get-doc$ (fn [^js opts] (.-promise (js/pdfjsLib.getDocument opts)))\n              opts {:url           url\n                    :ownerDocument js/document\n                    :cMapUrl       \"./js/pdfjs/cmaps/\"\n                    ;;:cMapUrl       \"https://cdn.jsdelivr.net/npm/pdfjs-dist@2.8.335/cmaps/\"\n                    :cMapPacked    true}]\n\n          (p/finally\n            (p/catch (p/then\n                       (do\n                         (set-state! {:status :loading})\n                         (get-doc$ (clj->js opts)))\n                       #(set-state! {:pdf-document %}))\n                     #(set-state! {:error %}))\n            #(set-state! {:status :completed}))\n\n          #()))\n      [url])\n\n    (rum/use-effect!\n      (fn []\n        (when-let [error (:error state)]\n          (dd \"[ERROR loader]\" (:error state))\n          (case (.-name error)\n            \"MissingPDFException\"\n            (do\n              (notification/show!\n               (str (.-message error) \" Is this the correct path?\")\n               :error\n               false)\n              (state/set-state! :pdf/current nil))\n\n            \"InvalidPDFException\"\n            (do\n              (notification/show!\n               (str (.-message error) \"\\n\"\n                    \"Is this .pdf file corrupted?\\n\"\n                    \"Please confirm with external pdf viewer.\")\n               :error\n               false)\n              (state/set-state! :pdf/current nil)))))\n      [(:error state)])\n\n    [:div.extensions__pdf-loader {:ref *doc-ref}\n     (let [status-doc (:status state)\n           initial-hls (:initial-hls hls-state)]\n\n       (if (or (= status-doc :loading)\n               (nil? initial-hls))\n\n         [:div.flex.justify-center.items-center.h-screen.text-gray-500.text-lg\n          svg/loading]\n\n         [(rum/with-key (pdf-viewer\n                          url initial-hls\n                          (:pdf-document state)\n                          {:set-dirty-hls! set-dirty-hls!}) \"pdf-viewer\")]))]))\n\n(rum/defc pdf-container\n  [{:keys [identity] :as pdf-current}]\n  (let [[prepared set-prepared!] (rum/use-state false)\n        [ready set-ready!] (rum/use-state false)]\n\n    ;; load assets\n    (rum/use-effect!\n      (fn []\n        (p/then\n          (pdf-utils/load-base-assets$)\n          (fn [] (set-prepared! true))))\n      [])\n\n    ;; refresh loader\n    (rum/use-effect!\n      (fn []\n        (js/setTimeout #(set-ready! true) 100)\n        #(set-ready! false))\n      [identity])\n\n    [:div#pdf-layout-container.extensions__pdf-container\n     (when (and prepared identity ready)\n       (pdf-loader pdf-current))]))\n\n(rum/defc playground-effects\n  [active]\n\n  (rum/use-effect!\n    (fn []\n      (let [flg \"is-pdf-active\"\n            ^js cls (.-classList js/document.body)]\n        (and active (.add cls flg))\n\n        #(.remove cls flg)))\n\n    [active])\n  nil)\n\n(rum/defcs playground\n  < rum/static rum/reactive\n    (shortcut/mixin :shortcut.handler/pdf)\n  [state]\n  (let [pdf-current (state/sub :pdf/current)]\n    [:div.extensions__pdf-playground\n\n     (playground-effects (not (nil? pdf-current)))\n\n     (when pdf-current\n       (js/ReactDOM.createPortal\n         (pdf-container pdf-current)\n         (js/document.querySelector \"#app-single-container\")))]))\n"]}