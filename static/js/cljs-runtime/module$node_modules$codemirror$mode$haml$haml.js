shadow$provide.module$node_modules$codemirror$mode$haml$haml=function(global,require,module,exports){(function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("module$node_modules$codemirror$lib$codemirror"),require("module$node_modules$codemirror$mode$htmlmixed$htmlmixed"),require("module$node_modules$codemirror$mode$ruby$ruby")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../ruby/ruby"],mod):mod(CodeMirror)})(function(CodeMirror){CodeMirror.defineMode("haml",
function(config){function rubyInQuote(endQuote){return function(stream,state){return stream.peek()==endQuote&&1==state.rubyState.tokenize.length?(stream.next(),state.tokenize=html,"closeAttributeTag"):ruby(stream,state)}}function ruby(stream,state){return stream.match("-#")?(stream.skipToEnd(),"comment"):rubyMode.token(stream,state.rubyState)}function html(stream,state){var ch=stream.peek();if("comment"==state.previousToken.style&&state.indented>state.previousToken.indented)return stream.skipToEnd(),
"commentLine";if(state.startOfLine){if("!"==ch&&stream.match("!!"))return stream.skipToEnd(),"tag";if(stream.match(/^%[\w:#\.]+=/))return state.tokenize=ruby,"hamlTag";if(stream.match(/^%[\w:]+/))return"hamlTag";if("/"==ch)return stream.skipToEnd(),"comment"}if(state.startOfLine||"hamlTag"==state.previousToken.style)if("#"==ch||"."==ch)return stream.match(/[\w-#\.]*/),"hamlAttribute";if(state.startOfLine&&!stream.match("--\x3e",!1)&&("\x3d"==ch||"-"==ch))return state.tokenize=ruby,state.tokenize(stream,
state);if("hamlTag"==state.previousToken.style||"closeAttributeTag"==state.previousToken.style||"hamlAttribute"==state.previousToken.style){if("("==ch)return state.tokenize=rubyInQuote(")"),state.tokenize(stream,state);if("{"==ch&&!stream.match(/^\{%.*/))return state.tokenize=rubyInQuote("}"),state.tokenize(stream,state)}return htmlMode.token(stream,state.htmlState)}var htmlMode=CodeMirror.getMode(config,{name:"htmlmixed"}),rubyMode=CodeMirror.getMode(config,"ruby");return{startState:function(){var htmlState=
CodeMirror.startState(htmlMode),rubyState=CodeMirror.startState(rubyMode);return{htmlState,rubyState,indented:0,previousToken:{style:null,indented:0},tokenize:html}},copyState:function(state){return{htmlState:CodeMirror.copyState(htmlMode,state.htmlState),rubyState:CodeMirror.copyState(rubyMode,state.rubyState),indented:state.indented,previousToken:state.previousToken,tokenize:state.tokenize}},token:function(stream,state){stream.sol()&&(state.indented=stream.indentation(),state.startOfLine=!0);if(stream.eatSpace())return null;
var style=state.tokenize(stream,state);state.startOfLine=!1;style&&"commentLine"!=style&&(state.previousToken={style,indented:state.indented});if(stream.eol()&&state.tokenize==ruby){stream.backUp(1);var ch=stream.peek();stream.next();ch&&","!=ch&&(state.tokenize=html)}"hamlTag"==style?style="tag":"commentLine"==style?style="comment":"hamlAttribute"==style?style="attribute":"closeAttributeTag"==style&&(style=null);return style}}},"htmlmixed","ruby");CodeMirror.defineMIME("text/x-haml","haml")})}
//# sourceMappingURL=module$node_modules$codemirror$mode$haml$haml.js.map
