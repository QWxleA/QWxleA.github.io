{
"version":3,
"file":"module$node_modules$fs_extra$lib$copy$copy.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/fs-extra/lib/copy/copy.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$fs_extra$lib$copy$copy\"] = function(global,require,module,exports) {\nvar process = require('process');\n'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirs = require('../mkdirs').mkdirs\nconst pathExists = require('../path-exists').pathExists\nconst utimesMillis = require('../util/utimes').utimesMillis\nconst stat = require('../util/stat')\n\nfunction copy (src, dest, opts, cb) {\n  if (typeof opts === 'function' && !cb) {\n    cb = opts\n    opts = {}\n  } else if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  cb = cb || function () {}\n  opts = opts || {}\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  stat.checkPaths(src, dest, 'copy', (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'copy', err => {\n      if (err) return cb(err)\n      if (opts.filter) return handleFilter(checkParentDir, destStat, src, dest, opts, cb)\n      return checkParentDir(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction checkParentDir (destStat, src, dest, opts, cb) {\n  const destParent = path.dirname(dest)\n  pathExists(destParent, (err, dirExists) => {\n    if (err) return cb(err)\n    if (dirExists) return startCopy(destStat, src, dest, opts, cb)\n    mkdirs(destParent, err => {\n      if (err) return cb(err)\n      return startCopy(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction handleFilter (onInclude, destStat, src, dest, opts, cb) {\n  Promise.resolve(opts.filter(src, dest)).then(include => {\n    if (include) return onInclude(destStat, src, dest, opts, cb)\n    return cb()\n  }, error => cb(error))\n}\n\nfunction startCopy (destStat, src, dest, opts, cb) {\n  if (opts.filter) return handleFilter(getStats, destStat, src, dest, opts, cb)\n  return getStats(destStat, src, dest, opts, cb)\n}\n\nfunction getStats (destStat, src, dest, opts, cb) {\n  const stat = opts.dereference ? fs.stat : fs.lstat\n  stat(src, (err, srcStat) => {\n    if (err) return cb(err)\n\n    if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isFile() ||\n             srcStat.isCharacterDevice() ||\n             srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts, cb)\n  })\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts, cb)\n  return mayCopyFile(srcStat, src, dest, opts, cb)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts, cb) {\n  if (opts.overwrite) {\n    fs.unlink(dest, err => {\n      if (err) return cb(err)\n      return copyFile(srcStat, src, dest, opts, cb)\n    })\n  } else if (opts.errorOnExist) {\n    return cb(new Error(`'${dest}' already exists`))\n  } else return cb()\n}\n\nfunction copyFile (srcStat, src, dest, opts, cb) {\n  fs.copyFile(src, dest, err => {\n    if (err) return cb(err)\n    if (opts.preserveTimestamps) return handleTimestampsAndMode(srcStat.mode, src, dest, cb)\n    return setDestMode(dest, srcStat.mode, cb)\n  })\n}\n\nfunction handleTimestampsAndMode (srcMode, src, dest, cb) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) {\n    return makeFileWritable(dest, srcMode, err => {\n      if (err) return cb(err)\n      return setDestTimestampsAndMode(srcMode, src, dest, cb)\n    })\n  }\n  return setDestTimestampsAndMode(srcMode, src, dest, cb)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode, cb) {\n  return setDestMode(dest, srcMode | 0o200, cb)\n}\n\nfunction setDestTimestampsAndMode (srcMode, src, dest, cb) {\n  setDestTimestamps(src, dest, err => {\n    if (err) return cb(err)\n    return setDestMode(dest, srcMode, cb)\n  })\n}\n\nfunction setDestMode (dest, srcMode, cb) {\n  return fs.chmod(dest, srcMode, cb)\n}\n\nfunction setDestTimestamps (src, dest, cb) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  fs.stat(src, (err, updatedSrcStat) => {\n    if (err) return cb(err)\n    return utimesMillis(dest, updatedSrcStat.atime, updatedSrcStat.mtime, cb)\n  })\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts, cb)\n  if (destStat && !destStat.isDirectory()) {\n    return cb(new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`))\n  }\n  return copyDir(src, dest, opts, cb)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts, cb) {\n  fs.mkdir(dest, err => {\n    if (err) return cb(err)\n    copyDir(src, dest, opts, err => {\n      if (err) return cb(err)\n      return setDestMode(dest, srcMode, cb)\n    })\n  })\n}\n\nfunction copyDir (src, dest, opts, cb) {\n  fs.readdir(src, (err, items) => {\n    if (err) return cb(err)\n    return copyDirItems(items, src, dest, opts, cb)\n  })\n}\n\nfunction copyDirItems (items, src, dest, opts, cb) {\n  const item = items.pop()\n  if (!item) return cb()\n  return copyDirItem(items, item, src, dest, opts, cb)\n}\n\nfunction copyDirItem (items, item, src, dest, opts, cb) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  stat.checkPaths(srcItem, destItem, 'copy', (err, stats) => {\n    if (err) return cb(err)\n    const { destStat } = stats\n    startCopy(destStat, srcItem, destItem, opts, err => {\n      if (err) return cb(err)\n      return copyDirItems(items, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction onLink (destStat, src, dest, opts, cb) {\n  fs.readlink(src, (err, resolvedSrc) => {\n    if (err) return cb(err)\n    if (opts.dereference) {\n      resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n    }\n\n    if (!destStat) {\n      return fs.symlink(resolvedSrc, dest, cb)\n    } else {\n      fs.readlink(dest, (err, resolvedDest) => {\n        if (err) {\n          // dest exists and is a regular file or directory,\n          // Windows may throw UNKNOWN error. If dest already exists,\n          // fs throws error anyway, so no need to guard against it here.\n          if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest, cb)\n          return cb(err)\n        }\n        if (opts.dereference) {\n          resolvedDest = path.resolve(process.cwd(), resolvedDest)\n        }\n        if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n          return cb(new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`))\n        }\n\n        // do not copy if src is a subdir of dest since unlinking\n        // dest in this case would result in removing src contents\n        // and therefore a broken symlink would be created.\n        if (destStat.isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n          return cb(new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`))\n        }\n        return copyLink(resolvedSrc, dest, cb)\n      })\n    }\n  })\n}\n\nfunction copyLink (resolvedSrc, dest, cb) {\n  fs.unlink(dest, err => {\n    if (err) return cb(err)\n    return fs.symlink(resolvedSrc, dest, cb)\n  })\n}\n\nmodule.exports = copy\n\n};"],
"names":["shadow$provide","global","require","module","exports","checkParentDir","destStat","src","dest","opts","cb","destParent","path","dirname","pathExists","err","dirExists","startCopy","mkdirs","handleFilter","onInclude","Promise","resolve","filter","then","include","error","getStats","dereference","stat","fs","lstat","srcStat","isDirectory","Error","copyDir","mkDirAndCopy","mode","isFile","isCharacterDevice","isBlockDevice","mayCopyFile","copyFile","isSymbolicLink","onLink","overwrite","unlink","errorOnExist","preserveTimestamps","handleTimestampsAndMode","chmod","srcMode","makeFileWritable","setDestTimestampsAndMode","setDestTimestamps","updatedSrcStat","utimesMillis","atime","mtime","mkdir","readdir","items","item","pop","copyDirItem","srcItem","join","destItem","checkPaths","stats","readlink","resolvedSrc","process","cwd","resolvedDest","code","symlink","isSrcSubdir","copyLink","copy","clobber","arch","console","warn","checkParentPaths"]
}
