{"version":3,"sources":["frontend/modules/outliner/pipeline.cljs"],"mappings":";AAKA,uDAAA,vDAAMA,sHACHC,WAAWC;AADd,AAEE,OAACC,4CAAkBD;;AAErB,kDAAA,lDAAME,4GACHC;AADH,AAEE,IAAAC,aAA6B,AAACK,6DAA+BN;IAA7DC,iBAAA,AAAAC,4BAAAD;YAAA,AAAAE,4CAAAF,eAAA,nEAAcG;aAAd,AAAAD,4CAAAF,eAAA,pEAAoBI;AAApB,AACE,oBAAU,AAAA,gGAAa,AAAA,yFAAUL;AAAjC;AAAA,AACE,IAAAO,mBAAA,AAAAC,cAAU,AAACA,cAAIJ;IAAfK,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,cAAA,AAAAD,wDAAAE,lEAAQS;AAAR,AAAA,AAAuB,AAACzB,qDAAkBK,UAAUoB;;AAApD;AAAA,eAAAb;eAAAE;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAAC,2BAAA,AAAAJ,cAAAD;AAAA,AAAA,GAAAK;AAAA,AAAA,IAAAL,uBAAAK;AAAA,AAAA,GAAA,AAAAC,6BAAAN;AAAA,IAAAO,wBAAA,AAAAC,sBAAAR;AAAA,AAAA,eAAA,AAAAS,qBAAAT;eAAAO;eAAA,AAAAG,gBAAAH;eAAA;;;;;;;AAAA,cAAA,AAAAI,gBAAAX,1BAAQa;AAAR,AAAA,AAAuB,AAACzB,qDAAkBK,UAAUoB;;AAApD;AAAA,eAAA,AAAAD,eAAAZ;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;;AACF,oBAAM,iBAAAc,oBAAKC;AAAL,AAAA,oBAAAD;AAAwB,OAACb,cAAIH;;AAA7BgB;;;AAAN,AACE,sCAAA,mFAAA,4EAAA,2CAAA,gEAAA,6JAAA,tcAACE,kSAC4BlB,iEACA,AAAA,wFAAUL,sEACV,AAAA,yFAAUA;;AAJzC","names":["frontend.modules.outliner.pipeline/updated-page-hook","_tx-report","page","frontend.modules.outliner.file/sync-to-file","frontend.modules.outliner.pipeline/invoke-hooks","tx-report","map__49804","cljs.core/--destructure-map","cljs.core.get","pages","blocks","frontend.modules.datascript-report.core/get-blocks-and-pages","seq__49810","cljs.core/seq","chunk__49811","count__49812","i__49813","temp__5720__auto__","cljs.core/chunked-seq?","c__5565__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","p","and__5041__auto__","frontend.state/lsp-enabled?","frontend.state/pub-event!"],"sourcesContent":["(ns frontend.modules.outliner.pipeline\n  (:require [frontend.modules.datascript-report.core :as ds-report]\n            [frontend.modules.outliner.file :as file]\n            [frontend.state :as state]))\n\n(defn updated-page-hook\n  [_tx-report page]\n  (file/sync-to-file page))\n\n(defn invoke-hooks\n  [tx-report]\n  (let [{:keys [pages blocks]} (ds-report/get-blocks-and-pages tx-report)]\n    (when-not (:from-disk? (:tx-meta tx-report))\n      (doseq [p (seq pages)] (updated-page-hook tx-report p)))\n    (when (and state/lsp-enabled? (seq blocks))\n      (state/pub-event! [:plugin/hook-db-tx\n                         {:blocks  blocks\n                          :tx-data (:tx-data tx-report)\n                          :tx-meta (:tx-meta tx-report)}]))\n    ;; TODO: Add blocks to hooks\n    #_(doseq [b (seq blocks)])))\n"]}