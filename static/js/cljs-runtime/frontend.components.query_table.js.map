{"version":3,"sources":["frontend/components/query_table.cljs"],"mappings":"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","names":["frontend.components.query-table/sort-result-by","by-item","desc?","result","comp","cljs.core/>","cljs.core/<","cljs.core.sort_by","rum.core/lazy-build","rum.core/build-defc","daiquiri.core/create-element","attrs56458","cljs.core/map?","daiquiri.interpreter/element-attributes","daiquiri.normalize.merge_with_class","daiquiri.interpreter/interpret","attrs56462","frontend.components.query-table/sortable-title","title","key","block-id","cljs.core/reset!","cljs.core.swap_BANG_","cljs.core/not","frontend.handler.editor/set-block-property!","cljs.core/name","cljs.core/deref","cljs.core._EQ_","frontend.components.svg/caret-down","frontend.components.svg/caret-up","frontend.components.query-table/get-keys","page?","keys","cljs.core.distinct","cljs.core.mapcat","cljs.core/keys","cljs.core.map","cljs.core.remove","frontend.util.property/built-in-properties","cljs.core/cons","cljs.core.concat","frontend.components.query-table/attach-clock-property","ks","b","frontend.format.block.parse_title_and_body","cljs.core/assoc-in","or__5043__auto__","frontend.util.clock/clock-summary","p1__56477#","cljs.core/every?","cljs.core.get_in","p1__56478#","medley.core.dissoc_in","frontend.components.query-table/sort-by-fn","sort-by-item","item","G__56491","cljs.core/Keyword","frontend.components.query-table/desc?","*desc?","p-desc?","rum.core/build-defcs","p__56513","map__56514","cljs.core/--destructure-map","cljs.core.get","cljs.core.into_array","iter__5520__auto__","s__56534","cljs.core/LazySeq","temp__5720__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5518__auto__","size__5519__auto__","cljs.core/count","b__56536","cljs.core/chunk-buffer","i__56535","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__56533","cljs.core/chunk-rest","cljs.core/first","cljs.core/rest","s__56559","b__56561","i__56560","s__56571","b__56573","i__56572","iter__56570","iter__56558","s__56647","b__56649","i__56648","iter__56646","frontend.components.query-table/result-table","rum.core/reactive","rum.core.local","state","config","current-block","map-inline","page-cp","->elem","inline-text","p-sort-by","cljs.core.keyword","select?","*sort-by-item","G__56518","clock-time-total","p1__56499#","cljs.core.apply","cljs.core/+","query-properties","G__56524","frontend.handler.common/safe-read-string","included-keys","cljs.core/some","cljs.core.filter","e","key-name","cljs.core/integer?","frontend.util.format","frontend.util.clock/minutes->days:hours:minutes","format","value","G__56582","G__56615","G__56654","G__56705","map__56586","map__56616","map__56656","map__56710","content","G__56588","G__56589","G__56617","G__56618","G__56657","G__56658","G__56712","G__56713","created-at","frontend.date/int->local-time-2","updated-at","frontend.state/sidebar-add-block!","frontend.state/get-current-repo","cljs.core/second","cljs.core/coll?","vals","s__56594","b__56596","i__56595","iter__56593","s__56625","b__56627","i__56626","iter__56624","s__56662","b__56664","i__56663","iter__56661","s__56723","b__56725","i__56724","iter__56722","G__56597","G__56598","G__56601","G__56602","G__56628","G__56629","G__56630","G__56631","G__56667","G__56668","G__56675","G__56676","G__56726","G__56727","G__56731","G__56732","cljs.core.interpose","temp__5718__auto__","page","G__56609","G__56639","G__56697","G__56736","frontend.db/entity","frontend.util/page-name-sanity-lc","G__56610","G__56611","G__56640","G__56641","G__56701","G__56702","G__56737","G__56738","cljs.core/chunk-first"],"sourcesContent":["(ns frontend.components.query-table\n  (:require [frontend.components.svg :as svg]\n            [frontend.date :as date]\n            [frontend.db :as db]\n            [frontend.handler.common :as common-handler]\n            [frontend.handler.editor :as editor-handler]\n            [frontend.state :as state]\n            [frontend.util :as util]\n            [frontend.util.clock :as clock]\n            [frontend.util.property :as property]\n            [frontend.format.block :as block]\n            [medley.core :as medley]\n            [rum.core :as rum]))\n\n;; TODO: extract to table utils\n(defn- sort-result-by\n  [by-item desc? result]\n  (let [comp (if desc? > <)]\n    (sort-by by-item comp result)))\n\n(rum/defc sortable-title\n  [title key by-item desc? block-id]\n  [:th.whitespace-nowrap\n   [:a {:on-click (fn []\n                    (reset! by-item key)\n                    (swap! desc? not)\n                    (when block-id\n                      (when key\n                        (editor-handler/set-block-property! block-id :query-sort-by (name key)))\n                      (editor-handler/set-block-property! block-id :query-sort-desc @desc?)))}\n    [:div.flex.items-center\n     [:span.mr-1 title]\n     (when (= @by-item key)\n       [:span\n        (if @desc? (svg/caret-down) (svg/caret-up))])]]])\n\n(defn get-keys\n  [result page?]\n  (let [keys (->> (distinct (mapcat keys (map :block/properties result)))\n                  (remove (property/built-in-properties))\n                  (remove #{:template}))\n        keys (if page? (cons :page keys) (cons :block keys))\n        keys (if page? (distinct (concat keys [:created-at :updated-at])) keys)]\n    keys))\n\n(defn attach-clock-property\n  [result]\n  (let [ks [:block/properties :clock-time]\n        result (map (fn [b]\n                      (let [b (block/parse-title-and-body b)]\n                        (assoc-in b ks (or (clock/clock-summary (:block/body b) false) 0))))\n                    result)]\n    (if (every? #(zero? (get-in % ks)) result)\n      (map #(medley/dissoc-in % ks) result)\n      result)))\n\n(defn- sort-by-fn [sort-by-item item]\n  (case sort-by-item\n    :created-at\n    (:block/created-at item)\n    :updated-at\n    (:block/updated-at item)\n    :block\n    (:block/content item)\n    :page\n    (:block/name item)\n    (get-in item [:block/properties sort-by-item])))\n\n(defn- desc?\n  [*desc? p-desc?]\n  (cond\n    (some? @*desc?)\n    @*desc?\n    (some? p-desc?)\n    p-desc?\n    :else\n    true))\n\n(rum/defcs result-table < rum/reactive\n  (rum/local nil ::sort-by-item)\n  (rum/local nil ::desc?)\n  (rum/local false ::select?)\n  [state config current-block result {:keys [page?]} map-inline page-cp ->elem inline-text]\n  (when current-block\n    (let [p-sort-by (keyword (get-in current-block [:block/properties :query-sort-by]))\n          p-desc? (get-in current-block [:block/properties :query-sort-desc])\n          select? (get state ::select?)\n          *sort-by-item (get state ::sort-by-item)\n          *desc? (get state ::desc?)\n          sort-by-item (or @*sort-by-item (some-> p-sort-by keyword) :updated-at)\n          ;; remove templates\n          result (remove (fn [b] (some? (get-in b [:block/properties :template]))) result)\n          result (if page? result (attach-clock-property result))\n          clock-time-total (when-not page?\n                             (->> (map #(get-in % [:block/properties :clock-time] 0) result)\n                                  (apply +)))\n          query-properties (some-> (get-in current-block [:block/properties :query-properties] \"\")\n                                   (common-handler/safe-read-string \"Parsing query properties failed\"))\n          keys (if (seq query-properties)\n                 query-properties\n                 (get-keys result page?))\n          included-keys #{:created-at :updated-at}\n          keys (distinct\n                (if (some included-keys keys)\n                  (concat (remove included-keys keys)\n                          (filter included-keys keys)\n                          included-keys)\n                  keys))\n          desc? (desc? *desc? p-desc?)\n          result (sort-result-by (fn [item]\n                                   (sort-by-fn sort-by-item item))\n                                 desc?\n                                 result)]\n      [:div.overflow-x-auto {:on-mouse-down (fn [e] (.stopPropagation e))\n                             :style {:width \"100%\"}}\n       [:table.table-auto\n        [:thead\n         [:tr.cursor\n          (for [key keys]\n            (let [key-name (if (and (= key :clock-time) (integer? clock-time-total))\n                             (util/format \"clock-time(total: %s)\" (clock/minutes->days:hours:minutes\n                                                                   clock-time-total))\n                             (name key))]\n              (sortable-title key-name key *sort-by-item *desc? (:block/uuid current-block))))]]\n        [:tbody\n         (for [item result]\n           (let [format (:block/format item)]\n             [:tr.cursor\n              (for [key keys]\n                (let [value (case key\n                              :page\n                              [:string (or (:block/original-name item)\n                                           (:block/name item))]\n\n                              :block       ; block title\n                              (let [content (:block/content item)\n                                    {:block/keys [title]} (block/parse-title-and-body\n                                                           (:block/uuid item)\n                                                           (:block/format item)\n                                                           (:block/pre-block? item)\n                                                           content)]\n                                (if (seq title)\n                                  [:element (->elem :div (map-inline config title))]\n                                  [:string content]))\n\n                              :created-at\n                              [:string (when-let [created-at (:block/created-at item)]\n                                         (date/int->local-time-2 created-at))]\n\n                              :updated-at\n                              [:string (when-let [updated-at (:block/updated-at item)]\n                                         (date/int->local-time-2 updated-at))]\n\n                              [:string (get-in item [:block/properties key])])]\n                  [:td.whitespace-nowrap {:on-mouse-down (fn [] (reset! select? false))\n                                          :on-mouse-move (fn [] (reset! select? true))\n                                          :on-mouse-up (fn []\n                                                         (when-not @select?\n                                                           (state/sidebar-add-block!\n                                                            (state/get-current-repo)\n                                                            (:db/id item)\n                                                            :block-ref)))}\n                   (when value\n                     (if (= :element (first value))\n                       (second value)\n                       (let [value (second value)]\n                         (if (coll? value)\n                           (let [vals (for [item value]\n                                        (page-cp {} {:block/name item}))]\n                             (interpose [:span \", \"] vals))\n                           (if (not (string? value))\n                             value\n                             (if-let [page (db/entity [:block/name (util/page-name-sanity-lc value)])]\n                               (page-cp {} page)\n                               (inline-text format value)))))))]))]))]]])))\n"]}