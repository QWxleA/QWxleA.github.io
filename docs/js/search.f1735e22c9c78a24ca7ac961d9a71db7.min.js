const removeMarkdown=(n,t={listUnicodeChar:!1,stripListLeaders:!0,gfm:!0,useImgAltText:!1,preserveLinks:!1})=>{let e=n||"";e=e.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm,"");try{t.stripListLeaders&&(t.listUnicodeChar?e=e.replace(/^([\s\t]*)([*\-+]|\d+\.)\s+/gm,t.listUnicodeChar+" $1"):e=e.replace(/^([\s\t]*)([*\-+]|\d+\.)\s+/gm,"$1")),t.gfm&&(e=e.replace(/\n={2,}/g,"\n").replace(/~{3}.*\n/g,"").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),t.preserveLinks&&(e=e.replace(/\[(.*?)\][[(](.*?)[\])]/g,"$1 ($2)")),e=e.replace(/<[^>]*>/g,"").replace(/^[=-]{2,}\s*$/g,"").replace(/\[\^.+?\](: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/!\[(.*?)\][[(].*?[\])]/g,t.useImgAltText?"$1":"").replace(/\[(.*?)\][[(].*?[\])]/g,"$1").replace(/^\s{0,3}>\s?/g,"").replace(/(^|\n)\s{0,3}>\s?/g,"\n\n").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm,"$1$2$3").replace(/([*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/([*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/\n{2,}/g,"\n\n")}catch(e){return console.error(e),n}return e};(async function(){const r=e=>e.toLowerCase().split(/([^a-z]|[^\x00-\x7F])+/),c=new FlexSearch.Document({cache:!0,charset:"latin:extra",optimize:!0,index:[{field:"content",tokenize:"reverse",encode:r},{field:"title",tokenize:"forward",encode:r}]}),{content:s}=await fetchData;for(const[t,e]of Object.entries(s))c.add({id:t,title:e.title,content:removeMarkdown(e.content)});const i=(c,l)=>{const e=20,d=l.split(/\s+/).filter(e=>e!==""),t=c.split(/\s+/).filter(e=>e!==""),i=e=>d.some(t=>e.toLowerCase().startsWith(t.toLowerCase())),s=t.map(i);let o=0,a=0;for(let t=0;t<Math.max(s.length-e,0);t++){const i=s.slice(t,t+e),n=i.reduce((e,t)=>e+t,0);n>=o&&(o=n,a=t)}const n=Math.max(a-e,0),r=Math.min(n+2*e,t.length),u=t.slice(n,r).map(e=>i(e)?`<span class="search-highlight">${e}</span>`:e).join(" ").replaceAll('</span> <span class="search-highlight">'," ");return`${n===0?"":"..."}${u}${r===t.length?"":"..."}`},d=({url:t,title:n,content:s,term:e})=>{const o=removeMarkdown(s),a=i(n,e),r=i(o,e);return`<button class="result-card" id="${t}">
        <h3>${a}</h3>
        <p>${r}</p>
    </button>`},a=(e,t)=>{window.location.href=BASE_URL+`${e}#:~:text=${encodeURIComponent(t)}`},l=e=>({id:e,url:e,title:s[e].title,content:s[e].content}),t=document.getElementById("search-bar"),o=document.getElementById("results-container");let e;t,t.addEventListener("keyup",t=>{if(t.key==="Enter"){const t=document.getElementsByClassName("result-card")[0];a(t.id,e)}}),t.addEventListener("input",s=>{e=s.target.value;const i=c.search(e,[{field:"content",limit:10},{field:"title",limit:5}]),t=t=>{const e=i.filter(e=>e.field===t);return e.length===0?[]:[...e[0].result]},r=new Set([...t("title"),...t("content")]),n=[...r].map(l);if(n.length===0)o.innerHTML=`<button class="result-card">
                    <h3>No results.</h3>
                    <p>Try another search term?</p>
                </button>`;else{o.innerHTML=n.map(t=>d({...t,term:e})).join("\n");const t=document.getElementsByClassName("result-card");[...t].forEach(t=>{t.onclick=()=>a(t.id,e)})}});const n=document.getElementById("search-container");function u(){n.style.display==="none"||n.style.display===""?(t.value="",o.innerHTML="",n.style.display="block",t.focus()):n.style.display="none"}function h(){n.style.display="none"}document.addEventListener("keydown",e=>{e.key==="k"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),u()),e.key==="Escape"&&(e.preventDefault(),h())})})()